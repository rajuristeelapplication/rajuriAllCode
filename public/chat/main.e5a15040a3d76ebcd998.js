(self.webpackChunksocket_chat=self.webpackChunksocket_chat||[]).push([[179],{8255:it=>{function ke(B){return Promise.resolve().then(()=>{var l=new Error("Cannot find module '"+B+"'");throw l.code="MODULE_NOT_FOUND",l})}ke.keys=()=>[],ke.resolve=ke,ke.id=8255,it.exports=ke},7716:(it,ke,B)=>{"use strict";B.d(ke,{deG:()=>Ac,tb:()=>s9,AFp:()=>i9,ip1:()=>n9,CZH:()=>Sl,hGG:()=>yT,z2F:()=>q0,sBO:()=>Lk,Sil:()=>U0,_Vd:()=>yl,EJc:()=>Vy,SBq:()=>go,qLn:()=>c2,vpe:()=>Fo,pfw:()=>ky,L6J:()=>xy,gxx:()=>tl,tBr:()=>t2,XFs:()=>Qe,OlP:()=>Dn,zs3:()=>Zn,IIB:()=>CN,ZZ4:()=>y8,aQg:()=>E0,soG:()=>O8,YKP:()=>fF,v3s:()=>Ky,h0i:()=>v3,PXZ:()=>QN,R0b:()=>Zs,FiY:()=>n2,Lbi:()=>Ly,g9A:()=>Iy,Qsj:()=>Sk,FYo:()=>_8,JOm:()=>k1,Tiy:()=>F7,q3G:()=>Wn,tp0:()=>Mi,EAV:()=>oT,Rgc:()=>M0,dDg:()=>By,DyG:()=>js,q4F:()=>y7,GfV:()=>F8,s_b:()=>b8,ifc:()=>He,eFA:()=>h9,G48:()=>GN,Gpc:()=>G,X6Q:()=>u9,_c5:()=>mT,VLi:()=>UN,c2e:()=>Py,zSh:()=>nl,wAp:()=>ft,vHH:()=>Se,EiD:()=>x4,mCW:()=>o2,qzn:()=>l3,JVY:()=>h5,pB0:()=>E4,eBb:()=>Ru,L6k:()=>Ou,LAX:()=>co,cg1:()=>s7,Tjo:()=>cv,kL8:()=>g_,yhl:()=>Hc,dqk:()=>yt,sIi:()=>z4,CqO:()=>Rf,QGY:()=>Of,F4k:()=>DC,RDi:()=>W1,AaK:()=>te,z3N:()=>ao,qOj:()=>Y5,TTD:()=>Ei,_Bn:()=>m7,xp6:()=>rg,uIk:()=>g0,Tol:()=>Wf,ekj:()=>$f,Suo:()=>sy,Xpm:()=>Ri,lG2:()=>K3,Yz7:()=>Fn,cJS:()=>An,oAB:()=>U1,Yjl:()=>Er,Y36:()=>ml,_UZ:()=>Lf,BQk:()=>n8,ynx:()=>Pf,qZA:()=>If,TgZ:()=>t8,EpF:()=>Vf,n5z:()=>Ya,Ikx:()=>i7,LFG:()=>Nn,$8M:()=>Tc,NdJ:()=>i8,CRH:()=>oy,kcU:()=>Su,O4$:()=>a4,oxw:()=>TC,ALo:()=>j7,lcZ:()=>U7,xi3:()=>XF,Hsn:()=>IC,F$t:()=>AC,Q6J:()=>e8,DdM:()=>$F,VKq:()=>B7,iGM:()=>ry,MAs:()=>J5,Jf7:()=>b5,CHM:()=>Ba,oJD:()=>Bu,LSH:()=>ju,kYT:()=>Ta,Udp:()=>r8,d8E:()=>r7,YNc:()=>mC,_uU:()=>e_,Oqu:()=>s8,hij:()=>o8,AsE:()=>a8,Gf:()=>B0});var l=B(9765),se=B(5319),z=B(7574),pe=B(6682),ae=B(8819);function ee(s){for(let o in s)if(s[o]===ee)return o;throw Error("Could not find renamed property on target object.")}function Ce(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function te(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(te).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function ie(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=ee({__forward_ref__:ee});function G(s){return s.__forward_ref__=G,s.toString=function(){return te(this())},s}function W(s){return de(s)?s():s}function de(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===G}class Se extends Error{constructor(o,c){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,c)),this.code=o}}function oe(s){return"string"==typeof s?s:null==s?"":String(s)}function ge(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():oe(s)}function Lt(s,o){const c=o?` in ${o}`:"";throw new Se("201",`No provider for ${ge(s)} found${c}`)}function Qt(s,o){null==s&&function(s,o,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Fn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function An(s){return{providers:s.providers||[],imports:s.imports||[]}}function si(s){return $t(s,Fs)||$t(s,yi)}function $t(s,o){return s.hasOwnProperty(o)?s[o]:null}function Zr(s){return s&&(s.hasOwnProperty(Te)||s.hasOwnProperty(Jn))?s[Te]:null}const Fs=ee({\u0275prov:ee}),Te=ee({\u0275inj:ee}),yi=ee({ngInjectableDef:ee}),Jn=ee({ngInjectorDef:ee});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let Xt;function Wi(s){const o=Xt;return Xt=s,o}function st(s,o,c){const d=si(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&Qe.Optional?null:void 0!==o?o:void Lt(te(s),"Injector")}function Pt(s){return{toString:s}.toString()}var Vt=(()=>((Vt=Vt||{})[Vt.OnPush=0]="OnPush",Vt[Vt.Default=1]="Default",Vt))(),He=(()=>((He=He||{})[He.Emulated=0]="Emulated",He[He.None=2]="None",He[He.ShadowDom=3]="ShadowDom",He))();const ot="undefined"!=typeof globalThis&&globalThis,W3="undefined"!=typeof window&&window,f1="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,yt=ot||"undefined"!=typeof global&&global||W3||f1,Y={},q=[],Q=ee({\u0275cmp:ee}),De=ee({\u0275dir:ee}),ce=ee({\u0275pipe:ee}),Ge=ee({\u0275mod:ee}),vt=ee({\u0275loc:ee}),Wt=ee({\u0275fac:ee}),Hn=ee({__NG_ELEMENT_ID__:ee});let Bn=0;function Ri(s){return Pt(()=>{const c={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Vt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||q,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||He.Emulated,id:"c",styles:s.styles||q,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,p=s.features,_=s.pipes;return d.id+=Bn++,d.inputs=G1(s.inputs,c),d.outputs=G1(s.outputs),p&&p.forEach(v=>v(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(xi):null,d.pipeDefs=_?()=>("function"==typeof _?_():_).map(j1):null,d})}function xi(s){return oi(s)||function(s){return s[De]||null}(s)}function j1(s){return function(s){return s[ce]||null}(s)}const Na={};function U1(s){return Pt(()=>{const o={type:s.type,bootstrap:s.bootstrap||q,declarations:s.declarations||q,imports:s.imports||q,exports:s.exports||q,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Na[s.id]=s.type),o})}function Ta(s,o){return Pt(()=>{const c=Mr(s,!0);c.declarations=o.declarations||q,c.imports=o.imports||q,c.exports=o.exports||q})}function G1(s,o){if(null==s)return Y;const c={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],p=f;Array.isArray(f)&&(p=f[1],f=f[0]),c[f]=d,o&&(o[f]=p)}return c}const K3=Ri;function Er(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function oi(s){return s[Q]||null}function Mr(s,o){const c=s[Ge]||null;if(!c&&!0===o)throw new Error(`Type ${te(s)} does not have '\u0275mod' property.`);return c}function Mn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ni(s){return Array.isArray(s)&&!0===s[1]}function uc(s){return 0!=(8&s.flags)}function T2(s){return 2==(2&s.flags)}function Aa(s){return 1==(1&s.flags)}function Qr(s){return null!==s.template}function Jr(s){return 0!=(512&s[2])}function vs(s,o){return s.hasOwnProperty(Wt)?s[Wt]:null}class V2{constructor(o,c,d){this.previousValue=o,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Ei(){return O2}function O2(s){return s.type.prototype.ngOnChanges&&(s.setInput=Bi),X6}function X6(){const s=m1(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===Y)s.previous=o;else for(let d in o)c[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Bi(s,o,c,d){const f=m1(s)||function(s,o){return s[ws]=o}(s,{previous:Y,current:null}),p=f.current||(f.current={}),_=f.previous,v=this.declaredInputs[c],E=_[v];p[v]=new V2(E&&E.currentValue,o,_===Y),s[d]=o}Ei.ngInherit=!0;const ws="__ngSimpleChanges__";function m1(s){return s[ws]||null}const R2="http://www.w3.org/2000/svg";let Bo;function W1(s){Bo=s}function g1(){return void 0!==Bo?Bo:"undefined"!=typeof document?document:void 0}function fn(s){return!!s.listen}const bs={createRenderer:(s,o)=>g1()};function sn(s){for(;Array.isArray(s);)s=s[0];return s}function Z1(s,o){return sn(o[s])}function fr(s,o){return sn(o[s.index])}function C1(s,o){return s.data[o]}function _1(s,o){return s[o]}function Ti(s,o){const c=o[s];return Mn(c)?c:c[0]}function Oa(s){return 4==(4&s[2])}function Ra(s){return 128==(128&s[2])}function Un(s,o){return null==o?null:s[o]}function z2(s){s[18]=0}function H2(s,o){s[5]+=o;let c=s,d=s[3];for(;null!==d&&(1===o&&1===c[5]||-1===o&&0===c[5]);)d[5]+=o,c=d,d=d[3]}const dt={lFrame:s4(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function B2(){return dt.bindingsEnabled}function xe(){return dt.lFrame.lView}function At(){return dt.lFrame.tView}function Ba(s){return dt.lFrame.contextLView=s,s[8]}function gn(){let s=ja();for(;null!==s&&64===s.type;)s=s.parent;return s}function ja(){return dt.lFrame.currentTNode}function ji(s,o){const c=dt.lFrame;c.currentTNode=s,c.isParent=o}function Uo(){return dt.lFrame.isParent}function j2(){dt.lFrame.isParent=!1}function Go(){return dt.isInCheckNoChangesMode}function qo(s){dt.isInCheckNoChangesMode=s}function Gn(){const s=dt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function kr(){return dt.lFrame.bindingIndex}function xr(){return dt.lFrame.bindingIndex++}function Ui(s){const o=dt.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function G2(s,o){const c=dt.lFrame;c.bindingIndex=c.bindingRootIndex=s,q2(o)}function q2(s){dt.lFrame.currentDirectiveIndex=s}function $2(s){const o=dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Ga(){return dt.lFrame.currentQueryIndex}function $o(s){dt.lFrame.currentQueryIndex=s}function Wo(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function r4(s,o,c){if(c&Qe.SkipSelf){let f=o,p=s;for(;!(f=f.parent,null!==f||c&Qe.Host||(f=Wo(p),null===f||(p=p[15],10&f.type))););if(null===f)return!1;o=f,s=p}const d=dt.lFrame=bc();return d.currentTNode=o,d.lView=s,!0}function K1(s){const o=bc(),c=s[1];dt.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function bc(){const s=dt.lFrame,o=null===s?null:s.child;return null===o?s4(s):o}function s4(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ec(){const s=dt.lFrame;return dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Mc=Ec;function Rs(){const s=Ec();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function li(){return dt.lFrame.selectedIndex}function Zo(s){dt.lFrame.selectedIndex=s}function Ln(){const s=dt.lFrame;return C1(s.tView,s.selectedIndex)}function a4(){dt.lFrame.currentNamespace=R2}function Su(){dt.lFrame.currentNamespace=null}function qa(s,o){for(let c=o.directiveStart,d=o.directiveEnd;c<d;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:E,ngAfterViewChecked:D,ngOnDestroy:T}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-c,_),v&&((s.contentHooks||(s.contentHooks=[])).push(c,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,v)),E&&(s.viewHooks||(s.viewHooks=[])).push(-c,E),D&&((s.viewHooks||(s.viewHooks=[])).push(c,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,D)),null!=T&&(s.destroyHooks||(s.destroyHooks=[])).push(c,T)}}function y1(s,o,c){c4(s,o,3,c)}function W2(s,o,c,d){(3&s[2])===c&&c4(s,o,c,d)}function Pn(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function c4(s,o,c,d){const p=null!=d?d:-1,_=o.length-1;let v=0;for(let E=void 0!==d?65535&s[18]:0;E<_;E++)if("number"==typeof o[E+1]){if(v=o[E],null!=d&&v>=d)break}else o[E]<0&&(s[18]+=65536),(v<p||-1==p)&&(ku(s,c,o,E),s[18]=(4294901760&s[18])+E+2),E++}function ku(s,o,c,d){const f=c[d]<0,p=c[d+1],v=s[f?-c[d]:c[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Yo{constructor(o,c,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Dc(s,o,c){const d=fn(s);let f=0;for(;f<c.length;){const p=c[f];if("number"==typeof p){if(0!==p)break;f++;const _=c[f++],v=c[f++],E=c[f++];d?s.setAttribute(o,v,E,_):o.setAttributeNS(_,v,E)}else{const _=p,v=c[++f];Hs(_)?d&&s.setProperty(o,_,v):d?s.setAttribute(o,_,v):o.setAttribute(_,v),f++}}return f}function xu(s){return 3===s||4===s||6===s}function Hs(s){return 64===s.charCodeAt(0)}function $a(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let d=0;d<o.length;d++){const f=o[d];"number"==typeof f?c=f:0===c||Nu(s,c,f,null,-1===c||2===c?o[++d]:null)}}return s}function Nu(s,o,c,d,f){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===c){if(null===d)return void(null!==f&&(s[p+1]=f));if(d===s[p+1])return void(s[p+2]=f)}p++,null!==d&&p++,null!==f&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,c),null!==d&&s.splice(p++,0,d),null!==f&&s.splice(p++,0,f)}function d4(s){return-1!==s}function w1(s){return 32767&s}function pr(s,o){let c=function(s){return s>>16}(s),d=o;for(;c>0;)d=d[15],c--;return d}let Z2=!0;function Jo(s){const o=Z2;return Z2=s,o}let Nc=0;function K2(s,o){const c=cn(s,o);if(-1!==c)return c;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Q1(d.data,s),Q1(o,null),Q1(d.blueprint,null));const f=$e(s,o),p=s.injectorIndex;if(d4(f)){const _=w1(f),v=pr(f,o),E=v[1].data;for(let D=0;D<8;D++)o[p+D]=v[_+D]|E[_+D]}return o[p+8]=f,p}function Q1(s,o){s.push(0,0,0,0,0,0,0,0,o)}function cn(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function $e(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,f=o;for(;null!==f;){const p=f[1],_=p.type;if(d=2===_?p.declTNode:1===_?f[6]:null,null===d)return-1;if(c++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function nn(s,o,c){!function(s,o,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(Hn)&&(d=c[Hn]),null==d&&(d=c[Hn]=Nc++);const f=255&d;o.data[s+(f>>5)]|=1<<f}(s,o,c)}function ln(s,o,c){if(c&Qe.Optional)return s;Lt(o,"NodeInjector")}function J1(s,o,c,d){if(c&Qe.Optional&&void 0===d&&(d=null),0==(c&(Qe.Self|Qe.Host))){const f=s[9],p=Wi(void 0);try{return f?f.get(o,d,c&Qe.Optional):st(o,d,c&Qe.Optional)}finally{Wi(p)}}return ln(d,o,c)}function Y2(s,o,c,d=Qe.Default,f){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Hn)?s[Hn]:void 0;return"number"==typeof o?o>=0?255&o:Za:o}(c);if("function"==typeof p){if(!r4(o,s,d))return d&Qe.Host?ln(f,c,d):J1(o,c,d,f);try{const _=p(d);if(null!=_||d&Qe.Optional)return _;Lt(c)}finally{Mc()}}else if("number"==typeof p){let _=null,v=cn(s,o),E=-1,D=d&Qe.Host?o[16][6]:null;for((-1===v||d&Qe.SkipSelf)&&(E=-1===v?$e(s,o):o[v+8],-1!==E&&Q2(d,!1)?(_=o[1],v=w1(E),o=pr(E,o)):v=-1);-1!==v;){const T=o[1];if(Ka(p,v,T.data)){const V=n5(v,o,c,_,d,D);if(V!==yn)return V}E=o[v+8],-1!==E&&Q2(d,o[1].data[v+8]===D)&&Ka(p,v,o)?(_=T,v=w1(E),o=pr(E,o)):v=-1}}}return J1(o,c,d,f)}const yn={};function Za(){return new E1(gn(),xe())}function n5(s,o,c,d,f,p){const _=o[1],v=_.data[s+8],T=b1(v,_,c,null==d?T2(v)&&Z2:d!=_&&0!=(3&v.type),f&Qe.Host&&p===v);return null!==T?ei(o,_,T,v):yn}function b1(s,o,c,d,f){const p=s.providerIndexes,_=o.data,v=1048575&p,E=s.directiveStart,T=p>>20,R=f?v+T:s.directiveEnd;for(let $=d?v:v+T;$<R;$++){const J=_[$];if($<E&&c===J||$>=E&&J.type===c)return $}if(f){const $=_[E];if($&&Qr($)&&$.type===c)return E}return null}function ei(s,o,c,d){let f=s[c];const p=o.data;if(function(s){return s instanceof Yo}(f)){const _=f;_.resolving&&function(s,o){throw new Se("200",`Circular dependency in DI detected for ${s}`)}(ge(p[c]));const v=Jo(_.canSeeViewProviders);_.resolving=!0;const E=_.injectImpl?Wi(_.injectImpl):null;r4(s,d,Qe.Default);try{f=s[c]=_.factory(void 0,p,s,d),o.firstCreatePass&&c>=d.directiveStart&&function(s,o,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:p}=o.type.prototype;if(d){const _=O2(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,_)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,f),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,p))}(c,p[c],o)}finally{null!==E&&Wi(E),Jo(v),_.resolving=!1,Mc()}}return f}function Ka(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function Q2(s,o){return!(s&Qe.Self||s&Qe.Host&&o)}class E1{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,d){return Y2(this._tNode,this._lView,o,d,c)}}function Ya(s){return Pt(()=>{const o=s.prototype.constructor,c=o[Wt]||J2(o),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const p=f[Wt]||J2(f);if(p&&p!==c)return p;f=Object.getPrototypeOf(f)}return p=>new p})}function J2(s){return de(s)?()=>{const o=J2(W(s));return o&&o()}:vs(s)}function Tc(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const p=c[f];if(xu(p))break;if(0===p)f+=2;else if("number"==typeof p)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(p===o)return c[f+1];f+=2}}}return null}(gn(),s)}const Bs="__parameters__",ts="__prop__metadata__";function Ji(s){return function(...c){if(s){const d=s(...c);for(const f in d)this[f]=d[f]}}}function ns(s,o,c){return Pt(()=>{const d=Ji(o);function f(...p){if(this instanceof f)return d.apply(this,p),this;const _=new f(...p);return v.annotation=_,v;function v(E,D,T){const V=E.hasOwnProperty(Bs)?E[Bs]:Object.defineProperty(E,Bs,{value:[]})[Bs];for(;V.length<=T;)V.push(null);return(V[T]=V[T]||[]).push(_),E}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}function X2(s,o,c,d){return Pt(()=>{const f=Ji(o);function p(..._){if(this instanceof p)return f.apply(this,_),this;const v=new p(..._);return function(D,T){const V=D.constructor,R=V.hasOwnProperty(ts)?V[ts]:Object.defineProperty(V,ts,{value:{}})[ts];R[T]=R.hasOwnProperty(T)&&R[T]||[],R[T].unshift(v),d&&d(D,T,..._)}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=s,p.annotationCls=p,p})}class Dn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Fn({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ac=new Dn("AnalyzeForEntryComponents"),js=Function;function mr(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(o===s&&(o=s.slice(0,c)),mr(d,o)):o!==s&&o.push(d)}return o}function Ms(s,o){s.forEach(c=>Array.isArray(c)?Ms(c,o):o(c))}function ta(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Ar(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Us(s,o){const c=[];for(let d=0;d<s;d++)c.push(o);return c}function ui(s,o,c){let d=e2(s,o);return d>=0?s[1|d]=c:(d=~d,function(s,o,c,d){let f=s.length;if(f==o)s.push(c,d);else if(1===f)s.push(d,s[0]),s[0]=c;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=c,s[o+1]=d}}(s,d,o,c)),d}function Rn(s,o){const c=e2(s,o);if(c>=0)return s[1|c]}function e2(s,o){return function(s,o,c){let d=0,f=s.length>>c;for(;f!==d;){const p=d+(f-d>>1),_=s[p<<c];if(o===_)return p<<c;_>o?f=p:d=p+1}return~(f<<c)}(s,o,1)}const Ht={},pn="__NG_DI_FLAG__",$n="ngTempTokenPath",di=/\n/gm,io="__source",is=ee({provide:String,useValue:ee});let rs;function mt(s){const o=rs;return rs=s,o}function Au(s,o=Qe.Default){if(void 0===rs)throw new Error("inject() must be called from an injection context");return null===rs?st(s,void 0,o):rs.get(s,o&Qe.Optional?null:void 0,o)}function Nn(s,o=Qe.Default){return(Xt||Au)(W(s),o)}function na(s){const o=[];for(let c=0;c<s.length;c++){const d=W(s[c]);if(Array.isArray(d)){if(0===d.length)throw new Error("Arguments array must have arguments.");let f,p=Qe.Default;for(let _=0;_<d.length;_++){const v=d[_],E=Iu(v);"number"==typeof E?-1===E?f=v.token:p|=E:f=v}o.push(Nn(f,p))}else o.push(Nn(d))}return o}function ia(s,o){return s[pn]=o,s.prototype[pn]=o,s}function Iu(s){return s[pn]}function ss(s,o,c,d){const f=s[$n];throw o[io]&&f.unshift(o[io]),s.message=function(s,o,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=te(o);if(Array.isArray(o))f=o.map(te).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):te(v)))}f=`{${p.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${s.replace(di,"\n  ")}`}("\n"+s.message,f,c,d),s.ngTokenPath=f,s[$n]=null,s}const t2=ia(ns("Inject",s=>({token:s})),-1),n2=ia(ns("Optional"),8),Mi=ia(ns("SkipSelf"),4);let o3,Rc;function oo(s){var o;return(null===(o=function(){if(void 0===o3&&(o3=null,yt.trustedTypes))try{o3=yt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return o3}())||void 0===o?void 0:o.createHTML(s))||s}function a3(s){var o;return(null===(o=function(){if(void 0===Rc&&(Rc=null,yt.trustedTypes))try{Rc=yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Rc}())||void 0===o?void 0:o.createHTML(s))||s}class sa{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ch extends sa{getTypeName(){return"HTML"}}class _h extends sa{getTypeName(){return"Style"}}class zc extends sa{getTypeName(){return"Script"}}class Fh extends sa{getTypeName(){return"URL"}}class yh extends sa{getTypeName(){return"ResourceURL"}}function ao(s){return s instanceof sa?s.changingThisBreaksApplicationSecurity:s}function l3(s,o){const c=Hc(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}function Hc(s){return s instanceof sa&&s.getTypeName()||null}function h5(s){return new Ch(s)}function Ou(s){return new _h(s)}function Ru(s){return new zc(s)}function co(s){return new Fh(s)}function E4(s){return new yh(s)}class f5{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(oo(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class vh{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(o){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=oo(o),c;const d=this.inertDocument.createElement("body");return d.innerHTML=oo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const c=o.attributes;for(let f=c.length-1;0<f;f--){const _=c.item(f).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const p5=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,jc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function o2(s){return(s=String(s)).match(p5)||s.match(jc)?s:"unsafe:"+s}function Ss(s){const o={};for(const c of s.split(","))o[c]=!0;return o}function oa(...s){const o={};for(const c of s)for(const d in c)c.hasOwnProperty(d)&&(o[d]=!0);return o}const u3=Ss("area,br,col,hr,img,wbr"),g5=Ss("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),d3=Ss("rp,rt"),zu=oa(u3,oa(g5,Ss("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),oa(d3,Ss("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),oa(d3,g5)),M4=Ss("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),os=Ss("srcset"),S4=oa(M4,os,Ss("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ss("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bh=Ss("script,style,template");class D4{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let c=o.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(o){const c=o.nodeName.toLowerCase();if(!zu.hasOwnProperty(c))return this.sanitizedSomething=!0,!bh.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=o.attributes;for(let f=0;f<d.length;f++){const p=d.item(f),_=p.name,v=_.toLowerCase();if(!S4.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let E=p.value;M4[v]&&(E=o2(E)),os[v]&&(s=E,E=(s=String(s)).split(",").map(o=>o2(o.trim())).join(", ")),this.buf.push(" ",_,'="',Gc(E),'"')}var s;return this.buf.push(">"),!0}endElement(o){const c=o.nodeName.toLowerCase();zu.hasOwnProperty(c)&&!u3.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(o){this.buf.push(Gc(o))}checkClobberedElement(o,c){if(c&&(o.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return c}}const Eh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mh=/([^\#-~ |!])/g;function Gc(s){return s.replace(/&/g,"&amp;").replace(Eh,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Mh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let k4;function x4(s,o){let c=null;try{k4=k4||function(s){const o=new vh(s);return function(){try{return!!(new window.DOMParser).parseFromString(oo(""),"text/html")}catch(s){return!1}}()?new f5(o):o}(s);let d=o?String(o):"";c=k4.getInertBodyElement(d);let f=5,p=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=p,p=c.innerHTML,c=k4.getInertBodyElement(d)}while(d!==p);return oo((new D4).sanitizeChildren(N4(c)||c))}finally{if(c){const d=N4(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function N4(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Wn=(()=>((Wn=Wn||{})[Wn.NONE=0]="NONE",Wn[Wn.HTML=1]="HTML",Wn[Wn.STYLE=2]="STYLE",Wn[Wn.SCRIPT=3]="SCRIPT",Wn[Wn.URL=4]="URL",Wn[Wn.RESOURCE_URL=5]="RESOURCE_URL",Wn))();function Bu(s){const o=a2();return o?a3(o.sanitize(Wn.HTML,s)||""):l3(s,"HTML")?a3(ao(s)):x4(g1(),oe(s))}function ju(s){const o=a2();return o?o.sanitize(Wn.URL,s)||"":l3(s,"URL")?ao(s):o2(oe(s))}function a2(){const s=xe();return s&&s[12]}const aa="__ngContext__";function Gi(s,o){s[aa]=o}function Wu(s){const o=function(s){return s[aa]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Gs(s){return s.ngOriginalError}function xh(s,...o){s.error(...o)}class c2{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),d=this._findContext(o),f=(s=o)&&s.ngErrorLogger||xh;var s;f(this._console,"ERROR",o),c&&f(this._console,"ORIGINAL ERROR",c),d&&f(this._console,"ERROR CONTEXT",d)}_findContext(o){return o?o.ngDebugContext||this._findContext(Gs(o)):null}_findOriginalError(o){let c=o&&Gs(o);for(;c&&Gs(c);)c=Gs(c);return c||null}}const Yc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(yt))();function b5(s){return s.ownerDocument.defaultView}function qs(s){return s instanceof Function?s():s}var k1=(()=>((k1=k1||{})[k1.Important=1]="Important",k1[k1.DashCase=2]="DashCase",k1))();function y(s,o){return undefined(s,o)}function w(s){const o=s[3];return Ni(o)?o[3]:o}function Z(s){return Oe(s[13])}function ue(s){return Oe(s[4])}function Oe(s){for(;null!==s&&!Ni(s);)s=s[4];return s}function qe(s,o,c,d,f){if(null!=d){let p,_=!1;Ni(d)?p=d:Mn(d)&&(_=!0,d=d[0]);const v=sn(d);0===s&&null!==c?null==f?Km(o,c,v):F3(o,c,v,f||null,!0):1===s&&null!==c?F3(o,c,v,f||null,!0):2===s?function(s,o,c){const d=k5(s,o);d&&function(s,o,c,d){fn(s)?s.removeChild(o,c,d):o.removeChild(c)}(s,d,o,c)}(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,c,d,f){const p=c[7];p!==sn(c)&&qe(o,s,d,p,f);for(let v=10;v<c.length;v++){const E=c[v];V4(E[1],E,s,o,d,p)}}(o,s,p,c,f)}}function x1(s,o,c){return fn(s)?s.createElement(o,c):null===c?s.createElement(o):s.createElementNS(c,o)}function L4(s,o){const c=s[9],d=c.indexOf(o),f=o[3];1024&o[2]&&(o[2]&=-1025,H2(f,-1)),c.splice(d,1)}function _3(s,o){if(s.length<=10)return;const c=10+o,d=s[c];if(d){const f=d[17];null!==f&&f!==s&&L4(f,d),o>0&&(s[c-1][4]=d[4]);const p=Ar(s,10+o);!function(s,o){V4(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const _=p[19];null!==_&&_.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function s0(s,o){if(!(256&o[2])){const c=o[11];fn(c)&&c.destroyNode&&V4(s,o,c,3,null,null),function(s){let o=s[13];if(!o)return u2(s[1],s);for(;o;){let c=null;if(Mn(o))c=o[13];else{const d=o[10];d&&(c=d)}if(!c){for(;o&&!o[4]&&o!==s;)Mn(o)&&u2(o[1],o),o=o[3];null===o&&(o=s),Mn(o)&&u2(o[1],o),c=o&&o[4]}o=c}}(o)}}function u2(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const f=o[c[d]];if(!(f instanceof Yo)){const p=c[d+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=f[p[_]],E=p[_+1];try{E.call(v)}finally{}}else try{p.call(f)}finally{}}}}(s,o),function(s,o){const c=s.cleanup,d=o[7];let f=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const _=c[p+1],v="function"==typeof _?_(o):sn(o[_]),E=d[f=c[p+2]],D=c[p+3];"boolean"==typeof D?v.removeEventListener(c[p],E,D):D>=0?d[f=D]():d[f=-D].unsubscribe(),p+=2}else{const _=d[f=c[p+1]];c[p].call(_)}if(null!==d){for(let p=f+1;p<d.length;p++)d[p]();o[7]=null}}(s,o),1===o[1].type&&fn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&Ni(o[3])){c!==o[3]&&L4(c,o);const d=o[19];null!==d&&d.detachView(s)}}}function Wm(s,o,c){return function(s,o,c){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return c[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===He.None||f===He.Emulated)return null}return fr(d,c)}(s,o.parent,c)}function F3(s,o,c,d,f){fn(s)?s.insertBefore(o,c,d,f):o.insertBefore(c,d,f)}function Km(s,o,c){fn(s)?s.appendChild(o,c):o.appendChild(c)}function Ym(s,o,c,d,f){null!==d?F3(s,o,c,d,f):Km(s,o,c)}function k5(s,o){return fn(s)?s.parentNode(o):o.parentNode}function N5(s,o,c){return P4(s,o,c)}let P4=function(s,o,c){return 40&s.type?fr(s,c):null};function a0(s,o,c,d){const f=Wm(s,d,o),p=o[11],v=N5(d.parent||o[6],d,o);if(null!=f)if(Array.isArray(c))for(let E=0;E<c.length;E++)Ym(p,f,c[E],v,!1);else Ym(p,f,c,v,!1)}function A5(s,o){if(null!==o){const c=o.type;if(3&c)return fr(o,s);if(4&c)return Ph(-1,s[o.index]);if(8&c){const d=o.child;if(null!==d)return A5(s,d);{const f=s[o.index];return Ni(f)?Ph(-1,f):sn(f)}}if(32&c)return y(o,s)()||sn(s[o.index]);{const d=Lh(s,o);return null!==d?Array.isArray(d)?d[0]:A5(w(s[16]),d):A5(s,o.next)}}return null}function Lh(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ph(s,o){const c=10+s+1;if(c<o.length){const d=o[c],f=d[1].firstChild;if(null!==f)return A5(d,f)}return o[7]}function I5(s,o,c,d,f,p,_){for(;null!=c;){const v=d[c.index],E=c.type;if(_&&0===o&&(v&&Gi(sn(v),d),c.flags|=4),64!=(64&c.flags))if(8&E)I5(s,o,c.child,d,f,p,!1),qe(o,s,f,v,p);else if(32&E){const D=y(c,d);let T;for(;T=D();)qe(o,s,f,T,p);qe(o,s,f,v,p)}else 16&E?y3(s,o,d,c,f,p):qe(o,s,f,v,p);c=_?c.projectionNext:c.next}}function V4(s,o,c,d,f,p){I5(c,d,s.firstChild,o,f,p,!1)}function y3(s,o,c,d,f,p){const _=c[16],E=_[6].projection[d.projection];if(Array.isArray(E))for(let D=0;D<E.length;D++)qe(o,s,f,E[D],p);else I5(s,o,E,_[3],f,p,!0)}function Xm(s,o,c){fn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function Oh(s,o,c){fn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function L5(s,o,c){let d=s.length;for(;;){const f=s.indexOf(o,c);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const p=o.length;if(f+p===d||s.charCodeAt(f+p)<=32)return f}c=f+1}}const eg="ng-template";function mM(s,o,c){let d=0;for(;d<s.length;){let f=s[d++];if(c&&"class"===f){if(f=s[d],-1!==L5(f.toLowerCase(),o,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function Rh(s){return 4===s.type&&s.value!==eg}function gM(s,o,c){return o===(4!==s.type||c?s.value:eg)}function CM(s,o,c){let d=4;const f=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(xu(s[o]))return o;return s.length}(f);let _=!1;for(let v=0;v<o.length;v++){const E=o[v];if("number"!=typeof E){if(!_)if(4&d){if(d=2|1&d,""!==E&&!gM(s,E,c)||""===E&&1===o.length){if(lo(d))return!1;_=!0}}else{const D=8&d?E:o[++v];if(8&d&&null!==s.attrs){if(!mM(s.attrs,D,c)){if(lo(d))return!1;_=!0}continue}const V=zh(8&d?"class":E,f,Rh(s),c);if(-1===V){if(lo(d))return!1;_=!0;continue}if(""!==D){let R;R=V>p?"":f[V+1].toLowerCase();const $=8&d?R:null;if($&&-1!==L5($,D,0)||2&d&&D!==R){if(lo(d))return!1;_=!0}}}}else{if(!_&&!lo(d)&&!lo(E))return!1;if(_&&lo(E))continue;_=!1,d=E|1&d}}return lo(d)||_}function lo(s){return 0==(1&s)}function zh(s,o,c,d){if(null===o)return-1;let f=0;if(d||!c){let p=!1;for(;f<o.length;){const _=o[f];if(_===s)return f;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++f];for(;"string"==typeof v;)v=o[++f];continue}if(4===_)break;if(0===_){f+=4;continue}}f+=p?1:2}return-1}return function(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===o)return c;c++}return-1}(o,s)}function tg(s,o,c=!1){for(let d=0;d<o.length;d++)if(CM(s,o[d],c))return!0;return!1}function _z(s,o){e:for(let c=0;c<o.length;c++){const d=o[c];if(s.length===d.length){for(let f=0;f<s.length;f++)if(s[f]!==d[f])continue e;return!0}}return!1}function ig(s,o){return s?":not("+o.trim()+")":o}function yM(s){let o=s[0],c=1,d=2,f="",p=!1;for(;c<s.length;){let _=s[c];if("string"==typeof _)if(2&d){const v=s[++c];f+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&d?f+="."+_:4&d&&(f+=" "+_);else""!==f&&!lo(_)&&(o+=ig(p,f),f=""),d=_,p=p||!lo(d);c++}return""!==f&&(o+=ig(p,f)),o}const St={};function rg(s){sg(At(),xe(),li()+s,Go())}function sg(s,o,c,d){if(!d)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&y1(o,p,c)}else{const p=s.preOrderHooks;null!==p&&W2(o,p,0,c)}Zo(c)}function P5(s,o){return s<<17|o<<2}function uo(s){return s>>17&32767}function Hh(s){return 2|s}function ua(s){return(131068&s)>>2}function Bh(s,o){return-131069&s|o<<2}function Uh(s){return 1|s}function B5(s,o){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const f=c[d],p=c[d+1];if(-1!==p){const _=s.data[p];$o(f),_.contentQueries(2,o[p],p)}}}function Ds(s,o,c,d,f,p,_,v,E,D){const T=o.blueprint.slice();return T[0]=f,T[2]=140|d,z2(T),T[3]=T[15]=s,T[8]=c,T[10]=_||s&&s[10],T[11]=v||s&&s[11],T[12]=E||s&&s[12]||null,T[9]=D||s&&s[9]||null,T[6]=p,T[16]=2==o.type?s[16]:T,T}function O4(s,o,c,d,f){let p=s.data[o];if(null===p)p=function(s,o,c,d,f){const p=ja(),_=Uo(),E=s.data[o]=function(s,o,c,d,f,p){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,c,o,d,f);return null===s.firstChild&&(s.firstChild=E),null!==p&&(_?null==p.child&&null!==E.parent&&(p.child=E):null===p.next&&(p.next=E)),E}(s,o,c,d,f),dt.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=d,p.attrs=f;const _=function(){const s=dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ji(p,!0),p}function R4(s,o,c,d){if(0===c)return-1;const f=o.length;for(let p=0;p<c;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return f}function c0(s,o,c){K1(o);try{const d=s.viewQuery;null!==d&&cf(1,d,c);const f=s.template;null!==f&&gg(s,o,f,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&B5(s,o),s.staticViewQueries&&cf(2,s.viewQuery,c);const p=s.components;null!==p&&function(s,o){for(let c=0;c<o.length;c++)QM(s,o[c])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Rs()}}function Xc(s,o,c,d){const f=o[2];if(256==(256&f))return;K1(o);const p=Go();try{z2(o),function(s){dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&gg(s,o,c,2,d);const _=3==(3&f);if(!p)if(_){const D=s.preOrderCheckHooks;null!==D&&y1(o,D,null)}else{const D=s.preOrderHooks;null!==D&&W2(o,D,0,null),Pn(o,0)}if(function(s){for(let o=Z(s);null!==o;o=ue(o)){if(!o[2])continue;const c=o[9];for(let d=0;d<c.length;d++){const f=c[d],p=f[3];0==(1024&f[2])&&H2(p,1),f[2]|=1024}}}(o),function(s){for(let o=Z(s);null!==o;o=ue(o))for(let c=10;c<o.length;c++){const d=o[c],f=d[1];Ra(d)&&Xc(f,d,f.template,d[8])}}(o),null!==s.contentQueries&&B5(s,o),!p)if(_){const D=s.contentCheckHooks;null!==D&&y1(o,D)}else{const D=s.contentHooks;null!==D&&W2(o,D,1),Pn(o,1)}!function(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)Zo(~f);else{const p=f,_=c[++d],v=c[++d];G2(_,p),v(2,o[p])}}}finally{Zo(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let c=0;c<o.length;c++)YM(s,o[c])}(o,v);const E=s.viewQuery;if(null!==E&&cf(2,E,d),!p)if(_){const D=s.viewCheckHooks;null!==D&&y1(o,D)}else{const D=s.viewHooks;null!==D&&W2(o,D,2),Pn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,H2(o[3],-1))}finally{Rs()}}function mg(s,o,c,d){const f=o[10],p=!Go(),_=Oa(o);try{p&&!_&&f.begin&&f.begin(),_&&c0(s,o,d),Xc(s,o,c,d)}finally{p&&!_&&f.end&&f.end()}}function gg(s,o,c,d,f){const p=li(),_=2&d;try{Zo(-1),_&&o.length>20&&sg(s,o,20,Go()),c(d,f)}finally{Zo(p)}}function Yh(s,o,c){if(uc(o)){const f=o.directiveEnd;for(let p=o.directiveStart;p<f;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,c[p],p)}}}function Qh(s,o,c){!B2()||(function(s,o,c,d){const f=c.directiveStart,p=c.directiveEnd;s.firstCreatePass||K2(c,o),Gi(d,o);const _=c.initialInputs;for(let v=f;v<p;v++){const E=s.data[v],D=Qr(E);D&&$M(o,c,E);const T=ei(o,s,v,c);Gi(T,o),null!==_&&Sg(0,v-f,T,E,0,_),D&&(Ti(c.index,o)[8]=T)}}(s,o,c,fr(c,o)),128==(128&c.flags)&&function(s,o,c){const d=c.directiveStart,f=c.directiveEnd,_=c.index,v=dt.lFrame.currentDirectiveIndex;try{Zo(_);for(let E=d;E<f;E++){const D=s.data[E],T=o[E];q2(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&bg(D,T)}}finally{Zo(-1),q2(v)}}(s,o,c))}function j5(s,o,c=fr){const d=o.localNames;if(null!==d){let f=o.index+1;for(let p=0;p<d.length;p+=2){const _=d[p+1],v=-1===_?c(o,s):s[_];s[f++]=v}}}function Cg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=l0(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function l0(s,o,c,d,f,p,_,v,E,D){const T=20+d,V=T+f,R=function(s,o){const c=[];for(let d=0;d<o;d++)c.push(d<s?null:St);return c}(T,V),$="function"==typeof D?D():D;return R[1]={type:s,blueprint:R,template:c,queries:null,viewQuery:v,declTNode:o,data:R.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:E,consts:$,incompleteFirstPass:!1}}function Fg(s,o,c,d){const f=Ng(o);null===c?f.push(d):(f.push(c),s.firstCreatePass&&lf(s).push(d,f.length-1))}function u0(s,o,c){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(o,f):c[d]=[o,f]}return c}function $s(s,o,c,d,f,p,_,v){const E=fr(o,c);let T,D=o.inputs;!v&&null!=D&&(T=D[d])?(Ag(s,c,T,d,f),T2(o)&&function(s,o){const c=Ti(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(d=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=_?_(f,o.value||"",d):f,fn(p)?p.setProperty(E,d,f):Hs(d)||(E.setProperty?E.setProperty(d,f):E[d]=f))}function U5(s,o,c,d){let f=!1;if(B2()){const p=function(s,o,c){const d=s.directiveRegistry;let f=null;if(d)for(let p=0;p<d.length;p++){const _=d[p];tg(c,_.selectors,!1)&&(f||(f=[]),nn(K2(c,o),s,_.type),Qr(_)?(Xh(s,c),f.unshift(_)):f.push(_))}return f}(s,o,c),_=null===d?null:{"":-1};if(null!==p){f=!0,Mg(c,s.data.length,p.length);for(let T=0;T<p.length;T++){const V=p[T];V.providersResolver&&V.providersResolver(V)}let v=!1,E=!1,D=R4(s,o,p.length,null);for(let T=0;T<p.length;T++){const V=p[T];c.mergedAttrs=$a(c.mergedAttrs,V.hostAttrs),ef(s,c,o,D,V),Eg(D,V,_),null!==V.contentQueries&&(c.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(c.flags|=128);const R=V.type.prototype;!v&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),v=!0),!E&&(R.ngOnChanges||R.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),E=!0),D++}!function(s,o){const d=o.directiveEnd,f=s.data,p=o.attrs,_=[];let v=null,E=null;for(let D=o.directiveStart;D<d;D++){const T=f[D],V=T.inputs,R=null===p||Rh(o)?null:WM(V,p);_.push(R),v=u0(V,D,v),E=u0(T.outputs,D,E)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=E}(s,c)}_&&function(s,o,c){if(o){const d=s.localNames=[];for(let f=0;f<o.length;f+=2){const p=c[o[f+1]];if(null==p)throw new Se("301",`Export of name '${o[f+1]}' not found!`);d.push(o[f],p)}}}(c,d,_)}return c.mergedAttrs=$a(c.mergedAttrs,c.attrs),f}function yg(s,o,c,d,f,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const E=~o.index;(function(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(v)!=E&&v.push(E),v.push(d,f,_)}}function bg(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Xh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Eg(s,o,c){if(c){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)c[o.exportAs[d]]=s;Qr(o)&&(c[""]=s)}}function Mg(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function ef(s,o,c,d,f){s.data[d]=f;const p=f.factory||(f.factory=vs(f.type)),_=new Yo(p,Qr(f),null);s.blueprint[d]=_,c[d]=_,yg(s,o,0,d,R4(s,c,f.hostVars,St),f)}function $M(s,o,c){const d=fr(o,s),f=Cg(c),p=s[10],_=q5(s,Ds(s,f,null,c.onPush?64:16,d,o,p,p.createRenderer(d,c),null,null));s[o.index]=_}function ho(s,o,c,d,f,p){const _=fr(s,o);!function(s,o,c,d,f,p,_){if(null==p)fn(s)?s.removeAttribute(o,f,c):o.removeAttribute(f);else{const v=null==_?oe(p):_(p,d||"",f);fn(s)?s.setAttribute(o,f,v,c):c?o.setAttributeNS(c,f,v):o.setAttribute(f,v)}}(o[11],_,p,s.value,c,d,f)}function Sg(s,o,c,d,f,p){const _=p[o];if(null!==_){const v=d.setInput;for(let E=0;E<_.length;){const D=_[E++],T=_[E++],V=_[E++];null!==v?d.setInput(c,V,D,T):c[T]=V}}}function WM(s,o){let c=null,d=0;for(;d<o.length;){const f=o[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,s[f],o[d+1])),d+=2}else d+=2;else d+=4}return c}function Dg(s,o,c,d){return new Array(s,!0,!1,o,null,0,d,c,null,null)}function YM(s,o){const c=Ti(o,s);if(Ra(c)){const d=c[1];80&c[2]?Xc(d,c,d.template,c[8]):c[5]>0&&G5(c)}}function G5(s){for(let d=Z(s);null!==d;d=ue(d))for(let f=10;f<d.length;f++){const p=d[f];if(1024&p[2]){const _=p[1];Xc(_,p,_.template,p[8])}else p[5]>0&&G5(p)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const f=Ti(c[d],s);Ra(f)&&f[5]>0&&G5(f)}}function QM(s,o){const c=Ti(o,s),d=c[1];(function(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(d,c),c0(d,c,c[8])}function q5(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function rf(s){for(;s;){s[2]|=64;const o=w(s);if(Jr(s)&&!o)return s;s=o}return null}function af(s,o,c){const d=o[10];d.begin&&d.begin();try{Xc(s,o,s.template,c)}catch(f){throw uf(o,f),f}finally{d.end&&d.end()}}function xg(s){!function(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],d=Wu(c),f=d[1];mg(f,d,f.template,c)}}(s[8])}function cf(s,o,c){$o(0),o(s,c)}const nS=(()=>Promise.resolve(null))();function Ng(s){return s[7]||(s[7]=[])}function lf(s){return s.cleanup||(s.cleanup=[])}function uf(s,o){const c=s[9],d=c?c.get(c2,null):null;d&&d.handleError(o)}function Ag(s,o,c,d,f){for(let p=0;p<c.length;){const _=c[p++],v=c[p++],E=o[_],D=s.data[_];null!==D.setInput?D.setInput(E,f,d,v):E[v]=f}}function ha(s,o,c){const d=Z1(o,s);!function(s,o,c){fn(s)?s.setValue(o,c):o.textContent=c}(s[11],d,c)}function $5(s,o,c){let d=c?s.styles:null,f=c?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?f=ie(f,v):2==p&&(d=ie(d,v+": "+o[++_]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=f:s.classesWithoutHost=f}const tl=new Dn("INJECTOR",-1);class Lg{get(o,c=Ht){if(c===Ht){const d=new Error(`NullInjectorError: No provider for ${te(o)}!`);throw d.name="NullInjectorError",d}return c}}const nl=new Dn("Set Injector scope."),d0={},Pg={};let df;function hf(){return void 0===df&&(df=new Lg),df}function Vg(s,o=null,c=null,d){return new Og(s,c,o||hf(),d)}class Og{constructor(o,c,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];c&&Ms(c,v=>this.processProvider(v,o,c)),Ms([o],v=>this.processInjectorType(v,[],p)),this.records.set(tl,il(void 0,this));const _=this.records.get(nl);this.scope=null!=_?_.value:null,this.source=f||("object"==typeof o?null:te(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=Ht,d=Qe.Default){this.assertNotDestroyed();const f=mt(this),p=Wi(void 0);try{if(!(d&Qe.SkipSelf)){let v=this.records.get(o);if(void 0===v){const E=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Dn)&&si(o);v=E&&this.injectableDefInScope(E)?il(ff(o),d0):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(d&Qe.Self?hf():this.parent).get(o,c=d&Qe.Optional&&c===Ht?null:c)}catch(_){if("NullInjectorError"===_.name){if((_[$n]=_[$n]||[]).unshift(te(o)),f)throw _;return ss(_,o,"R3InjectorError",this.source)}throw _}finally{Wi(p),mt(f)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((d,f)=>o.push(te(f))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,c,d){if(!(o=W(o)))return!1;let f=Zr(o);const p=null==f&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==d.indexOf(_);if(void 0!==p&&(f=Zr(p)),null==f)return!1;if(null!=f.imports&&!v){let T;d.push(_);try{Ms(f.imports,V=>{this.processInjectorType(V,c,d)&&(void 0===T&&(T=[]),T.push(V))})}finally{}if(void 0!==T)for(let V=0;V<T.length;V++){const{ngModule:R,providers:$}=T[V];Ms($,J=>this.processProvider(J,R,$||q))}}this.injectorDefTypes.add(_);const E=vs(_)||(()=>new _);this.records.set(_,il(E,d0));const D=f.providers;if(null!=D&&!v){const T=o;Ms(D,V=>this.processProvider(V,T,D))}return void 0!==p&&void 0!==o.providers}processProvider(o,c,d){let f=rl(o=W(o))?o:W(o&&o.provide);const p=zg(s=o)?il(void 0,s.useValue):il(W5(s),d0);var s;if(rl(o)||!0!==o.multi)this.records.get(f);else{let _=this.records.get(f);_||(_=il(void 0,d0,!0),_.factory=()=>na(_.multi),this.records.set(f,_)),f=o,_.multi.push(o)}this.records.set(f,p)}hydrate(o,c){return c.value===d0&&(c.value=Pg,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(s=c.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const c=W(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function ff(s){const o=si(s),c=null!==o?o.factory:vs(s);if(null!==c)return c;if(s instanceof Dn)throw new Error(`Token ${te(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const d=Us(o,"?");throw new Error(`Can't resolve all parameters for ${te(s)}: (${d.join(", ")}).`)}const c=function(s){const o=s&&(s[Fs]||s[yi]);if(o){const c=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function W5(s,o,c){let d;if(rl(s)){const f=W(s);return vs(f)||ff(f)}if(zg(s))d=()=>W(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...na(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))d=()=>Nn(W(s.useExisting));else{const f=W(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return vs(f)||ff(f);d=()=>new f(...na(s.deps))}return d}function il(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function zg(s){return null!==s&&"object"==typeof s&&is in s}function rl(s){return"function"==typeof s}const pf=function(s,o,c){return function(s,o=null,c=null,d){const f=Vg(s,o,c,d);return f._resolveInjectorDefTypes(),f}({name:c},o,s,c)};let Zn=(()=>{class s{static create(c,d){return Array.isArray(c)?pf(c,d,""):pf(c.providers,c.parent,c.name||"")}}return s.THROW_IF_NOT_FOUND=Ht,s.NULL=new Lg,s.\u0275prov=Fn({token:s,providedIn:"any",factory:()=>Nn(tl)}),s.__NG_ELEMENT_ID__=-1,s})();function vS(s,o){qa(Wu(s)[1],gn())}function Y5(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;o;){let f;if(Qr(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");f=o.\u0275dir}if(f){if(c){d.push(f);const _=s;_.inputs=yf(s.inputs),_.declaredInputs=yf(s.declaredInputs),_.outputs=yf(s.outputs);const v=f.hostBindings;v&&sC(s,v);const E=f.viewQuery,D=f.contentQueries;if(E&&ES(s,E),D&&MS(s,D),Ce(s.inputs,f.inputs),Ce(s.declaredInputs,f.declaredInputs),Ce(s.outputs,f.outputs),Qr(f)&&f.data.animation){const T=s.data;T.animation=(T.animation||[]).concat(f.data.animation)}}const p=f.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===Y5&&(c=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,c=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=o+=f.hostVars,f.hostAttrs=$a(f.hostAttrs,c=$a(c,f.hostAttrs))}}(d)}function yf(s){return s===Y?{}:s===q?[]:s}function ES(s,o){const c=s.viewQuery;s.viewQuery=c?(d,f)=>{o(d,f),c(d,f)}:o}function MS(s,o){const c=s.contentQueries;s.contentQueries=c?(d,f,p)=>{o(d,f,p),c(d,f,p)}:o}function sC(s,o){const c=s.hostBindings;s.hostBindings=c?(d,f)=>{o(d,f),c(d,f)}:o}let p0=null;function sl(){if(!p0){const s=yt.Symbol;if(s&&s.iterator)p0=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const d=o[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(p0=d)}}}return p0}class fo{constructor(o){this.wrapped=o}static wrap(o){return new fo(o)}static unwrap(o){return fo.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof fo}}function z4(s){return!!vf(s)&&(Array.isArray(s)||!(s instanceof Map)&&sl()in s)}function vf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function f2(s,o,c){return s[o]=c}function Lr(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function H4(s,o,c,d){const f=Lr(s,o,c);return Lr(s,o+1,d)||f}function g0(s,o,c,d){const f=xe();return Lr(f,xr(),o)&&(At(),ho(Ln(),f,s,o,c,d)),g0}function mC(s,o,c,d,f,p,_,v){const E=xe(),D=At(),T=s+20,V=D.firstCreatePass?function(s,o,c,d,f,p,_,v,E){const D=o.consts,T=O4(o,s,4,_||null,Un(D,v));U5(o,c,T,Un(D,E)),qa(o,T);const V=T.tViews=l0(2,T,d,f,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,T),V.queries=o.queries.embeddedTView(T)),T}(T,D,E,o,c,d,f,p,_):D.data[T];ji(V,!1);const R=E[11].createComment("");a0(D,E,R,V),Gi(R,E),q5(E,E[T]=Dg(R,E,R,V)),Aa(V)&&Qh(D,E,V),null!=_&&j5(E,V,v)}function J5(s){return _1(dt.lFrame.contextLView,20+s)}function ml(s,o=Qe.Default){const c=xe();return null===c?Nn(s,o):Y2(gn(),c,W(s),o)}function e8(s,o,c){const d=xe();return Lr(d,xr(),o)&&$s(At(),Ln(),d,s,o,d[11],c,!1),e8}function Af(s,o,c,d,f){const _=f?"class":"style";Ag(s,c,o.inputs[_],_,d)}function t8(s,o,c,d){const f=xe(),p=At(),_=20+s,v=f[11],E=f[_]=x1(v,o,dt.lFrame.currentNamespace),D=p.firstCreatePass?function(s,o,c,d,f,p,_){const v=o.consts,D=O4(o,s,2,f,Un(v,p));return U5(o,c,D,Un(v,_)),null!==D.attrs&&$5(D,D.attrs,!1),null!==D.mergedAttrs&&$5(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,p,f,0,o,c,d):p.data[_];ji(D,!0);const T=D.mergedAttrs;null!==T&&Dc(v,E,T);const V=D.classes;null!==V&&Oh(v,E,V);const R=D.styles;null!==R&&Xm(v,E,R),64!=(64&D.flags)&&a0(p,f,E,D),0===dt.lFrame.elementDepthCount&&Gi(E,f),dt.lFrame.elementDepthCount++,Aa(D)&&(Qh(p,f,D),Yh(p,D,f)),null!==d&&j5(f,D)}function If(){let s=gn();Uo()?j2():(s=s.parent,ji(s,!1));const o=s;dt.lFrame.elementDepthCount--;const c=At();c.firstCreatePass&&(qa(c,s),uc(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Af(c,o,xe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Af(c,o,xe(),o.stylesWithoutHost,!1)}function Lf(s,o,c,d){t8(s,o,c,d),If()}function Pf(s,o,c){const d=xe(),f=At(),p=s+20,_=f.firstCreatePass?function(s,o,c,d,f){const p=o.consts,_=Un(p,d),v=O4(o,s,8,"ng-container",_);return null!==_&&$5(v,_,!0),U5(o,c,v,Un(p,f)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,f,d,o,c):f.data[p];ji(_,!0);const v=d[p]=d[11].createComment("");a0(f,d,v,_),Gi(v,d),Aa(_)&&(Qh(f,d,_),Yh(f,_,d)),null!=c&&j5(d,_)}function n8(){let s=gn();const o=At();Uo()?j2():(s=s.parent,ji(s,!1)),o.firstCreatePass&&(qa(o,s),uc(s)&&o.queries.elementEnd(s))}function Vf(){return xe()}function Of(s){return!!s&&"function"==typeof s.then}function DC(s){return!!s&&"function"==typeof s.subscribe}const Rf=DC;function i8(s,o,c,d){const f=xe(),p=At(),_=gn();return function(s,o,c,d,f,p,_,v){const E=Aa(d),T=s.firstCreatePass&&lf(s),V=o[8],R=Ng(o);let $=!0;if(3&d.type||v){const re=fr(d,o),Ve=v?v(re):re,Me=R.length,rt=v?Ct=>v(sn(Ct[d.index])):d.index;if(fn(c)){let Ct=null;if(!v&&E&&(Ct=function(s,o,c,d){const f=s.cleanup;if(null!=f)for(let p=0;p<f.length-1;p+=2){const _=f[p];if(_===c&&f[p+1]===d){const v=o[7],E=f[p+2];return v.length>E?v[E]:null}"string"==typeof _&&(p+=2)}return null}(s,o,f,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=p,Ct.__ngLastListenerFn__=p,$=!1;else{p=zf(d,o,V,p,!1);const Zt=c.listen(Ve,f,p);R.push(p,Zt),T&&T.push(f,rt,Me,Me+1)}}else p=zf(d,o,V,p,!0),Ve.addEventListener(f,p,_),R.push(p),T&&T.push(f,rt,Me,_)}else p=zf(d,o,V,p,!1);const J=d.outputs;let fe;if($&&null!==J&&(fe=J[f])){const re=fe.length;if(re)for(let Ve=0;Ve<re;Ve+=2){const Ii=o[fe[Ve]][fe[Ve+1]].subscribe(p),L1=R.length;R.push(p,Ii),T&&T.push(f,d.index,L1,-(L1+1))}}}(p,f,f[11],_,s,o,!!c,d),i8}function NC(s,o,c,d){try{return!1!==c(d)}catch(f){return uf(s,f),!1}}function zf(s,o,c,d,f){return function p(_){if(_===Function)return d;const v=2&s.flags?Ti(s.index,o):o;0==(32&o[2])&&rf(v);let E=NC(o,0,d,_),D=p.__ngNextListenerFn__;for(;D;)E=NC(o,0,D,_)&&E,D=D.__ngNextListenerFn__;return f&&!1===E&&(_.preventDefault(),_.returnValue=!1),E}}function TC(s=1){return function(s){return(dt.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,dt.lFrame.contextLView))[8]}(s)}function iD(s,o){let c=null;const d=function(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(s);for(let f=0;f<o.length;f++){const p=o[f];if("*"!==p){if(null===d?tg(s,p,!0):_z(d,p))return f}else c=f}return c}function AC(s){const o=xe()[16][6];if(!o.projection){const d=o.projection=Us(s?s.length:1,null),f=d.slice();let p=o.child;for(;null!==p;){const _=s?iD(p,s):0;null!==_&&(f[_]?f[_].projectionNext=p:d[_]=p,f[_]=p),p=p.next}}}function IC(s,o=0,c){const d=xe(),f=At(),p=O4(f,20+s,16,null,c||null);null===p.projection&&(p.projection=o),j2(),64!=(64&p.flags)&&function(s,o,c){y3(o[11],0,o,c,Wm(s,c,o),N5(c.parent||o[6],c,o))}(f,d,p)}function UC(s,o,c,d,f){const p=s[c+1],_=null===o;let v=d?uo(p):ua(p),E=!1;for(;0!==v&&(!1===E||_);){const T=s[v+1];GC(s[v],o)&&(E=!0,s[v+1]=d?Uh(T):Hh(T)),v=d?uo(T):ua(T)}E&&(s[c+1]=d?Hh(p):Uh(p))}function GC(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&e2(s,o)>=0}const qi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jf(s){return s.substring(qi.key,qi.keyEnd)}function $C(s,o){const c=qi.textEnd;return c===o?-1:(o=qi.keyEnd=function(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,qi.key=o,c),gl(s,o,c))}function gl(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function r8(s,o,c){return A1(s,o,c,!1),r8}function $f(s,o){return A1(s,o,null,!0),$f}function Wf(s){!function(s,o,c,d){const f=At(),p=Ui(2);f.firstUpdatePass&&YC(f,null,p,d);const _=xe();if(c!==St&&Lr(_,p,c)){const v=f.data[li()];if(Jf(v,d)&&!Zf(f,p)){let E=d?v.classesWithoutHost:v.stylesWithoutHost;null!==E&&(c=ie(E,c||"")),Af(f,v,_,c,d)}else!function(s,o,c,d,f,p,_,v){f===St&&(f=q);let E=0,D=0,T=0<f.length?f[0]:null,V=0<p.length?p[0]:null;for(;null!==T||null!==V;){const R=E<f.length?f[E+1]:void 0,$=D<p.length?p[D+1]:void 0;let fe,J=null;T===V?(E+=2,D+=2,R!==$&&(J=V,fe=$)):null===V||null!==T&&T<V?(E+=2,J=T):(D+=2,J=V,fe=$),null!==J&&Qf(s,o,c,d,J,fe,_,v),T=E<f.length?f[E]:null,V=D<p.length?p[D]:null}}(f,v,_,_[11],_[p+1],_[p+1]=function(s,o,c){if(null==c||""===c)return q;const d=[],f=ao(c);if(Array.isArray(f))for(let p=0;p<f.length;p++)s(d,f[p],!0);else if("object"==typeof f)for(const p in f)f.hasOwnProperty(p)&&s(d,p,f[p]);else"string"==typeof f&&o(d,f);return d}(s,o,c),d,p)}}(ui,m2,s,!0)}function m2(s,o){for(let c=function(s){return function(s){qi.key=0,qi.keyEnd=0,qi.value=0,qi.valueEnd=0,qi.textEnd=s.length}(s),$C(s,gl(s,0,qi.textEnd))}(o);c>=0;c=$C(o,c))ui(s,jf(o),!0)}function A1(s,o,c,d){const f=xe(),p=At(),_=Ui(2);p.firstUpdatePass&&YC(p,s,_,d),o!==St&&Lr(f,_,o)&&Qf(p,p.data[li()],f,f[11],s,f[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=te(ao(s)))),s}(o,c),d,_)}function Zf(s,o){return o>=s.expandoStartIndex}function YC(s,o,c,d){const f=s.data;if(null===f[c+1]){const p=f[li()],_=Zf(s,c);Jf(p,d)&&null===o&&!_&&(o=!1),o=function(s,o,c,d){const f=$2(s);let p=d?o.residualClasses:o.residualStyles;if(null===f)0===(d?o.classBindings:o.styleBindings)&&(c=Cl(c=Kf(null,s,o,c,d),o.attrs,d),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==f)if(c=Kf(f,s,o,c,d),null===p){let E=function(s,o,c){const d=c?o.classBindings:o.styleBindings;if(0!==ua(d))return s[uo(d)]}(s,o,d);void 0!==E&&Array.isArray(E)&&(E=Kf(null,s,o,E[1],d),E=Cl(E,o.attrs,d),function(s,o,c,d){s[uo(c?o.classBindings:o.styleBindings)]=d}(s,o,d,E))}else p=function(s,o,c){let d;const f=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<f;p++)d=Cl(d,s[p].hostAttrs,c);return Cl(d,o.attrs,c)}(s,o,d)}return void 0!==p&&(d?o.residualClasses=p:o.residualStyles=p),c}(f,p,o,d),function(s,o,c,d,f,p){let _=p?o.classBindings:o.styleBindings,v=uo(_),E=ua(_);s[d]=c;let T,D=!1;if(Array.isArray(c)){const V=c;T=V[1],(null===T||e2(V,T)>0)&&(D=!0)}else T=c;if(f)if(0!==E){const R=uo(s[v+1]);s[d+1]=P5(R,v),0!==R&&(s[R+1]=Bh(s[R+1],d)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],d)}else s[d+1]=P5(v,0),0!==v&&(s[v+1]=Bh(s[v+1],d)),v=d;else s[d+1]=P5(E,0),0===v?v=d:s[E+1]=Bh(s[E+1],d),E=d;D&&(s[d+1]=Hh(s[d+1])),UC(s,T,d,!0),UC(s,T,d,!1),function(s,o,c,d,f){const p=f?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&e2(p,o)>=0&&(c[d+1]=Uh(c[d+1]))}(o,T,s,d,p),_=P5(v,E),p?o.classBindings=_:o.styleBindings=_}(f,p,o,c,_,d)}}function Kf(s,o,c,d,f){let p=null;const _=c.directiveEnd;let v=c.directiveStylingLast;for(-1===v?v=c.directiveStart:v++;v<_&&(p=o[v],d=Cl(d,p.hostAttrs,f),p!==s);)v++;return null!==s&&(c.directiveStylingLast=v),d}function Cl(s,o,c){const d=c?1:2;let f=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?f=_:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ui(s,_,!!c||o[++p]))}return void 0===s?null:s}function Qf(s,o,c,d,f,p,_,v){if(!(3&o.type))return;const E=s.data,D=E[v+1];C0(function(s){return 1==(1&s)}(D)?XC(E,o,c,f,ua(D),_):void 0)||(C0(p)||function(s){return 2==(2&s)}(D)&&(p=XC(E,null,c,f,v,_)),function(s,o,c,d,f){const p=fn(s);if(o)f?p?s.addClass(c,d):c.classList.add(d):p?s.removeClass(c,d):c.classList.remove(d);else{let _=-1===d.indexOf("-")?void 0:k1.DashCase;if(null==f)p?s.removeStyle(c,d,_):c.style.removeProperty(d);else{const v="string"==typeof f&&f.endsWith("!important");v&&(f=f.slice(0,-10),_|=k1.Important),p?s.setStyle(c,d,f,_):c.style.setProperty(d,f,v?"important":"")}}}(d,_,Z1(li(),c),f,p))}function XC(s,o,c,d,f,p){const _=null===o;let v;for(;f>0;){const E=s[f],D=Array.isArray(E),T=D?E[1]:E,V=null===T;let R=c[f+1];R===St&&(R=V?q:void 0);let $=V?Rn(R,d):T===d?R:void 0;if(D&&!C0($)&&($=Rn(E,d)),C0($)&&(v=$,_))return v;const J=s[f+1];f=_?uo(J):ua(J)}if(null!==o){let E=p?o.residualClasses:o.residualStyles;null!=E&&(v=Rn(E,d))}return v}function C0(s){return void 0!==s}function Jf(s,o){return 0!=(s.flags&(o?16:32))}function e_(s,o=""){const c=xe(),d=At(),f=s+20,p=d.firstCreatePass?O4(d,f,1,o,null):d.data[f],_=c[f]=function(s,o){return fn(s)?s.createText(o):s.createTextNode(o)}(c[11],o);a0(d,c,_,p),ji(p,!1)}function s8(s){return o8("",s,""),s8}function o8(s,o,c){const d=xe(),f=function(s,o,c,d){return Lr(s,xr(),c)?o+oe(c)+d:St}(d,s,o,c);return f!==St&&ha(d,li(),f),o8}function a8(s,o,c,d,f){const p=xe(),_=function(s,o,c,d,f,p){const v=H4(s,kr(),c,f);return Ui(2),v?o+oe(c)+d+oe(f)+p:St}(p,s,o,c,d,f);return _!==St&&ha(p,li(),_),a8}function i7(s,o,c){const d=xe();return Lr(d,xr(),o)&&$s(At(),Ln(),d,s,o,d[11],c,!0),i7}function r7(s,o,c){const d=xe();if(Lr(d,xr(),o)){const p=At(),_=Ln();$s(p,_,d,s,o,function(s,o,c){return(null===s||Qr(s))&&(c=function(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(c[o.index])),c[11]}($2(p.data),_,d),c,!0)}return r7}const B4=void 0;var ND=["en",[["a","p"],["AM","PM"],B4],[["AM","PM"],B4,B4],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],B4,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],B4,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",B4,"{1} 'at' {0}",B4],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let _l={};function s7(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=C_(o);if(c)return c;const d=o.split("-")[0];if(c=C_(d),c)return c;if("en"===d)return ND;throw new Error(`Missing locale data for the locale "${s}".`)}function g_(s){return s7(s)[ft.PluralCase]}function C_(s){return s in _l||(_l[s]=yt.ng&&yt.ng.common&&yt.ng.common.locales&&yt.ng.common.locales[s]),_l[s]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const l8="en-US";let F_=l8;function o7(s){Qt(s,"Expected localeId to be defined"),"string"==typeof s&&(F_=s.toLowerCase().replace(/_/g,"-"))}function p8(s,o,c,d,f){if(s=W(s),Array.isArray(s))for(let p=0;p<s.length;p++)p8(s[p],o,c,d,f);else{const p=At(),_=xe();let v=rl(s)?s:W(s.provide),E=W5(s);const D=gn(),T=1048575&D.providerIndexes,V=D.directiveStart,R=D.providerIndexes>>20;if(rl(s)||!s.multi){const $=new Yo(E,f,ml),J=f7(v,o,f?T:T+R,V);-1===J?(nn(K2(D,_),p,v),d7(p,s,o.length),o.push(v),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),c.push($),_.push($)):(c[J]=$,_[J]=$)}else{const $=f7(v,o,T+R,V),J=f7(v,o,T,T+R),fe=$>=0&&c[$],re=J>=0&&c[J];if(f&&!re||!f&&!fe){nn(K2(D,_),p,v);const Ve=function(s,o,c,d,f){const p=new Yo(s,c,ml);return p.multi=[],p.index=o,p.componentProviders=0,h7(p,f,d&&!c),p}(f?yk:m8,c.length,f,d,E);!f&&re&&(c[J].providerFactory=Ve),d7(p,s,o.length,0),o.push(v),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),c.push(Ve),_.push(Ve)}else d7(p,s,$>-1?$:J,h7(c[f?J:$],E,!f&&d));!f&&d&&re&&c[J].componentProviders++}}}function d7(s,o,c,d){const f=rl(o);if(f||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const E=v.indexOf(c);-1===E?v.push(c,[d,_]):v[E+1].push(d,_)}else v.push(c,_)}}}function h7(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function f7(s,o,c,d){for(let f=c;f<d;f++)if(o[f]===s)return f;return-1}function m8(s,o,c,d){return p7(this.multi,[])}function yk(s,o,c,d){const f=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=ei(c,c[1],this.providerFactory.index,d);p=v.slice(0,_),p7(f,p);for(let E=_;E<v.length;E++)p.push(v[E])}else p=[],p7(f,p);return p}function p7(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function m7(s,o=[]){return c=>{c.providersResolver=(d,f)=>function(s,o,c){const d=At();if(d.firstCreatePass){const f=Qr(s);p8(c,d.data,d.blueprint,f,!0),p8(o,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,o)}}class g7{}const C7="ngComponent";class bk{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${te(s)}. Did you add it to @NgModule.entryComponents?`);return o[C7]=s,o}(o)}}let yl=(()=>{class s{}return s.NULL=new bk,s})();function C8(...s){}function vl(s,o){return new go(fr(s,o))}const Mk=function(){return vl(gn(),xe())};let go=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=Mk,s})();function K_(s){return s instanceof go?s.nativeElement:s}class _8{}let Sk=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>Dk(),s})();const Dk=function(){const s=xe(),c=Ti(gn().index,s);return function(s){return s[11]}(Mn(c)?c:s)};let F7=(()=>{class s{}return s.\u0275prov=Fn({token:s,providedIn:"root",factory:()=>null}),s})();class F8{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const y7=new F8("12.2.16");class Y_{constructor(){}supports(o){return z4(o)}create(o){return new Nk(o)}}const Q_=(s,o)=>o;class Nk{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Q_}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,d=this._removalsHead,f=0,p=null;for(;c||d;){const _=!d||c&&c.currentIndex<v7(d,f,p)?c:d,v=v7(_,f,p),E=_.currentIndex;if(_===d)f--,d=d._nextRemoved;else if(c=c._next,null==_.previousIndex)f++;else{p||(p=[]);const D=v-f,T=E-f;if(D!=T){for(let R=0;R<D;R++){const $=R<p.length?p[R]:p[R]=0,J=$+R;T<=J&&J<D&&(p[R]=$+1)}p[_.previousIndex]=T-D}}v!==E&&o(_,v,E)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!z4(o))throw new Error(`Error trying to diff '${te(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,p,_,c=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==c&&Object.is(c.trackById,_)?(d&&(c=this._verifyReinsertion(c,p,_,v)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,_,v),d=!0),c=c._next}else f=0,function(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[sl()]();let d;for(;!(d=c.next()).done;)o(d.value)}}(o,v=>{_=this._trackByFn(f,v),null!==c&&Object.is(c.trackById,_)?(d&&(c=this._verifyReinsertion(c,v,_,f)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,_,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,d,f){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,f)):o=this._addAfter(new Tk(c,d),p,f),o}_verifyReinsertion(o,c,d,f){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,p=o._nextRemoved;return null===f?this._removalsHead=p:f._nextRemoved=p,null===p?this._removalsTail=f:p._prevRemoved=f,this._insertAfter(o,c,d),this._addToMoves(o,d),o}_moveAfter(o,c,d){return this._unlink(o),this._insertAfter(o,c,d),this._addToMoves(o,d),o}_addAfter(o,c,d){return this._insertAfter(o,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,d){const f=null===c?this._itHead:c._next;return o._next=f,o._prev=c,null===f?this._itTail=o:f._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new X_),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,d=o._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new X_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Tk{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class J_{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const c=o._prevDup,d=o._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class X_{constructor(){this.map=new Map}put(o){const c=o.trackById;let d=this.map.get(c);d||(d=new J_,this.map.set(c,d)),d.add(o)}get(o,c){const f=this.map.get(o);return f?f.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function v7(s,o,c){const d=s.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+o+f}class eF{constructor(){}supports(o){return o instanceof Map||vf(o)}create(){return new tF}}class tF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||vf(o)))throw new Error(`Error trying to diff '${te(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const d=o._prev;return c._next=o,c._prev=d,o._prev=c,d&&(d._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,c);const p=f._prev,_=f._next;return p&&(p._next=_),_&&(_._prev=p),f._next=null,f._prev=null,f}const d=new Ak(o);return this._records.set(o,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(d=>c(o[d],d))}}class Ak{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function w7(){return new y8([new Y_])}let y8=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||w7()),deps:[[s,new Mi,new n2]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=Fn({token:s,providedIn:"root",factory:w7}),s})();function iF(){return new E0([new eF])}let E0=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||iF()),deps:[[s,new Mi,new n2]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=Fn({token:s,providedIn:"root",factory:iF}),s})();function v8(s,o,c,d,f=!1){for(;null!==c;){const p=o[c.index];if(null!==p&&d.push(sn(p)),Ni(p))for(let v=10;v<p.length;v++){const E=p[v],D=E[1].firstChild;null!==D&&v8(E[1],E,D,d)}const _=c.type;if(8&_)v8(s,o,c.child,d);else if(32&_){const v=y(c,o);let E;for(;E=v();)d.push(E)}else if(16&_){const v=Lh(o,c);if(Array.isArray(v))d.push(...v);else{const E=w(o[16]);v8(E[1],E,v,d,!0)}}c=f?c.projectionNext:c.next}return d}class wl{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return v8(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ni(o)){const c=o[8],d=c?c.indexOf(this):-1;d>-1&&(_3(o,d),Ar(c,d))}this._attachedToViewContainer=!1}s0(this._lView[1],this._lView)}onDestroy(o){Fg(this._lView[1],this._lView,null,o)}markForCheck(){rf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){af(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,c){qo(!0);try{af(s,o,c)}finally{qo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,V4(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class Ik extends wl{constructor(o){super(o),this._view=o}detectChanges(){xg(this._view)}checkNoChanges(){!function(s){qo(!0);try{xg(s)}finally{qo(!1)}}(this._view)}get context(){return null}}const sF=function(s){return function(s,o,c){if(T2(s)&&!c){const d=Ti(s.index,o);return new wl(d,d)}return 47&s.type?new wl(o[16],o):null}(gn(),xe(),16==(16&s))};let Lk=(()=>{class s{}return s.__NG_ELEMENT_ID__=sF,s})();const aF=[new eF],cF=new y8([new Y_]),Ok=new E0(aF),uF=function(){return w8(gn(),xe())};let M0=(()=>{class s{}return s.__NG_ELEMENT_ID__=uF,s})();const dF=M0,Rk=class extends dF{constructor(o,c,d){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(o){const c=this._declarationTContainer.tViews,d=Ds(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(d[19]=p.createEmbeddedView(c)),c0(c,d,o),new wl(d)}};function w8(s,o){return 4&s.type?new Rk(o,s,vl(s,o)):null}class v3{}class fF{}const mF=function(){return _F(gn(),xe())};let b8=(()=>{class s{}return s.__NG_ELEMENT_ID__=mF,s})();const zk=b8,b7=class extends zk{constructor(o,c,d){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=d}get element(){return vl(this._hostTNode,this._hostLView)}get injector(){return new E1(this._hostTNode,this._hostLView)}get parentInjector(){const o=$e(this._hostTNode,this._hostLView);if(d4(o)){const c=pr(o,this._hostLView),d=w1(o);return new E1(c[1].data[d+8],c)}return new E1(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=CF(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,d){const f=o.createEmbeddedView(c||{});return this.insert(f,d),f}createComponent(o,c,d,f,p){const _=d||this.parentInjector;if(!p&&null==o.ngModule&&_){const E=_.get(v3,null);E&&(p=E)}const v=o.create(_,f,void 0,p);return this.insert(v.hostView,c),v}insert(o,c){const d=o._lView,f=d[1];if(Ni(d[3])){const T=this.indexOf(o);if(-1!==T)this.detach(T);else{const V=d[3],R=new b7(V,V[6],V[3]);R.detach(R.indexOf(o))}}const p=this._adjustIndex(c),_=this._lContainer;!function(s,o,c,d){const f=10+d,p=c.length;d>0&&(c[f-1][4]=o),d<p-10?(o[4]=c[f],ta(c,10+d,o)):(c.push(o),o[4]=null),o[3]=c;const _=o[17];null!==_&&c!==_&&function(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(f,d,_,p);const v=Ph(p,_),E=d[11],D=k5(E,_[7]);return null!==D&&function(s,o,c,d,f,p){d[0]=f,d[6]=o,V4(s,d,c,1,f,p)}(f,_[6],E,d,D,v),o.attachToViewContainerRef(),ta(E8(_),p,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=CF(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),d=_3(this._lContainer,c);d&&(Ar(E8(this._lContainer),c),s0(d[1],d))}detach(o){const c=this._adjustIndex(o,-1),d=_3(this._lContainer,c);return d&&null!=Ar(E8(this._lContainer),c)?new wl(d):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function CF(s){return s[8]}function E8(s){return s[8]||(s[8]=[])}function _F(s,o){let c;const d=o[s.index];if(Ni(d))c=d;else{let f;if(8&s.type)f=sn(d);else{const p=o[11];f=p.createComment("");const _=fr(s,o);F3(p,k5(p,_),f,function(s,o){return fn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=c=Dg(d,o,f,s),q5(o,c)}return new b7(c,s,o)}const El={};class k8 extends yl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=oi(o);return new z7(c,this.ngModule)}}function BF(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}const jF=new Dn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Yc});class z7 extends g7{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=o.selectors.map(yM).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return BF(this.componentDef.inputs)}get outputs(){return BF(this.componentDef.outputs)}create(o,c,d,f){const p=(f=f||this.ngModule)?function(s,o){return{get:(c,d,f)=>{const p=s.get(c,El,f);return p!==El||d===El?p:o.get(c,d,f)}}}(o,f.injector):o,_=p.get(_8,bs),v=p.get(F7,null),E=_.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",T=d?function(s,o,c){if(fn(s))return s.selectRootElement(o,c===He.ShadowDom);let d="string"==typeof o?s.querySelector(o):o;return d.textContent="",d}(E,d,this.componentDef.encapsulation):x1(_.createRenderer(null,this.componentDef),D,function(s){const o=s.toLowerCase();return"svg"===o?R2:"math"===o?"http://www.w3.org/1998/MathML/":null}(D)),V=this.componentDef.onPush?576:528,R=function(s,o){return{components:[],scheduler:s||Yc,clean:nS,playerHandler:o||null,flags:0}}(),$=l0(0,null,null,1,0,null,null,null,null,null),J=Ds(null,$,R,V,null,null,_,E,v,p);let fe,re;K1(J);try{const Ve=function(s,o,c,d,f,p){const _=c[1];c[20]=s;const E=O4(_,20,2,"#host",null),D=E.mergedAttrs=o.hostAttrs;null!==D&&($5(E,D,!0),null!==s&&(Dc(f,s,D),null!==E.classes&&Oh(f,s,E.classes),null!==E.styles&&Xm(f,s,E.styles)));const T=d.createRenderer(s,o),V=Ds(c,Cg(o),null,o.onPush?64:16,c[20],E,d,T,p||null,null);return _.firstCreatePass&&(nn(K2(E,c),_,o.type),Xh(_,E),Mg(E,c.length,1)),q5(c,V),c[20]=V}(T,this.componentDef,J,_,E);if(T)if(d)Dc(E,T,["ng-version",y7.full]);else{const{attrs:Me,classes:rt}=function(s){const o=[],c=[];let d=1,f=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===f?""!==p&&o.push(p,s[++d]):8===f&&c.push(p);else{if(!lo(f))break;f=p}d++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);Me&&Dc(E,T,Me),rt&&rt.length>0&&Oh(E,T,rt.join(" "))}if(re=C1($,20),void 0!==c){const Me=re.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const Ct=c[rt];Me.push(null!=Ct?Array.from(Ct):null)}}fe=function(s,o,c,d,f){const p=c[1],_=function(s,o,c){const d=gn();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),ef(s,d,o,R4(s,o,1,null),c));const f=ei(o,s,d.directiveStart,d);Gi(f,o);const p=fr(d,o);return p&&Gi(p,o),f}(p,c,o);if(d.components.push(_),s[8]=_,f&&f.forEach(E=>E(_,o)),o.contentQueries){const E=gn();o.contentQueries(1,_,E.directiveStart)}const v=gn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zo(v.index),yg(c[1],v,0,v.directiveStart,v.directiveEnd,o),bg(o,_)),_}(Ve,this.componentDef,J,R,[vS]),c0($,J,null)}finally{Rs()}return new Ix(this.componentType,fe,vl(re,J),J,re)}}class Ix extends class{}{constructor(o,c,d,f,p){super(),this.location=d,this._rootLView=f,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new Ik(f),this.componentType=o}get injector(){return new E1(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const Ml=new Map;class qF extends v3{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new k8(this);const d=Mr(o),f=o[vt]||null;f&&o7(f),this._bootstrapComponents=qs(d.bootstrap),this._r3Injector=Vg(o,c,[{provide:v3,useValue:this},{provide:yl,useValue:this.componentFactoryResolver}],te(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=Zn.THROW_IF_NOT_FOUND,d=Qe.Default){return o===Zn||o===v3||o===tl?this:this._r3Injector.get(o,c,d)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class H7 extends fF{constructor(o){super(),this.moduleType=o,null!==Mr(o)&&function(s){const o=new Set;!function c(d){const f=Mr(d,!0),p=f.id;null!==p&&(function(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${te(o)} vs ${te(o.name)}`)}(p,Ml.get(p),d),Ml.set(p,d));const _=qs(f.imports);for(const v of _)o.has(v)||(o.add(v),c(v))}(s)}(o)}create(o){return new qF(this.moduleType,o)}}function $F(s,o,c){const d=Gn()+s,f=xe();return f[d]===St?f2(f,d,c?o.call(c):o()):function(s,o){return s[o]}(f,d)}function B7(s,o,c,d){return ZF(xe(),Gn(),s,o,c,d)}function R0(s,o){const c=s[o];return c===St?void 0:c}function ZF(s,o,c,d,f,p){const _=o+c;return Lr(s,_,f)?f2(s,_+1,p?d.call(p,f):d(f)):R0(s,_+1)}function j7(s,o){const c=At();let d;const f=s+20;c.firstCreatePass?(d=function(s,o){if(o)for(let c=o.length-1;c>=0;c--){const d=o[c];if(s===d.name)return d}throw new Se("302",`The pipe '${s}' could not be found!`)}(o,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const p=d.factory||(d.factory=vs(d.type)),_=Wi(ml);try{const v=Jo(!1),E=p();return Jo(v),function(s,o,c,d){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=d}(c,xe(),f,E),E}finally{Wi(_)}}function U7(s,o,c){const d=s+20,f=xe(),p=_1(f,d);return H0(f,z0(f,d)?ZF(f,Gn(),o,p.transform,c,p):p.transform(c))}function XF(s,o,c,d){const f=s+20,p=xe(),_=_1(p,f);return H0(p,z0(p,f)?function(s,o,c,d,f,p,_){const v=o+c;return H4(s,v,f,p)?f2(s,v+2,_?d.call(_,f,p):d(f,p)):R0(s,v+2)}(p,Gn(),o,_.transform,c,d,_):_.transform(c,d))}function z0(s,o){return s[1].data[o].pure}function H0(s,o){return fo.isWrapped(o)&&(o=fo.unwrap(o),s[kr()]=St),o}function G7(s){return o=>{setTimeout(s,void 0,o)}}const Fo=class extends l.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,d){var f,p,_;let v=o,E=c||(()=>null),D=d;if(o&&"object"==typeof o){const V=o;v=null===(f=V.next)||void 0===f?void 0:f.bind(V),E=null===(p=V.error)||void 0===p?void 0:p.bind(V),D=null===(_=V.complete)||void 0===_?void 0:_.bind(V)}this.__isAsync&&(E=G7(E),v&&(v=G7(v)),D&&(D=G7(D)));const T=super.subscribe({next:v,error:E,complete:D});return o instanceof se.w&&o.add(T),T}};function qx(){return this._results[sl()]()}class x8{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=sl(),d=x8.prototype;d[c]||(d[c]=qx)}get changes(){return this._changes||(this._changes=new Fo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const d=this;d.dirty=!1;const f=mr(o);(this._changesDetected=!function(s,o,c){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],p=o[d];if(c&&(f=c(f),p=c(p)),p!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class q7{constructor(o){this.queryList=o,this.matches=null}clone(){return new q7(this.queryList)}setDirty(){this.queryList.setDirty()}}class $7{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const d=null!==o.contentQueries?o.contentQueries[0]:c.length,f=[];for(let p=0;p<d;p++){const _=c.getByIndex(p);f.push(this.queries[_.indexInDeclarationView].clone())}return new $7(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==cy(o,c).matches&&this.queries[c].setDirty()}}class iy{constructor(o,c,d=null){this.predicate=o,this.flags=c,this.read=d}}class W7{constructor(o=[]){this.queries=o}elementStart(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,p=this.getByIndex(d).embeddedTView(o,f);p&&(p.indexInDeclarationView=d,null!==c?c.push(p):c=[p])}return null!==c?new W7(c):null}template(o,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Z7{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new Z7(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const p=d[f];this.matchTNodeWithReadOption(o,c,Zx(c,p)),this.matchTNodeWithReadOption(o,c,b1(c,o,p,!1,!1))}else d===M0?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,b1(c,o,d,!1,!1))}matchTNodeWithReadOption(o,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===go||f===b8||f===M0&&4&c.type)this.addMatch(c.index,-2);else{const p=b1(c,o,f,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,d)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function Zx(s,o){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===o)return c[d+1];return null}function Yx(s,o,c,d){return-1===c?function(s,o){return 11&s.type?vl(s,o):4&s.type?w8(s,o):null}(o,s):-2===c?function(s,o,c){return c===go?vl(o,s):c===M0?w8(o,s):c===b8?_F(o,s):void 0}(s,o,d):ei(s,s[1],c,o)}function N8(s,o,c,d){const f=o[19].queries[d];if(null===f.matches){const p=s.data,_=c.matches,v=[];for(let E=0;E<_.length;E+=2){const D=_[E];v.push(D<0?null:Yx(o,p[D],_[E+1],c.metadata.read))}f.matches=v}return f.matches}function K7(s,o,c,d){const f=s.queries.getByIndex(c),p=f.matches;if(null!==p){const _=N8(s,o,f,c);for(let v=0;v<p.length;v+=2){const E=p[v];if(E>0)d.push(_[v/2]);else{const D=p[v+1],T=o[-E];for(let V=10;V<T.length;V++){const R=T[V];R[17]===R[3]&&K7(R[1],R,D,d)}if(null!==T[9]){const V=T[9];for(let R=0;R<V.length;R++){const $=V[R];K7($[1],$,D,d)}}}}}return d}function ry(s){const o=xe(),c=At(),d=Ga();$o(d+1);const f=cy(c,d);if(s.dirty&&Oa(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const p=f.crossesNgTemplate?K7(c,o,d,[]):N8(c,o,f,d);s.reset(p,K_),s.notifyOnChanges()}return!0}return!1}function B0(s,o,c){const d=At();d.firstCreatePass&&(ay(d,new iy(s,o,c),-1),2==(2&o)&&(d.staticViewQueries=!0)),Y7(d,xe(),o)}function sy(s,o,c,d){const f=At();if(f.firstCreatePass){const p=gn();ay(f,new iy(o,c,d),p.index),function(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(f,s),2==(2&c)&&(f.staticContentQueries=!0)}Y7(f,xe(),c)}function oy(){return s=xe(),o=Ga(),s[19].queries[o].queryList;var s,o}function Y7(s,o,c){const d=new x8(4==(4&c));Fg(s,o,d,d.destroy),null===o[19]&&(o[19]=new $7),o[19].queries.push(new q7(d))}function ay(s,o,c){null===s.queries&&(s.queries=new W7),s.queries.track(new Z7(o,c))}function cy(s,o){return s.queries.getByIndex(o)}const CN=X2("Input",s=>({bindingPropertyName:s})),ky=X2("HostBinding",s=>({hostPropertyName:s})),xy=X2("HostListener",(s,o)=>({eventName:s,args:o})),n9=new Dn("Application Initializer");let Sl=(()=>{class s{constructor(c){this.appInits=c,this.resolve=C8,this.reject=C8,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const p=this.appInits[f]();if(Of(p))c.push(p);else if(Rf(p)){const _=new Promise((v,E)=>{p.subscribe({complete:v,error:E})});c.push(_)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(Nn(n9,8))},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();const i9=new Dn("AppId"),Ay={provide:i9,useFactory:function(){return`${r9()}${r9()}${r9()}`},deps:[]};function r9(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Iy=new Dn("Platform Initializer"),Ly=new Dn("Platform ID"),s9=new Dn("appBootstrapListener");let Py=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();const O8=new Dn("LocaleId"),Vy=new Dn("DefaultCurrencyCode");class xN{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}const z8=function(s){return new H7(s)},NN=z8,TN=function(s){return Promise.resolve(z8(s))},Ry=function(s){const o=z8(s),d=qs(Mr(s).declarations).reduce((f,p)=>{const _=oi(p);return _&&f.push(new z7(_)),f},[]);return new xN(o,d)},AN=Ry,LN=function(s){return Promise.resolve(Ry(s))};let U0=(()=>{class s{constructor(){this.compileModuleSync=NN,this.compileModuleAsync=TN,this.compileModuleAndAllComponentsSync=AN,this.compileModuleAndAllComponentsAsync=LN}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();const ON=(()=>Promise.resolve(0))();function o9(s){"undefined"==typeof Zone?ON.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Zs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let s=yt.requestAnimationFrame,o=yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(yt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,c9(s),s.isCheckStableRunning=!0,a9(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),c9(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,p,_,v)=>{try{return l9(s),c.invokeTask(f,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Hy(s)}},onInvoke:(c,d,f,p,_,v,E)=>{try{return l9(s),c.invoke(f,p,_,v,E)}finally{s.shouldCoalesceRunChangeDetection&&o(),Hy(s)}},onHasTask:(c,d,f,p)=>{c.hasTask(f,p),d===f&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,c9(s),a9(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,d,f,p)=>(c.handleError(f,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Zs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Zs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,d){return this._inner.run(o,c,d)}runTask(o,c,d,f){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+f,o,zN,C8,C8);try{return p.runTask(_,c,d)}finally{p.cancelTask(_)}}runGuarded(o,c,d){return this._inner.runGuarded(o,c,d)}runOutsideAngular(o){return this._outer.run(o)}}const zN={};function a9(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function c9(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function l9(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Hy(s){s._nesting--,a9(s)}class BN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(o,c,d){return o.apply(c,d)}runGuarded(o,c,d){return o.apply(c,d)}runOutsideAngular(o){return o()}runTask(o,c,d,f){return o.apply(c,d)}}let By=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zs.assertNotInAngularZone(),o9(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())o9(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,d,f){return[]}}return s.\u0275fac=function(c){return new(c||s)(Nn(Zs))},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})(),jy=(()=>{class s{constructor(){this._applications=new Map,H8.addToWindow(this)}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return H8.findTestabilityInTree(this,c,d)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();class jN{addToWindow(o){}findTestabilityInTree(o,c,d){return null}}function UN(s){H8=s}let H8=new jN,Uy=!0,G0=!1;function u9(){return G0=!0,Uy}function GN(){if(G0)throw new Error("Cannot enable prod mode after platform setup.");Uy=!1}let yo;const qy=new Dn("AllowMultipleToken");class QN{constructor(o,c){this.name=o,this.token=c}}function h9(s,o,c=[]){const d=`Platform: ${o}`,f=new Dn(d);return(p=[])=>{let _=$y();if(!_||_.injector.get(qy,!1))if(s)s(c.concat(p).concat({provide:f,useValue:!0}));else{const v=c.concat(p).concat({provide:f,useValue:!0},{provide:nl,useValue:"platform"});!function(s){if(yo&&!yo.destroyed&&!yo.injector.get(qy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");yo=s.get(f9);const o=s.get(Iy,null);o&&o.forEach(c=>c())}(Zn.create({providers:v,name:d}))}return function(s){const o=$y();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(f)}}function $y(){return yo&&!yo.destroyed?yo:null}let f9=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const v=function(s,o){let c;return c="noop"===s?new BN:("zone.js"===s?void 0:s)||new Zs({enableLongStackTrace:u9(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),E=[{provide:Zs,useValue:v}];return v.run(()=>{const D=Zn.create({providers:E,parent:this.injector,name:c.moduleType.name}),T=c.create(D),V=T.injector.get(c2,null);if(!V)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const R=v.onError.subscribe({next:$=>{V.handleError($)}});T.onDestroy(()=>{p9(this._modules,T),R.unsubscribe()})}),function(s,o,c){try{const d=c();return Of(d)?d.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(V,v,()=>{const R=T.injector.get(Sl);return R.runInitializers(),R.donePromise.then(()=>(o7(T.injector.get(O8,l8)||l8),this._moduleDoBootstrap(T),T))})})}bootstrapModule(c,d=[]){const f=Wy({},d);return function(s,o,c){const d=new H7(c);return Promise.resolve(d)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,f))}_moduleDoBootstrap(c){const d=c.injector.get(q0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new Error(`The module ${te(c.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(Nn(Zn))},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();function Wy(s,o){return Array.isArray(o)?o.reduce(Wy,s):Object.assign(Object.assign({},s),o)}let q0=(()=>{class s{constructor(c,d,f,p,_){this._zone=c,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new z.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),E=new z.y(D=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Zs.assertNotInAngularZone(),o9(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Zs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{T.unsubscribe(),V.unsubscribe()}});this.isStable=(0,pe.T)(v,E.pipe((0,ae.B)()))}bootstrap(c,d){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let f;f=c instanceof g7?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const p=function(s){return s.isBoundToModule}(f)?void 0:this._injector.get(v3),v=f.create(Zn.NULL,[],d||f.selector,p),E=v.location.nativeElement,D=v.injector.get(By,null),T=D&&v.injector.get(jy);return D&&T&&T.registerApplication(E,D),v.onDestroy(()=>{this.detachView(v.hostView),p9(this.components,v),T&&T.unregisterApplication(E)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;p9(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(s9,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(Nn(Zs),Nn(Zn),Nn(c2),Nn(yl),Nn(Sl))},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();function p9(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}class Ky{}class sT{}const Jy={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let oT=(()=>{class s{constructor(c,d){this._compiler=c,this._config=d||Jy}load(c){return this.loadAndCompile(c)}loadAndCompile(c){let[d,f]=c.split("#");return void 0===f&&(f="default"),B(8255)(d).then(p=>p[f]).then(p=>Xy(p,d,f)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(c){let[d,f]=c.split("#"),p="NgFactory";return void 0===f&&(f="default",p=""),B(8255)(this._config.factoryPathPrefix+d+this._config.factoryPathSuffix).then(_=>_[f+p]).then(_=>Xy(_,d,f))}}return s.\u0275fac=function(c){return new(c||s)(Nn(U0),Nn(sT,8))},s.\u0275prov=Fn({token:s,factory:s.\u0275fac}),s})();function Xy(s,o,c){if(!s)throw new Error(`Cannot find '${c}' in '${o}'`);return s}const cv=function(s){return null},mT=h9(null,"core",[{provide:Ly,useValue:"unknown"},{provide:f9,deps:[Zn]},{provide:jy,deps:[]},{provide:Py,deps:[]}]),uv=[{provide:q0,useClass:q0,deps:[Zs,Zn,c2,yl,Sl]},{provide:jF,deps:[Zs],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(c){o.push(c)}}},{provide:Sl,useClass:Sl,deps:[[new n2,n9]]},{provide:U0,useClass:U0,deps:[]},Ay,{provide:y8,useFactory:function(){return cF},deps:[]},{provide:E0,useFactory:function(){return Ok},deps:[]},{provide:O8,useFactory:function(s){return o7(s=s||"undefined"!=typeof $localize&&$localize.locale||l8),s},deps:[[new t2(O8),new n2,new Mi]]},{provide:Vy,useValue:"USD"}];let yT=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(Nn(q0))},s.\u0275mod=U1({type:s}),s.\u0275inj=An({providers:uv}),s})()},8939:(it,ke,B)=>{"use strict";B.d(ke,{hO:()=>de,xv:()=>ie,Dh:()=>te,GT:()=>ee,cc:()=>me,on:()=>H,pX:()=>ae});var l=B(7716),se=B(7841),z=B(5943);it=B.hmd(it);const pe=["ngOnDestroy"],ae=(oe,ge,Ee,Ie={})=>new Proxy(oe,{get:(et,Lt)=>Ee.runOutsideAngular(()=>{var jt;if(oe[Lt])return(null===(jt=null==Ie?void 0:Ie.spy)||void 0===jt?void 0:jt.get)&&Ie.spy.get(Lt,oe[Lt]),oe[Lt];if(pe.indexOf(Lt)>-1)return()=>{};const xt=ge.toPromise().then(Tn=>{const Nt=Tn&&Tn[Lt];return"function"==typeof Nt?Nt.bind(Tn):Nt&&Nt.then?Nt.then(_t=>Ee.run(()=>_t)):Ee.run(()=>Nt)});return new Proxy(()=>{},{get:(Tn,Nt)=>xt[Nt],apply:(Tn,Nt,_t)=>xt.then(rn=>{var Ft;const qt=rn&&rn(..._t);return(null===(Ft=null==Ie?void 0:Ie.spy)||void 0===Ft?void 0:Ft.apply)&&Ie.spy.apply(Lt,_t,qt),qt})})})}),ee=(oe,ge)=>{ge.forEach(Ee=>{Object.getOwnPropertyNames(Ee.prototype||Ee).forEach(Ie=>{Object.defineProperty(oe.prototype,Ie,Object.getOwnPropertyDescriptor(Ee.prototype||Ee,Ie))})})};class Ce{constructor(ge){return ge}}const te=new l.OlP("angularfire2.app.options"),ie=new l.OlP("angularfire2.app.name");function H(oe,ge,Ee){const et="object"==typeof Ee&&Ee||{};et.name=et.name||"string"==typeof Ee&&Ee||"[DEFAULT]";const jt=se.Z.apps.filter(xt=>xt&&xt.name===et.name)[0]||ge.runOutsideAngular(()=>se.Z.initializeApp(oe,et));try{JSON.stringify(oe)!==JSON.stringify(jt.options)&&G("error",`${jt.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(xt){}return new Ce(jt)}const G=(oe,...ge)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[oe](...ge)},W={provide:Ce,useFactory:H,deps:[te,l.R0b,[new l.FiY,ie]]};let de=(()=>{class oe{constructor(Ee){se.Z.registerVersion("angularfire",z.q4.full,"core"),se.Z.registerVersion("angularfire",z.q4.full,"app-compat"),se.Z.registerVersion("angular",l.q4F.full,Ee.toString())}static initializeApp(Ee,Ie){return{ngModule:oe,providers:[{provide:te,useValue:Ee},{provide:ie,useValue:Ie}]}}}return oe.\u0275fac=function(Ee){return new(Ee||oe)(l.LFG(l.Lbi))},oe.\u0275mod=l.oAB({type:oe}),oe.\u0275inj=l.cJS({providers:[W]}),oe})();function me(oe,ge,Ee,Ie,et){const[,Lt,jt]=globalThis.\u0275AngularfireInstanceCache.find(xt=>xt[0]===oe)||[];if(Lt)return function(oe,ge){try{return oe.toString()===ge.toString()}catch(Ee){return oe===ge}}(et,jt)||(_e("error",`${ge} was already initialized on the ${Ee} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:et,was:jt})),Lt;{const xt=Ie();return globalThis.\u0275AngularfireInstanceCache.push([oe,xt,et]),xt}}const we=!!it.hot,_e=(oe,...ge)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[oe](...ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5943:(it,ke,B)=>{"use strict";B.d(ke,{q4:()=>Ic,iC:()=>Rn,fc:()=>Xa,HU:()=>g4,vb:()=>ta,JM:()=>Ms});var l=B(7716),se=B(2329),z=B(8239),pe=B(8026),ae=B(3854),ee=B(3910),Ce=B(5422),te=B(6676);const ie="@firebase/installations",H="0.5.5",W=`w:${H}`,de="FIS_v2",ge=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ee(S){return S instanceof ae.ZR&&S.code.includes("request-failed")}function Ie({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function et(S){return{token:S.token,requestStatus:2,expiresIn:rn(S.expiresIn),creationTime:Date.now()}}function Lt(S,N){return jt.apply(this,arguments)}function jt(){return(jt=(0,z.Z)(function*(S,N){const U=(yield N.json()).error;return ge.create("request-failed",{requestName:S,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function xt({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function Tn(S,{refreshToken:N}){const L=xt(S);return L.append("Authorization",function(S){return`${de} ${S}`}(N)),L}function Nt(S){return _t.apply(this,arguments)}function _t(){return(_t=(0,z.Z)(function*(S){const N=yield S();return N.status>=500&&N.status<600?S():N})).apply(this,arguments)}function rn(S){return Number(S.replace("s","000"))}function qt(S,N){return tt.apply(this,arguments)}function tt(){return(tt=(0,z.Z)(function*(S,{fid:N}){const L=Ie(S),le={method:"POST",headers:xt(S),body:JSON.stringify({fid:N,authVersion:de,appId:S.appId,sdkVersion:W})},Ne=yield Nt(()=>fetch(L,le));if(Ne.ok){const je=yield Ne.json();return{fid:je.fid||N,registrationStatus:2,refreshToken:je.refreshToken,authToken:et(je.authToken)}}throw yield Lt("Create Installation",Ne)})).apply(this,arguments)}function xa(S){return new Promise(N=>{setTimeout(N,S)})}const Ls=/^[cdef][\w-]{21}$/;function Qt(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const L=function(S){return function(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return Ls.test(L)?L:""}catch(S){return""}}function Ps(S){return`${S.appName}!${S.appId}`}const h1=new Map;function _s(S,N){const L=Ps(S);An(L,N),function(S,N){const L=(!$t&&"BroadcastChannel"in self&&($t=new BroadcastChannel("[Firebase] FID Change"),$t.onmessage=S=>{An(S.data.key,S.data.fid)}),$t);L&&L.postMessage({key:S,fid:N}),0===h1.size&&$t&&($t.close(),$t=null)}(L,N)}function An(S,N){const L=h1.get(S);if(L)for(const U of L)U(N)}let $t=null;const Te="firebase-installations-store";let yi=null;function Jn(){return yi||(yi=(0,te.openDb)("firebase-installations-database",1,S=>{switch(S.oldVersion){case 0:S.createObjectStore(Te)}})),yi}function Qe(S,N){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,z.Z)(function*(S,N){const L=Ps(S),ne=(yield Jn()).transaction(Te,"readwrite"),le=ne.objectStore(Te),Ne=yield le.get(L);return yield le.put(N,L),yield ne.complete,(!Ne||Ne.fid!==N.fid)&&_s(S,N.fid),N})).apply(this,arguments)}function Kr(S){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,z.Z)(function*(S){const N=Ps(S),U=(yield Jn()).transaction(Te,"readwrite");yield U.objectStore(Te).delete(N),yield U.complete})).apply(this,arguments)}function st(S,N){return lt.apply(this,arguments)}function lt(){return(lt=(0,z.Z)(function*(S,N){const L=Ps(S),ne=(yield Jn()).transaction(Te,"readwrite"),le=ne.objectStore(Te),Ne=yield le.get(L),je=N(Ne);return void 0===je?yield le.delete(L):yield le.put(je,L),yield ne.complete,je&&(!Ne||Ne.fid!==je.fid)&&_s(S,je.fid),je})).apply(this,arguments)}function Pt(S){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,z.Z)(function*(S){let N;const L=yield st(S,U=>{const ne=Zi(U),le=tn(S,ne);return N=le.registrationPromise,le.installationEntry});return""===L.fid?{installationEntry:yield N}:{installationEntry:L,registrationPromise:N}})).apply(this,arguments)}function Zi(S){return yt(S||{fid:Qt(),registrationStatus:0})}function tn(S,N){if(0===N.registrationStatus){if(!navigator.onLine)return{installationEntry:N,registrationPromise:Promise.reject(ge.create("app-offline"))};const L={fid:N.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:L,registrationPromise:function(S,N){return ot.apply(this,arguments)}(S,L)}}return 1===N.registrationStatus?{installationEntry:N,registrationPromise:W3(S)}:{installationEntry:N}}function ot(){return(ot=(0,z.Z)(function*(S,N){try{return Qe(S,yield qt(S,N))}catch(L){throw Ee(L)&&409===L.customData.serverCode?yield Kr(S):yield Qe(S,{fid:N.fid,registrationStatus:0}),L}})).apply(this,arguments)}function W3(S){return f1.apply(this,arguments)}function f1(){return(f1=(0,z.Z)(function*(S){let N=yield an(S);for(;1===N.registrationStatus;)yield xa(100),N=yield an(S);if(0===N.registrationStatus){const{installationEntry:L,registrationPromise:U}=yield Pt(S);return U||L}return N})).apply(this,arguments)}function an(S){return st(S,N=>{if(!N)throw ge.create("installation-not-found");return yt(N)})}function yt(S){return function(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function Z3(S,N){return Y.apply(this,arguments)}function Y(){return(Y=(0,z.Z)(function*({appConfig:S,platformLoggerProvider:N},L){const U=q(S,L),ne=Tn(S,L),le=N.getImmediate({optional:!0});le&&ne.append("x-firebase-client",le.getPlatformInfoString());const je={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:W}})},We=yield Nt(()=>fetch(U,je));if(We.ok)return et(yield We.json());throw yield Lt("Generate Auth Token",We)})).apply(this,arguments)}function q(S,{fid:N}){return`${Ie(S)}/${N}/authTokens:generate`}function Q(S){return De.apply(this,arguments)}function De(){return(De=(0,z.Z)(function*(S,N=!1){let L;const U=yield st(S.appConfig,le=>{if(!Bn(le))throw ge.create("not-registered");const Ne=le.authToken;if(!N&&Ri(Ne))return le;if(1===Ne.requestStatus)return L=ce(S,N),le;{if(!navigator.onLine)throw ge.create("app-offline");const je=xi(le);return L=Wt(S,je),je}});return L?yield L:U.authToken})).apply(this,arguments)}function ce(S,N){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,z.Z)(function*(S,N){let L=yield vt(S.appConfig);for(;1===L.authToken.requestStatus;)yield xa(100),L=yield vt(S.appConfig);const U=L.authToken;return 0===U.requestStatus?Q(S,N):U})).apply(this,arguments)}function vt(S){return st(S,N=>{if(!Bn(N))throw ge.create("not-registered");return function(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(N.authToken)?Object.assign(Object.assign({},N),{authToken:{requestStatus:0}}):N})}function Wt(S,N){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,z.Z)(function*(S,N){try{const L=yield Z3(S,N),U=Object.assign(Object.assign({},N),{authToken:L});return yield Qe(S.appConfig,U),L}catch(L){if(!Ee(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const U=Object.assign(Object.assign({},N),{authToken:{requestStatus:0}});yield Qe(S.appConfig,U)}else yield Kr(S.appConfig);throw L}})).apply(this,arguments)}function Bn(S){return void 0!==S&&2===S.registrationStatus}function Ri(S){return 2===S.requestStatus&&!function(S){const N=Date.now();return N<S.creationTime||S.creationTime+S.expiresIn<N+36e5}(S)}function xi(S){const N={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:N})}function U1(){return(U1=(0,z.Z)(function*(S){const N=S,{installationEntry:L,registrationPromise:U}=yield Pt(N.appConfig);return U?U.catch(console.error):Q(N).catch(console.error),L.fid})).apply(this,arguments)}function G1(){return(G1=(0,z.Z)(function*(S,N=!1){const L=S;return yield K3(L.appConfig),(yield Q(L,N)).token})).apply(this,arguments)}function K3(S){return Er.apply(this,arguments)}function Er(){return(Er=(0,z.Z)(function*(S){const{registrationPromise:N}=yield Pt(S);N&&(yield N)})).apply(this,arguments)}function dn(S){return ge.create("missing-app-config-values",{valueName:S})}const Yi="installations";(0,pe._registerComponent)(new ee.wA(Yi,S=>{const N=S.getProvider("app").getImmediate();return{app:N,appConfig:function(S){if(!S||!S.options)throw dn("App Configuration");if(!S.name)throw dn("App Name");const N=["projectId","apiKey","appId"];for(const L of N)if(!S.options[L])throw dn(L);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(N),platformLoggerProvider:(0,pe._getProvider)(N,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,pe._registerComponent)(new ee.wA("installations-internal",S=>{const N=S.getProvider("app").getImmediate(),L=(0,pe._getProvider)(N,Yi).getImmediate();return{getId:()=>function(S){return U1.apply(this,arguments)}(L),getToken:ne=>function(S){return G1.apply(this,arguments)}(L,ne)}},"PRIVATE")),(0,pe.registerVersion)(ie,H),(0,pe.registerVersion)(ie,H,"esm2017");const dr="@firebase/remote-config",vi=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Aa{constructor(N,L,U,ne){this.client=N,this.storage=L,this.storageCache=U,this.logger=ne}isCachedDataFresh(N,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-L,ne=U<=N;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${N}. Is cache hit: ${ne}.`),ne}fetch(N){var L=this;return(0,z.Z)(function*(){const[U,ne]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(ne&&L.isCachedDataFresh(N.cacheMaxAgeMillis,U))return ne;N.eTag=ne&&ne.eTag;const le=yield L.client.fetch(N),Ne=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===le.status&&Ne.push(L.storage.setLastSuccessfulFetchResponse(le)),yield Promise.all(Ne),le})()}}function Qr(S=navigator){return S.languages&&S.languages[0]||S.language}class Jr{constructor(N,L,U,ne,le,Ne){this.firebaseInstallations=N,this.sdkVersion=L,this.namespace=U,this.projectId=ne,this.apiKey=le,this.appId=Ne}fetch(N){var L=this;return(0,z.Z)(function*(){const[U,ne]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":N.eTag||"*"},We={sdk_version:L.sdkVersion,app_instance_id:U,app_instance_id_token:ne,app_id:L.appId,language_code:Qr()},Ht={method:"POST",headers:je,body:JSON.stringify(We)},pn=fetch(Ne,Ht),$n=new Promise((is,rs)=>{N.signal.addEventListener(()=>{const mt=new Error("The operation was aborted.");mt.name="AbortError",rs(mt)})});let Xi;try{yield Promise.race([pn,$n]),Xi=yield pn}catch(is){let rs="fetch-client-network";throw"AbortError"===is.name&&(rs="fetch-timeout"),vi.create(rs,{originalErrorMessage:is.message})}let di=Xi.status;const e3=Xi.headers.get("ETag")||void 0;let io,t3;if(200===Xi.status){let is;try{is=yield Xi.json()}catch(rs){throw vi.create("fetch-client-parse",{originalErrorMessage:rs.message})}io=is.entries,t3=is.state}if("INSTANCE_STATE_UNSPECIFIED"===t3?di=500:"NO_CHANGE"===t3?di=304:("NO_TEMPLATE"===t3||"EMPTY_CONFIG"===t3)&&(io={}),304!==di&&200!==di)throw vi.create("fetch-status",{httpStatus:di});return{status:di,eTag:e3,config:io}})()}}class Q3{constructor(N,L){this.client=N,this.storage=L}fetch(N){var L=this;return(0,z.Z)(function*(){const U=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(N,U)})()}attemptFetch(N,{throttleEndTimeMillis:L,backoffCount:U}){var ne=this;return(0,z.Z)(function*(){yield function(S,N){return new Promise((L,U)=>{const ne=Math.max(N-Date.now(),0),le=setTimeout(L,ne);S.addEventListener(()=>{clearTimeout(le),U(vi.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}(N.signal,L);try{const le=yield ne.client.fetch(N);return yield ne.storage.deleteThrottleMetadata(),le}catch(le){if(!function(S){if(!(S instanceof ae.ZR&&S.customData))return!1;const N=Number(S.customData.httpStatus);return 429===N||500===N||503===N||504===N}(le))throw le;const Ne={throttleEndTimeMillis:Date.now()+(0,ae.$s)(U),backoffCount:U+1};return yield ne.storage.setThrottleMetadata(Ne),ne.attemptFetch(N,Ne)}})()}}class K6{constructor(N,L,U,ne,le){this.app=N,this._client=L,this._storageCache=U,this._storage=ne,this._logger=le,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function I2(S,N){const L=S.target.error||void 0;return vi.create(N,{originalErrorMessage:L&&L.message})}const Ho="app_namespace_store";class Y6{constructor(N,L,U,ne=function(){return new Promise((S,N)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=U=>{N(I2(U,"storage-open"))},L.onsuccess=U=>{S(U.target.result)},L.onupgradeneeded=U=>{const ne=U.target.result;switch(U.oldVersion){case 0:ne.createObjectStore(Ho,{keyPath:"compositeKey"})}}}catch(L){N(vi.create("storage-open",{originalErrorMessage:L}))}})}()){this.appId=N,this.appName=L,this.namespace=U,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(N){return this.set("last_fetch_status",N)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(N){return this.set("last_successful_fetch_timestamp_millis",N)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(N){return this.set("last_successful_fetch_response",N)}getActiveConfig(){return this.get("active_config")}setActiveConfig(N){return this.set("active_config",N)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(N){return this.set("active_config_etag",N)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(N){return this.set("throttle_metadata",N)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(N){var L=this;return(0,z.Z)(function*(){const U=yield L.openDbPromise;return new Promise((ne,le)=>{const je=U.transaction([Ho],"readonly").objectStore(Ho),We=L.createCompositeKey(N);try{const Ht=je.get(We);Ht.onerror=pn=>{le(I2(pn,"storage-get"))},Ht.onsuccess=pn=>{const $n=pn.target.result;ne($n?$n.value:void 0)}}catch(Ht){le(vi.create("storage-get",{originalErrorMessage:Ht&&Ht.message}))}})})()}set(N,L){var U=this;return(0,z.Z)(function*(){const ne=yield U.openDbPromise;return new Promise((le,Ne)=>{const We=ne.transaction([Ho],"readwrite").objectStore(Ho),Ht=U.createCompositeKey(N);try{const pn=We.put({compositeKey:Ht,value:L});pn.onerror=$n=>{Ne(I2($n,"storage-set"))},pn.onsuccess=()=>{le()}}catch(pn){Ne(vi.create("storage-set",{originalErrorMessage:pn&&pn.message}))}})})()}delete(N){var L=this;return(0,z.Z)(function*(){const U=yield L.openDbPromise;return new Promise((ne,le)=>{const je=U.transaction([Ho],"readwrite").objectStore(Ho),We=L.createCompositeKey(N);try{const Ht=je.delete(We);Ht.onerror=pn=>{le(I2(pn,"storage-delete"))},Ht.onsuccess=()=>{ne()}}catch(Ht){le(vi.create("storage-delete",{originalErrorMessage:Ht&&Ht.message}))}})})()}createCompositeKey(N){return[this.appId,this.appName,this.namespace,N].join()}}class mc{constructor(N){this.storage=N}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var N=this;return(0,z.Z)(function*(){const L=N.storage.getLastFetchStatus(),U=N.storage.getLastSuccessfulFetchTimestampMillis(),ne=N.storage.getActiveConfig(),le=yield L;le&&(N.lastFetchStatus=le);const Ne=yield U;Ne&&(N.lastSuccessfulFetchTimestampMillis=Ne);const je=yield ne;je&&(N.activeConfig=je)})()}setLastFetchStatus(N){return this.lastFetchStatus=N,this.storage.setLastFetchStatus(N)}setLastSuccessfulFetchTimestampMillis(N){return this.lastSuccessfulFetchTimestampMillis=N,this.storage.setLastSuccessfulFetchTimestampMillis(N)}setActiveConfig(N){return this.activeConfig=N,this.storage.setActiveConfig(N)}}function J3(){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,z.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(S){return!1}})).apply(this,arguments)}(0,pe._registerComponent)(new ee.wA("remote-config",function(N,{instanceIdentifier:L}){const U=N.getProvider("app").getImmediate(),ne=N.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw vi.create("registration-window");if(!(0,ae.hl)())throw vi.create("indexed-db-unavailable");const{projectId:le,apiKey:Ne,appId:je}=U.options;if(!le)throw vi.create("registration-project-id");if(!Ne)throw vi.create("registration-api-key");if(!je)throw vi.create("registration-app-id");const We=new Y6(je,U.name,L=L||"firebase"),Ht=new mc(We),pn=new Ce.Yd(dr);pn.logLevel=Ce.in.ERROR;const $n=new Jr(ne,pe.SDK_VERSION,L,le,Ne,je),Xi=new Q3($n,We),di=new Aa(Xi,We,Ht,pn),e3=new K6(U,di,Ht,We,pn);return function(S){const N=(0,ae.m9)(S);N._initializePromise||(N._initializePromise=N._storageCache.loadFromStorage().then(()=>{N._isInitializationComplete=!0}))}(e3),e3},"PUBLIC").setMultipleInstances(!0)),(0,pe.registerVersion)(dr,"0.3.4"),(0,pe.registerVersion)(dr,"0.3.4","esm2017");const L2="/firebase-messaging-sw.js",J6="/firebase-cloud-messaging-push-scope",P2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vs="google.c.a.c_id",V2="google.c.a.c_l",Ei="google.c.a.ts",O2="google.c.a.e";var Bi=(()=>{return(S=Bi||(Bi={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",Bi;var S})();function ws(S){const N=new Uint8Array(S);return btoa(String.fromCharCode(...N)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function m1(S){const L=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(L),ne=new Uint8Array(U.length);for(let le=0;le<U.length;++le)ne[le]=U.charCodeAt(le);return ne}const La="fcm_token_details_db",bu="fcm_token_object_Store";function hr(S){return R2.apply(this,arguments)}function R2(){return(R2=(0,z.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(le=>le.name).includes(La))return null;let N=null;return(yield(0,te.openDb)(La,5,function(){var U=(0,z.Z)(function*(ne){var le;if(ne.oldVersion<2||!ne.objectStoreNames.contains(bu))return;const Ne=ne.transaction.objectStore(bu),je=yield Ne.index("fcmSenderId").get(S);if(yield Ne.clear(),je)if(2===ne.oldVersion){const We=je;if(!We.auth||!We.p256dh||!We.endpoint)return;N={token:We.fcmToken,createTime:null!==(le=We.createTime)&&void 0!==le?le:Date.now(),subscriptionOptions:{auth:We.auth,p256dh:We.p256dh,endpoint:We.endpoint,swScope:We.swScope,vapidKey:"string"==typeof We.vapidKey?We.vapidKey:ws(We.vapidKey)}}}else if(3===ne.oldVersion){const We=je;N={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:ws(We.auth),p256dh:ws(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:ws(We.vapidKey)}}}else if(4===ne.oldVersion){const We=je;N={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:ws(We.auth),p256dh:ws(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:ws(We.vapidKey)}}}});return function(ne){return U.apply(this,arguments)}}())).close(),yield(0,te.deleteDb)(La),yield(0,te.deleteDb)("fcm_vapid_details_db"),yield(0,te.deleteDb)("undefined"),_c(N)?N:null})).apply(this,arguments)}function _c(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:N}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof N.auth&&N.auth.length>0&&"string"==typeof N.p256dh&&N.p256dh.length>0&&"string"==typeof N.endpoint&&N.endpoint.length>0&&"string"==typeof N.swScope&&N.swScope.length>0&&"string"==typeof N.vapidKey&&N.vapidKey.length>0}const g1="firebase-messaging-store";let X3=null;function fn(){return X3||(X3=(0,te.openDb)("firebase-messaging-database",1,S=>{switch(S.oldVersion){case 0:S.createObjectStore(g1)}})),X3}function Fc(S){return bs.apply(this,arguments)}function bs(){return(bs=(0,z.Z)(function*(S){const N=Z1(S),U=yield(yield fn()).transaction(g1).objectStore(g1).get(N);if(U)return U;{const ne=yield hr(S.appConfig.senderId);if(ne)return yield Xr(S,ne),ne}})).apply(this,arguments)}function Xr(S,N){return sn.apply(this,arguments)}function sn(){return(sn=(0,z.Z)(function*(S,N){const L=Z1(S),ne=(yield fn()).transaction(g1,"readwrite");return yield ne.objectStore(g1).put(N,L),yield ne.complete,N})).apply(this,arguments)}function jo(S){return Va.apply(this,arguments)}function Va(){return(Va=(0,z.Z)(function*(S){const N=Z1(S),U=(yield fn()).transaction(g1,"readwrite");yield U.objectStore(g1).delete(N),yield U.complete})).apply(this,arguments)}function Z1({appConfig:S}){return S.appId}const Xn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function C1(S,N){return _1.apply(this,arguments)}function _1(){return(_1=(0,z.Z)(function*(S,N){const L=yield z2(S),U=dt(N),ne={method:"POST",headers:L,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(Un(S.appConfig),ne)).json()}catch(Ne){throw Xn.create("token-subscribe-failed",{errorInfo:Ne})}if(le.error)throw Xn.create("token-subscribe-failed",{errorInfo:le.error.message});if(!le.token)throw Xn.create("token-subscribe-no-token");return le.token})).apply(this,arguments)}function Ti(S,N){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,z.Z)(function*(S,N){const L=yield z2(S),U=dt(N.subscriptionOptions),ne={method:"PATCH",headers:L,body:JSON.stringify(U)};let le;try{le=yield(yield fetch(`${Un(S.appConfig)}/${N.token}`,ne)).json()}catch(Ne){throw Xn.create("token-update-failed",{errorInfo:Ne})}if(le.error)throw Xn.create("token-update-failed",{errorInfo:le.error.message});if(!le.token)throw Xn.create("token-update-no-token");return le.token})).apply(this,arguments)}function Ra(S,N){return F1.apply(this,arguments)}function F1(){return(F1=(0,z.Z)(function*(S,N){const U={method:"DELETE",headers:yield z2(S)};try{const le=yield(yield fetch(`${Un(S.appConfig)}/${N}`,U)).json();if(le.error)throw Xn.create("token-unsubscribe-failed",{errorInfo:le.error.message})}catch(ne){throw Xn.create("token-unsubscribe-failed",{errorInfo:ne})}})).apply(this,arguments)}function Un({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function z2(S){return H2.apply(this,arguments)}function H2(){return(H2=(0,z.Z)(function*({appConfig:S,installations:N}){const L=yield N.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function dt({p256dh:S,auth:N,endpoint:L,vapidKey:U}){const ne={web:{endpoint:L,auth:N,p256dh:S}};return U!==P2&&(ne.web.applicationPubKey=U),ne}const za=6048e5;function yc(S){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,z.Z)(function*(S){const N=yield Ba(S.swRegistration,S.vapidKey),L={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:N.endpoint,auth:ws(N.getKey("auth")),p256dh:ws(N.getKey("p256dh"))},U=yield Fc(S.firebaseDependencies);if(U){if(ja(U.subscriptionOptions,L))return Date.now()>=U.createTime+za?e4(S,{token:U.token,createTime:Date.now(),subscriptionOptions:L}):U.token;try{yield Ra(S.firebaseDependencies,U.token)}catch(ne){console.warn(ne)}return xe(S.firebaseDependencies,L)}return xe(S.firebaseDependencies,L)})).apply(this,arguments)}function vc(S){return B2.apply(this,arguments)}function B2(){return(B2=(0,z.Z)(function*(S){const N=yield Fc(S.firebaseDependencies);N&&(yield Ra(S.firebaseDependencies,N.token),yield jo(S.firebaseDependencies));const L=yield S.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()})).apply(this,arguments)}function e4(S,N){return Os.apply(this,arguments)}function Os(){return(Os=(0,z.Z)(function*(S,N){try{const L=yield Ti(S.firebaseDependencies,N),U=Object.assign(Object.assign({},N),{token:L,createTime:Date.now()});return yield Xr(S.firebaseDependencies,U),L}catch(L){throw yield vc(S),L}})).apply(this,arguments)}function xe(S,N){return At.apply(this,arguments)}function At(){return(At=(0,z.Z)(function*(S,N){const U={token:yield C1(S,N),createTime:Date.now(),subscriptionOptions:N};return yield Xr(S,U),U.token})).apply(this,arguments)}function Ba(S,N){return gn.apply(this,arguments)}function gn(){return(gn=(0,z.Z)(function*(S,N){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:m1(N)})})).apply(this,arguments)}function ja(S,N){return N.vapidKey===S.vapidKey&&N.endpoint===S.endpoint&&N.auth===S.auth&&N.p256dh===S.p256dh}function Es(S){const N={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function(S,N){if(!N.notification)return;S.notification={};const L=N.notification.title;L&&(S.notification.title=L);const U=N.notification.body;U&&(S.notification.body=U);const ne=N.notification.image;ne&&(S.notification.image=ne)}(N,S),function(S,N){!N.data||(S.data=N.data)}(N,S),function(S,N){if(!N.fcmOptions)return;S.fcmOptions={};const L=N.fcmOptions.link;L&&(S.fcmOptions.link=L);const U=N.fcmOptions.analytics_label;U&&(S.fcmOptions.analyticsLabel=U)}(N,S),N}function wc(S){return"object"==typeof S&&!!S&&vs in S}function t4(S,N){const L=[];for(let U=0;U<S.length;U++)L.push(S.charAt(U)),U<N.length&&L.push(N.charAt(U));return L.join("")}function qo(S){return Xn.create("missing-app-config-values",{valueName:S})}t4("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),t4("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Gn{constructor(N,L,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function(S){if(!S||!S.options)throw qo("App Configuration Object");if(!S.name)throw qo("App Name");const N=["projectId","apiKey","appId","messagingSenderId"],{options:L}=S;for(const U of N)if(!L[U])throw qo(U);return{appName:S.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(N);this.firebaseDependencies={app:N,appConfig:ne,installations:L,analyticsProvider:U}}_delete(){return Promise.resolve()}}function kr(S){return U2.apply(this,arguments)}function U2(){return(U2=(0,z.Z)(function*(S){try{S.swRegistration=yield navigator.serviceWorker.register(L2,{scope:J6}),S.swRegistration.update().catch(()=>{})}catch(N){throw Xn.create("failed-service-worker-registration",{browserErrorMessage:N.message})}})).apply(this,arguments)}function xr(S,N){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,z.Z)(function*(S,N){if(!N&&!S.swRegistration&&(yield kr(S)),N||!S.swRegistration){if(!(N instanceof ServiceWorkerRegistration))throw Xn.create("invalid-sw-registration");S.swRegistration=N}})).apply(this,arguments)}function n4(S,N){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,z.Z)(function*(S,N){N?S.vapidKey=N:S.vapidKey||(S.vapidKey=P2)})).apply(this,arguments)}function i4(){return(i4=(0,z.Z)(function*(S,N){if(!navigator)throw Xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xn.create("permission-blocked");return yield n4(S,null==N?void 0:N.vapidKey),yield xr(S,null==N?void 0:N.serviceWorkerRegistration),yc(S)})).apply(this,arguments)}function q2(S,N,L){return $2.apply(this,arguments)}function $2(){return($2=(0,z.Z)(function*(S,N,L){const U=Ga(N);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:L[vs],message_name:L[V2],message_time:L[Ei],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ga(S){switch(S){case Bi.NOTIFICATION_CLICKED:return"notification_open";case Bi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wo(){return(Wo=(0,z.Z)(function*(S,N){const L=N.data;if(!L.isFirebaseMessaging)return;S.onMessageHandler&&L.messageType===Bi.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Es(L)):S.onMessageHandler.next(Es(L)));const U=L.data;wc(U)&&"1"===U[O2]&&(yield q2(S,L.messageType,U))})).apply(this,arguments)}const r4="@firebase/messaging";function Mc(){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,z.Z)(function*(){try{yield(0,ae.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,pe._registerComponent)(new ee.wA("messaging",S=>{const N=new Gn(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function(S,N){return Wo.apply(this,arguments)}(N,L)),N},"PUBLIC")),(0,pe._registerComponent)(new ee.wA("messaging-internal",S=>{const N=S.getProvider("messaging").getImmediate();return{getToken:U=>function(S,N){return i4.apply(this,arguments)}(N,U)}},"PRIVATE")),(0,pe.registerVersion)(r4,"0.9.8"),(0,pe.registerVersion)(r4,"0.9.8","esm2017");const Ko="analytics",Du="firebase_id",y1="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",W2="https://www.googletagmanager.com/gtag/js",Pn=new Ce.Yd("@firebase/analytics");function c4(S){return Promise.all(S.map(N=>N.catch(L=>L)))}function ku(S,N){const L=document.createElement("script");L.src=`${W2}?l=${S}&id=${N}`,L.async=!0,document.head.appendChild(L)}function Yo(S,N,L,U,ne,le){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,z.Z)(function*(S,N,L,U,ne,le){const Ne=U[ne];try{if(Ne)yield N[Ne];else{const We=(yield c4(L)).find(Ht=>Ht.measurementId===ne);We&&(yield N[We.appId])}}catch(je){Pn.error(je)}S("config",ne,le)})).apply(this,arguments)}function Qo(S,N,L,U,ne){return v1.apply(this,arguments)}function v1(){return(v1=(0,z.Z)(function*(S,N,L,U,ne){try{let le=[];if(ne&&ne.send_to){let Ne=ne.send_to;Array.isArray(Ne)||(Ne=[Ne]);const je=yield c4(L);for(const We of Ne){const Ht=je.find($n=>$n.measurementId===We),pn=Ht&&N[Ht.appId];if(!pn){le=[];break}le.push(pn)}}0===le.length&&(le=Object.values(N)),yield Promise.all(le),S("event",U,ne||{})}catch(le){Pn.error(le)}})).apply(this,arguments)}function e5(){const S=window.document.getElementsByTagName("script");for(const N of Object.values(S))if(N.src&&N.src.includes(W2))return N;return null}const es=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$a=new class{constructor(N={},L=1e3){this.throttleMetadata=N,this.intervalMillis=L}getThrottleMetadata(N){return this.throttleMetadata[N]}setThrottleMetadata(N,L){this.throttleMetadata[N]=L}deleteThrottleMetadata(N){delete this.throttleMetadata[N]}};function Nu(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function d4(S){return w1.apply(this,arguments)}function w1(){return(w1=(0,z.Z)(function*(S){var N;const{appId:L,apiKey:U}=S,ne={method:"GET",headers:Nu(U)},le=y1.replace("{app-id}",L),Ne=yield fetch(le,ne);if(200!==Ne.status&&304!==Ne.status){let je="";try{const We=yield Ne.json();(null===(N=We.error)||void 0===N?void 0:N.message)&&(je=We.error.message)}catch(We){}throw es.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:je})}return Ne.json()})).apply(this,arguments)}function kc(S){return pr.apply(this,arguments)}function pr(){return(pr=(0,z.Z)(function*(S,N=$a,L){const{appId:U,apiKey:ne,measurementId:le}=S.options;if(!U)throw es.create("no-app-id");if(!ne){if(le)return{measurementId:le,appId:U};throw es.create("no-api-key")}const Ne=N.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Tu;return setTimeout((0,z.Z)(function*(){je.abort()}),void 0!==L?L:6e4),Z2({appId:U,apiKey:ne,measurementId:le},Ne,je,N)})).apply(this,arguments)}function Z2(S,N,L){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,z.Z)(function*(S,{throttleEndTimeMillis:N,backoffCount:L},U,ne=$a){const{appId:le,measurementId:Ne}=S;try{yield hh(U,N)}catch(je){if(Ne)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${je.message}]`),{appId:le,measurementId:Ne};throw je}try{const je=yield d4(S);return ne.deleteThrottleMetadata(le),je}catch(je){if(!xc(je)){if(ne.deleteThrottleMetadata(le),Ne)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${je.message}]`),{appId:le,measurementId:Ne};throw je}const We=503===Number(je.customData.httpStatus)?(0,ae.$s)(L,ne.intervalMillis,30):(0,ae.$s)(L,ne.intervalMillis),Ht={throttleEndTimeMillis:Date.now()+We,backoffCount:L+1};return ne.setThrottleMetadata(le,Ht),Pn.debug(`Calling attemptFetch again in ${We} millis`),Z2(S,Ht,U,ne)}})).apply(this,arguments)}function hh(S,N){return new Promise((L,U)=>{const ne=Math.max(N-Date.now(),0),le=setTimeout(L,ne);S.addEventListener(()=>{clearTimeout(le),U(es.create("fetch-throttle",{throttleEndTimeMillis:N}))})})}function xc(S){if(!(S instanceof ae.ZR&&S.customData))return!1;const N=Number(S.customData.httpStatus);return 429===N||500===N||503===N||504===N}class Tu{constructor(){this.listeners=[]}addEventListener(N){this.listeners.push(N)}abort(){this.listeners.forEach(N=>N())}}function Nc(){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,z.Z)(function*(){if(!(0,ae.hl)())return Pn.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(S){return Pn.warn(es.create("indexeddb-unavailable",{errorInfo:S}).message),!1}return!0})).apply(this,arguments)}function Q1(){return(Q1=(0,z.Z)(function*(S,N,L,U,ne,le,Ne){var je;const We=kc(S);We.then(di=>{L[di.measurementId]=di.appId,S.options.measurementId&&di.measurementId!==S.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${di.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(di=>Pn.error(di)),N.push(We);const Ht=Nc().then(di=>{if(di)return U.getId()}),[pn,$n]=yield Promise.all([We,Ht]);e5()||ku(le,pn.measurementId),ne("js",new Date);const Xi=null!==(je=null==Ne?void 0:Ne.config)&&void 0!==je?je:{};return Xi.origin="firebase",Xi.update=!0,null!=$n&&(Xi[Du]=$n),ne("config",pn.measurementId,Xi),pn.measurementId})).apply(this,arguments)}class cn{constructor(N){this.app=N}_delete(){return delete $e[this.app.options.appId],Promise.resolve()}}let $e={},nn=[];const h4={};let Y2,yn,ln="dataLayer",Za=!1;function ei(S,N,L){!function(){const S=[];if((0,ae.ru)()&&S.push("This is a browser extension environment."),(0,ae.zI)()||S.push("Cookies are not available."),S.length>0){const N=S.map((U,ne)=>`(${ne+1}) ${U}`).join(" "),L=es.create("invalid-analytics-context",{errorInfo:N});Pn.warn(L.message)}}();const U=S.options.appId;if(!U)throw es.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw es.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$e[U])throw es.create("already-exists",{id:U});if(!Za){!function(S){let N=[];Array.isArray(window[S])?N=window[S]:window[S]=N}(ln);const{wrappedGtag:le,gtagCore:Ne}=function(S,N,L,U,ne){let le=function(...Ne){window[U].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(le=window[ne]),window[ne]=function(S,N,L,U){function le(){return(le=(0,z.Z)(function*(Ne,je,We){try{"event"===Ne?yield Qo(S,N,L,je,We):"config"===Ne?yield Yo(S,N,L,U,je,We):S("set",je)}catch(Ht){Pn.error(Ht)}})).apply(this,arguments)}return function(Ne,je,We){return le.apply(this,arguments)}}(le,S,N,L),{gtagCore:le,wrappedGtag:window[ne]}}($e,nn,h4,ln,"gtag");yn=le,Y2=Ne,Za=!0}return $e[U]=function(S,N,L,U,ne,le,Ne){return Q1.apply(this,arguments)}(S,nn,h4,N,Y2,ln,L),new cn(S)}function Ka(){return(Ka=(0,z.Z)(function*(S,N,L,U,ne){if(ne&&ne.global)S("event",L,U);else{const le=yield N;S("event",L,Object.assign(Object.assign({},U),{send_to:le}))}})).apply(this,arguments)}function ns(){return X2.apply(this,arguments)}function X2(){return(X2=(0,z.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(S){return!1}})).apply(this,arguments)}const Ac="@firebase/analytics";(0,pe._registerComponent)(new ee.wA(Ko,(N,{options:L})=>ei(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,pe._registerComponent)(new ee.wA("analytics-internal",function(N){try{const L=N.getProvider(Ko).getImmediate();return{logEvent:(U,ne,le)=>function(S,N,L,U){S=(0,ae.m9)(S),function(S,N,L,U,ne){return Ka.apply(this,arguments)}(yn,$e[S.app.options.appId],N,L,U).catch(ne=>Pn.error(ne))}(L,U,ne,le)}}catch(L){throw es.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,pe.registerVersion)(Ac,"0.7.5"),(0,pe.registerVersion)(Ac,"0.7.5","esm2017");var fh=B(7771),ea=B(3637),p4=B(3342),eo=B(309),r5=B(3101);const Ic=new l.GfV("7.2.1"),Tr="__angularfire_symbol__analyticsIsSupportedValue",m4="__angularfire_symbol__analyticsIsSupported",M1="__angularfire_symbol__remoteConfigIsSupportedValue",S1="__angularfire_symbol__remoteConfigIsSupported",Vn="__angularfire_symbol__messagingIsSupportedValue",js="__angularfire_symbol__messagingIsSupported";function Ms(S,N,L){if(N){if(1===N.length)return N[0];const le=N.filter(Ne=>Ne.app===L);if(1===le.length)return le[0]}return L.container.getProvider(S).getImmediate({optional:!0})}globalThis[m4]||(globalThis[m4]=ns().then(S=>globalThis[Tr]=S).catch(()=>globalThis[Tr]=!1)),globalThis[js]||(globalThis[js]=Mc().then(S=>globalThis[Vn]=S).catch(()=>globalThis[Vn]=!1)),globalThis[S1]||(globalThis[S1]=J3().then(S=>globalThis[M1]=S).catch(()=>globalThis[M1]=!1));const ta=(S,N)=>{const L=N?[N]:(0,se.C6)(),U=[];return L.forEach(ne=>{ne.container.getProvider(S).instances.forEach(Ne=>{U.includes(Ne)||U.push(Ne)})}),U};function Ar(){}class Us{constructor(N,L=fh.N){this.zone=N,this.delegate=L}now(){return this.delegate.now()}schedule(N,L,U){const ne=this.zone;return this.delegate.schedule(function(Ne){ne.runGuarded(()=>{N.apply(this,[Ne])})},L,U)}}class Pc{constructor(N){this.zone=N,this.task=null}call(N,L){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ar,{},Ar,Ar)),L.pipe((0,p4.b)({next:U,complete:U,error:U})).subscribe(N).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let g4=(()=>{class S{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new Us(Zone.current)),this.insideAngular=L.run(()=>new Us(Zone.current,ea.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function(L){return new(L||S)(l.LFG(l.R0b))},S.\u0275prov=l.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function to(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Xa(S){return S.pipe((0,eo.QV)(to().outsideAngular))}function Rn(S){return to(),function(S){return function(L){return(L=L.lift(new Pc(S.ngZone))).pipe((0,r5.R)(S.outsideAngular),(0,eo.QV)(S.insideAngular))}}(to())(S)}},3854:(it,ke,B)=>{"use strict";B.d(ke,{BH:()=>de,LL:()=>tt,ZR:()=>qt,gQ:()=>Te,zI:()=>_t,hu:()=>se,g5:()=>z,US:()=>ee,tV:()=>ie,h$:()=>Ce,$s:()=>an,r3:()=>Fn,Sg:()=>me,ne:()=>yi,p$:()=>H,vZ:()=>$t,ZB:()=>G,gK:()=>st,pd:()=>Fs,m9:()=>Z3,z$:()=>Se,GJ:()=>_s,jU:()=>oe,ru:()=>ge,d:()=>Ie,xb:()=>An,w1:()=>et,hl:()=>Tn,uI:()=>we,UG:()=>_e,Yr:()=>jt,b$:()=>Ee,G6:()=>xt,Mn:()=>Lt,w9:()=>h1,cI:()=>Ls,UI:()=>si,xO:()=>Po,zd:()=>Zr,DV:()=>Lo,ug:()=>tn,dS:()=>Zi,Pz:()=>N2,Dv:()=>Wi,Wj:()=>Pt,lb:()=>Vt,eu:()=>Nt});const se=function(Y,q){if(!Y)throw z(q)},z=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},pe=function(Y){const q=[];let Q=0;for(let De=0;De<Y.length;De++){let ce=Y.charCodeAt(De);ce<128?q[Q++]=ce:ce<2048?(q[Q++]=ce>>6|192,q[Q++]=63&ce|128):55296==(64512&ce)&&De+1<Y.length&&56320==(64512&Y.charCodeAt(De+1))?(ce=65536+((1023&ce)<<10)+(1023&Y.charCodeAt(++De)),q[Q++]=ce>>18|240,q[Q++]=ce>>12&63|128,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128):(q[Q++]=ce>>12|224,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128)}return q},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,q){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ce=0;ce<Y.length;ce+=3){const Ge=Y[ce],vt=ce+1<Y.length,Wt=vt?Y[ce+1]:0,Hn=ce+2<Y.length,Bn=Hn?Y[ce+2]:0;let xi=(15&Wt)<<2|Bn>>6,j1=63&Bn;Hn||(j1=64,vt||(xi=64)),De.push(Q[Ge>>2],Q[(3&Ge)<<4|Wt>>4],Q[xi],Q[j1])}return De.join("")},encodeString(Y,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(Y):this.encodeByteArray(pe(Y),q)},decodeString(Y,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(Y):function(Y){const q=[];let Q=0,De=0;for(;Q<Y.length;){const ce=Y[Q++];if(ce<128)q[De++]=String.fromCharCode(ce);else if(ce>191&&ce<224){const Ge=Y[Q++];q[De++]=String.fromCharCode((31&ce)<<6|63&Ge)}else if(ce>239&&ce<365){const Hn=((7&ce)<<18|(63&Y[Q++])<<12|(63&Y[Q++])<<6|63&Y[Q++])-65536;q[De++]=String.fromCharCode(55296+(Hn>>10)),q[De++]=String.fromCharCode(56320+(1023&Hn))}else{const Ge=Y[Q++],vt=Y[Q++];q[De++]=String.fromCharCode((15&ce)<<12|(63&Ge)<<6|63&vt)}}return q.join("")}(this.decodeStringToByteArray(Y,q))},decodeStringToByteArray(Y,q){this.init_();const Q=q?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ce=0;ce<Y.length;){const Ge=Q[Y.charAt(ce++)],Wt=ce<Y.length?Q[Y.charAt(ce)]:0;++ce;const Bn=ce<Y.length?Q[Y.charAt(ce)]:64;++ce;const Ut=ce<Y.length?Q[Y.charAt(ce)]:64;if(++ce,null==Ge||null==Wt||null==Bn||null==Ut)throw Error();De.push(Ge<<2|Wt>>4),64!==Bn&&(De.push(Wt<<4&240|Bn>>2),64!==Ut&&De.push(Bn<<6&192|Ut))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},Ce=function(Y){const q=pe(Y);return ee.encodeByteArray(q,!0)},te=function(Y){return Ce(Y).replace(/\./g,"")},ie=function(Y){try{return ee.decodeString(Y,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function H(Y){return G(void 0,Y)}function G(Y,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return q}for(const Q in q)!q.hasOwnProperty(Q)||!W(Q)||(Y[Q]=G(Y[Q],q[Q]));return Y}function W(Y){return"__proto__"!==Y}class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,Q)=>{this.resolve=q,this.reject=Q})}wrapCallback(q){return(Q,De)=>{Q?this.reject(Q):this.resolve(De),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(Q):q(Q,De))}}}function me(Y,q){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=q||"demo-project",ce=Y.iat||0,Ge=Y.sub||Y.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ce,exp:ce+3600,auth_time:ce,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(vt)),""].join(".")}function Se(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function we(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Y){return!1}}function oe(){return"object"==typeof self&&self.self===self}function ge(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ie(){return Se().indexOf("Electron/")>=0}function et(){const Y=Se();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Lt(){return Se().indexOf("MSAppHost/")>=0}function jt(){return!1}function xt(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tn(){return"object"==typeof indexedDB}function Nt(){return new Promise((Y,q)=>{try{let Q=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ce=self.indexedDB.open(De);ce.onsuccess=()=>{ce.result.close(),Q||self.indexedDB.deleteDatabase(De),Y(!0)},ce.onupgradeneeded=()=>{Q=!1},ce.onerror=()=>{var Ge;q((null===(Ge=ce.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(Q){q(Q)}})}function _t(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class qt extends Error{constructor(q,Q,De){super(Q),this.code=q,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(q,Q,De){this.service=q,this.serviceName=Q,this.errors=De}create(q,...Q){const De=Q[0]||{},ce=`${this.service}/${q}`,Ge=this.errors[q],vt=Ge?function(Y,q){return Y.replace(d1,(Q,De)=>{const ce=q[De];return null!=ce?String(ce):`<${De}?>`})}(Ge,De):"Error";return new qt(ce,`${this.serviceName}: ${vt} (${ce}).`,De)}}const d1=/\{\$([^}]+)}/g;function Ls(Y){return JSON.parse(Y)}function N2(Y){return JSON.stringify(Y)}const Qt=function(Y){let q={},Q={},De={},ce="";try{const Ge=Y.split(".");q=Ls(ie(Ge[0])||""),Q=Ls(ie(Ge[1])||""),ce=Ge[2],De=Q.d||{},delete Q.d}catch(Ge){}return{header:q,claims:Q,data:De,signature:ce}},h1=function(Y){const Q=Qt(Y).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},_s=function(Y){const q=Qt(Y).claims;return"object"==typeof q&&!0===q.admin};function Fn(Y,q){return Object.prototype.hasOwnProperty.call(Y,q)}function Lo(Y,q){if(Object.prototype.hasOwnProperty.call(Y,q))return Y[q]}function An(Y){for(const q in Y)if(Object.prototype.hasOwnProperty.call(Y,q))return!1;return!0}function si(Y,q,Q){const De={};for(const ce in Y)Object.prototype.hasOwnProperty.call(Y,ce)&&(De[ce]=q.call(Q,Y[ce],ce,Y));return De}function $t(Y,q){if(Y===q)return!0;const Q=Object.keys(Y),De=Object.keys(q);for(const ce of Q){if(!De.includes(ce))return!1;const Ge=Y[ce],vt=q[ce];if(In(Ge)&&In(vt)){if(!$t(Ge,vt))return!1}else if(Ge!==vt)return!1}for(const ce of De)if(!Q.includes(ce))return!1;return!0}function In(Y){return null!==Y&&"object"==typeof Y}function Po(Y){const q=[];for(const[Q,De]of Object.entries(Y))Array.isArray(De)?De.forEach(ce=>{q.push(encodeURIComponent(Q)+"="+encodeURIComponent(ce))}):q.push(encodeURIComponent(Q)+"="+encodeURIComponent(De));return q.length?"&"+q.join("&"):""}function Zr(Y){const q={};return Y.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ce,Ge]=De.split("=");q[decodeURIComponent(ce)]=decodeURIComponent(Ge)}}),q}function Fs(Y){const q=Y.indexOf("?");if(!q)return"";const Q=Y.indexOf("#",q);return Y.substring(q,Q>0?Q:void 0)}class Te{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,Q){Q||(Q=0);const De=this.W_;if("string"==typeof q)for(let Ut=0;Ut<16;Ut++)De[Ut]=q.charCodeAt(Q)<<24|q.charCodeAt(Q+1)<<16|q.charCodeAt(Q+2)<<8|q.charCodeAt(Q+3),Q+=4;else for(let Ut=0;Ut<16;Ut++)De[Ut]=q[Q]<<24|q[Q+1]<<16|q[Q+2]<<8|q[Q+3],Q+=4;for(let Ut=16;Ut<80;Ut++){const xi=De[Ut-3]^De[Ut-8]^De[Ut-14]^De[Ut-16];De[Ut]=4294967295&(xi<<1|xi>>>31)}let Bn,Ri,ce=this.chain_[0],Ge=this.chain_[1],vt=this.chain_[2],Wt=this.chain_[3],Hn=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(Bn=Wt^Ge&(vt^Wt),Ri=1518500249):(Bn=Ge^vt^Wt,Ri=1859775393):Ut<60?(Bn=Ge&vt|Wt&(Ge|vt),Ri=2400959708):(Bn=Ge^vt^Wt,Ri=3395469782);const xi=(ce<<5|ce>>>27)+Bn+Hn+Ri+De[Ut]&4294967295;Hn=Wt,Wt=vt,vt=4294967295&(Ge<<30|Ge>>>2),Ge=ce,ce=xi}this.chain_[0]=this.chain_[0]+ce&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+Wt&4294967295,this.chain_[4]=this.chain_[4]+Hn&4294967295}update(q,Q){if(null==q)return;void 0===Q&&(Q=q.length);const De=Q-this.blockSize;let ce=0;const Ge=this.buf_;let vt=this.inbuf_;for(;ce<Q;){if(0===vt)for(;ce<=De;)this.compress_(q,ce),ce+=this.blockSize;if("string"==typeof q){for(;ce<Q;)if(Ge[vt]=q.charCodeAt(ce),++vt,++ce,vt===this.blockSize){this.compress_(Ge),vt=0;break}}else for(;ce<Q;)if(Ge[vt]=q[ce],++vt,++ce,vt===this.blockSize){this.compress_(Ge),vt=0;break}}this.inbuf_=vt,this.total_+=Q}digest(){const q=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ce=this.blockSize-1;ce>=56;ce--)this.buf_[ce]=255&Q,Q/=256;this.compress_(this.buf_);let De=0;for(let ce=0;ce<5;ce++)for(let Ge=24;Ge>=0;Ge-=8)q[De]=this.chain_[ce]>>Ge&255,++De;return q}}function yi(Y,q){const Q=new Jn(Y,q);return Q.subscribe.bind(Q)}class Jn{constructor(q,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{q(this)}).catch(De=>{this.error(De)})}next(q){this.forEachObserver(Q=>{Q.next(q)})}error(q){this.forEachObserver(Q=>{Q.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,Q,De){let ce;if(void 0===q&&void 0===Q&&void 0===De)throw new Error("Missing Observer.");ce=function(Y,q){if("object"!=typeof Y||null===Y)return!1;for(const Q of["next","error","complete"])if(Q in Y&&"function"==typeof Y[Q])return!0;return!1}(q)?q:{next:q,error:Q,complete:De},void 0===ce.next&&(ce.next=Kr),void 0===ce.error&&(ce.error=Kr),void 0===ce.complete&&(ce.complete=Kr);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ce.error(this.finalError):ce.complete()}catch(vt){}}),this.observers.push(ce),Ge}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,q)}sendOne(q,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{Q(this.observers[q])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kr(){}const Wi=function(Y,q,Q,De){let ce;if(De<q?ce="at least "+q:De>Q&&(ce=0===Q?"none":"no more than "+Q),ce)throw new Error(Y+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+ce+".")};function st(Y,q){return`${Y} failed: ${q} argument `}function Pt(Y,q,Q,De){if((!De||Q)&&"function"!=typeof Q)throw new Error(st(Y,q)+"must be a valid function.")}function Vt(Y,q,Q,De){if((!De||Q)&&("object"!=typeof Q||null===Q))throw new Error(st(Y,q)+"must be a valid context object.")}const Zi=function(Y){const q=[];let Q=0;for(let De=0;De<Y.length;De++){let ce=Y.charCodeAt(De);if(ce>=55296&&ce<=56319){const Ge=ce-55296;De++,se(De<Y.length,"Surrogate pair missing trail surrogate."),ce=65536+(Ge<<10)+(Y.charCodeAt(De)-56320)}ce<128?q[Q++]=ce:ce<2048?(q[Q++]=ce>>6|192,q[Q++]=63&ce|128):ce<65536?(q[Q++]=ce>>12|224,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128):(q[Q++]=ce>>18|240,q[Q++]=ce>>12&63|128,q[Q++]=ce>>6&63|128,q[Q++]=63&ce|128)}return q},tn=function(Y){let q=0;for(let Q=0;Q<Y.length;Q++){const De=Y.charCodeAt(Q);De<128?q++:De<2048?q+=2:De>=55296&&De<=56319?(q+=4,Q++):q+=3}return q};function an(Y,q=1e3,Q=2){const De=q*Math.pow(Q,Y),ce=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+ce)}function Z3(Y){return Y&&Y._delegate?Y._delegate:Y}},2329:(it,ke,B)=>{"use strict";B.d(ke,{Mq:()=>l.getApp,C6:()=>l.getApps});var l=B(8026);(0,l.registerVersion)("firebase","9.6.7","app")},7841:(it,ke,B)=>{"use strict";B.d(ke,{Z:()=>l.Z});var l=B(3394);l.Z.registerVersion("firebase","9.6.7","app-compat")},8426:(it,ke,B)=>{"use strict";B.r(ke);var l=B(8239),se=B(3394),z=B(3854),pe=B(8026);function te(y,g){var C={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&g.indexOf(w)<0&&(C[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(w=Object.getOwnPropertySymbols(y);x<w.length;x++)g.indexOf(w[x])<0&&Object.prototype.propertyIsEnumerable.call(y,w[x])&&(C[w[x]]=y[w[x]])}return C}var qt=B(5422),tt=B(3910);const h1=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_s=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fn=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),An=new qt.Yd("@firebase/auth");function si(y,...g){An.logLevel<=qt.in.ERROR&&An.error(`Auth (${pe.SDK_VERSION}): ${y}`,...g)}function $t(y,...g){throw Fs(y,...g)}function In(y,...g){return Fs(y,...g)}function Po(y,g,C){const w=Object.assign(Object.assign({},_s()),{[g]:C});return new z.LL("auth","Firebase",w).create(g,{appName:y.name})}function Zr(y,g,C){if(!(g instanceof C))throw C.name!==g.constructor.name&&$t(y,"argument-error"),Po(y,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fs(y,...g){if("string"!=typeof y){const C=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(C,...w)}return Fn.create(y,...g)}function Te(y,g,...C){if(!y)throw Fs(g,...C)}function yi(y){const g="INTERNAL ASSERTION FAILED: "+y;throw si(g),new Error(g)}function Jn(y,g){y||yi(g)}const Qe=new Map;function Xt(y){Jn(y instanceof Function,"Expected a class definition");let g=Qe.get(y);return g?(Jn(g instanceof y,"Instance stored in cache mismatched with class"),g):(g=new y,Qe.set(y,g),g)}function st(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===Pt()||"https:"===Pt()}function Pt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class tn{constructor(g,C){this.shortDelay=g,this.longDelay=C,Jn(C>g,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,z.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function He(y,g){Jn(y.emulator,"Emulator should always be set here");const{url:C}=y.emulator;return g?`${C}${g.startsWith("/")?g.slice(1):g}`:C}class ot{static initialize(g,C,w){this.fetchImpl=g,C&&(this.headersImpl=C),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const W3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},f1=new tn(3e4,6e4);function an(y,g){return y.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:y.tenantId}):g}function yt(y,g,C,w){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,l.Z)(function*(y,g,C,w,x={}){return Z3(y,x,(0,l.Z)(function*(){let I={},Z={};w&&("GET"===g?Z=w:I={body:JSON.stringify(w)});const ue=(0,z.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Oe=yield y._getAdditionalHeaders();return Oe["Content-Type"]="application/json",y.languageCode&&(Oe["X-Firebase-Locale"]=y.languageCode),ot.fetch()(De(y,y.config.apiHost,C,ue),Object.assign({method:g,headers:Oe,referrerPolicy:"no-referrer"},I))}))})).apply(this,arguments)}function Z3(y,g,C){return Y.apply(this,arguments)}function Y(){return(Y=(0,l.Z)(function*(y,g,C){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},W3),g);try{const x=new ce(y),I=yield Promise.race([C(),x.promise]);x.clearNetworkTimeout();const Z=yield I.json();if("needConfirmation"in Z)throw Ge(y,"account-exists-with-different-credential",Z);if(I.ok&&!("errorMessage"in Z))return Z;{const ue=I.ok?Z.errorMessage:Z.error.message,[Oe,Pe]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw Ge(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Oe)throw Ge(y,"email-already-in-use",Z);const qe=w[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(Pe)throw Po(y,qe,Pe);$t(y,qe)}}catch(x){if(x instanceof z.ZR)throw x;$t(y,"network-request-failed")}})).apply(this,arguments)}function q(y,g,C,w){return Q.apply(this,arguments)}function Q(){return(Q=(0,l.Z)(function*(y,g,C,w,x={}){const I=yield yt(y,g,C,w,x);return"mfaPendingCredential"in I&&$t(y,"multi-factor-auth-required",{_serverResponse:I}),I})).apply(this,arguments)}function De(y,g,C,w){const x=`${g}${C}?${w}`;return y.config.emulator?He(y.config,x):`${y.config.apiScheme}://${x}`}class ce{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((C,w)=>{this.timer=setTimeout(()=>w(In(this.auth,"network-request-failed")),f1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ge(y,g,C){const w={appName:y.name};C.email&&(w.email=C.email),C.phoneNumber&&(w.phoneNumber=C.phoneNumber);const x=In(y,g,w);return x.customData._tokenResponse=C,x}function Wt(){return(Wt=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Hn(y,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ri(y,g){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function xi(y){if(y)try{const g=new Date(Number(y));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function U1(){return(U1=(0,l.Z)(function*(y,g=!1){const C=(0,z.m9)(y),w=yield C.getIdToken(g),x=G1(w);Te(x&&x.exp&&x.auth_time&&x.iat,C.auth,"internal-error");const I="object"==typeof x.firebase?x.firebase:void 0,Z=null==I?void 0:I.sign_in_provider;return{claims:x,token:w,authTime:xi(Ta(x.auth_time)),issuedAtTime:xi(Ta(x.iat)),expirationTime:xi(Ta(x.exp)),signInProvider:Z||null,signInSecondFactor:(null==I?void 0:I.sign_in_second_factor)||null}})).apply(this,arguments)}function Ta(y){return 1e3*Number(y)}function G1(y){const[g,C,w]=y.split(".");if(void 0===g||void 0===C||void 0===w)return si("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,z.tV)(C);return x?JSON.parse(x):(si("Failed to decode base64 JWT payload"),null)}catch(x){return si("Caught error parsing JWT payload as JSON",x),null}}function Er(y,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,l.Z)(function*(y,g,C=!1){if(C)return g;try{return yield g}catch(w){throw w instanceof z.ZR&&lr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function lr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Yr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var C;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const x=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var C=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield C.iteration()}),w)}iteration(){var g=this;return(0,l.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===C.code&&g.schedule(!0))}g.schedule()})()}}class Mr{constructor(g,C){this.createdAt=g,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=xi(this.lastLoginAt),this.creationTime=xi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function q1(y){return zi.apply(this,arguments)}function zi(){return(zi=(0,l.Z)(function*(y){var g;const C=y.auth,w=yield y.getIdToken(),x=yield Er(y,Ri(C,{idToken:w}));Te(null==x?void 0:x.users.length,C,"internal-error");const I=x.users[0];y._notifyReloadListener(I);const Z=(null===(g=I.providerUserInfo)||void 0===g?void 0:g.length)?Yi(I.providerUserInfo):[],ue=dn(y.providerData,Z),qe=!!y.isAnonymous&&!(y.email&&I.passwordHash||(null==ue?void 0:ue.length)),Ze={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:ue,metadata:new Mr(I.createdAt,I.lastLoginAt),isAnonymous:qe};Object.assign(y,Ze)})).apply(this,arguments)}function Tt(){return(Tt=(0,l.Z)(function*(y){const g=(0,z.m9)(y);yield q1(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function dn(y,g){return[...y.filter(w=>!g.some(x=>x.providerId===w.providerId)),...g]}function Yi(y){return y.map(g=>{var{providerId:C}=g,w=te(g,["providerId"]);return{providerId:C,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function jn(){return(jn=(0,l.Z)(function*(y,g){const C=yield Z3(y,{},(0,l.Z)(function*(){const w=(0,z.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:I}=y.config,Z=De(y,x,"/v1/token",`key=${I}`),ue=yield y._getAdditionalHeaders();return ue["Content-Type"]="application/x-www-form-urlencoded",ot.fetch()(Z,{method:"POST",headers:ue,body:w})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Te(g.idToken,"internal-error"),Te(void 0!==g.idToken,"internal-error"),Te(void 0!==g.refreshToken,"internal-error");const C="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(y){const g=G1(y);return Te(g,"internal-error"),Te(void 0!==g.exp,"internal-error"),Te(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,C)}getToken(g,C=!1){var w=this;return(0,l.Z)(function*(){return Te(!w.accessToken||w.refreshToken,g,"user-token-expired"),C||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,C){var w=this;return(0,l.Z)(function*(){const{accessToken:x,refreshToken:I,expiresIn:Z}=yield function(y,g){return jn.apply(this,arguments)}(g,C);w.updateTokensAndExpiration(x,I,Number(Z))})()}updateTokensAndExpiration(g,C,w){this.refreshToken=C||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,C){const{refreshToken:w,accessToken:x,expirationTime:I}=C,Z=new ur;return w&&(Te("string"==typeof w,"internal-error",{appName:g}),Z.refreshToken=w),x&&(Te("string"==typeof x,"internal-error",{appName:g}),Z.accessToken=x),I&&(Te("number"==typeof I,"internal-error",{appName:g}),Z.expirationTime=I),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ur,this.toJSON())}_performRefresh(){return yi("not implemented")}}function hn(y,g){Te("string"==typeof y||void 0===y,"internal-error",{appName:g})}class dr{constructor(g){var{uid:C,auth:w,stsTokenManager:x}=g,I=te(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=w,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=I.displayName||null,this.email=I.email||null,this.emailVerified=I.emailVerified||!1,this.phoneNumber=I.phoneNumber||null,this.photoURL=I.photoURL||null,this.isAnonymous=I.isAnonymous||!1,this.tenantId=I.tenantId||null,this.providerData=I.providerData?[...I.providerData]:[],this.metadata=new Mr(I.createdAt||void 0,I.lastLoginAt||void 0)}getIdToken(g){var C=this;return(0,l.Z)(function*(){const w=yield Er(C,C.stsTokenManager.getToken(C.auth,g));return Te(w,C.auth,"internal-error"),C.accessToken!==w&&(C.accessToken=w,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),w})()}getIdTokenResult(g){return function(y){return U1.apply(this,arguments)}(this,g)}reload(){return function(y){return Tt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Te(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(C=>Object.assign({},C)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new dr(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,C=!1){var w=this;return(0,l.Z)(function*(){let x=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),x=!0),C&&(yield q1(w)),yield w.auth._persistUserIfCurrent(w),x&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,l.Z)(function*(){const C=yield g.getIdToken();return yield Er(g,function(y,g){return Wt.apply(this,arguments)}(g.auth,{idToken:C})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,C){var w,x,I,Z,ue,Oe,Pe,qe;const Ze=null!==(w=C.displayName)&&void 0!==w?w:void 0,Bt=null!==(x=C.email)&&void 0!==x?x:void 0,Ai=null!==(I=C.phoneNumber)&&void 0!==I?I:void 0,x1=null!==(Z=C.photoURL)&&void 0!==Z?Z:void 0,Qc=null!==(ue=C.tenantId)&&void 0!==ue?ue:void 0,n0=null!==(Oe=C._redirectEventId)&&void 0!==Oe?Oe:void 0,Jc=null!==(Pe=C.createdAt)&&void 0!==Pe?Pe:void 0,S5=null!==(qe=C.lastLoginAt)&&void 0!==qe?qe:void 0,{uid:r0,emailVerified:D5,isAnonymous:L4,providerData:_3,stsTokenManager:s0}=C;Te(r0&&s0,g,"internal-error");const u2=ur.fromJSON(this.name,s0);Te("string"==typeof r0,g,"internal-error"),hn(Ze,g.name),hn(Bt,g.name),Te("boolean"==typeof D5,g,"internal-error"),Te("boolean"==typeof L4,g,"internal-error"),hn(Ai,g.name),hn(x1,g.name),hn(Qc,g.name),hn(n0,g.name),hn(Jc,g.name),hn(S5,g.name);const o0=new dr({uid:r0,auth:g,email:Bt,emailVerified:D5,displayName:Ze,isAnonymous:L4,photoURL:x1,phoneNumber:Ai,tenantId:Qc,stsTokenManager:u2,createdAt:Jc,lastLoginAt:S5});return _3&&Array.isArray(_3)&&(o0.providerData=_3.map(Ah=>Object.assign({},Ah))),n0&&(o0._redirectEventId=n0),o0}static _fromIdTokenResponse(g,C,w=!1){return(0,l.Z)(function*(){const x=new ur;x.updateFromServerResponse(C);const I=new dr({uid:C.localId,auth:g,stsTokenManager:x,isAnonymous:w});return yield q1(I),I})()}}const ht=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(C,w){var x=this;return(0,l.Z)(function*(){x.storage[C]=w})()}_get(C){var w=this;return(0,l.Z)(function*(){const x=w.storage[C];return void 0===x?null:x})()}_remove(C){var w=this;return(0,l.Z)(function*(){delete w.storage[C]})()}_addListener(C,w){}_removeListener(C,w){}}return y.type="NONE",y})();function Qi(y,g,C){return`firebase:${y}:${g}:${C}`}class Sr{constructor(g,C,w){this.persistence=g,this.auth=C,this.userKey=w;const{config:x,name:I}=this.auth;this.fullUserKey=Qi(this.userKey,x.apiKey,I),this.fullPersistenceKey=Qi("persistence",x.apiKey,I),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const C=yield g.persistence._get(g.fullUserKey);return C?dr._fromJSON(g.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var C=this;return(0,l.Z)(function*(){if(C.persistence===g)return;const w=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=g,w?C.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,C,w="authUser"){return(0,l.Z)(function*(){if(!C.length)return new Sr(Xt(ht),g,w);const x=(yield Promise.all(C.map(function(){var Pe=(0,l.Z)(function*(qe){if(yield qe._isAvailable())return qe});return function(qe){return Pe.apply(this,arguments)}}()))).filter(Pe=>Pe);let I=x[0]||Xt(ht);const Z=Qi(w,g.config.apiKey,g.name);let ue=null;for(const Pe of C)try{const qe=yield Pe._get(Z);if(qe){const Ze=dr._fromJSON(g,qe);Pe!==I&&(ue=Ze),I=Pe;break}}catch(qe){}const Oe=x.filter(Pe=>Pe._shouldAllowMigration);return I._shouldAllowMigration&&Oe.length?(I=Oe[0],ue&&(yield I._set(Z,ue.toJSON())),yield Promise.all(C.map(function(){var Pe=(0,l.Z)(function*(qe){if(qe!==I)try{yield qe._remove(Z)}catch(Ze){}});return function(qe){return Pe.apply(this,arguments)}}())),new Sr(I,g,w)):new Sr(I,g,w)})()}}function vi(y){const g=y.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(p1(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Oo(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(zt(g))return"Blackberry";if(lc(g))return"Webos";if(wi(g))return"Safari";if((g.includes("chrome/")||Dr(g))&&!g.includes("edge/"))return"Chrome";if(Hi(g))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Oo(y=(0,z.z$)()){return/firefox\//i.test(y)}function wi(y=(0,z.z$)()){const g=y.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Dr(y=(0,z.z$)()){return/crios\//i.test(y)}function p1(y=(0,z.z$)()){return/iemobile/i.test(y)}function Hi(y=(0,z.z$)()){return/android/i.test(y)}function zt(y=(0,z.z$)()){return/blackberry/i.test(y)}function lc(y=(0,z.z$)()){return/webos/i.test(y)}function Ro(y=(0,z.z$)()){return/iphone|ipad|ipod/i.test(y)}function Vs(y=(0,z.z$)()){return Ro(y)||Hi(y)||lc(y)||zt(y)||/windows phone/i.test(y)||p1(y)}function ci(y,g=[]){let C;switch(y){case"Browser":C=vi((0,z.z$)());break;case"Worker":C=`${vi((0,z.z$)())}-${y}`;break;default:C=y}const w=g.length?g.join(","):"FirebaseCore-web";return`${C}/JsCore/${pe.SDK_VERSION}/${w}`}class Z6{constructor(g,C){this.app=g,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ni(this),this.idTokenSubscription=new Ni(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(g,C){var w=this;return C&&(this._popupRedirectResolver=Xt(C)),this._initializationPromise=this.queue((0,l.Z)(function*(){var x,I;if(!w._deleted&&(w.persistenceManager=yield Sr.create(w,g),!w._deleted)){if(null===(x=w._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(C),w.lastNotifiedUid=(null===(I=w.currentUser)||void 0===I?void 0:I.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const C=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||C){if(g.currentUser&&C&&g.currentUser.uid===C.uid)return g._currentUser._assign(C),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(C)}})()}initializeCurrentUser(g){var C=this;return(0,l.Z)(function*(){var w;let x=yield C.assertedPersistence.getCurrentUser();if(g&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const I=null===(w=C.redirectUser)||void 0===w?void 0:w._redirectEventId,Z=null==x?void 0:x._redirectEventId,ue=yield C.tryRedirectSignIn(g);(!I||I===Z)&&(null==ue?void 0:ue.user)&&(x=ue.user)}return x?x._redirectEventId?(Te(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===x._redirectEventId?C.directlySetCurrentUser(x):C.reloadAndSetCurrentUserOrClear(x)):C.reloadAndSetCurrentUserOrClear(x):C.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var C=this;return(0,l.Z)(function*(){let w=null;try{w=yield C._popupRedirectResolver._completeRedirectFn(C,g,!0)}catch(x){yield C._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var C=this;return(0,l.Z)(function*(){try{yield q1(g)}catch(w){if("auth/network-request-failed"!==w.code)return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var C=this;return(0,l.Z)(function*(){const w=g?(0,z.m9)(g):null;return w&&Te(w.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(w&&w._clone(C))})()}_updateCurrentUser(g){var C=this;return(0,l.Z)(function*(){if(!C._deleted)return g&&Te(C.tenantId===g.tenantId,C,"tenant-id-mismatch"),C.queue((0,l.Z)(function*(){yield C.directlySetCurrentUser(g),C.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var C=this;return this.queue((0,l.Z)(function*(){yield C.assertedPersistence.setPersistence(Xt(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new z.LL("auth","Firebase",g())}onAuthStateChanged(g,C,w){return this.registerStateListener(this.authStateSubscription,g,C,w)}onIdTokenChanged(g,C,w){return this.registerStateListener(this.idTokenSubscription,g,C,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,C){var w=this;return(0,l.Z)(function*(){const x=yield w.getOrInitRedirectPersistenceManager(C);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var C=this;return(0,l.Z)(function*(){if(!C.redirectPersistenceManager){const w=g&&Xt(g)||C._popupRedirectResolver;Te(w,C,"argument-error"),C.redirectPersistenceManager=yield Sr.create(C,[Xt(w._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(g){var C=this;return(0,l.Z)(function*(){var w,x;return C._isInitialized&&(yield C.queue((0,l.Z)(function*(){}))),(null===(w=C._currentUser)||void 0===w?void 0:w._redirectEventId)===g?C._currentUser:(null===(x=C.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?C.redirectUser:null})()}_persistUserIfCurrent(g){var C=this;return(0,l.Z)(function*(){if(g===C.currentUser)return C.queue((0,l.Z)(function*(){return C.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(C=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,C,w,x){if(this._deleted)return()=>{};const I="function"==typeof C?C:C.next.bind(C),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(Z,this,"internal-error"),Z.then(()=>I(this.currentUser)),"function"==typeof C?g.addObserver(C,w,x):g.addObserver(C)}directlySetCurrentUser(g){var C=this;return(0,l.Z)(function*(){C.currentUser&&C.currentUser!==g&&(C._currentUser._stopProactiveRefresh(),g&&C.isProactiveRefreshEnabled&&g._startProactiveRefresh()),C.currentUser=g,g?yield C.assertedPersistence.setCurrentUser(g):yield C.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ci(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){const C={"X-Client-Version":g.clientVersion};return g.app.options.appId&&(C["X-Firebase-gmpid"]=g.app.options.appId),C})()}}function Mn(y){return(0,z.m9)(y)}class Ni{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,z.ne)(C=>this.observer=C)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function T2(y){const g=y.indexOf(":");return g<0?"":y.substr(0,g+1)}function Qr(y){if(!y)return null;const g=Number(y);return isNaN(g)?null:g}class A2{constructor(g,C){this.providerId=g,this.signInMethod=C}toJSON(){return yi("not implemented")}_getIdTokenResponse(g){return yi("not implemented")}_linkToIdToken(g,C){return yi("not implemented")}_getReauthenticationResolver(g){return yi("not implemented")}}function dc(y,g){return Q3.apply(this,arguments)}function Q3(){return(Q3=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:resetPassword",an(y,g))})).apply(this,arguments)}function vu(y,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function K6(y,g){return I2.apply(this,arguments)}function I2(){return(I2=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:update",an(y,g))})).apply(this,arguments)}function fc(){return(fc=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithPassword",an(y,g))})).apply(this,arguments)}function bi(y,g){return pc.apply(this,arguments)}function pc(){return(pc=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:sendOobCode",an(y,g))})).apply(this,arguments)}function Y6(y,g){return mc.apply(this,arguments)}function mc(){return(mc=(0,l.Z)(function*(y,g){return bi(y,g)})).apply(this,arguments)}function Q6(y,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,l.Z)(function*(y,g){return bi(y,g)})).apply(this,arguments)}function gc(y,g){return J3.apply(this,arguments)}function J3(){return(J3=(0,l.Z)(function*(y,g){return bi(y,g)})).apply(this,arguments)}function Ia(y,g){return L2.apply(this,arguments)}function L2(){return(L2=(0,l.Z)(function*(y,g){return bi(y,g)})).apply(this,arguments)}function P2(){return(P2=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithEmailLink",an(y,g))})).apply(this,arguments)}function vs(){return(vs=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithEmailLink",an(y,g))})).apply(this,arguments)}class V2 extends A2{constructor(g,C,w,x=null){super("password",w),this._email=g,this._password=C,this._tenantId=x}static _fromEmailAndPassword(g,C){return new V2(g,C,"password")}static _fromEmailAndCode(g,C,w=null){return new V2(g,C,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const C="string"==typeof g?JSON.parse(g):g;if((null==C?void 0:C.email)&&(null==C?void 0:C.password)){if("password"===C.signInMethod)return this._fromEmailAndPassword(C.email,C.password);if("emailLink"===C.signInMethod)return this._fromEmailAndCode(C.email,C.password,C.tenantId)}return null}_getIdTokenResponse(g){var C=this;return(0,l.Z)(function*(){switch(C.signInMethod){case"password":return function(y,g){return fc.apply(this,arguments)}(g,{returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(y,g){return P2.apply(this,arguments)}(g,{email:C._email,oobCode:C._password});default:$t(g,"internal-error")}})()}_linkToIdToken(g,C){var w=this;return(0,l.Z)(function*(){switch(w.signInMethod){case"password":return vu(g,{idToken:C,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(y,g){return vs.apply(this,arguments)}(g,{idToken:C,email:w._email,oobCode:w._password});default:$t(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ei(y,g){return O2.apply(this,arguments)}function O2(){return(O2=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithIdp",an(y,g))})).apply(this,arguments)}class Bi extends A2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const C=new Bi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(C.idToken=g.idToken),g.accessToken&&(C.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(C.nonce=g.nonce),g.pendingToken&&(C.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(C.accessToken=g.oauthToken,C.secret=g.oauthTokenSecret):$t("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const C="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:x}=C,I=te(C,["providerId","signInMethod"]);if(!w||!x)return null;const Z=new Bi(w,x);return Z.idToken=I.idToken||void 0,Z.accessToken=I.accessToken||void 0,Z.secret=I.secret,Z.nonce=I.nonce,Z.pendingToken=I.pendingToken||null,Z}_getIdTokenResponse(g){return Ei(g,this.buildRequest())}_linkToIdToken(g,C){const w=this.buildRequest();return w.idToken=C,Ei(g,w)}_getReauthenticationResolver(g){const C=this.buildRequest();return C.autoCreate=!1,Ei(g,C)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),g.postBody=(0,z.xO)(C)}return g}}function ws(y,g){return m1.apply(this,arguments)}function m1(){return(m1=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:sendVerificationCode",an(y,g))})).apply(this,arguments)}function Pa(){return(Pa=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithPhoneNumber",an(y,g))})).apply(this,arguments)}function hr(){return(hr=(0,l.Z)(function*(y,g){const C=yield q(y,"POST","/v1/accounts:signInWithPhoneNumber",an(y,g));if(C.temporaryProof)throw Ge(y,"account-exists-with-different-credential",C);return C})).apply(this,arguments)}const R2={USER_NOT_FOUND:"user-not-found"};function Bo(){return(Bo=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithPhoneNumber",an(y,Object.assign(Object.assign({},g),{operation:"REAUTH"})),R2)})).apply(this,arguments)}class W1 extends A2{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,C){return new W1({verificationId:g,verificationCode:C})}static _fromTokenResponse(g,C){return new W1({phoneNumber:g,temporaryProof:C})}_getIdTokenResponse(g){return function(y,g){return Pa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,C){return function(y,g){return hr.apply(this,arguments)}(g,Object.assign({idToken:C},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(y,g){return Bo.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:C,verificationId:w,verificationCode:x}=this.params;return g&&C?{temporaryProof:g,phoneNumber:C}:{sessionInfo:w,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:C,verificationCode:w,phoneNumber:x,temporaryProof:I}=g;return w||C||x||I?new W1({verificationId:C,verificationCode:w,phoneNumber:x,temporaryProof:I}):null}}class fn{constructor(g){var C,w,x,I,Z,ue;const Oe=(0,z.zd)((0,z.pd)(g)),Pe=null!==(C=Oe.apiKey)&&void 0!==C?C:null,qe=null!==(w=Oe.oobCode)&&void 0!==w?w:null,Ze=function(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Oe.mode)&&void 0!==x?x:null);Te(Pe&&qe&&Ze,"argument-error"),this.apiKey=Pe,this.operation=Ze,this.code=qe,this.continueUrl=null!==(I=Oe.continueUrl)&&void 0!==I?I:null,this.languageCode=null!==(Z=Oe.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(ue=Oe.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const C=function(y){const g=(0,z.zd)((0,z.pd)(y)).link,C=g?(0,z.zd)((0,z.pd)(g)).deep_link_id:null,w=(0,z.zd)((0,z.pd)(y)).deep_link_id;return(w?(0,z.zd)((0,z.pd)(w)).link:null)||w||C||g||y}(g);try{return new fn(C)}catch(w){return null}}}let bs=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(C,w){return V2._fromEmailAndPassword(C,w)}static credentialWithLink(C,w){const x=fn.parseLink(w);return Te(x,"argument-error"),V2._fromEmailAndCode(C,x.code,x.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Xr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class sn extends Xr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class jo extends sn{static credentialFromJSON(g){const C="string"==typeof g?JSON.parse(g):g;return Te("providerId"in C&&"signInMethod"in C,"argument-error"),Bi._fromParams(C)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Te(g.idToken||g.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return jo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return jo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:w,oauthTokenSecret:x,pendingToken:I,nonce:Z,providerId:ue}=g;if(!w&&!x&&!C&&!I||!ue)return null;try{return new jo(ue)._credential({idToken:C,accessToken:w,nonce:Z,pendingToken:I})}catch(Oe){return null}}}let Va=(()=>{class y extends sn{constructor(){super("facebook.com")}static credential(C){return Bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return y.credentialFromTaggedObject(C)}static credentialFromError(C){return y.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return y.credential(C.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Z1=(()=>{class y extends sn{constructor(){super("google.com"),this.addScope("profile")}static credential(C,w){return Bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:w})}static credentialFromResult(C){return y.credentialFromTaggedObject(C)}static credentialFromError(C){return y.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:w,oauthAccessToken:x}=C;if(!w&&!x)return null;try{return y.credential(w,x)}catch(I){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),fr=(()=>{class y extends sn{constructor(){super("github.com")}static credential(C){return Bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:C})}static credentialFromResult(C){return y.credentialFromTaggedObject(C)}static credentialFromError(C){return y.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C||!("oauthAccessToken"in C)||!C.oauthAccessToken)return null;try{return y.credential(C.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class C1 extends A2{constructor(g,C){super(g,g),this.pendingToken=C}_getIdTokenResponse(g){return Ei(g,this.buildRequest())}_linkToIdToken(g,C){const w=this.buildRequest();return w.idToken=C,Ei(g,w)}_getReauthenticationResolver(g){const C=this.buildRequest();return C.autoCreate=!1,Ei(g,C)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const C="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:x,pendingToken:I}=C;return w&&x&&I&&w===x?new C1(w,I):null}static _create(g,C){return new C1(g,C)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ti extends Xr{constructor(g){Te(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ti.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ti.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const C=C1.fromJSON(g);return Te(C,"argument-error"),C}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:C,providerId:w}=g;if(!C||!w)return null;try{return C1._create(w,C)}catch(x){return null}}}let Oa=(()=>{class y extends sn{constructor(){super("twitter.com")}static credential(C,w){return Bi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:C,oauthTokenSecret:w})}static credentialFromResult(C){return y.credentialFromTaggedObject(C)}static credentialFromError(C){return y.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthAccessToken:w,oauthTokenSecret:x}=C;if(!w||!x)return null;try{return y.credential(w,x)}catch(I){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ra(y,g){return F1.apply(this,arguments)}function F1(){return(F1=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signUp",an(y,g))})).apply(this,arguments)}class Un{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,C,w,x=!1){return(0,l.Z)(function*(){const I=yield dr._fromIdTokenResponse(g,w,x),Z=z2(w);return new Un({user:I,providerId:Z,_tokenResponse:w,operationType:C})})()}static _forOperation(g,C,w){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const x=z2(w);return new Un({user:g,providerId:x,_tokenResponse:w,operationType:C})})()}}function z2(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function dt(){return(dt=(0,l.Z)(function*(y){var g;const C=Mn(y);if(yield C._initializationPromise,null===(g=C.currentUser)||void 0===g?void 0:g.isAnonymous)return new Un({user:C.currentUser,providerId:null,operationType:"signIn"});const w=yield Ra(C,{returnSecureToken:!0}),x=yield Un._fromIdTokenResponse(C,"signIn",w,!0);return yield C._updateCurrentUser(x.user),x})).apply(this,arguments)}class za extends z.ZR{constructor(g,C,w,x){var I;super(C.code,C.message),this.operationType=w,this.user=x,Object.setPrototypeOf(this,za.prototype),this.customData={appName:g.name,tenantId:null!==(I=g.tenantId)&&void 0!==I?I:void 0,_serverResponse:C.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,C,w,x){return new za(g,C,w,x)}}function yc(y,g,C,w){return("reauthenticate"===g?C._getReauthenticationResolver(y):C._getIdTokenResponse(y)).catch(I=>{throw"auth/multi-factor-auth-required"===I.code?za._fromErrorAndOperation(y,I,g,w):I})}function Ha(y){return new Set(y.map(({providerId:g})=>g).filter(g=>!!g))}function B2(){return(B2=(0,l.Z)(function*(y,g){const C=(0,z.m9)(y);yield xe(!0,C,g);const{providerUserInfo:w}=yield Hn(C.auth,{idToken:yield C.getIdToken(),deleteProvider:[g]}),x=Ha(w||[]);return C.providerData=C.providerData.filter(I=>x.has(I.providerId)),x.has("phone")||(C.phoneNumber=null),yield C.auth._persistUserIfCurrent(C),C})).apply(this,arguments)}function e4(y,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,l.Z)(function*(y,g,C=!1){const w=yield Er(y,g._linkToIdToken(y.auth,yield y.getIdToken()),C);return Un._forOperation(y,"link",w)})).apply(this,arguments)}function xe(y,g,C){return At.apply(this,arguments)}function At(){return(At=(0,l.Z)(function*(y,g,C){yield q1(g);const x=!1===y?"provider-already-linked":"no-such-provider";Te(Ha(g.providerData).has(C)===y,g.auth,x)})).apply(this,arguments)}function Ba(y,g){return gn.apply(this,arguments)}function gn(){return(gn=(0,l.Z)(function*(y,g,C=!1){const{auth:w}=y,x="reauthenticate";try{const I=yield Er(y,yc(w,x,g,y),C);Te(I.idToken,w,"internal-error");const Z=G1(I.idToken);Te(Z,w,"internal-error");const{sub:ue}=Z;return Te(y.uid===ue,w,"user-mismatch"),Un._forOperation(y,x,I)}catch(I){throw"auth/user-not-found"===(null==I?void 0:I.code)&&$t(w,"user-mismatch"),I}})).apply(this,arguments)}function ja(y,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,l.Z)(function*(y,g,C=!1){const w="signIn",x=yield yc(y,w,g),I=yield Un._fromIdTokenResponse(y,w,x);return C||(yield y._updateCurrentUser(I.user)),I})).apply(this,arguments)}function ji(y,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,l.Z)(function*(y,g){return ja(Mn(y),g)})).apply(this,arguments)}function j2(y,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,l.Z)(function*(y,g){const C=(0,z.m9)(y);return yield xe(!1,C,g.providerId),e4(C,g)})).apply(this,arguments)}function t4(y,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,l.Z)(function*(y,g){return Ba((0,z.m9)(y),g)})).apply(this,arguments)}function qo(y,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,l.Z)(function*(y,g){return q(y,"POST","/v1/accounts:signInWithCustomToken",an(y,g))})).apply(this,arguments)}function U2(){return(U2=(0,l.Z)(function*(y,g){const C=Mn(y),w=yield qo(C,{token:g,returnSecureToken:!0}),x=yield Un._fromIdTokenResponse(C,"signIn",w);return yield C._updateCurrentUser(x.user),x})).apply(this,arguments)}class xr{constructor(g,C){this.factorId=g,this.uid=C.mfaEnrollmentId,this.enrollmentTime=new Date(C.enrolledAt).toUTCString(),this.displayName=C.displayName}static _fromServerResponse(g,C){return"phoneInfo"in C?Ui._fromServerResponse(g,C):$t(g,"internal-error")}}class Ui extends xr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,C){return new Ui(C)}}function n4(y,g,C){var w;Te((null===(w=C.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Te(void 0===C.dynamicLinkDomain||C.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),g.continueUrl=C.url,g.dynamicLinkDomain=C.dynamicLinkDomain,g.canHandleCodeInApp=C.handleCodeInApp,C.iOS&&(Te(C.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),g.iOSBundleId=C.iOS.bundleId),C.android&&(Te(C.android.packageName.length>0,y,"missing-android-pkg-name"),g.androidInstallApp=C.android.installApp,g.androidMinimumVersionCode=C.android.minimumVersion,g.androidPackageName=C.android.packageName)}function G2(){return(G2=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y),x={requestType:"PASSWORD_RESET",email:g};C&&n4(w,x,C),yield Q6(w,x)})).apply(this,arguments)}function q2(){return(q2=(0,l.Z)(function*(y,g,C){yield dc((0,z.m9)(y),{oobCode:g,newPassword:C})})).apply(this,arguments)}function Ga(){return(Ga=(0,l.Z)(function*(y,g){yield K6((0,z.m9)(y),{oobCode:g})})).apply(this,arguments)}function $o(y,g){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,l.Z)(function*(y,g){const C=(0,z.m9)(y),w=yield dc(C,{oobCode:g}),x=w.requestType;switch(Te(x,C,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(w.newEmail,C,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(w.mfaInfo,C,"internal-error");default:Te(w.email,C,"internal-error")}let I=null;return w.mfaInfo&&(I=xr._fromServerResponse(Mn(C),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:I},operation:x}})).apply(this,arguments)}function K1(){return(K1=(0,l.Z)(function*(y,g){const{data:C}=yield $o((0,z.m9)(y),g);return C.email})).apply(this,arguments)}function s4(){return(s4=(0,l.Z)(function*(y,g,C){const w=Mn(y),x=yield Ra(w,{returnSecureToken:!0,email:g,password:C}),I=yield Un._fromIdTokenResponse(w,"signIn",x);return yield w._updateCurrentUser(I.user),I})).apply(this,arguments)}function Rs(){return(Rs=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y),x={requestType:"EMAIL_SIGNIN",email:g};Te(C.handleCodeInApp,w,"argument-error"),C&&n4(w,x,C),yield gc(w,x)})).apply(this,arguments)}function li(){return(li=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y),x=bs.credentialWithLink(g,C||st());return Te(x._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ji(w,x)})).apply(this,arguments)}function Zo(y,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:createAuthUri",an(y,g))})).apply(this,arguments)}function Mu(){return(Mu=(0,l.Z)(function*(y,g){const w={identifier:g,continueUri:lt()?st():"http://localhost"},{signinMethods:x}=yield Zo((0,z.m9)(y),w);return x||[]})).apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(y,g){const C=(0,z.m9)(y),x={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};g&&n4(C.auth,x,g);const{email:I}=yield Y6(C.auth,x);I!==y.email&&(yield y.reload())})).apply(this,arguments)}function Y1(){return(Y1=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y),I={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:g};C&&n4(w.auth,I,C);const{email:Z}=yield Ia(w.auth,I);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function qa(y,g){return y1.apply(this,arguments)}function y1(){return(y1=(0,l.Z)(function*(y,g){return yt(y,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Pn(){return(Pn=(0,l.Z)(function*(y,{displayName:g,photoURL:C}){if(void 0===g&&void 0===C)return;const w=(0,z.m9)(y),I={idToken:yield w.getIdToken(),displayName:g,photoUrl:C,returnSecureToken:!0},Z=yield Er(w,qa(w.auth,I));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const ue=w.providerData.find(({providerId:Oe})=>"password"===Oe);ue&&(ue.displayName=w.displayName,ue.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function zs(y,g,C){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,l.Z)(function*(y,g,C){const{auth:w}=y,I={idToken:yield y.getIdToken(),returnSecureToken:!0};g&&(I.email=g),C&&(I.password=C);const Z=yield Er(y,vu(w,I));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Qo{constructor(g,C,w={}){this.isNewUser=g,this.providerId=C,this.profile=w}}class v1 extends Qo{constructor(g,C,w,x){super(g,C,w),this.username=x}}class l4 extends Qo{constructor(g,C){super(g,"facebook.com",C)}}class u4 extends v1{constructor(g,C){super(g,"github.com",C,"string"==typeof(null==C?void 0:C.login)?null==C?void 0:C.login:null)}}class e5 extends Qo{constructor(g,C){super(g,"google.com",C)}}class t5 extends v1{constructor(g,C,w){super(g,"twitter.com",C,w)}}function es(y){const{user:g,_tokenResponse:C}=y;return g.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function(y){var g,C;if(!y)return null;const{providerId:w}=y,x=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},I=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Z=null===(C=null===(g=G1(y.idToken))||void 0===g?void 0:g.firebase)||void 0===C?void 0:C.sign_in_provider;if(Z)return new Qo(I,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new l4(I,x);case"github.com":return new u4(I,x);case"google.com":return new e5(I,x);case"twitter.com":return new t5(I,x,y.screenName||null);case"custom":case"anonymous":return new Qo(I,null);default:return new Qo(I,w,x)}}(C)}class pr{constructor(g,C){this.type=g,this.credential=C}static _fromIdtoken(g){return new pr("enroll",g)}static _fromMfaPendingCredential(g){return new pr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var C,w;if(null==g?void 0:g.multiFactorSession){if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.pendingCredential)return pr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return pr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Z2{constructor(g,C,w){this.session=g,this.hints=C,this.signInResolver=w}static _fromError(g,C){const w=Mn(g),x=C.customData._serverResponse,I=(x.mfaInfo||[]).map(ue=>xr._fromServerResponse(w,ue));Te(x.mfaPendingCredential,w,"internal-error");const Z=pr._fromMfaPendingCredential(x.mfaPendingCredential);return new Z2(Z,I,function(){var ue=(0,l.Z)(function*(Oe){const Pe=yield Oe._process(w,Z);delete x.mfaInfo,delete x.mfaPendingCredential;const qe=Object.assign(Object.assign({},x),{idToken:Pe.idToken,refreshToken:Pe.refreshToken});switch(C.operationType){case"signIn":const Ze=yield Un._fromIdTokenResponse(w,C.operationType,qe);return yield w._updateCurrentUser(Ze.user),Ze;case"reauthenticate":return Te(C.user,w,"internal-error"),Un._forOperation(C.user,C.operationType,qe);default:$t(w,"internal-error")}});return function(Oe){return ue.apply(this,arguments)}}())}resolveSignIn(g){var C=this;return(0,l.Z)(function*(){return C.signInResolver(g)})()}}function hh(y,g){return yt(y,"POST","/v2/accounts/mfaEnrollment:start",an(y,g))}class Nc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(C=>{C.mfaInfo&&(this.enrolledFactors=C.mfaInfo.map(w=>xr._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new Nc(g)}getSession(){var g=this;return(0,l.Z)(function*(){return pr._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,C){var w=this;return(0,l.Z)(function*(){const x=g,I=yield w.getSession(),Z=yield Er(w.user,x._process(w.user.auth,I,C));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(g){var C=this;return(0,l.Z)(function*(){const w="string"==typeof g?g:g.uid,x=yield C.user.getIdToken(),I=yield Er(C.user,function(y,g){return yt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",an(y,g))}(C.user.auth,{idToken:x,mfaEnrollmentId:w}));C.enrolledFactors=C.enrolledFactors.filter(({uid:Z})=>Z!==w),yield C.user._updateTokensIfNecessary(I);try{yield C.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const Wa=new WeakMap,Q1="__sak";class cn{constructor(g,C){this.storageRetriever=g,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(Q1,"1"),this.storage.removeItem(Q1),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,C){return this.storage.setItem(g,JSON.stringify(C)),Promise.resolve()}_get(g){const C=this.storage.getItem(g);return Promise.resolve(C?JSON.parse(C):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const J1=(()=>{class y extends cn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,w)=>this.onStorageEvent(C,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const y=(0,z.z$)();return wi(y)||Ro(y)}()&&function(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Vs(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const w of Object.keys(this.listeners)){const x=this.storage.getItem(w),I=this.localCache[w];x!==I&&C(w,I,x)}}onStorageEvent(C,w=!1){if(!C.key)return void this.forAllChangedKeys((ue,Oe,Pe)=>{this.notifyListeners(ue,Pe)});const x=C.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(x);if(C.newValue!==ue)null!==C.newValue?this.storage.setItem(x,C.newValue):this.storage.removeItem(x);else if(this.localCache[x]===C.newValue&&!w)return}const I=()=>{const ue=this.storage.getItem(x);!w&&this.localCache[x]===ue||this.notifyListeners(x,ue)},Z=this.storage.getItem(x);(0,z.w1)()&&10===document.documentMode&&Z!==C.newValue&&C.newValue!==C.oldValue?setTimeout(I,10):I()}notifyListeners(C,w){this.localCache[C]=w;const x=this.listeners[C];if(x)for(const I of Array.from(x))I(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,w,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:w,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(w)}_removeListener(C,w){this.listeners[C]&&(this.listeners[C].delete(w),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,w){var x=()=>super._set,I=this;return(0,l.Z)(function*(){yield x().call(I,C,w),I.localCache[C]=JSON.stringify(w)})()}_get(C){var w=()=>super._get,x=this;return(0,l.Z)(function*(){const I=yield w().call(x,C);return x.localCache[C]=JSON.stringify(I),I})()}_remove(C){var w=()=>super._remove,x=this;return(0,l.Z)(function*(){yield w().call(x,C),delete x.localCache[C]})()}}return y.type="LOCAL",y})(),yn=(()=>{class y extends cn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,w){}_removeListener(C,w){}}return y.type="SESSION",y})();let n5=(()=>{class y{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const w=this.receivers.find(I=>I.isListeningto(C));if(w)return w;const x=new y(C);return this.receivers.push(x),x}isListeningto(C){return this.eventTarget===C}handleEvent(C){var w=this;return(0,l.Z)(function*(){const x=C,{eventId:I,eventType:Z,data:ue}=x.data,Oe=w.handlersMap[Z];if(!(null==Oe?void 0:Oe.size))return;x.ports[0].postMessage({status:"ack",eventId:I,eventType:Z});const Pe=Array.from(Oe).map(function(){var Ze=(0,l.Z)(function*(Bt){return Bt(x.origin,ue)});return function(Bt){return Ze.apply(this,arguments)}}()),qe=yield function(y){return Promise.all(y.map(function(){var g=(0,l.Z)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(w){return{fulfilled:!1,reason:w}}});return function(C){return g.apply(this,arguments)}}()))}(Pe);x.ports[0].postMessage({status:"done",eventId:I,eventType:Z,response:qe})})()}_subscribe(C,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(w)}_unsubscribe(C,w){this.handlersMap[C]&&w&&this.handlersMap[C].delete(w),(!w||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function b1(y="",g=10){let C="";for(let w=0;w<g;w++)C+=Math.floor(10*Math.random());return y+C}class ei{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,C,w=50){var x=this;return(0,l.Z)(function*(){const I="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!I)throw new Error("connection_unavailable");let Z,ue;return new Promise((Oe,Pe)=>{const qe=b1("",20);I.port1.start();const Ze=setTimeout(()=>{Pe(new Error("unsupported_event"))},w);ue={messageChannel:I,onMessage(Bt){const Ai=Bt;if(Ai.data.eventId===qe)switch(Ai.data.status){case"ack":clearTimeout(Ze),Z=setTimeout(()=>{Pe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Oe(Ai.data.response);break;default:clearTimeout(Ze),clearTimeout(Z),Pe(new Error("invalid_response"))}}},x.handlers.add(ue),I.port1.addEventListener("message",ue.onMessage),x.target.postMessage({eventType:g,eventId:qe,data:C},[I.port2])}).finally(()=>{ue&&x.removeMessageHandler(ue)})})()}}function qn(){return window}function Q2(){return void 0!==qn().WorkerGlobalScope&&"function"==typeof qn().importScripts}function Ya(){return(Ya=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Nr="firebaseLocalStorageDb",ts="firebaseLocalStorage",X1="fbase_key";class Ji{constructor(g){this.request=g}toPromise(){return new Promise((g,C)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function ns(y,g){return y.transaction([ts],g?"readwrite":"readonly").objectStore(ts)}function nt(){const y=indexedDB.open(Nr,1);return new Promise((g,C)=>{y.addEventListener("error",()=>{C(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(ts,{keyPath:X1})}catch(x){C(x)}}),y.addEventListener("success",(0,l.Z)(function*(){const w=y.result;w.objectStoreNames.contains(ts)?g(w):(w.close(),yield function(){const y=indexedDB.deleteDatabase(Nr);return new Ji(y).toPromise()}(),g(yield nt()))}))})}function Xo(y,g,C){return ti.apply(this,arguments)}function ti(){return(ti=(0,l.Z)(function*(y,g,C){const w=ns(y,!0).put({[X1]:g,value:C});return new Ji(w).toPromise()})).apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(y,g){const C=ns(y,!1).get(g),w=yield new Ji(C).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ac(y,g){const C=ns(y,!0).delete(g);return new Ji(C).toPromise()}const ea=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,l.Z)(function*(){return C.db||(C.db=yield nt()),C.db})()}_withRetries(C){var w=this;return(0,l.Z)(function*(){let x=0;for(;;)try{const I=yield w._openDb();return yield C(I)}catch(I){if(x++>3)throw I;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,l.Z)(function*(){return Q2()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,l.Z)(function*(){C.receiver=n5._getInstance(Q2()?self:null),C.receiver._subscribe("keyChanged",function(){var w=(0,l.Z)(function*(x,I){return{keyProcessed:(yield C._poll()).includes(I.key)}});return function(x,I){return w.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var w=(0,l.Z)(function*(x,I){return["keyChanged"]});return function(x,I){return w.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,l.Z)(function*(){var w,x;if(C.activeServiceWorker=yield function(){return Ya.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new ei(C.activeServiceWorker);const I=yield C.sender._send("ping",{},800);!I||(null===(w=I[0])||void 0===w?void 0:w.fulfilled)&&(null===(x=I[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var w=this;return(0,l.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:C},w.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const C=yield nt();return yield Xo(C,Q1,"1"),yield Ac(C,Q1),!0}catch(C){}return!1})()}_withPendingWrite(C){var w=this;return(0,l.Z)(function*(){w.pendingWrites++;try{yield C()}finally{w.pendingWrites--}})()}_set(C,w){var x=this;return(0,l.Z)(function*(){return x._withPendingWrite((0,l.Z)(function*(){return yield x._withRetries(I=>Xo(I,C,w)),x.localCache[C]=w,x.notifyServiceWorker(C)}))})()}_get(C){var w=this;return(0,l.Z)(function*(){const x=yield w._withRetries(I=>function(y,g){return Dn.apply(this,arguments)}(I,C));return w.localCache[C]=x,x})()}_remove(C){var w=this;return(0,l.Z)(function*(){return w._withPendingWrite((0,l.Z)(function*(){return yield w._withRetries(x=>Ac(x,C)),delete w.localCache[C],w.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,l.Z)(function*(){const w=yield C._withRetries(Z=>{const ue=ns(Z,!1).getAll();return new Ji(ue).toPromise()});if(!w)return[];if(0!==C.pendingWrites)return[];const x=[],I=new Set;for(const{fbase_key:Z,value:ue}of w)I.add(Z),JSON.stringify(C.localCache[Z])!==JSON.stringify(ue)&&(C.notifyListeners(Z,ue),x.push(Z));for(const Z of Object.keys(C.localCache))C.localCache[Z]&&!I.has(Z)&&(C.notifyListeners(Z,null),x.push(Z));return x})()}notifyListeners(C,w){this.localCache[C]=w;const x=this.listeners[C];if(x)for(const I of Array.from(x))I(w)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(w)}_removeListener(C,w){this.listeners[C]&&(this.listeners[C].delete(w),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function p4(y,g){return yt(y,"POST","/v2/accounts/mfaSignIn:start",an(y,g))}function Ic(){return(Ic=(0,l.Z)(function*(y){return(yield yt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function m4(y){return new Promise((g,C)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=g,w.onerror=x=>{const I=In("internal-error");I.customData=x,C(I)},w.type="text/javascript",w.charset="UTF-8",function(){var y,g;return null!==(g=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==g?g:document}().appendChild(w)})}function M1(y){return`__${y}${Math.floor(1e6*Math.random())}`}const js=1e12;class On{constructor(g){this.auth=g,this.counter=js,this._widgets=new Map}render(g,C){const w=this.counter;return this._widgets.set(w,new Ja(g,this.auth.name,C||{})),this.counter++,w}reset(g){var C;const w=g||js;null===(C=this._widgets.get(w))||void 0===C||C.delete(),this._widgets.delete(w)}getResponse(g){var C;return(null===(C=this._widgets.get(g||js))||void 0===C?void 0:C.getResponse())||""}execute(g){var C=this;return(0,l.Z)(function*(){var w;return null===(w=C._widgets.get(g||js))||void 0===w||w.execute(),""})()}}class Ja{constructor(g,C,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Te(x,"argument-error",{appName:C}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(y){const g=[],C="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)g.push(C.charAt(Math.floor(Math.random()*C.length)));return g.join("")}();const{callback:g,"expired-callback":C}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,C)try{C()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mr=M1("rcb"),Ms=new tn(3e4,6e4);class Ar{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qn().grecaptcha}load(g,C=""){return Te((y=C).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y),g,"argument-error"),this.shouldResolveImmediately(C)?Promise.resolve(qn().grecaptcha):new Promise((w,x)=>{const I=qn().setTimeout(()=>{x(In(g,"network-request-failed"))},Ms.get());qn()[mr]=()=>{qn().clearTimeout(I),delete qn()[mr];const ue=qn().grecaptcha;if(!ue)return void x(In(g,"internal-error"));const Oe=ue.render;ue.render=(Pe,qe)=>{const Ze=Oe(Pe,qe);return this.counter++,Ze},this.hostLanguage=C,w(ue)},m4(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:mr,render:"explicit",hl:C})}`).catch(()=>{clearTimeout(I),x(In(g,"internal-error"))})});var y}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!qn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Pc{load(g){return(0,l.Z)(function*(){return new On(g)})()}clearedOneInstance(){}}const g4="recaptcha",to={theme:"light",type:"image"};class s5{constructor(g,C=Object.assign({},to),w){this.parameters=C,this.type=g4,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(w),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Te(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Pc:new Ar,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const C=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(C)||new Promise(I=>{const Z=ue=>{!ue||(g.tokenChangeListeners.delete(Z),I(ue))};g.tokenChangeListeners.add(Z),g.isInvisible&&w.execute(C)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return C=>{if(this.tokenChangeListeners.forEach(w=>w(C)),"function"==typeof g)g(C);else if("string"==typeof g){const w=qn()[g];"function"==typeof w&&w(C)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let C=g.container;if(!g.isInvisible){const w=document.createElement("div");C.appendChild(w),C=w}g.widgetId=g.getAssertedRecaptcha().render(C,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){Te(lt()&&!Q2(),g.auth,"internal-error"),yield function(){let y=null;return new Promise(g=>{"complete"!==document.readyState?(y=()=>g(),window.addEventListener("load",y)):g()}).catch(g=>{throw y&&window.removeEventListener("load",y),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const C=yield function(y){return Ic.apply(this,arguments)}(g.auth);Te(C,g.auth,"internal-error"),g.parameters.sitekey=C})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xa{constructor(g,C){this.verificationId=g,this.onConfirmation=C}confirm(g){const C=W1._fromVerification(this.verificationId,g);return this.onConfirmation(C)}}function Rn(){return(Rn=(0,l.Z)(function*(y,g,C){const w=Mn(y),x=yield N(w,g,(0,z.m9)(C));return new Xa(x,I=>ji(w,I))})).apply(this,arguments)}function C4(){return(C4=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y);yield xe(!1,w,"phone");const x=yield N(w.auth,g,(0,z.m9)(C));return new Xa(x,I=>j2(w,I))})).apply(this,arguments)}function S(){return(S=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y),x=yield N(w.auth,g,(0,z.m9)(C));return new Xa(x,I=>t4(w,I))})).apply(this,arguments)}function N(y,g,C){return L.apply(this,arguments)}function L(){return(L=(0,l.Z)(function*(y,g,C){var w;const x=yield C.verify();try{let I;if(Te("string"==typeof x,y,"argument-error"),Te(C.type===g4,y,"argument-error"),I="string"==typeof g?{phoneNumber:g}:g,"session"in I){const Z=I.session;if("phoneNumber"in I)return Te("enroll"===Z.type,y,"internal-error"),(yield hh(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:I.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Te("signin"===Z.type,y,"internal-error");const ue=(null===(w=I.multiFactorHint)||void 0===w?void 0:w.uid)||I.multiFactorUid;return Te(ue,y,"missing-multi-factor-info"),(yield p4(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield ws(y,{phoneNumber:I.phoneNumber,recaptchaToken:x});return Z}}finally{C._reset()}})).apply(this,arguments)}function ne(){return(ne=(0,l.Z)(function*(y,g){yield e4((0,z.m9)(y),g)})).apply(this,arguments)}let le=(()=>{class y{constructor(C){this.providerId=y.PROVIDER_ID,this.auth=Mn(C)}verifyPhoneNumber(C,w){return N(this.auth,C,(0,z.m9)(w))}static credential(C,w){return W1._fromVerification(C,w)}static credentialFromResult(C){return y.credentialFromTaggedObject(C)}static credentialFromError(C){return y.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{phoneNumber:w,temporaryProof:x}=C;return w&&x?W1._fromTokenResponse(w,x):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ne(y,g){return g?Xt(g):(Te(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class je extends A2{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ei(g,this._buildIdpRequest())}_linkToIdToken(g,C){return Ei(g,this._buildIdpRequest(C))}_getReauthenticationResolver(g){return Ei(g,this._buildIdpRequest())}_buildIdpRequest(g){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(C.idToken=g),C}}function We(y){return ja(y.auth,new je(y),y.bypassAuthState)}function Ht(y){const{auth:g,user:C}=y;return Te(C,g,"internal-error"),Ba(C,new je(y),y.bypassAuthState)}function pn(y){return $n.apply(this,arguments)}function $n(){return($n=(0,l.Z)(function*(y){const{auth:g,user:C}=y;return Te(C,g,"internal-error"),e4(C,new je(y),y.bypassAuthState)})).apply(this,arguments)}class Xi{constructor(g,C,w,x,I=!1){this.auth=g,this.resolver=w,this.user=x,this.bypassAuthState=I,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var g=this;return new Promise(function(){var C=(0,l.Z)(function*(w,x){g.pendingPromise={resolve:w,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(I){g.reject(I)}});return function(w,x){return C.apply(this,arguments)}}())}onAuthEvent(g){var C=this;return(0,l.Z)(function*(){const{urlResponse:w,sessionId:x,postBody:I,tenantId:Z,error:ue,type:Oe}=g;if(ue)return void C.reject(ue);const Pe={auth:C.auth,requestUri:w,sessionId:x,tenantId:Z||void 0,postBody:I||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(Oe)(Pe))}catch(qe){C.reject(qe)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return We;case"linkViaPopup":case"linkViaRedirect":return pn;case"reauthViaPopup":case"reauthViaRedirect":return Ht;default:$t(this.auth,"internal-error")}}resolve(g){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const di=new tn(2e3,1e4);function io(){return(io=(0,l.Z)(function*(y,g,C){const w=Mn(y);Zr(y,g,Xr);const x=Ne(w,C);return new Au(w,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function is(){return(is=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y);Zr(w.auth,g,Xr);const x=Ne(w.auth,C);return new Au(w.auth,"reauthViaPopup",g,x,w).executeNotNull()})).apply(this,arguments)}function mt(){return(mt=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y);Zr(w.auth,g,Xr);const x=Ne(w.auth,C);return new Au(w.auth,"linkViaPopup",g,x,w).executeNotNull()})).apply(this,arguments)}let Au=(()=>{class y extends Xi{constructor(C,w,x,I,Z){super(C,w,I,Z),this.provider=x,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var C=this;return(0,l.Z)(function*(){const w=yield C.execute();return Te(w,C.auth,"internal-error"),w})()}onExecution(){var C=this;return(0,l.Z)(function*(){Jn(1===C.filter.length,"Popup operations only handle one event");const w=b1();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],w),C.authWindow.associatedEvent=w,C.resolver._originValidation(C.auth).catch(x=>{C.reject(x)}),C.resolver._isIframeWebStorageSupported(C.auth,x=>{x||C.reject(In(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const C=()=>{var w,x;this.pollId=(null===(x=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(C,di.get())};C()}}return y.currentPopupAction=null,y})();const n3=new Map;class o5 extends Xi{constructor(g,C,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,C=this;return(0,l.Z)(function*(){let w=n3.get(C.auth._key());if(!w){try{const I=(yield function(y,g){return ia.apply(this,arguments)}(C.resolver,C.auth))?yield g().call(C):null;w=()=>Promise.resolve(I)}catch(x){w=()=>Promise.reject(x)}n3.set(C.auth._key(),w)}return C.bypassAuthState||n3.set(C.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var C=()=>super.onAuthEvent,w=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return C().call(w,g);if("unknown"!==g.type){if(g.eventId){const x=yield w.auth._redirectUserForId(g.eventId);if(x)return w.user=x,C().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function ia(){return(ia=(0,l.Z)(function*(y,g){const C=t2(g),w=a5(y);if(!(yield w._isAvailable()))return!1;const x="true"===(yield w._get(C));return yield w._remove(C),x})).apply(this,arguments)}function Iu(y,g){return ss.apply(this,arguments)}function ss(){return(ss=(0,l.Z)(function*(y,g){return a5(y)._set(t2(g),"true")})).apply(this,arguments)}function a5(y){return Xt(y._redirectPersistence)}function t2(y){return Qi("pendingRedirect",y.config.apiKey,y.name)}function Mi(){return(Mi=(0,l.Z)(function*(y,g,C){const w=Mn(y);Zr(y,g,Xr);const x=Ne(w,C);return yield Iu(x,w),x._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function r3(){return(r3=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y);Zr(w.auth,g,Xr);const x=Ne(w.auth,C);yield Iu(x,w.auth);const I=yield ra(w);return x._openRedirect(w.auth,g,"reauthViaRedirect",I)})).apply(this,arguments)}function Oc(){return(Oc=(0,l.Z)(function*(y,g,C){const w=(0,z.m9)(y);Zr(w.auth,g,Xr);const x=Ne(w.auth,C);yield xe(!1,w,g.providerId),yield Iu(x,w.auth);const I=yield ra(w);return x._openRedirect(w.auth,g,"linkViaRedirect",I)})).apply(this,arguments)}function ro(){return(ro=(0,l.Z)(function*(y,g){return yield Mn(y)._initializationPromise,so(y,g,!1)})).apply(this,arguments)}function so(y,g){return s3.apply(this,arguments)}function s3(){return(s3=(0,l.Z)(function*(y,g,C=!1){const w=Mn(y),x=Ne(w,g),Z=yield new o5(w,x,C).execute();return Z&&!C&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,g)),Z})).apply(this,arguments)}function ra(y){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,l.Z)(function*(y){const g=b1(`${y.uid}:::`);return y._redirectEventId=g,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),g})).apply(this,arguments)}class gh{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let C=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(C=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u5(y);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=g,C=!0)),C}sendToConsumer(g,C){var w;if(g.error&&!u5(g)){const x=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";C.onError(In(this.auth,x))}else C.onAuthEvent(g)}isEventForConsumer(g,C){const w=null===C.eventId||!!g.eventId&&g.eventId===C.eventId;return C.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(r2(g))}saveEventToCache(g){this.cachedEventUids.add(r2(g)),this.lastProcessedEventTime=Date.now()}}function r2(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(g=>g).join("-")}function u5({type:y,error:g}){return"unknown"===y&&"auth/no-auth-event"===(null==g?void 0:g.code)}function o3(y){return y4.apply(this,arguments)}function y4(){return(y4=(0,l.Z)(function*(y,g={}){return yt(y,"GET","/v1/projects",g)})).apply(this,arguments)}const oo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v4=/^https?/;function w4(){return(w4=(0,l.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:g}=yield o3(y);for(const C of g)try{if(Rc(C))return}catch(w){}$t(y,"unauthorized-domain")})).apply(this,arguments)}function Rc(y){const g=st(),{protocol:C,hostname:w}=new URL(g);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===w?"chrome-extension:"===C&&y.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===C&&Z.hostname===w}if(!v4.test(C))return!1;if(oo.test(y))return w===y;const x=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(w)}const b4=new tn(3e4,6e4);function a3(){const y=qn().___jsl;if(null==y?void 0:y.H)for(const g of Object.keys(y.H))if(y.H[g].r=y.H[g].r||[],y.H[g].L=y.H[g].L||[],y.H[g].r=[...y.H[g].L],y.CP)for(let C=0;C<y.CP.length;C++)y.CP[C]=null}let c3=null;function sa(y){return c3=c3||function(y){return new Promise((g,C)=>{var w,x,I;function Z(){a3(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{a3(),C(In(y,"network-request-failed"))},timeout:b4.get()})}if(null===(x=null===(w=qn().gapi)||void 0===w?void 0:w.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(I=qn().gapi)||void 0===I?void 0:I.load)){const ue=M1("iframefcb");return qn()[ue]=()=>{gapi.load?Z():C(In(y,"network-request-failed"))},m4(`https://apis.google.com/js/api.js?onload=${ue}`).catch(Oe=>C(Oe))}Z()}}).catch(g=>{throw c3=null,g})}(y),c3}const Ch=new tn(5e3,15e3),Fh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ao(y){const g=y.config;Te(g.authDomain,y,"auth-domain-config-required");const C=g.emulator?He(g,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:y.name,v:pe.SDK_VERSION},x=yh.get(y.config.apiHost);x&&(w.eid=x);const I=y._getFrameworks();return I.length&&(w.fw=I.join(",")),`${C}?${(0,z.xO)(w).slice(1)}`}function Hc(){return(Hc=(0,l.Z)(function*(y){const g=yield sa(y),C=qn().gapi;return Te(C,y,"internal-error"),g.open({where:document.body,url:ao(y),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fh,dontclear:!0},w=>new Promise(function(){var x=(0,l.Z)(function*(I,Z){yield w.restyle({setHideOnLeave:!1});const ue=In(y,"network-request-failed"),Oe=qn().setTimeout(()=>{Z(ue)},Ch.get());function Pe(){qn().clearTimeout(Oe),I(w)}w.ping(Pe).then(Pe,()=>{Z(ue)})});return function(I,Z){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const h5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function m5(y,g,C,w,x,I){Te(y.config.authDomain,y,"auth-domain-config-required"),Te(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:C,redirectUrl:w,v:pe.SDK_VERSION,eventId:x};if(g instanceof Xr){g.setDefaultLanguage(y.languageCode),Z.providerId=g.providerId||"",(0,z.xb)(g.getCustomParameters())||(Z.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Oe,Pe]of Object.entries(I||{}))Z[Oe]=Pe}if(g instanceof sn){const Oe=g.getScopes().filter(Pe=>""!==Pe);Oe.length>0&&(Z.scopes=Oe.join(","))}y.tenantId&&(Z.tid=y.tenantId);const ue=Z;for(const Oe of Object.keys(ue))void 0===ue[Oe]&&delete ue[Oe];return`${function({config:y}){return y.emulator?He(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,z.xO)(ue).slice(1)}`}const o2="webStorageSupport";class u3 extends class{constructor(g){this.factorId=g}_process(g,C,w){switch(C.type){case"enroll":return this._finalizeEnroll(g,C.credential,w);case"signin":return this._finalizeSignIn(g,C.credential);default:return yi("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new u3(g)}_finalizeEnroll(g,C,w){return function(y,g){return yt(y,"POST","/v2/accounts/mfaEnrollment:finalize",an(y,g))}(g,{idToken:C,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,C){return function(y,g){return yt(y,"POST","/v2/accounts/mfaSignIn:finalize",an(y,g))}(g,{mfaPendingCredential:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let g5=(()=>{class y{constructor(){}static assertion(C){return u3._fromCredential(C)}}return y.FACTOR_ID="phone",y})();var y,d3="@firebase/auth";class jm{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var C=this;return(0,l.Z)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const C=this.auth.onIdTokenChanged(w=>{var x;g((null===(x=w)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,C),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const C=this.internalListeners.get(g);!C||(this.internalListeners.delete(g),C(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function os(){return window}function S4(){return(S4=(0,l.Z)(function*(y,g,C){var w;const{BuildInfo:x}=os();Jn(g.sessionId,"AuthEvent did not contain a session ID");const I=yield x4(g.sessionId),Z={};return Ro()?Z.ibi=x.packageName:Hi()?Z.apn=x.packageName:$t(y,"operation-not-supported-in-this-environment"),x.displayName&&(Z.appDisplayName=x.displayName),Z.sessionId=I,m5(y,C,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function D4(){return(D4=(0,l.Z)(function*(y){const{BuildInfo:g}=os(),C={};Ro()?C.iosBundleId=g.packageName:Hi()?C.androidPackageName=g.packageName:$t(y,"operation-not-supported-in-this-environment"),yield o3(y,C)})).apply(this,arguments)}function Gc(){return(Gc=(0,l.Z)(function*(y,g,C){const{cordova:w}=os();let x=()=>{};try{yield new Promise((I,Z)=>{let ue=null;function Oe(){var Ze;I();const Bt=null===(Ze=w.plugins.browsertab)||void 0===Ze?void 0:Ze.close;"function"==typeof Bt&&Bt(),"function"==typeof(null==C?void 0:C.close)&&C.close()}function Pe(){ue||(ue=window.setTimeout(()=>{Z(In(y,"redirect-cancelled-by-user"))},2e3))}function qe(){"visible"===(null==document?void 0:document.visibilityState)&&Pe()}g.addPassiveListener(Oe),document.addEventListener("resume",Pe,!1),Hi()&&document.addEventListener("visibilitychange",qe,!1),x=()=>{g.removePassiveListener(Oe),document.removeEventListener("resume",Pe,!1),document.removeEventListener("visibilitychange",qe,!1),ue&&window.clearTimeout(ue)}})}finally{x()}})).apply(this,arguments)}function x4(y){return N4.apply(this,arguments)}function N4(){return(N4=(0,l.Z)(function*(y){const g=Hu(y),C=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(C)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Hu(y){if(Jn(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const g=new ArrayBuffer(y.length),C=new Uint8Array(g);for(let w=0;w<y.length;w++)C[w]=y.charCodeAt(w);return C}y="Browser",(0,pe._registerComponent)(new tt.wA("auth",(g,{options:C})=>{const w=g.getProvider("app").getImmediate(),{apiKey:x,authDomain:I}=w.options;return(Z=>{Te(x&&!x.includes(":"),"invalid-api-key",{appName:Z.name}),Te(!(null==I?void 0:I.includes(":")),"argument-error",{appName:Z.name});const ue={apiKey:x,authDomain:I,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ci(y)},Oe=new Z6(Z,ue);return function(y,g){const C=(null==g?void 0:g.persistence)||[],w=(Array.isArray(C)?C:[C]).map(Xt);(null==g?void 0:g.errorMap)&&y._updateErrorMap(g.errorMap),y._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(Oe,C),Oe})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,C,w)=>{g.getProvider("auth-internal").initialize()})),(0,pe._registerComponent)(new tt.wA("auth-internal",g=>{const C=Mn(g.getProvider("auth").getImmediate());return new jm(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,pe.registerVersion)(d3,"0.19.9",void 0),(0,pe.registerVersion)(d3,"0.19.9","esm2017");class Bu extends gh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(C=>C(g)),super.onEvent(g)}initialized(){var g=this;return(0,l.Z)(function*(){yield g.initPromise})()}}function Uu(y){return qc.apply(this,arguments)}function qc(){return(qc=(0,l.Z)(function*(y){const g=yield D1()._get(qu(y));return g&&(yield D1()._remove(qu(y))),g})).apply(this,arguments)}function Gu(){const y=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<20;C++){const w=Math.floor(Math.random()*g.length);y.push(g.charAt(w))}return y.join("")}function D1(){return Xt(J1)}function qu(y){return Qi("authEvent",y.config.apiKey,y.name)}function a2(y){if(!(null==y?void 0:y.includes("?")))return{};const[g,...C]=y.split("?");return(0,z.zd)(C.join("?"))}function aa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:In("no-auth-event")}}function m3(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Zu(y=(0,z.z$)()){return!("file:"!==m3()&&"ionic:"!==m3()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function y5(){try{const y=self.localStorage,g=b1();if(y)return y.setItem(g,"1"),y.removeItem(g),!function(y=(0,z.z$)()){return(0,z.w1)()&&11===(null==document?void 0:document.documentMode)||function(y=(0,z.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,z.hl)()}catch(y){return Yu()&&(0,z.hl)()}return!1}function Yu(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wc(){return("http:"===m3()||"https:"===m3()||(0,z.ru)()||Zu())&&!((0,z.b$)()||(0,z.UG)())&&y5()&&!Yu()}function ca(){return Zu()&&"undefined"!=typeof document}function Zc(){return(Zc=(0,l.Z)(function*(){return!!ca()&&new Promise(y=>{const g=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),y(!0)})})})).apply(this,arguments)}const Cr={LOCAL:"local",NONE:"none",SESSION:"session"},Gs=Te,Ju="persistence";function c2(y){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,l.Z)(function*(y){yield y._initializationPromise;const g=v5(),C=Qi(Ju,y.config.apiKey,y.name);g&&g.setItem(C,y._getPersistence())})).apply(this,arguments)}function v5(){var y;try{return(null===(y="undefined"!=typeof window?window:null)||void 0===y?void 0:y.sessionStorage)||null}catch(g){return null}}const e0=Te;class l2{constructor(){this.browserResolver=Xt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yn,this._completeRedirectFn=so}_openPopup(g,C,w,x){var I=this;return(0,l.Z)(function*(){var Z;Jn(null===(Z=I.eventManagers[g._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const ue=m5(g,C,w,st(),x);return function(y,g,C,w=500,x=600){const I=Math.max((window.screen.availHeight-x)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let ue="";const Oe=Object.assign(Object.assign({},h5),{width:w.toString(),height:x.toString(),top:I,left:Z}),Pe=(0,z.z$)().toLowerCase();C&&(ue=Dr(Pe)?"_blank":C),Oo(Pe)&&(g=g||"http://localhost",Oe.scrollbars="yes");const qe=Object.entries(Oe).reduce((Bt,[Ai,x1])=>`${Bt}${Ai}=${x1},`,"");if(function(y=(0,z.z$)()){var g;return Ro(y)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Pe)&&"_self"!==ue)return function(y,g){const C=document.createElement("a");C.href=y,C.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(w)}(g||"",ue),new Bc(null);const Ze=window.open(g||"",ue,qe);Te(Ze,y,"popup-blocked");try{Ze.focus()}catch(Bt){}return new Bc(Ze)}(g,ue,b1())})()}_openRedirect(g,C,w,x){var I=this;return(0,l.Z)(function*(){return yield I._originValidation(g),y=m5(g,C,w,st(),x),qn().location.href=y,new Promise(()=>{});var y})()}_initialize(g){const C=g._key();if(this.eventManagers[C]){const{manager:x,promise:I}=this.eventManagers[C];return x?Promise.resolve(x):(Jn(I,"If manager is not set, promise should be"),I)}const w=this.initAndGetManager(g);return this.eventManagers[C]={promise:w},w.catch(()=>{delete this.eventManagers[C]}),w}initAndGetManager(g){var C=this;return(0,l.Z)(function*(){const w=yield function(y){return Hc.apply(this,arguments)}(g),x=new gh(g);return w.register("authEvent",I=>(Te(null==I?void 0:I.authEvent,g,"invalid-auth-event"),{status:x.onEvent(I.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[g._key()]={manager:x},C.iframes[g._key()]=w,x})()}_isIframeWebStorageSupported(g,C){this.iframes[g._key()].send(o2,{type:o2},x=>{var I;const Z=null===(I=null==x?void 0:x[0])||void 0===I?void 0:I[o2];void 0!==Z&&C(!!Z),$t(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const C=g._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function(y){return w4.apply(this,arguments)}(g)),this.originValidationPromises[C]}get _shouldInitProactively(){return Vs()||wi()||Ro()}}),this.cordovaResolver=Xt(class{constructor(){this._redirectPersistence=yn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=so}_initialize(g){var C=this;return(0,l.Z)(function*(){const w=g._key();let x=C.eventManagers.get(w);return x||(x=new Bu(g),C.eventManagers.set(w,x),C.attachCallbackListeners(g,x)),x})()}_openPopup(g){$t(g,"operation-not-supported-in-this-environment")}_openRedirect(g,C,w,x){var I=this;return(0,l.Z)(function*(){!function(y){var g,C,w,x,I,Z,ue,Oe,Pe,qe;const Ze=os();Te("function"==typeof(null===(g=null==Ze?void 0:Ze.universalLinks)||void 0===g?void 0:g.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(C=null==Ze?void 0:Ze.BuildInfo)||void 0===C?void 0:C.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(I=null===(x=null===(w=null==Ze?void 0:Ze.cordova)||void 0===w?void 0:w.plugins)||void 0===x?void 0:x.browsertab)||void 0===I?void 0:I.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Oe=null===(ue=null===(Z=null==Ze?void 0:Ze.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Oe?void 0:Oe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(qe=null===(Pe=null==Ze?void 0:Ze.cordova)||void 0===Pe?void 0:Pe.InAppBrowser)||void 0===qe?void 0:qe.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Z=yield I._initialize(g);yield Z.initialized(),Z.resetRedirect(),n3.clear(),yield I._originValidation(g);const ue=function(y,g,C=null){return{type:g,eventId:C,urlResponse:null,sessionId:Gu(),postBody:null,tenantId:y.tenantId,error:In(y,"no-auth-event")}}(g,w,x);yield function(y,g){return D1()._set(qu(y),g)}(g,ue);const Oe=yield function(y,g,C){return S4.apply(this,arguments)}(g,ue,C),Pe=yield function(y){const{cordova:g}=os();return new Promise(C=>{g.plugins.browsertab.isAvailable(w=>{let x=null;w?g.plugins.browsertab.openUrl(y):x=g.InAppBrowser.open(y,function(y=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),C(x)})})}(Oe);return function(y,g,C){return Gc.apply(this,arguments)}(g,Z,Pe)})()}_isIframeWebStorageSupported(g,C){throw new Error("Method not implemented.")}_originValidation(g){const C=g._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function(y){return D4.apply(this,arguments)}(g)),this.originValidationPromises[C]}attachCallbackListeners(g,C){const{universalLinks:w,handleOpenURL:x,BuildInfo:I}=os(),Z=setTimeout((0,l.Z)(function*(){yield Uu(g),C.onEvent(aa())}),500),ue=function(){var qe=(0,l.Z)(function*(Ze){clearTimeout(Z);const Bt=yield Uu(g);let Ai=null;Bt&&(null==Ze?void 0:Ze.url)&&(Ai=function(y,g){var C,w;const x=function(y){const g=a2(y),C=g.link?decodeURIComponent(g.link):void 0,w=a2(C).link,x=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return a2(x).link||x||w||C||y}(g);if(x.includes("/__/auth/callback")){const I=a2(x),Z=I.firebaseError?function(y){try{return JSON.parse(y)}catch(g){return null}}(decodeURIComponent(I.firebaseError)):null,ue=null===(w=null===(C=null==Z?void 0:Z.code)||void 0===C?void 0:C.split("auth/"))||void 0===w?void 0:w[1],Oe=ue?In(ue):null;return Oe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:x,postBody:null}}return null}(Bt,Ze.url)),C.onEvent(Ai||aa())});return function(Bt){return qe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,ue);const Oe=x,Pe=`${I.packageName.toLowerCase()}://`;os().handleOpenURL=function(){var qe=(0,l.Z)(function*(Ze){if(Ze.toLowerCase().startsWith(Pe)&&ue({url:Ze}),"function"==typeof Oe)try{Oe(Ze)}catch(Bt){console.error(Bt)}});return function(Ze){return qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=yn,this._completeRedirectFn=so}_initialize(g){var C=this;return(0,l.Z)(function*(){return yield C.selectUnderlyingResolver(),C.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,C,w,x){var I=this;return(0,l.Z)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._openPopup(g,C,w,x)})()}_openRedirect(g,C,w,x){var I=this;return(0,l.Z)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._openRedirect(g,C,w,x)})()}_isIframeWebStorageSupported(g,C){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,C)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return ca()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return e0(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,l.Z)(function*(){if(g.underlyingResolver)return;const C=yield function(){return Zc.apply(this,arguments)}();g.underlyingResolver=C?g.cordovaResolver:g.browserResolver})()}}function g3(y){return y.unwrap()}function w5(y){return A4(y)}function A4(y){const{_tokenResponse:g}=y instanceof z.ZR?y.customData:y;if(!g)return null;if(!(y instanceof z.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return le.credentialFromResult(y);const C=g.providerId;if(!C||"password"===C)return null;let w;switch(C){case"google.com":w=Z1;break;case"facebook.com":w=Va;break;case"github.com":w=fr;break;case"twitter.com":w=Oa;break;default:const{oauthIdToken:x,oauthAccessToken:I,oauthTokenSecret:Z,pendingToken:ue,nonce:Oe}=g;return I||Z||x||ue?ue?C.startsWith("saml.")?C1._create(C,ue):Bi._fromParams({providerId:C,signInMethod:C,pendingToken:ue,idToken:x,accessToken:I}):new jo(C).credential({idToken:x,accessToken:I,rawNonce:Oe}):null}return y instanceof z.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Fr(y,g){return g.catch(C=>{throw C instanceof z.ZR&&function(y,g){var C;const w=null===(C=g.customData)||void 0===C?void 0:C._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new b5(y,function(y,g){var C;const w=(0,z.m9)(y),x=g;return Te(g.customData.operationType,w,"argument-error"),Te(null===(C=x.customData._serverResponse)||void 0===C?void 0:C.mfaPendingCredential,w,"argument-error"),Z2._fromError(w,x)}(y,g));else if(w){const x=A4(g),I=g;x&&(I.credential=x,I.tenantId=w.tenantId||void 0,I.email=w.email||void 0,I.phoneNumber=w.phoneNumber||void 0)}}(y,C),C}).then(C=>{const x=C.user;return{operationType:C.operationType,credential:w5(C),additionalUserInfo:es(C),user:cs.getOrCreate(x)}})}function C3(y,g){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,l.Z)(function*(y,g){const C=yield g;return{verificationId:C.verificationId,confirm:w=>Fr(y,C.confirm(w))}})).apply(this,arguments)}class b5{constructor(g,C){this.resolver=C,this.auth=function(y){return y.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Fr(g3(this.auth),this.resolver.resolveSignIn(g))}}class cs{constructor(g){this._delegate=g,this.multiFactor=function(y){const g=(0,z.m9)(y);return Wa.has(g)||Wa.set(g,Nc._fromUser(g)),Wa.get(g)}(g)}static getOrCreate(g){return cs.USER_MAP.has(g)||cs.USER_MAP.set(g,new cs(g)),cs.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var C=this;return(0,l.Z)(function*(){return Fr(C.auth,j2(C._delegate,g))})()}linkWithPhoneNumber(g,C){var w=this;return(0,l.Z)(function*(){return C3(w.auth,function(y,g,C){return C4.apply(this,arguments)}(w._delegate,g,C))})()}linkWithPopup(g){var C=this;return(0,l.Z)(function*(){return Fr(C.auth,function(y,g,C){return mt.apply(this,arguments)}(C._delegate,g,l2))})()}linkWithRedirect(g){var C=this;return(0,l.Z)(function*(){return yield c2(Mn(C.auth)),function(y,g,C){return function(y,g,C){return Oc.apply(this,arguments)}(y,g,C)}(C._delegate,g,l2)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var C=this;return(0,l.Z)(function*(){return Fr(C.auth,t4(C._delegate,g))})()}reauthenticateWithPhoneNumber(g,C){return C3(this.auth,function(y,g,C){return S.apply(this,arguments)}(this._delegate,g,C))}reauthenticateWithPopup(g){return Fr(this.auth,function(y,g,C){return is.apply(this,arguments)}(this._delegate,g,l2))}reauthenticateWithRedirect(g){var C=this;return(0,l.Z)(function*(){return yield c2(Mn(C.auth)),function(y,g,C){return function(y,g,C){return r3.apply(this,arguments)}(y,g,C)}(C._delegate,g,l2)})()}sendEmailVerification(g){return function(y,g){return Ko.apply(this,arguments)}(this._delegate,g)}unlink(g){var C=this;return(0,l.Z)(function*(){return yield function(y,g){return B2.apply(this,arguments)}(C._delegate,g),C})()}updateEmail(g){return function(y,g){return zs((0,z.m9)(y),g,null)}(this._delegate,g)}updatePassword(g){return function(y,g){return zs((0,z.m9)(y),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(y,g){return ne.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(y,g){return Pn.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,C){return function(y,g,C){return Y1.apply(this,arguments)}(this._delegate,g,C)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const I4=Te;let la=(()=>{class y{constructor(C,w){if(this.app=C,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=C.options;I4(x,"invalid-api-key",{appName:C.name}),I4(x,"invalid-api-key",{appName:C.name});const I="undefined"!=typeof window?l2:void 0;this._delegate=w.initialize({options:{persistence:qm(x,C.name),popupRedirectResolver:I}}),this._delegate._updateErrorMap(h1),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(C){this._delegate.languageCode=C}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(C){this._delegate.tenantId=C}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(C,w){!function(y,g,C){const w=Mn(y);Te(w._canInitEmulator,w,"emulator-config-failed"),Te(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const x=!!(null==C?void 0:C.disableWarnings),I=T2(g),{host:Z,port:ue}=function(y){const g=T2(y),C=/(\/\/)?([^?#/]+)/.exec(y.substr(g.length));if(!C)return{host:"",port:null};const w=C[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(w);if(x){const I=x[1];return{host:I,port:Qr(w.substr(I.length+1))}}{const[I,Z]=w.split(":");return{host:I,port:Qr(Z)}}}(g);w.config.emulator={url:`${I}//${Z}${null===ue?"":`:${ue}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:ue,protocol:I.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function y(){const g=document.createElement("p"),C=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,C,w)}applyActionCode(C){return function(y,g){return Ga.apply(this,arguments)}(this._delegate,C)}checkActionCode(C){return $o(this._delegate,C)}confirmPasswordReset(C,w){return function(y,g,C){return q2.apply(this,arguments)}(this._delegate,C,w)}createUserWithEmailAndPassword(C,w){var x=this;return(0,l.Z)(function*(){return Fr(x._delegate,function(y,g,C){return s4.apply(this,arguments)}(x._delegate,C,w))})()}fetchProvidersForEmail(C){return this.fetchSignInMethodsForEmail(C)}fetchSignInMethodsForEmail(C){return function(y,g){return Mu.apply(this,arguments)}(this._delegate,C)}isSignInWithEmailLink(C){return function(y,g){const C=fn.parseLink(g);return"EMAIL_SIGNIN"===(null==C?void 0:C.operation)}(0,C)}getRedirectResult(){var C=this;return(0,l.Z)(function*(){I4(Wc(),C._delegate,"operation-not-supported-in-this-environment");const w=yield function(y,g){return ro.apply(this,arguments)}(C._delegate,l2);return w?Fr(C._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(C){!function(y,g){Mn(y)._logFramework(g)}(this._delegate,C)}onAuthStateChanged(C,w,x){const{next:I,error:Z,complete:ue}=qs(C,w,x);return this._delegate.onAuthStateChanged(I,Z,ue)}onIdTokenChanged(C,w,x){const{next:I,error:Z,complete:ue}=qs(C,w,x);return this._delegate.onIdTokenChanged(I,Z,ue)}sendSignInLinkToEmail(C,w){return function(y,g,C){return Rs.apply(this,arguments)}(this._delegate,C,w)}sendPasswordResetEmail(C,w){return function(y,g,C){return G2.apply(this,arguments)}(this._delegate,C,w||void 0)}setPersistence(C){var w=this;return(0,l.Z)(function*(){let x;switch(function(y,g){Gs(Object.values(Cr).includes(g),y,"invalid-persistence-type"),(0,z.b$)()?Gs(g!==Cr.SESSION,y,"unsupported-persistence-type"):(0,z.UG)()?Gs(g===Cr.NONE,y,"unsupported-persistence-type"):Yu()?Gs(g===Cr.NONE||g===Cr.LOCAL&&(0,z.hl)(),y,"unsupported-persistence-type"):Gs(g===Cr.NONE||y5(),y,"unsupported-persistence-type")}(w._delegate,C),C){case Cr.SESSION:x=yn;break;case Cr.LOCAL:x=(yield Xt(ea)._isAvailable())?ea:J1;break;case Cr.NONE:x=ht;break;default:return $t("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(C){return this.signInWithCredential(C)}signInAnonymously(){return Fr(this._delegate,function(y){return dt.apply(this,arguments)}(this._delegate))}signInWithCredential(C){return Fr(this._delegate,ji(this._delegate,C))}signInWithCustomToken(C){return Fr(this._delegate,function(y,g){return U2.apply(this,arguments)}(this._delegate,C))}signInWithEmailAndPassword(C,w){return Fr(this._delegate,function(y,g,C){return ji((0,z.m9)(y),bs.credential(g,C))}(this._delegate,C,w))}signInWithEmailLink(C,w){return Fr(this._delegate,function(y,g,C){return li.apply(this,arguments)}(this._delegate,C,w))}signInWithPhoneNumber(C,w){return C3(this._delegate,function(y,g,C){return Rn.apply(this,arguments)}(this._delegate,C,w))}signInWithPopup(C){var w=this;return(0,l.Z)(function*(){return I4(Wc(),w._delegate,"operation-not-supported-in-this-environment"),Fr(w._delegate,function(y,g,C){return io.apply(this,arguments)}(w._delegate,C,l2))})()}signInWithRedirect(C){var w=this;return(0,l.Z)(function*(){return I4(Wc(),w._delegate,"operation-not-supported-in-this-environment"),yield c2(w._delegate),function(y,g,C){return function(y,g,C){return Mi.apply(this,arguments)}(y,g,C)}(w._delegate,C,l2)})()}updateCurrentUser(C){return this._delegate.updateCurrentUser(C)}verifyPasswordResetCode(C){return function(y,g){return K1.apply(this,arguments)}(this._delegate,C)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Cr,y})();function qs(y,g,C){let w=y;"function"!=typeof y&&({next:w,error:g,complete:C}=y);const x=w;return{next:Z=>x(Z&&cs.getOrCreate(Z)),error:g,complete:C}}function qm(y,g){const C=function(y,g){const C=v5();if(!C)return[];const w=Qi(Ju,y,g);switch(C.getItem(w)){case Cr.NONE:return[ht];case Cr.LOCAL:return[ea,yn];case Cr.SESSION:return[yn];default:return[]}}(y,g);if("undefined"!=typeof self&&!C.includes(ea)&&C.push(ea),"undefined"!=typeof window)for(const w of[J1,yn])C.includes(w)||C.push(w);return C.includes(ht)||C.push(ht),C}class E5{constructor(){this.providerId="phone",this._delegate=new le(g3(se.Z.auth()))}static credential(g,C){return le.credential(g,C)}verifyPhoneNumber(g,C){return this._delegate.verifyPhoneNumber(g,C)}unwrap(){return this._delegate}}E5.PHONE_SIGN_IN_METHOD=le.PHONE_SIGN_IN_METHOD,E5.PROVIDER_ID=le.PROVIDER_ID;const M5=Te;class $m{constructor(g,C,w=se.Z.app()){var x;M5(null===(x=w.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new s5(g,C,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(y){y.INTERNAL.registerComponent(new tt.wA("auth-compat",g=>{const C=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new la(C,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bs,FacebookAuthProvider:Va,GithubAuthProvider:fr,GoogleAuthProvider:Z1,OAuthProvider:jo,SAMLAuthProvider:Ti,PhoneAuthProvider:E5,PhoneMultiFactorGenerator:g5,RecaptchaVerifier:$m,TwitterAuthProvider:Oa,Auth:la,AuthCredential:A2,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.9")}(se.Z)},6676:function(it,ke){!function(B){"use strict";function l(_e){return Array.prototype.slice.call(_e)}function se(_e){return new Promise(function(oe,ge){_e.onsuccess=function(){oe(_e.result)},_e.onerror=function(){ge(_e.error)}})}function z(_e,oe,ge){var Ee,Ie=new Promise(function(et,Lt){se(Ee=_e[oe].apply(_e,ge)).then(et,Lt)});return Ie.request=Ee,Ie}function pe(_e,oe,ge){var Ee=z(_e,oe,ge);return Ee.then(function(Ie){if(Ie)return new H(Ie,Ee.request)})}function ae(_e,oe,ge){ge.forEach(function(Ee){Object.defineProperty(_e.prototype,Ee,{get:function(){return this[oe][Ee]},set:function(Ie){this[oe][Ee]=Ie}})})}function ee(_e,oe,ge,Ee){Ee.forEach(function(Ie){Ie in ge.prototype&&(_e.prototype[Ie]=function(){return z(this[oe],Ie,arguments)})})}function Ce(_e,oe,ge,Ee){Ee.forEach(function(Ie){Ie in ge.prototype&&(_e.prototype[Ie]=function(){return this[oe][Ie].apply(this[oe],arguments)})})}function te(_e,oe,ge,Ee){Ee.forEach(function(Ie){Ie in ge.prototype&&(_e.prototype[Ie]=function(){return pe(this[oe],Ie,arguments)})})}function ie(_e){this._index=_e}function H(_e,oe){this._cursor=_e,this._request=oe}function G(_e){this._store=_e}function W(_e){this._tx=_e,this.complete=new Promise(function(oe,ge){_e.oncomplete=function(){oe()},_e.onerror=function(){ge(_e.error)},_e.onabort=function(){ge(_e.error)}})}function de(_e,oe,ge){this._db=_e,this.oldVersion=oe,this.transaction=new W(ge)}function me(_e){this._db=_e}ae(ie,"_index",["name","keyPath","multiEntry","unique"]),ee(ie,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),te(ie,"_index",IDBIndex,["openCursor","openKeyCursor"]),ae(H,"_cursor",["direction","key","primaryKey","value"]),ee(H,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(_e){_e in IDBCursor.prototype&&(H.prototype[_e]=function(){var oe=this,ge=arguments;return Promise.resolve().then(function(){return oe._cursor[_e].apply(oe._cursor,ge),se(oe._request).then(function(Ee){if(Ee)return new H(Ee,oe._request)})})})}),G.prototype.createIndex=function(){return new ie(this._store.createIndex.apply(this._store,arguments))},G.prototype.index=function(){return new ie(this._store.index.apply(this._store,arguments))},ae(G,"_store",["name","keyPath","indexNames","autoIncrement"]),ee(G,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),te(G,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Ce(G,"_store",IDBObjectStore,["deleteIndex"]),W.prototype.objectStore=function(){return new G(this._tx.objectStore.apply(this._tx,arguments))},ae(W,"_tx",["objectStoreNames","mode"]),Ce(W,"_tx",IDBTransaction,["abort"]),de.prototype.createObjectStore=function(){return new G(this._db.createObjectStore.apply(this._db,arguments))},ae(de,"_db",["name","version","objectStoreNames"]),Ce(de,"_db",IDBDatabase,["deleteObjectStore","close"]),me.prototype.transaction=function(){return new W(this._db.transaction.apply(this._db,arguments))},ae(me,"_db",["name","version","objectStoreNames"]),Ce(me,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(_e){[G,ie].forEach(function(oe){_e in oe.prototype&&(oe.prototype[_e.replace("open","iterate")]=function(){var ge=l(arguments),Ee=ge[ge.length-1],Ie=this._store||this._index,et=Ie[_e].apply(Ie,ge.slice(0,-1));et.onsuccess=function(){Ee(et.result)}})})}),[ie,G].forEach(function(_e){_e.prototype.getAll||(_e.prototype.getAll=function(oe,ge){var Ee=this,Ie=[];return new Promise(function(et){Ee.iterateCursor(oe,function(Lt){Lt?(Ie.push(Lt.value),void 0===ge||Ie.length!=ge?Lt.continue():et(Ie)):et(Ie)})})})}),B.openDb=function(_e,oe,ge){var Ee=z(indexedDB,"open",[_e,oe]),Ie=Ee.request;return Ie&&(Ie.onupgradeneeded=function(et){ge&&ge(new de(Ie.result,et.oldVersion,Ie.transaction))}),Ee.then(function(et){return new me(et)})},B.deleteDb=function(_e){return z(indexedDB,"deleteDatabase",[_e])},Object.defineProperty(B,"__esModule",{value:!0})}(ke)},7574:(it,ke,B)=>{"use strict";B.d(ke,{y:()=>G});var l=B(7393),z=B(9181),pe=B(6490),ee=B(6554),Ce=B(4487);var H=B(2494);let G=(()=>{class de{constructor(Se){this._isScalar=!1,Se&&(this._subscribe=Se)}lift(Se){const we=new de;return we.source=this,we.operator=Se,we}subscribe(Se,we,_e){const{operator:oe}=this,ge=function(de,me,Se){if(de){if(de instanceof l.L)return de;if(de[z.b])return de[z.b]()}return de||me||Se?new l.L(de,me,Se):new l.L(pe.c)}(Se,we,_e);if(ge.add(oe?oe.call(ge,this.source):this.source||H.v.useDeprecatedSynchronousErrorHandling&&!ge.syncErrorThrowable?this._subscribe(ge):this._trySubscribe(ge)),H.v.useDeprecatedSynchronousErrorHandling&&ge.syncErrorThrowable&&(ge.syncErrorThrowable=!1,ge.syncErrorThrown))throw ge.syncErrorValue;return ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(we){H.v.useDeprecatedSynchronousErrorHandling&&(Se.syncErrorThrown=!0,Se.syncErrorValue=we),function(de){for(;de;){const{closed:me,destination:Se,isStopped:we}=de;if(me||we)return!1;de=Se&&Se instanceof l.L?Se:null}return!0}(Se)?Se.error(we):console.warn(we)}}forEach(Se,we){return new(we=W(we))((_e,oe)=>{let ge;ge=this.subscribe(Ee=>{try{Se(Ee)}catch(Ie){oe(Ie),ge&&ge.unsubscribe()}},oe,_e)})}_subscribe(Se){const{source:we}=this;return we&&we.subscribe(Se)}[ee.L](){return this}pipe(...Se){return 0===Se.length?this:function(de){return 0===de.length?Ce.y:1===de.length?de[0]:function(Se){return de.reduce((we,_e)=>_e(we),Se)}}(Se)(this)}toPromise(Se){return new(Se=W(Se))((we,_e)=>{let oe;this.subscribe(ge=>oe=ge,ge=>_e(ge),()=>we(oe))})}}return de.create=me=>new de(me),de})();function W(de){if(de||(de=H.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},6490:(it,ke,B)=>{"use strict";B.d(ke,{c:()=>z});var l=B(2494),se=B(4449);const z={closed:!0,next(pe){},error(pe){if(l.v.useDeprecatedSynchronousErrorHandling)throw pe;(0,se.z)(pe)},complete(){}}},9765:(it,ke,B)=>{"use strict";B.d(ke,{Yc:()=>Ce,xQ:()=>te});var l=B(7574),se=B(7393),z=B(5319),pe=B(7971),ae=B(8858),ee=B(9181);class Ce extends se.L{constructor(G){super(G),this.destination=G}}let te=(()=>{class H extends l.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new Ce(this)}lift(W){const de=new ie(this,this);return de.operator=W,de}next(W){if(this.closed)throw new pe.N;if(!this.isStopped){const{observers:de}=this,me=de.length,Se=de.slice();for(let we=0;we<me;we++)Se[we].next(W)}}error(W){if(this.closed)throw new pe.N;this.hasError=!0,this.thrownError=W,this.isStopped=!0;const{observers:de}=this,me=de.length,Se=de.slice();for(let we=0;we<me;we++)Se[we].error(W);this.observers.length=0}complete(){if(this.closed)throw new pe.N;this.isStopped=!0;const{observers:W}=this,de=W.length,me=W.slice();for(let Se=0;Se<de;Se++)me[Se].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(W){if(this.closed)throw new pe.N;return super._trySubscribe(W)}_subscribe(W){if(this.closed)throw new pe.N;return this.hasError?(W.error(this.thrownError),z.w.EMPTY):this.isStopped?(W.complete(),z.w.EMPTY):(this.observers.push(W),new ae.W(this,W))}asObservable(){const W=new l.y;return W.source=this,W}}return H.create=(G,W)=>new ie(G,W),H})();class ie extends te{constructor(G,W){super(),this.destination=G,this.source=W}next(G){const{destination:W}=this;W&&W.next&&W.next(G)}error(G){const{destination:W}=this;W&&W.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:W}=this;return W?this.source.subscribe(G):z.w.EMPTY}}},8858:(it,ke,B)=>{"use strict";B.d(ke,{W:()=>se});var l=B(5319);class se extends l.w{constructor(pe,ae){super(),this.subject=pe,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const pe=this.subject,ae=pe.observers;if(this.subject=null,!ae||0===ae.length||pe.isStopped||pe.closed)return;const ee=ae.indexOf(this.subscriber);-1!==ee&&ae.splice(ee,1)}}},7393:(it,ke,B)=>{"use strict";B.d(ke,{L:()=>Ce});var l=B(9105),se=B(6490),z=B(5319),pe=B(9181),ae=B(2494),ee=B(4449);class Ce extends z.w{constructor(H,G,W){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=se.c;break;case 1:if(!H){this.destination=se.c;break}if("object"==typeof H){H instanceof Ce?(this.syncErrorThrowable=H.syncErrorThrowable,this.destination=H,H.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,H));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,H,G,W)}}[pe.b](){return this}static create(H,G,W){const de=new Ce(H,G,W);return de.syncErrorThrowable=!1,de}next(H){this.isStopped||this._next(H)}error(H){this.isStopped||(this.isStopped=!0,this._error(H))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(H){this.destination.next(H)}_error(H){this.destination.error(H),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:H}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=H,this}}class te extends Ce{constructor(H,G,W,de){super(),this._parentSubscriber=H;let me,Se=this;(0,l.m)(G)?me=G:G&&(me=G.next,W=G.error,de=G.complete,G!==se.c&&(Se=Object.create(G),(0,l.m)(Se.unsubscribe)&&this.add(Se.unsubscribe.bind(Se)),Se.unsubscribe=this.unsubscribe.bind(this))),this._context=Se,this._next=me,this._error=W,this._complete=de}next(H){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;ae.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,H)&&this.unsubscribe():this.__tryOrUnsub(this._next,H)}}error(H){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:W}=ae.v;if(this._error)W&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,H),this.unsubscribe()):(this.__tryOrUnsub(this._error,H),this.unsubscribe());else if(G.syncErrorThrowable)W?(G.syncErrorValue=H,G.syncErrorThrown=!0):(0,ee.z)(H),this.unsubscribe();else{if(this.unsubscribe(),W)throw H;(0,ee.z)(H)}}}complete(){if(!this.isStopped){const{_parentSubscriber:H}=this;if(this._complete){const G=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&H.syncErrorThrowable?(this.__tryOrSetError(H,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(H,G){try{H.call(this._context,G)}catch(W){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw W;(0,ee.z)(W)}}__tryOrSetError(H,G,W){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,W)}catch(de){return ae.v.useDeprecatedSynchronousErrorHandling?(H.syncErrorValue=de,H.syncErrorThrown=!0,!0):((0,ee.z)(de),!0)}return!1}_unsubscribe(){const{_parentSubscriber:H}=this;this._context=null,this._parentSubscriber=null,H.unsubscribe()}}},5319:(it,ke,B)=>{"use strict";B.d(ke,{w:()=>ee});var l=B(9796),se=B(1555),z=B(9105);const ae=(()=>{function te(ie){return Error.call(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((H,G)=>`${G+1}) ${H.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie,this}return te.prototype=Object.create(Error.prototype),te})();class ee{constructor(ie){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ie&&(this._ctorUnsubscribe=!0,this._unsubscribe=ie)}unsubscribe(){let ie;if(this.closed)return;let{_parentOrParents:H,_ctorUnsubscribe:G,_unsubscribe:W,_subscriptions:de}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,H instanceof ee)H.remove(this);else if(null!==H)for(let me=0;me<H.length;++me)H[me].remove(this);if((0,z.m)(W)){G&&(this._unsubscribe=void 0);try{W.call(this)}catch(me){ie=me instanceof ae?Ce(me.errors):[me]}}if((0,l.k)(de)){let me=-1,Se=de.length;for(;++me<Se;){const we=de[me];if((0,se.K)(we))try{we.unsubscribe()}catch(_e){ie=ie||[],_e instanceof ae?ie=ie.concat(Ce(_e.errors)):ie.push(_e)}}}if(ie)throw new ae(ie)}add(ie){let H=ie;if(!ie)return ee.EMPTY;switch(typeof ie){case"function":H=new ee(ie);case"object":if(H===this||H.closed||"function"!=typeof H.unsubscribe)return H;if(this.closed)return H.unsubscribe(),H;if(!(H instanceof ee)){const de=H;H=new ee,H._subscriptions=[de]}break;default:throw new Error("unrecognized teardown "+ie+" added to Subscription.")}let{_parentOrParents:G}=H;if(null===G)H._parentOrParents=this;else if(G instanceof ee){if(G===this)return H;H._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return H;G.push(this)}const W=this._subscriptions;return null===W?this._subscriptions=[H]:W.push(H),H}remove(ie){const H=this._subscriptions;if(H){const G=H.indexOf(ie);-1!==G&&H.splice(G,1)}}}var te;function Ce(te){return te.reduce((ie,H)=>ie.concat(H instanceof ae?H.errors:H),[])}ee.EMPTY=((te=new ee).closed=!0,te)},2494:(it,ke,B)=>{"use strict";B.d(ke,{v:()=>se});let l=!1;const se={Promise:void 0,set useDeprecatedSynchronousErrorHandling(z){if(z){const pe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+pe.stack)}else l&&console.log("RxJS: Back to a better error behavior. Thank you. <3");l=z},get useDeprecatedSynchronousErrorHandling(){return l}}},5345:(it,ke,B)=>{"use strict";B.d(ke,{IY:()=>pe,Ds:()=>ee,ft:()=>te});var l=B(7393),se=B(7574),z=B(7444);class pe extends l.L{constructor(H){super(),this.parent=H}_next(H){this.parent.notifyNext(H)}_error(H){this.parent.notifyError(H),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends l.L{notifyNext(H){this.destination.next(H)}notifyError(H){this.destination.error(H)}notifyComplete(){this.destination.complete()}}function te(ie,H){if(H.closed)return;if(ie instanceof se.y)return ie.subscribe(H);let G;try{G=(0,z.s)(ie)(H)}catch(W){H.error(W)}return G}},2441:(it,ke,B)=>{"use strict";B.d(ke,{c:()=>ae,N:()=>ee});var l=B(9765),se=B(7574),z=B(5319),pe=B(1307);class ae extends se.y{constructor(G,W){super(),this.source=G,this.subjectFactory=W,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new z.w,G.add(this.source.subscribe(new Ce(this.getSubject(),this))),G.closed&&(this._connection=null,G=z.w.EMPTY)),G}refCount(){return(0,pe.x)()(this)}}const ee=(()=>{const H=ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:H._subscribe},_isComplete:{value:H._isComplete,writable:!0},getSubject:{value:H.getSubject},connect:{value:H.connect},refCount:{value:H.refCount}}})();class Ce extends l.Yc{constructor(G,W){super(G),this.connectable=W}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const W=G._connection;G._refCount=0,G._subject=null,G._connection=null,W&&W.unsubscribe()}}}},9193:(it,ke,B)=>{"use strict";B.d(ke,{E:()=>se,c:()=>z});var l=B(7574);const se=new l.y(ae=>ae.complete());function z(ae){return ae?function(ae){return new l.y(ee=>ae.schedule(()=>ee.complete()))}(ae):se}},4402:(it,ke,B)=>{"use strict";B.d(ke,{D:()=>Se});var l=B(7574),se=B(7444),z=B(5319),pe=B(6554),Ce=B(4087),te=B(377),G=B(4072),W=B(9489);function Se(we,_e){return _e?function(we,_e){if(null!=we){if(function(we){return we&&"function"==typeof we[pe.L]}(we))return function(we,_e){return new l.y(oe=>{const ge=new z.w;return ge.add(_e.schedule(()=>{const Ee=we[pe.L]();ge.add(Ee.subscribe({next(Ie){ge.add(_e.schedule(()=>oe.next(Ie)))},error(Ie){ge.add(_e.schedule(()=>oe.error(Ie)))},complete(){ge.add(_e.schedule(()=>oe.complete()))}}))})),ge})}(we,_e);if((0,G.t)(we))return function(we,_e){return new l.y(oe=>{const ge=new z.w;return ge.add(_e.schedule(()=>we.then(Ee=>{ge.add(_e.schedule(()=>{oe.next(Ee),ge.add(_e.schedule(()=>oe.complete()))}))},Ee=>{ge.add(_e.schedule(()=>oe.error(Ee)))}))),ge})}(we,_e);if((0,W.z)(we))return(0,Ce.r)(we,_e);if(function(we){return we&&"function"==typeof we[te.hZ]}(we)||"string"==typeof we)return function(we,_e){if(!we)throw new Error("Iterable cannot be null");return new l.y(oe=>{const ge=new z.w;let Ee;return ge.add(()=>{Ee&&"function"==typeof Ee.return&&Ee.return()}),ge.add(_e.schedule(()=>{Ee=we[te.hZ](),ge.add(_e.schedule(function(){if(oe.closed)return;let Ie,et;try{const Lt=Ee.next();Ie=Lt.value,et=Lt.done}catch(Lt){return void oe.error(Lt)}et?oe.complete():(oe.next(Ie),this.schedule())}))})),ge})}(we,_e)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,_e):we instanceof l.y?we:new l.y((0,se.s)(we))}},6693:(it,ke,B)=>{"use strict";B.d(ke,{n:()=>pe});var l=B(7574),se=B(5015),z=B(4087);function pe(ae,ee){return ee?(0,z.r)(ae,ee):new l.y((0,se.V)(ae))}},6682:(it,ke,B)=>{"use strict";B.d(ke,{T:()=>ae});var l=B(7574),se=B(4869),z=B(3282),pe=B(6693);function ae(...ee){let Ce=Number.POSITIVE_INFINITY,te=null,ie=ee[ee.length-1];return(0,se.K)(ie)?(te=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(Ce=ee.pop())):"number"==typeof ie&&(Ce=ee.pop()),null===te&&1===ee.length&&ee[0]instanceof l.y?ee[0]:(0,z.J)(Ce)((0,pe.n)(ee,te))}},5917:(it,ke,B)=>{"use strict";B.d(ke,{of:()=>pe});var l=B(4869),se=B(6693),z=B(4087);function pe(...ae){let ee=ae[ae.length-1];return(0,l.K)(ee)?(ae.pop(),(0,z.r)(ae,ee)):(0,se.n)(ae)}},8002:(it,ke,B)=>{"use strict";B.d(ke,{U:()=>se});var l=B(7393);function se(ae,ee){return function(te){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new z(ae,ee))}}class z{constructor(ee,Ce){this.project=ee,this.thisArg=Ce}call(ee,Ce){return Ce.subscribe(new pe(ee,this.project,this.thisArg))}}class pe extends l.L{constructor(ee,Ce,te){super(ee),this.project=Ce,this.count=0,this.thisArg=te||this}_next(ee){let Ce;try{Ce=this.project.call(this.thisArg,ee,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(Ce)}}},3282:(it,ke,B)=>{"use strict";B.d(ke,{J:()=>z});var l=B(9773),se=B(4487);function z(pe=Number.POSITIVE_INFINITY){return(0,l.zg)(se.y,pe)}},9773:(it,ke,B)=>{"use strict";B.d(ke,{zg:()=>pe});var l=B(8002),se=B(4402),z=B(5345);function pe(te,ie,H=Number.POSITIVE_INFINITY){return"function"==typeof ie?G=>G.pipe(pe((W,de)=>(0,se.D)(te(W,de)).pipe((0,l.U)((me,Se)=>ie(W,me,de,Se))),H)):("number"==typeof ie&&(H=ie),G=>G.lift(new ae(te,H)))}class ae{constructor(ie,H=Number.POSITIVE_INFINITY){this.project=ie,this.concurrent=H}call(ie,H){return H.subscribe(new ee(ie,this.project,this.concurrent))}}class ee extends z.Ds{constructor(ie,H,G=Number.POSITIVE_INFINITY){super(ie),this.project=H,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ie){this.active<this.concurrent?this._tryNext(ie):this.buffer.push(ie)}_tryNext(ie){let H;const G=this.index++;try{H=this.project(ie,G)}catch(W){return void this.destination.error(W)}this.active++,this._innerSub(H)}_innerSub(ie){const H=new z.IY(this),G=this.destination;G.add(H);const W=(0,z.ft)(ie,H);W!==H&&G.add(W)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ie){this.destination.next(ie)}notifyComplete(){const ie=this.buffer;this.active--,ie.length>0?this._next(ie.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(it,ke,B)=>{"use strict";B.d(ke,{ht:()=>G,QV:()=>ie});var l=B(7393),se=B(9193),z=B(5917),pe=B(7574);class te{constructor(me,Se,we){this.kind=me,this.value=Se,this.error=we,this.hasValue="N"===me}observe(me){switch(this.kind){case"N":return me.next&&me.next(this.value);case"E":return me.error&&me.error(this.error);case"C":return me.complete&&me.complete()}}do(me,Se,we){switch(this.kind){case"N":return me&&me(this.value);case"E":return Se&&Se(this.error);case"C":return we&&we()}}accept(me,Se,we){return me&&"function"==typeof me.next?this.observe(me):this.do(me,Se,we)}toObservable(){switch(this.kind){case"N":return(0,z.of)(this.value);case"E":return de=this.error,new pe.y(Se=>Se.error(de));case"C":return(0,se.c)()}var de;throw new Error("unexpected notification kind value")}static createNext(me){return void 0!==me?new te("N",me):te.undefinedValueNotification}static createError(me){return new te("E",void 0,me)}static createComplete(){return te.completeNotification}}function ie(de,me=0){return function(we){return we.lift(new H(de,me))}}te.completeNotification=new te("C"),te.undefinedValueNotification=new te("N",void 0);class H{constructor(me,Se=0){this.scheduler=me,this.delay=Se}call(me,Se){return Se.subscribe(new G(me,this.scheduler,this.delay))}}class G extends l.L{constructor(me,Se,we=0){super(me),this.scheduler=Se,this.delay=we}static dispatch(me){const{notification:Se,destination:we}=me;Se.observe(we),this.unsubscribe()}scheduleMessage(me){this.destination.add(this.scheduler.schedule(G.dispatch,this.delay,new W(me,this.destination)))}_next(me){this.scheduleMessage(te.createNext(me))}_error(me){this.scheduleMessage(te.createError(me)),this.unsubscribe()}_complete(){this.scheduleMessage(te.createComplete()),this.unsubscribe()}}class W{constructor(me,Se){this.notification=me,this.destination=Se}}},1307:(it,ke,B)=>{"use strict";B.d(ke,{x:()=>se});var l=B(7393);function se(){return function(ee){return ee.lift(new z(ee))}}class z{constructor(ee){this.connectable=ee}call(ee,Ce){const{connectable:te}=this;te._refCount++;const ie=new pe(ee,te),H=Ce.subscribe(ie);return ie.closed||(ie.connection=te.connect()),H}}class pe extends l.L{constructor(ee,Ce){super(ee),this.connectable=Ce}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const Ce=ee._refCount;if(Ce<=0)return void(this.connection=null);if(ee._refCount=Ce-1,Ce>1)return void(this.connection=null);const{connection:te}=this,ie=ee._connection;this.connection=null,ie&&(!te||ie===te)&&ie.unsubscribe()}}},8819:(it,ke,B)=>{"use strict";B.d(ke,{B:()=>Ce});var l=B(2441);var pe=B(1307),ae=B(9765);function ee(){return new ae.xQ}function Ce(){return te=>(0,pe.x)()(function(te,ie){return function(G){let W;W="function"==typeof te?te:function(){return te};const de=Object.create(G,l.N);return de.source=G,de.subjectFactory=W,de}}(ee)(te))}},3101:(it,ke,B)=>{"use strict";B.d(ke,{R:()=>_e});var l=B(7574);let se=1;const z=Promise.resolve(),pe={};function ae(ge){return ge in pe&&(delete pe[ge],!0)}const ee={setImmediate(ge){const Ee=se++;return pe[Ee]=!0,z.then(()=>ae(Ee)&&ge()),Ee},clearImmediate(ge){ae(ge)}};var te=B(6465),H=B(6102);const de=new class extends H.v{flush(Ee){this.active=!0,this.scheduled=void 0;const{actions:Ie}=this;let et,Lt=-1,jt=Ie.length;Ee=Ee||Ie.shift();do{if(et=Ee.execute(Ee.state,Ee.delay))break}while(++Lt<jt&&(Ee=Ie.shift()));if(this.active=!1,et){for(;++Lt<jt&&(Ee=Ie.shift());)Ee.unsubscribe();throw et}}}(class extends te.o{constructor(Ee,Ie){super(Ee,Ie),this.scheduler=Ee,this.work=Ie}requestAsyncId(Ee,Ie,et=0){return null!==et&&et>0?super.requestAsyncId(Ee,Ie,et):(Ee.actions.push(this),Ee.scheduled||(Ee.scheduled=ee.setImmediate(Ee.flush.bind(Ee,null))))}recycleAsyncId(Ee,Ie,et=0){if(null!==et&&et>0||null===et&&this.delay>0)return super.recycleAsyncId(Ee,Ie,et);0===Ee.actions.length&&(ee.clearImmediate(Ie),Ee.scheduled=void 0)}});var me=B(9796);class we extends l.y{constructor(Ee,Ie=0,et=de){var ge;super(),this.source=Ee,this.delayTime=Ie,this.scheduler=et,(!(!(0,me.k)(ge=Ie)&&ge-parseFloat(ge)+1>=0)||Ie<0)&&(this.delayTime=0),(!et||"function"!=typeof et.schedule)&&(this.scheduler=de)}static create(Ee,Ie=0,et=de){return new we(Ee,Ie,et)}static dispatch(Ee){const{source:Ie,subscriber:et}=Ee;return this.add(Ie.subscribe(et))}_subscribe(Ee){return this.scheduler.schedule(we.dispatch,this.delayTime,{source:this.source,subscriber:Ee})}}function _e(ge,Ee=0){return function(et){return et.lift(new oe(ge,Ee))}}class oe{constructor(Ee,Ie){this.scheduler=Ee,this.delay=Ie}call(Ee,Ie){return new we(Ie,this.delay,this.scheduler).subscribe(Ee)}}},3342:(it,ke,B)=>{"use strict";B.d(ke,{b:()=>pe});var l=B(7393);function se(){}var z=B(9105);function pe(Ce,te,ie){return function(G){return G.lift(new ae(Ce,te,ie))}}class ae{constructor(te,ie,H){this.nextOrObserver=te,this.error=ie,this.complete=H}call(te,ie){return ie.subscribe(new ee(te,this.nextOrObserver,this.error,this.complete))}}class ee extends l.L{constructor(te,ie,H,G){super(te),this._tapNext=se,this._tapError=se,this._tapComplete=se,this._tapError=H||se,this._tapComplete=G||se,(0,z.m)(ie)?(this._context=this,this._tapNext=ie):ie&&(this._context=ie,this._tapNext=ie.next||se,this._tapError=ie.error||se,this._tapComplete=ie.complete||se)}_next(te){try{this._tapNext.call(this._context,te)}catch(ie){return void this.destination.error(ie)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(ie){return void this.destination.error(ie)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(it,ke,B)=>{"use strict";B.d(ke,{r:()=>z});var l=B(7574),se=B(5319);function z(pe,ae){return new l.y(ee=>{const Ce=new se.w;let te=0;return Ce.add(ae.schedule(function(){te!==pe.length?(ee.next(pe[te++]),ee.closed||Ce.add(this.schedule())):ee.complete()})),Ce})}},6465:(it,ke,B)=>{"use strict";B.d(ke,{o:()=>z});var l=B(5319);class se extends l.w{constructor(ae,ee){super()}schedule(ae,ee=0){return this}}class z extends se{constructor(ae,ee){super(ae,ee),this.scheduler=ae,this.work=ee,this.pending=!1}schedule(ae,ee=0){if(this.closed)return this;this.state=ae;const Ce=this.id,te=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(te,Ce,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(te,this.id,ee),this}requestAsyncId(ae,ee,Ce=0){return setInterval(ae.flush.bind(ae,this),Ce)}recycleAsyncId(ae,ee,Ce=0){if(null!==Ce&&this.delay===Ce&&!1===this.pending)return ee;clearInterval(ee)}execute(ae,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(ae,ee);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ee){let te,Ce=!1;try{this.work(ae)}catch(ie){Ce=!0,te=!!ie&&ie||new Error(ie)}if(Ce)return this.unsubscribe(),te}_unsubscribe(){const ae=this.id,ee=this.scheduler,Ce=ee.actions,te=Ce.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&Ce.splice(te,1),null!=ae&&(this.id=this.recycleAsyncId(ee,ae,null)),this.delay=null}}},6102:(it,ke,B)=>{"use strict";B.d(ke,{v:()=>se});let l=(()=>{class z{constructor(ae,ee=z.now){this.SchedulerAction=ae,this.now=ee}schedule(ae,ee=0,Ce){return new this.SchedulerAction(this,ae).schedule(Ce,ee)}}return z.now=()=>Date.now(),z})();class se extends l{constructor(pe,ae=l.now){super(pe,()=>se.delegate&&se.delegate!==this?se.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(pe,ae=0,ee){return se.delegate&&se.delegate!==this?se.delegate.schedule(pe,ae,ee):super.schedule(pe,ae,ee)}flush(pe){const{actions:ae}=this;if(this.active)return void ae.push(pe);let ee;this.active=!0;do{if(ee=pe.execute(pe.state,pe.delay))break}while(pe=ae.shift());if(this.active=!1,ee){for(;pe=ae.shift();)pe.unsubscribe();throw ee}}}},3637:(it,ke,B)=>{"use strict";B.d(ke,{z:()=>z,P:()=>pe});var l=B(6465);const z=new(B(6102).v)(l.o),pe=z},7771:(it,ke,B)=>{"use strict";B.d(ke,{c:()=>ee,N:()=>ae});var l=B(6465),z=B(6102);const ae=new class extends z.v{}(class extends l.o{constructor(te,ie){super(te,ie),this.scheduler=te,this.work=ie}schedule(te,ie=0){return ie>0?super.schedule(te,ie):(this.delay=ie,this.state=te,this.scheduler.flush(this),this)}execute(te,ie){return ie>0||this.closed?super.execute(te,ie):this._execute(te,ie)}requestAsyncId(te,ie,H=0){return null!==H&&H>0||null===H&&this.delay>0?super.requestAsyncId(te,ie,H):te.flush(this)}}),ee=ae},377:(it,ke,B)=>{"use strict";B.d(ke,{hZ:()=>se});const se="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(it,ke,B)=>{"use strict";B.d(ke,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(it,ke,B)=>{"use strict";B.d(ke,{b:()=>l});const l="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(it,ke,B)=>{"use strict";B.d(ke,{N:()=>se});const se=(()=>{function z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return z.prototype=Object.create(Error.prototype),z})()},4449:(it,ke,B)=>{"use strict";function l(se){setTimeout(()=>{throw se},0)}B.d(ke,{z:()=>l})},4487:(it,ke,B)=>{"use strict";function l(se){return se}B.d(ke,{y:()=>l})},9796:(it,ke,B)=>{"use strict";B.d(ke,{k:()=>l});const l=Array.isArray||(se=>se&&"number"==typeof se.length)},9489:(it,ke,B)=>{"use strict";B.d(ke,{z:()=>l});const l=se=>se&&"number"==typeof se.length&&"function"!=typeof se},9105:(it,ke,B)=>{"use strict";function l(se){return"function"==typeof se}B.d(ke,{m:()=>l})},1555:(it,ke,B)=>{"use strict";function l(se){return null!==se&&"object"==typeof se}B.d(ke,{K:()=>l})},4072:(it,ke,B)=>{"use strict";function l(se){return!!se&&"function"!=typeof se.subscribe&&"function"==typeof se.then}B.d(ke,{t:()=>l})},4869:(it,ke,B)=>{"use strict";function l(se){return se&&"function"==typeof se.schedule}B.d(ke,{K:()=>l})},7444:(it,ke,B)=>{"use strict";B.d(ke,{s:()=>G});var l=B(5015),se=B(4449),pe=B(377),ee=B(6554),te=B(9489),ie=B(4072),H=B(1555);const G=W=>{if(W&&"function"==typeof W[ee.L])return(W=>de=>{const me=W[ee.L]();if("function"!=typeof me.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return me.subscribe(de)})(W);if((0,te.z)(W))return(0,l.V)(W);if((0,ie.t)(W))return(W=>de=>(W.then(me=>{de.closed||(de.next(me),de.complete())},me=>de.error(me)).then(null,se.z),de))(W);if(W&&"function"==typeof W[pe.hZ])return(W=>de=>{const me=W[pe.hZ]();for(;;){let Se;try{Se=me.next()}catch(we){return de.error(we),de}if(Se.done){de.complete();break}if(de.next(Se.value),de.closed)break}return"function"==typeof me.return&&de.add(()=>{me.return&&me.return()}),de})(W);{const me=`You provided ${(0,H.K)(W)?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(me)}}},5015:(it,ke,B)=>{"use strict";B.d(ke,{V:()=>l});const l=se=>z=>{for(let pe=0,ae=se.length;pe<ae&&!z.closed;pe++)z.next(se[pe]);z.complete()}},434:(it,ke,B)=>{"use strict";var l=B(7716);let se=null;function z(){return se}const Ce=new l.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,l.Yz7)({factory:ie,token:n,providedIn:"platform"}),n})();function ie(){return(0,l.LFG)(G)}const H=new l.OlP("Location Initialized");let G=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(t){const i=z().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=z().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){W()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){W()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=(0,l.Yz7)({factory:de,token:n,providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function de(){return new G((0,l.LFG)(Ce))}function me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,l.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const e=(0,l.LFG)(Ce).location;return new Ee((0,l.LFG)(te),e&&e.origin||"")}const ge=new l.OlP("appBaseHref");let Ee=(()=>{class n extends _e{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return me(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+we(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,a){const u=this.prepareExternalUrl(r+we(a));this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,a){const u=this.prepareExternalUrl(r+we(a));this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(te),l.LFG(ge,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends _e{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=me(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,a){let u=this.prepareExternalUrl(r+we(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,i,u)}replaceState(t,i,r,a){let u=this.prepareExternalUrl(r+we(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(te),l.LFG(ge,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),et=(()=>{class n{constructor(t,i){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Se(xt(r)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+we(i))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,xt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+we(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_e),l.LFG(te))},n.normalizeQueryParams=we,n.joinWithSlash=me,n.stripTrailingSlash=Se,n.\u0275prov=(0,l.Yz7)({factory:Lt,token:n,providedIn:"root"}),n})();function Lt(){return new et((0,l.LFG)(_e),(0,l.LFG)(te))}function xt(n){return n.replace(/\/index.html$/,"")}var _t=(()=>((_t=_t||{})[_t.Zero=0]="Zero",_t[_t.One=1]="One",_t[_t.Two=2]="Two",_t[_t.Few=3]="Few",_t[_t.Many=4]="Many",_t[_t.Other=5]="Other",_t))(),rn=(()=>((rn=rn||{})[rn.Format=0]="Format",rn[rn.Standalone=1]="Standalone",rn))(),Ft=(()=>((Ft=Ft||{})[Ft.Narrow=0]="Narrow",Ft[Ft.Abbreviated=1]="Abbreviated",Ft[Ft.Wide=2]="Wide",Ft[Ft.Short=3]="Short",Ft))(),qt=(()=>((qt=qt||{})[qt.Short=0]="Short",qt[qt.Medium=1]="Medium",qt[qt.Long=2]="Long",qt[qt.Full=3]="Full",qt))(),tt=(()=>((tt=tt||{})[tt.Decimal=0]="Decimal",tt[tt.Group=1]="Group",tt[tt.List=2]="List",tt[tt.PercentSign=3]="PercentSign",tt[tt.PlusSign=4]="PlusSign",tt[tt.MinusSign=5]="MinusSign",tt[tt.Exponential=6]="Exponential",tt[tt.SuperscriptingExponent=7]="SuperscriptingExponent",tt[tt.PerMille=8]="PerMille",tt[tt.Infinity=9]="Infinity",tt[tt.NaN=10]="NaN",tt[tt.TimeSeparator=11]="TimeSeparator",tt[tt.CurrencyDecimal=12]="CurrencyDecimal",tt[tt.CurrencyGroup=13]="CurrencyGroup",tt))();function _s(n,e){return Xt((0,l.cg1)(n)[l.wAp.DateFormat],e)}function Fn(n,e){return Xt((0,l.cg1)(n)[l.wAp.TimeFormat],e)}function Lo(n,e){return Xt((0,l.cg1)(n)[l.wAp.DateTimeFormat],e)}function An(n,e){const t=(0,l.cg1)(n),i=t[l.wAp.NumberSymbols][e];if(void 0===i){if(e===tt.CurrencyDecimal)return t[l.wAp.NumberSymbols][tt.Decimal];if(e===tt.CurrencyGroup)return t[l.wAp.NumberSymbols][tt.Group]}return i}const Fs=l.kL8;function Te(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Xt(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Kr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Pt=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vt={},Zi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var tn=(()=>((tn=tn||{})[tn.Short=0]="Short",tn[tn.ShortGMT=1]="ShortGMT",tn[tn.Long=2]="Long",tn[tn.Extended=3]="Extended",tn))(),He=(()=>((He=He||{})[He.FullYear=0]="FullYear",He[He.Month=1]="Month",He[He.Date=2]="Date",He[He.Hours=3]="Hours",He[He.Minutes=4]="Minutes",He[He.Seconds=5]="Seconds",He[He.FractionalSeconds=6]="FractionalSeconds",He[He.Day=7]="Day",He))(),ot=(()=>((ot=ot||{})[ot.DayPeriods=0]="DayPeriods",ot[ot.Days=1]="Days",ot[ot.Months=2]="Months",ot[ot.Eras=3]="Eras",ot))();function W3(n,e,t,i){let r=function(n){if(K3(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[r,a=1,u=1]=n.split("-").map(h=>+h);return f1(r,a-1,u)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let i;if(i=n.match(Pt))return function(n){const e=new Date(0);let t=0,i=0;const r=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),i=Number(n[9]+n[11])),r.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const u=Number(n[4]||0)-t,h=Number(n[5]||0)-i,m=Number(n[6]||0),F=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,u,h,m,F),e}(i)}const e=new Date(n);if(!K3(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=an(t,e)||e;let h,u=[];for(;e;){if(h=Zi.exec(e),!h){u.push(e);break}{u=u.concat(h.slice(1));const b=u.pop();if(!b)break;e=b}}let m=r.getTimezoneOffset();i&&(m=j1(i,m),r=function(n,e,t){const r=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(j1(e,r)-r))}(r,i));let F="";return u.forEach(b=>{const M=function(n){if(Ut[n])return Ut[n];let e;switch(n){case"G":case"GG":case"GGG":e=Q(ot.Eras,Ft.Abbreviated);break;case"GGGG":e=Q(ot.Eras,Ft.Wide);break;case"GGGGG":e=Q(ot.Eras,Ft.Narrow);break;case"y":e=Y(He.FullYear,1,0,!1,!0);break;case"yy":e=Y(He.FullYear,2,0,!0,!0);break;case"yyy":e=Y(He.FullYear,3,0,!1,!0);break;case"yyyy":e=Y(He.FullYear,4,0,!1,!0);break;case"Y":e=Ri(1);break;case"YY":e=Ri(2,!0);break;case"YYY":e=Ri(3);break;case"YYYY":e=Ri(4);break;case"M":case"L":e=Y(He.Month,1,1);break;case"MM":case"LL":e=Y(He.Month,2,1);break;case"MMM":e=Q(ot.Months,Ft.Abbreviated);break;case"MMMM":e=Q(ot.Months,Ft.Wide);break;case"MMMMM":e=Q(ot.Months,Ft.Narrow);break;case"LLL":e=Q(ot.Months,Ft.Abbreviated,rn.Standalone);break;case"LLLL":e=Q(ot.Months,Ft.Wide,rn.Standalone);break;case"LLLLL":e=Q(ot.Months,Ft.Narrow,rn.Standalone);break;case"w":e=Bn(1);break;case"ww":e=Bn(2);break;case"W":e=Bn(1,!0);break;case"d":e=Y(He.Date,1);break;case"dd":e=Y(He.Date,2);break;case"c":case"cc":e=Y(He.Day,1);break;case"ccc":e=Q(ot.Days,Ft.Abbreviated,rn.Standalone);break;case"cccc":e=Q(ot.Days,Ft.Wide,rn.Standalone);break;case"ccccc":e=Q(ot.Days,Ft.Narrow,rn.Standalone);break;case"cccccc":e=Q(ot.Days,Ft.Short,rn.Standalone);break;case"E":case"EE":case"EEE":e=Q(ot.Days,Ft.Abbreviated);break;case"EEEE":e=Q(ot.Days,Ft.Wide);break;case"EEEEE":e=Q(ot.Days,Ft.Narrow);break;case"EEEEEE":e=Q(ot.Days,Ft.Short);break;case"a":case"aa":case"aaa":e=Q(ot.DayPeriods,Ft.Abbreviated);break;case"aaaa":e=Q(ot.DayPeriods,Ft.Wide);break;case"aaaaa":e=Q(ot.DayPeriods,Ft.Narrow);break;case"b":case"bb":case"bbb":e=Q(ot.DayPeriods,Ft.Abbreviated,rn.Standalone,!0);break;case"bbbb":e=Q(ot.DayPeriods,Ft.Wide,rn.Standalone,!0);break;case"bbbbb":e=Q(ot.DayPeriods,Ft.Narrow,rn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Q(ot.DayPeriods,Ft.Abbreviated,rn.Format,!0);break;case"BBBB":e=Q(ot.DayPeriods,Ft.Wide,rn.Format,!0);break;case"BBBBB":e=Q(ot.DayPeriods,Ft.Narrow,rn.Format,!0);break;case"h":e=Y(He.Hours,1,-12);break;case"hh":e=Y(He.Hours,2,-12);break;case"H":e=Y(He.Hours,1);break;case"HH":e=Y(He.Hours,2);break;case"m":e=Y(He.Minutes,1);break;case"mm":e=Y(He.Minutes,2);break;case"s":e=Y(He.Seconds,1);break;case"ss":e=Y(He.Seconds,2);break;case"S":e=Y(He.FractionalSeconds,1);break;case"SS":e=Y(He.FractionalSeconds,2);break;case"SSS":e=Y(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ce(tn.Short);break;case"ZZZZZ":e=ce(tn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ce(tn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ce(tn.Long);break;default:return null}return Ut[n]=e,e}(b);F+=M?M(r,t,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),F}function f1(n,e,t){const i=new Date(0);return i.setFullYear(n,e,t),i.setHours(0,0,0),i}function an(n,e){const t=function(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Vt[t]=Vt[t]||{},Vt[t][e])return Vt[t][e];let i="";switch(e){case"shortDate":i=_s(n,qt.Short);break;case"mediumDate":i=_s(n,qt.Medium);break;case"longDate":i=_s(n,qt.Long);break;case"fullDate":i=_s(n,qt.Full);break;case"shortTime":i=Fn(n,qt.Short);break;case"mediumTime":i=Fn(n,qt.Medium);break;case"longTime":i=Fn(n,qt.Long);break;case"fullTime":i=Fn(n,qt.Full);break;case"short":const r=an(n,"shortTime"),a=an(n,"shortDate");i=yt(Lo(n,qt.Short),[r,a]);break;case"medium":const u=an(n,"mediumTime"),h=an(n,"mediumDate");i=yt(Lo(n,qt.Medium),[u,h]);break;case"long":const m=an(n,"longTime"),F=an(n,"longDate");i=yt(Lo(n,qt.Long),[m,F]);break;case"full":const b=an(n,"fullTime"),M=an(n,"fullDate");i=yt(Lo(n,qt.Full),[b,M])}return i&&(Vt[t][e]=i),i}function yt(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),n}function Ki(n,e,t="-",i,r){let a="";(n<0||r&&n<=0)&&(r?n=1-n:(n=-n,a=t));let u=String(n);for(;u.length<e;)u="0"+u;return i&&(u=u.substr(u.length-e)),a+u}function Y(n,e,t=0,i=!1,r=!1){return function(a,u){let h=function(n,e){switch(n){case He.FullYear:return e.getFullYear();case He.Month:return e.getMonth();case He.Date:return e.getDate();case He.Hours:return e.getHours();case He.Minutes:return e.getMinutes();case He.Seconds:return e.getSeconds();case He.FractionalSeconds:return e.getMilliseconds();case He.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||h>-t)&&(h+=t),n===He.Hours)0===h&&-12===t&&(h=12);else if(n===He.FractionalSeconds)return function(n,e){return Ki(n,3).substr(0,e)}(h,e);const m=An(u,tt.MinusSign);return Ki(h,e,m,i,r)}}function Q(n,e,t=rn.Format,i=!1){return function(r,a){return function(n,e,t,i,r,a){switch(t){case ot.Months:return function(n,e,t){const i=(0,l.cg1)(n),a=Xt([i[l.wAp.MonthsFormat],i[l.wAp.MonthsStandalone]],e);return Xt(a,t)}(e,r,i)[n.getMonth()];case ot.Days:return function(n,e,t){const i=(0,l.cg1)(n),a=Xt([i[l.wAp.DaysFormat],i[l.wAp.DaysStandalone]],e);return Xt(a,t)}(e,r,i)[n.getDay()];case ot.DayPeriods:const u=n.getHours(),h=n.getMinutes();if(a){const F=function(n){const e=(0,l.cg1)(n);return Te(e),(e[l.wAp.ExtraData][2]||[]).map(i=>"string"==typeof i?Kr(i):[Kr(i[0]),Kr(i[1])])}(e),b=function(n,e,t){const i=(0,l.cg1)(n);Te(i);const a=Xt([i[l.wAp.ExtraData][0],i[l.wAp.ExtraData][1]],e)||[];return Xt(a,t)||[]}(e,r,i),M=F.findIndex(k=>{if(Array.isArray(k)){const[A,P]=k,j=u>=A.hours&&h>=A.minutes,K=u<P.hours||u===P.hours&&h<P.minutes;if(A.hours<P.hours){if(j&&K)return!0}else if(j||K)return!0}else if(k.hours===u&&k.minutes===h)return!0;return!1});if(-1!==M)return b[M]}return function(n,e,t){const i=(0,l.cg1)(n),a=Xt([i[l.wAp.DayPeriodsFormat],i[l.wAp.DayPeriodsStandalone]],e);return Xt(a,t)}(e,r,i)[u<12?0:1];case ot.Eras:return function(n,e){return Xt((0,l.cg1)(n)[l.wAp.Eras],e)}(e,i)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(r,a,n,e,t,i)}}function ce(n){return function(e,t,i){const r=-1*i,a=An(t,tt.MinusSign),u=r>0?Math.floor(r/60):Math.ceil(r/60);switch(n){case tn.Short:return(r>=0?"+":"")+Ki(u,2,a)+Ki(Math.abs(r%60),2,a);case tn.ShortGMT:return"GMT"+(r>=0?"+":"")+Ki(u,1,a);case tn.Long:return"GMT"+(r>=0?"+":"")+Ki(u,2,a)+":"+Ki(Math.abs(r%60),2,a);case tn.Extended:return 0===i?"Z":(r>=0?"+":"")+Ki(u,2,a)+":"+Ki(Math.abs(r%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Hn(n){return f1(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Bn(n,e=!1){return function(t,i){let r;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,u=t.getDate();r=1+Math.floor((u+a)/7)}else{const a=Hn(t),u=function(n){const e=f1(n,0,1).getDay();return f1(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),h=a.getTime()-u.getTime();r=1+Math.round(h/6048e5)}return Ki(r,n,An(i,tt.MinusSign))}}function Ri(n,e=!1){return function(t,i){return Ki(Hn(t).getFullYear(),n,An(i,tt.MinusSign),e)}}const Ut={};function j1(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function K3(n){return n instanceof Date&&!isNaN(n.valueOf())}class Qi{}let vi=(()=>{class n extends Qi{constructor(t){super(),this.locale=t}getPluralCategory(t,i){switch(Fs(i||this.locale)(t)){case _t.Zero:return"zero";case _t.One:return"one";case _t.Two:return"two";case _t.Few:return"few";case _t.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function wi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,a]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(a)}return null}let Dr=(()=>{class n{constructor(t,i,r,a){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Hi{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zt=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(i){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=[];t.forEachOperation((r,a,u)=>{if(null==r.previousIndex){const h=this._viewContainer.createEmbeddedView(this._template,new Hi(null,this._ngForOf,-1,-1),null===u?void 0:u),m=new lc(r,h);i.push(m)}else if(null==u)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const h=this._viewContainer.get(a);this._viewContainer.move(h,u);const m=new lc(r,h);i.push(m)}});for(let r=0;r<i.length;r++)this._perViewChange(i[r].view,i[r].record);for(let r=0,a=this._viewContainer.length;r<a;r++){const u=this._viewContainer.get(r);u.context.index=r,u.context.count=a,u.context.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{this._viewContainer.get(r.currentIndex).context.$implicit=r.item})}_perViewChange(t,i){t.context.$implicit=i.item}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class lc{constructor(e,t){this.record=e,this.view=t}}let ai=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Y3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Y3{constructor(){this.$implicit=null,this.ngIf=null}}function zo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class Vs{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ys=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),ci=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Vs(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(ys,9))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})();let bi=(()=>{class n{constructor(t){this.locale=t}transform(t,i="mediumDate",r,a){if(null==t||""===t||t!=t)return null;try{return W3(t,i,a||this.locale,r)}catch(u){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,l.AaK)(n)}'`)}(n,u.message)}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"date",type:n,pure:!0}),n})(),Ei=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Qi,useClass:vi}]}),n})();function m1(n){return"browser"===n}function La(n){return"server"===n}let R2=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new _c((0,l.LFG)(Ce),window)}),n})();class _c{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const a=r.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(i-a[0],r-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Bo(this.window.history)||Bo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Bo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class X3{}class Fc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Fc,se||(se=n)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(bs=bs||document.querySelector("base"),bs?bs.getAttribute("href"):null);return null==t?null:function(n){sn=sn||document.createElement("a"),sn.setAttribute("href",n);const e=sn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){bs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wi(document.cookie,e)}}let sn,bs=null;const Va=new l.OlP("TRANSITION_ID"),fr=[{provide:l.ip1,useFactory:function(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const i=z(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<r.length;a++)i.remove(r[a])})}},deps:[Va,Ce,l.zs3],multi:!0}];class Xn{static init(){(0,l.VLi)(new Xn)}addToWindow(e){l.dqk.getAngularTestability=(i,r=!0)=>{const a=e.findTestabilityInTree(i,r);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let a=r.length,u=!1;const h=function(m){u=u||m,a--,0==a&&i(u)};r.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?z().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let C1=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Os=new l.OlP("EventManagerPlugins");let xe=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let a=0;a<r.length;a++){const u=r[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Os),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class At{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=z().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Ba=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),gn=(()=>{class n extends Ba{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,r.push(i.appendChild(u))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(ja),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ja))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function ja(n){z().remove(n)}const Es={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ji=/%COMP%/g;function Gn(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Gn(n,r,t):(r=r.replace(ji,n),t.push(r))}return t}function kr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xr=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Ui(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new i4(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case l.ifc.ShadowDom:return new q2(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Gn(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xe),l.LFG(gn),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ui{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Es[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const a=Es[r];a?e.setAttributeNS(a,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Es[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,i,r&l.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,kr(i)):this.eventManager.addEventListener(e,t,kr(i))}}class i4 extends Ui{constructor(e,t,i,r){super(e),this.component=i;const a=Gn(r+"-"+i.id,i.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(ji,r+"-"+i.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(ji,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class q2 extends Ui{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Gn(r.id,r.styles,[]);for(let u=0;u<a.length;u++){const h=document.createElement("style");h.textContent=a[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let $2=(()=>{class n extends At{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Rs=["alt","control","meta","shift"],o4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},li={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Su={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ko=(()=>{class n extends At{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const a=n.parseEventName(i),u=n.eventCallback(a.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>z().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const a=n._normalizeKey(i.pop());let u="";if(Rs.forEach(m=>{const F=i.indexOf(m);F>-1&&(i.splice(F,1),u+=m+".")}),u+=a,0!=i.length||0===a.length)return null;const h={};return h.domEventName=r,h.fullKey=u,h}static getEventFullKey(t){let i="",r=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&li.hasOwnProperty(e)&&(e=li[e]))}return o4[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Rs.forEach(a=>{a!=r&&Su[a](t)&&(i+=a+".")}),i+=r,i}static eventCallback(t,i,r){return a=>{n.getEventFullKey(a)===t&&r.runGuarded(()=>i(a))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,l.Yz7)({factory:function(){return(0,l.LFG)(y1)},token:n,providedIn:"root"}),n})(),y1=(()=>{class n extends Y1{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case l.q3G.NONE:return i;case l.q3G.HTML:return(0,l.qzn)(i,"HTML")?(0,l.z3N)(i):(0,l.EiD)(this._doc,String(i)).toString();case l.q3G.STYLE:return(0,l.qzn)(i,"Style")?(0,l.z3N)(i):i;case l.q3G.SCRIPT:if((0,l.qzn)(i,"Script"))return(0,l.z3N)(i);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.yhl)(i),(0,l.qzn)(i,"URL")?(0,l.z3N)(i):(0,l.mCW)(String(i));case l.q3G.RESOURCE_URL:if((0,l.qzn)(i,"ResourceURL"))return(0,l.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=(0,l.Yz7)({factory:function(){return function(n){return new y1(n.get(Ce))}((0,l.LFG)(l.gxx))},token:n,providedIn:"root"}),n})();const v1=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function(){Fc.makeCurrent(),Xn.init()},multi:!0},{provide:Ce,useFactory:function(){return(0,l.RDi)(document),document},deps:[]}]),l4=[[],{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function(){return new l.qLn},deps:[]},{provide:Os,useClass:$2,multi:!0,deps:[Ce,l.R0b,l.Lbi]},{provide:Os,useClass:Ko,multi:!0,deps:[Ce]},[],{provide:xr,useClass:xr,deps:[xe,gn,l.AFp]},{provide:l.FYo,useExisting:xr},{provide:Ba,useExisting:gn},{provide:gn,useClass:gn,deps:[Ce]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:xe,useClass:xe,deps:[Os,l.R0b]},{provide:X3,useClass:C1,deps:[]},[]];let u4=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:Va,useExisting:l.AFp},fr]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:l4,imports:[Ei,l.hGG]}),n})();"undefined"!=typeof window&&window;var cn=B(4402),$e=B(5917),nn=B(9765),h4=B(7971);class ln extends nn.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new h4.N;return this._value}next(e){super.next(this._value=e)}}var J1=B(4869),Y2=B(9796),yn=B(7393);class Za extends yn.L{notifyNext(e,t,i,r,a){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class n5 extends yn.L{constructor(e,t,i){super(),this.parent=e,this.outerValue=t,this.outerIndex=i,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var b1=B(7444),ei=B(7574);function qn(n,e,t,i,r=new n5(n,t,i)){if(!r.closed)return e instanceof ei.y?e.subscribe(r):(0,b1.s)(e)(r)}var Ka=B(6693);const Q2={};class Ya{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new J2(e,this.resultSelector))}}class J2 extends Za{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Q2),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let i=0;i<t;i++)this.add(qn(this,e[i],void 0,i))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,i){const r=this.values,u=this.toRespond?r[i]===Q2?--this.toRespond:this.toRespond:0;r[i]=t,0===u&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}const Nr=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Bs=B(3282);function X1(...n){return(0,Bs.J)(1)((0,$e.of)(...n))}var Ji=B(9193);function ns(n){return new ei.y(e=>{let t;try{t=n()}catch(r){return void e.error(r)}return(t?(0,cn.D)(t):(0,Ji.c)()).subscribe(e)})}var X2=B(2441),nt=B(8002),Xo=B(5345);function ti(n,e){return"function"==typeof e?t=>t.pipe(ti((i,r)=>(0,cn.D)(n(i,r)).pipe((0,nt.U)((a,u)=>e(i,a,r,u))))):t=>t.lift(new i5(n))}class i5{constructor(e){this.project=e}call(e,t){return t.subscribe(new Dn(e,this.project))}}class Dn extends Xo.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const i=this.index++;try{t=this.project(e,i)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const i=new Xo.IY(this),r=this.destination;r.add(i),this.innerSubscription=(0,Xo.ft)(e,i),this.innerSubscription!==i&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Qa=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function f4(n){return e=>0===n?(0,Ji.c)():e.lift(new fh(n))}class fh{constructor(e){if(this.total=e,this.total<0)throw new Qa}call(e,t){return t.subscribe(new ea(e,this.total))}}class ea extends yn.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,i=++this.count;i<=t&&(this.destination.next(e),i===t&&(this.destination.complete(),this.unsubscribe()))}}function p4(...n){const e=n[n.length-1];return(0,J1.K)(e)?(n.pop(),t=>X1(n,t,e)):t=>X1(n,t)}function eo(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(r){return r.lift(new r5(n,e,t))}}class r5{constructor(e,t,i=!1){this.accumulator=e,this.seed=t,this.hasSeed=i}call(e,t){return t.subscribe(new Ic(e,this.accumulator,this.seed,this.hasSeed))}}class Ic extends yn.L{constructor(e,t,i,r){super(e),this.accumulator=t,this._seed=i,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let i;try{i=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=i,this.destination.next(i)}}function Tr(n,e){return function(i){return i.lift(new m4(n,e))}}class m4{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new M1(e,this.predicate,this.thisArg))}}class M1 extends yn.L{constructor(e,t,i){super(e),this.predicate=t,this.thisArg=i,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(i){return void this.destination.error(i)}t&&this.destination.next(e)}}function S1(n){return function(t){const i=new Vn(n),r=t.lift(i);return i.caught=r}}class Vn{constructor(e){this.selector=e}call(e,t){return t.subscribe(new js(e,this.selector,this.caught))}}class js extends Xo.Ds{constructor(e,t,i){super(e),this.selector=t,this.caught=i}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const i=new Xo.IY(this);this.add(i);const r=(0,Xo.ft)(t,i);r!==i&&this.add(r)}}}var On=B(9773);function Ja(n,e){return(0,On.zg)(n,e,1)}function Lc(n){return function(t){return 0===n?(0,Ji.c)():t.lift(new mr(n))}}class mr{constructor(e){if(this.total=e,this.total<0)throw new Qa}call(e,t){return t.subscribe(new Ms(e,this.total))}}class Ms extends yn.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,i=this.total,r=this.count++;t.length<i?t.push(e):t[r%i]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const i=this.count>=this.total?this.total:this.count,r=this.ring;for(let a=0;a<i;a++){const u=t++%i;e.next(r[u])}}e.complete()}}function ta(n=Pc){return e=>e.lift(new Ar(n))}class Ar{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Us(e,this.errorFactory))}}class Us extends yn.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Pc(){return new Nr}function g4(n=null){return e=>e.lift(new to(n))}class to{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new s5(e,this.defaultValue))}}class s5 extends yn.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var no=B(4487);function ui(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Tr((r,a)=>n(r,a,i)):no.y,f4(1),t?g4(e):ta(()=>new Nr))}var Rn=B(3342),e2=B(1307),C4=B(5319);function Vc(n){return e=>e.lift(new S(n))}class S{constructor(e){this.callback=e}call(e,t){return t.subscribe(new N(e,this.callback))}}class N extends yn.L{constructor(e,t){super(e),this.add(new C4.w(t))}}class L{constructor(e,t){this.id=e,this.url=t}}class U extends L{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ne extends L{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class le extends L{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ne extends L{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class je extends L{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class We extends L{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ht extends L{constructor(e,t,i,r,a){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pn extends L{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $n extends L{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class di{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e3{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class io{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t3{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class is{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rs{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const mt="primary";class Au{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Nn(n){return new Au(n)}const n3="ngNavigationCancelingError";function o5(n){const e=Error("NavigationCancelingError: "+n);return e[n3]=!0,e}function ia(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let a=0;a<i.length;a++){const u=i[a],h=n[a];if(u.startsWith(":"))r[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ss(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let a=0;a<t.length;a++)if(r=t[a],!Lu(n[r],e[r]))return!1;return!0}function Lu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,a)=>i[a]===r)}return n===e}function a5(n){return Array.prototype.concat.apply([],n)}function t2(n){return n.length>0?n[n.length-1]:null}function hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Mi(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,cn.D)(Promise.resolve(n)):(0,$e.of)(n)}const c5={exact:function Oc(n,e,t){if(!r2(n.segments,e.segments)||!s3(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!Oc(n.children[i],e.children[i],t))return!1;return!0},subset:ro},r3={exact:function(n,e){return ss(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Lu(n[t],e[t]))},ignored:()=>!0};function _4(n,e,t){return c5[t.paths](n.root,e.root,t.matrixParams)&&r3[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ro(n,e,t){return so(n,e,e.segments,t)}function so(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!r2(r,t)||e.hasChildren()||!s3(r,t,i))}if(n.segments.length===t.length){if(!r2(n.segments,t)||!s3(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!ro(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(r2(n.segments,r)&&s3(n.segments,r,i)&&n.children[mt])&&so(n.children[mt],e,a,i)}}function s3(n,e,t){return e.every((i,r)=>r3[t](n[r].parameters,i.parameters))}class ra{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nn(this.queryParams)),this._queryParamMap}toString(){return y4.serialize(this)}}class Ot{constructor(e,t){this.segments=e,this.children=t,this.parent=null,hi(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return oo(this)}}class F4{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Nn(this.parameters)),this._parameterMap}toString(){return c3(this)}}function r2(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class Pu{}class o3{parse(e){const t=new Hc(e);return new ra(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${v4(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${w4(t)}=${w4(r)}`).join("&"):`${w4(t)}=${w4(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const y4=new o3;function oo(n){return n.segments.map(e=>c3(e)).join("/")}function v4(n,e){if(!n.hasChildren())return oo(n);if(e){const t=n.children[mt]?v4(n.children[mt],!1):"",i=[];return hi(n.children,(r,a)=>{a!==mt&&i.push(`${a}:${v4(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function(n,e){let t=[];return hi(n.children,(i,r)=>{r===mt&&(t=t.concat(e(i,r)))}),hi(n.children,(i,r)=>{r!==mt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===mt?[v4(n.children[mt],!1)]:[`${r}:${v4(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[mt]?`${oo(n)}/${t[0]}`:`${oo(n)}/(${t.join("//")})`}}function d5(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function w4(n){return d5(n).replace(/%3B/gi,";")}function b4(n){return d5(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function a3(n){return decodeURIComponent(n)}function Vu(n){return a3(n.replace(/\+/g,"%20"))}function c3(n){return`${b4(n.path)}${function(n){return Object.keys(n).map(e=>`;${b4(e)}=${b4(n[e])}`).join("")}(n.parameters)}`}const _h=/^[^\/()?;=#]+/;function zc(n){const e=n.match(_h);return e?e[0]:""}const Fh=/^[^=?&#]+/,ao=/^[^?&#]+/;class Hc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[mt]=new Ot(e,t)),i}parseSegment(){const e=zc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new F4(a3(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=zc(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=zc(this.remaining);r&&(i=r,this.capture(i))}e[a3(t)]=a3(i)}parseQueryParam(e){const t=function(n){const e=n.match(Fh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const u=function(n){const e=n.match(ao);return e?e[0]:""}(this.remaining);u&&(i=u,this.capture(i))}const r=Vu(t),a=Vu(i);if(e.hasOwnProperty(r)){let u=e[r];Array.isArray(u)||(u=[u],e[r]=u),u.push(a)}else e[r]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=zc(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let a;i.indexOf(":")>-1?(a=i.substr(0,i.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=mt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[mt]:new Ot([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class h5{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ou(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Ou(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ru(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ru(e,this._root).map(t=>t.value)}}function Ou(n,e){if(n===e.value)return e;for(const t of e.children){const i=Ou(n,t);if(i)return i}return null}function Ru(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Ru(n,t);if(i.length)return i.unshift(e),i}return[]}class co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function E4(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Bc extends h5{constructor(e,t){super(e),this.snapshot=t,Uc(this,e)}toString(){return this.snapshot.toString()}}function f5(n,e){const t=function(n,e){const u=new jc([],{},{},"",{},mt,e,null,n.root,-1,{});return new o2("",new co(u,[]))}(n,e),i=new ln([new F4("",{})]),r=new ln({}),a=new ln({}),u=new ln({}),h=new ln(""),m=new s2(i,r,u,h,a,mt,e,t.root);return m.snapshot=t.root,new Bc(new co(m,[]),t)}class s2{constructor(e,t,i,r,a,u,h,m){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=u,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(e=>Nn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(e=>Nn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function p5(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],a=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(a.component)break;i--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class jc{constructor(e,t,i,r,a,u,h,m,F,b,M){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=a,this.outlet=u,this.component=h,this.routeConfig=m,this._urlSegment=F,this._lastPathIndex=b,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class o2 extends h5{constructor(e,t){super(t),this.url=e,Uc(this,t)}toString(){return Ss(this._root)}}function Uc(n,e){e.value._routerState=n,e.children.forEach(t=>Uc(n,t))}function Ss(n){const e=n.children.length>0?` { ${n.children.map(Ss).join(", ")} } `:"";return`${n.value}${e}`}function oa(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ss(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ss(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ss(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ss(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function u3(n,e){return ss(n.params,e.params)&&function(n,e){return r2(n,e)&&n.every((t,i)=>ss(t.parameters,e[i].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||u3(n.parent,e.parent))}function d3(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return d3(n,i,r);return d3(n,i)})}(n,e,t);return new co(i,r)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return C5(e,u),u}}const i=function(n){return new s2(new ln(n.url),new ln(n.params),new ln(n.queryParams),new ln(n.fragment),new ln(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(a=>d3(n,a));return new co(i,r)}}function C5(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)C5(n.children[t],e.children[t])}function M4(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function os(n){return"object"==typeof n&&null!=n&&n.outlets}function _5(n,e,t,i,r){let a={};return i&&hi(i,(u,h)=>{a[h]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`}),new ra(t.root===n?e:wh(t.root,n,e),a,r)}function wh(n,e,t){const i={};return hi(n.children,(r,a)=>{i[a]=r===e?t:wh(r,e,t)}),new Ot(n.segments,i)}class S4{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&M4(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(os);if(r&&r!==t2(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class D4{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function k4(n,e,t){if(n||(n=new Ot([],{})),0===n.segments.length&&n.hasChildren())return x4(n,e,t);const i=function(n,e,t){let i=0,r=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return a;const u=n.segments[r],h=t[i];if(os(h))break;const m=`${h}`,F=i<t.length-1?t[i+1]:null;if(r>0&&void 0===m)break;if(m&&F&&"object"==typeof F&&void 0===F.outlets){if(!F5(m,F,u))return a;i+=2}else{if(!F5(m,{},u))return a;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const a=new Ot(n.segments.slice(0,i.pathIndex),{});return a.children[mt]=new Ot(n.segments.slice(i.pathIndex),n.children),x4(a,0,r)}return i.match&&0===r.length?new Ot(n.segments,{}):i.match&&!n.hasChildren()?Hu(n,e,t):i.match?x4(n,0,r):Hu(n,e,t)}function x4(n,e,t){if(0===t.length)return new Ot(n.segments,{});{const i=function(n){return os(n[0])?n[0].outlets:{[mt]:n}}(t),r={};return hi(i,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(r[u]=k4(n.children[u],e,a))}),hi(n.children,(a,u)=>{void 0===i[u]&&(r[u]=a)}),new Ot(n.segments,r)}}function Hu(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const a=t[r];if(os(a)){const m=Wn(a.outlets);return new Ot(i,m)}if(0===r&&M4(t[0])){i.push(new F4(n.segments[e].path,Bu(t[0]))),r++;continue}const u=os(a)?a.outlets[mt]:`${a}`,h=r<t.length-1?t[r+1]:null;u&&h&&M4(h)?(i.push(new F4(u,Bu(h))),r+=2):(i.push(new F4(u,{})),r++)}return new Ot(i,{})}function Wn(n){const e={};return hi(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=Hu(new Ot([],{}),0,t))}),e}function Bu(n){const e={};return hi(n,(t,i)=>e[i]=`${t}`),e}function F5(n,e,t){return n==t.path&&ss(e,t.parameters)}class Uu{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),oa(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=E4(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,r[u],i),delete r[u]}),hi(r,(a,u)=>{this.deactivateRouteAndItsChildren(a,i)})}deactivateRoutes(e,t,i){const r=e.value,a=t?t.value:null;if(r===a)if(r.component){const u=i.getContext(r.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,i);else a&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet);if(i&&i.outlet){const r=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,a=E4(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=E4(t);e.children.forEach(a=>{this.activateRoutes(a,r[a.value.outlet],i),this.forwardEvent(new is(a.value.snapshot))}),e.children.length&&this.forwardEvent(new io(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,a=t?t.value:null;if(oa(r),r===a)if(r.component){const u=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const u=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),qc(h.route)}else{const h=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),m=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=r,u.resolver=m,u.outlet&&u.outlet.activateWith(r,m),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,i)}}function qc(n){oa(n.value),n.children.forEach(qc)}class Gu{constructor(e,t){this.routes=e,this.module=t}}function D1(n){return"function"==typeof n}function h3(n){return n instanceof ra}const f3=Symbol("INITIAL_VALUE");function aa(){return ti(n=>function(...n){let e,t;return(0,J1.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Y2.k)(n[0])&&(n=n[0]),(0,Ka.n)(n,t).lift(new Ya(e))}(n.map(e=>e.pipe(f4(1),p4(f3)))).pipe(eo((e,t)=>{let i=!1;return t.reduce((r,a,u)=>r!==f3?r:(a===f3&&(i=!0),i||!1!==a&&u!==t.length-1&&!h3(a)?r:a),e)},f3),Tr(e=>e!==f3),(0,nt.U)(e=>h3(e)?e:!0===e),f4(1)))}let Gi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&l._UZ(0,"router-outlet")},directives:function(){return[a0]},encapsulation:2}),n})();function p3(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Wu(i,Dh(e,i))}}function Wu(n,e){n.children&&p3(n.children,e)}function Dh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function m3(n){const e=n.children&&n.children.map(m3),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==mt&&(t.component=Gi),t}function as(n){return n.outlet||mt}function Zu(n,e){const t=n.filter(i=>as(i)===e);return t.push(...n.filter(i=>as(i)!==e)),t}const Ku={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $c(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ku):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||ia)(t,n,e);if(!a)return Object.assign({},Ku);const u={};hi(a.posParams,(m,F)=>{u[F]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(i=a.posParams)&&void 0!==i?i:{}}}function T4(n,e,t,i,r="corrected"){if(t.length>0&&function(n,e,t){return t.some(i=>ca(n,e,i)&&as(i)!==mt)}(n,t,i)){const u=new Ot(e,function(n,e,t,i){const r={};r[mt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&as(a)!==mt){const u=new Ot([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,r[as(a)]=u}return r}(n,e,i,new Ot(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(i=>ca(n,e,i))}(n,t,i)){const u=new Ot(n.segments,function(n,e,t,i,r,a){const u={};for(const h of i)if(ca(n,t,h)&&!r[as(h)]){const m=new Ot([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[as(h)]=m}return Object.assign(Object.assign({},r),u)}(n,e,t,i,n.children,r));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Ot(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function ca(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qu(n,e,t,i){return!!(as(n)===i||i!==mt&&ca(e,t,n))&&("**"===n.path||$c(e,n,t).matched)}function Zc(n,e,t){return 0===e.length&&!n.children[t]}class Kc{constructor(e){this.segmentGroup=e||null}}class Cr{constructor(e){this.urlTree=e}}function Gs(n){return new ei.y(e=>e.error(new Kc(n)))}function Ju(n){return new ei.y(e=>e.error(new Cr(n)))}function xh(n){return new ei.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Nh{constructor(e,t,i,r,a){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=T4(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ot(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,mt).pipe((0,nt.U)(a=>this.createUrlTree(e0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(S1(a=>{if(a instanceof Cr)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Kc?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,mt).pipe((0,nt.U)(r=>this.createUrlTree(e0(r),e.queryParams,e.fragment))).pipe(S1(r=>{throw r instanceof Kc?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new Ot([],{[mt]:e}):e;return new ra(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,nt.U)(a=>new Ot([],a))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const a of Object.keys(i.children))"primary"===a?r.unshift(a):r.push(a);return(0,cn.D)(r).pipe(Ja(a=>{const u=i.children[a],h=Zu(t,a);return this.expandSegmentGroup(e,h,u,a).pipe((0,nt.U)(m=>({segment:m,outlet:a})))}),eo((a,u)=>(a[u.outlet]=u.segment,a),{}),function(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Tr((r,a)=>n(r,a,i)):no.y,Lc(1),t?g4(e):ta(()=>new Nr))}())}expandSegment(e,t,i,r,a,u){return(0,cn.D)(i).pipe(Ja(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,a,u).pipe(S1(F=>{if(F instanceof Kc)return(0,$e.of)(null);throw F}))),ui(h=>!!h),S1((h,m)=>{if(h instanceof Nr||"EmptyError"===h.name){if(Zc(t,r,a))return(0,$e.of)(new Ot([],{}));throw new Kc(t)}throw h}))}expandSegmentAgainstRoute(e,t,i,r,a,u,h){return Qu(r,t,a,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,a,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,a,u):Gs(t):Gs(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,a,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const a=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Ju(a):this.lineralizeSegments(i,a).pipe((0,On.zg)(u=>{const h=new Ot(u,{});return this.expandSegment(e,h,t,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,a,u){const{matched:h,consumedSegments:m,lastChild:F,positionalParamSegments:b}=$c(t,r,a);if(!h)return Gs(t);const M=this.applyRedirectCommands(m,r.redirectTo,b);return r.redirectTo.startsWith("/")?Ju(M):this.lineralizeSegments(r,M).pipe((0,On.zg)(k=>this.expandSegment(e,t,i,k.concat(a.slice(F)),u,!1)))}matchSegmentAgainstRoute(e,t,i,r,a){if("**"===i.path)return i.loadChildren?(i._loadedConfig?(0,$e.of)(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,nt.U)(k=>(i._loadedConfig=k,new Ot(r,{})))):(0,$e.of)(new Ot(r,{}));const{matched:u,consumedSegments:h,lastChild:m}=$c(t,i,r);if(!u)return Gs(t);const F=r.slice(m);return this.getChildConfig(e,i,r).pipe((0,On.zg)(M=>{const k=M.module,A=M.routes,{segmentGroup:P,slicedSegments:j}=T4(t,h,F,A),K=new Ot(P.segments,P.children);if(0===j.length&&K.hasChildren())return this.expandChildren(k,A,K).pipe((0,nt.U)(Ae=>new Ot(h,Ae)));if(0===A.length&&0===j.length)return(0,$e.of)(new Ot(h,{}));const he=as(i)===a;return this.expandSegment(k,K,A,j,he?mt:a,!0).pipe((0,nt.U)(ye=>new Ot(h.concat(ye.segments),ye.children)))}))}getChildConfig(e,t,i){return t.children?(0,$e.of)(new Gu(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,$e.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,On.zg)(r=>{return r?this.configLoader.load(e.injector,t).pipe((0,nt.U)(a=>(t._loadedConfig=a,a))):(n=t,new ei.y(e=>e.error(o5(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,$e.of)(new Gu([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;if(!r||0===r.length)return(0,$e.of)(!0);const a=r.map(u=>{const h=e.get(u);let m;if((n=h)&&D1(n.canLoad))m=h.canLoad(t,i);else{if(!D1(h))throw new Error("Invalid CanLoad guard");m=h(t,i)}var n;return Mi(m)});return(0,$e.of)(a).pipe(aa(),(0,Rn.b)(u=>{if(!h3(u))return;const h=o5(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,nt.U)(u=>!0===u))}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,$e.of)(i);if(r.numberOfChildren>1||!r.children[mt])return xh(e.redirectTo);r=r.children[mt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const a=this.createSegmentGroup(e,t.root,i,r);return new ra(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return hi(e,(r,a)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[a]=t[h]}else i[a]=r}),i}createSegmentGroup(e,t,i,r){const a=this.createSegments(e,t.segments,i,r);let u={};return hi(t.children,(h,m)=>{u[m]=this.createSegmentGroup(e,h,i,r)}),new Ot(a,u)}createSegments(e,t,i,r){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,r):this.findOrReturn(a,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function e0(n){const e={};for(const i of Object.keys(n.children)){const a=e0(n.children[i]);(a.segments.length>0||a.hasChildren())&&(e[i]=a)}return function(n){if(1===n.numberOfChildren&&n.children[mt]){const e=n.children[mt];return new Ot(n.segments.concat(e.segments),e.children)}return n}(new Ot(n.segments,e))}class g3{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _r{constructor(e,t){this.component=e,this.route=t}}function w5(n,e,t){const i=n._root;return C3(i,e?e._root:null,t,[i.value])}function A4(n,e,t){const i=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function C3(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=E4(e);return n.children.forEach(u=>{(function(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const m=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!r2(n.url,e.url);case"pathParamsOrQueryParamsChange":return!r2(n.url,e.url)||!ss(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u3(n,e)||!ss(n.queryParams,e.queryParams);case"paramsChange":default:return!u3(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new g3(i)):(a.data=u.data,a._resolvedData=u._resolvedData),C3(n,e,a.component?h?h.children:null:t,i,r),m&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new _r(h.outlet.component,u))}else u&&cs(e,h,r),r.canActivateChecks.push(new g3(i)),C3(n,null,a.component?h?h.children:null:t,i,r)})(u,a[u.value.outlet],t,i.concat([u.value]),r),delete a[u.value.outlet]}),hi(a,(u,h)=>cs(u,t.getContext(h),r)),r}function cs(n,e,t){const i=E4(n),r=n.value;hi(i,(a,u)=>{cs(a,r.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new _r(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class t0{}function y(n){return new ei.y(e=>e.error(n))}class C{constructor(e,t,i,r,a,u){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=T4(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,mt);if(null===t)return null;const i=new jc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},mt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new co(i,t),a=new o2(this.url,r);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,i=p5(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const a of Object.keys(t.children)){const u=t.children[a],h=Zu(e,a),m=this.processSegmentGroup(h,u,a);if(null===m)return null;i.push(...m)}const r=Z(i);return r.sort((e,t)=>e.value.outlet===mt?-1:t.value.outlet===mt?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,i,r){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,i,r);if(null!==u)return u}return Zc(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!Qu(e,t,i,r))return null;let a,u=[],h=[];if("**"===e.path){const A=i.length>0?t2(i).parameters:{};a=new jc(i,A,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qe(e),as(e),e.component,e,Oe(t),Pe(t)+i.length,Ze(e))}else{const A=$c(t,e,i);if(!A.matched)return null;u=A.consumedSegments,h=i.slice(A.lastChild),a=new jc(u,A.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qe(e),as(e),e.component,e,Oe(t),Pe(t)+u.length,Ze(e))}const m=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:F,slicedSegments:b}=T4(t,u,h,m.filter(A=>void 0===A.redirectTo),this.relativeLinkResolution);var n;if(0===b.length&&F.hasChildren()){const A=this.processChildren(m,F);return null===A?null:[new co(a,A)]}if(0===m.length&&0===b.length)return[new co(a,[])];const M=as(e)===r,k=this.processSegment(m,F,b,M?mt:r);return null===k?null:[new co(a,k)]}}function I(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Z(n){const e=[],t=new Set;for(const i of n){if(!I(i)){e.push(i);continue}const r=e.find(a=>i.value.routeConfig===a.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Z(i.children);e.push(new co(i.value,r))}return e.filter(i=>!t.has(i))}function Oe(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Pe(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function qe(n){return n.data||{}}function Ze(n){return n.resolve||{}}function Jc(n){return ti(e=>{const t=n(e);return t?(0,cn.D)(t).pipe((0,nt.U)(()=>e)):(0,$e.of)(e)})}class D5 extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const L4=new l.OlP("ROUTES");class _3{constructor(e,t,i,r){this.loader=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,nt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new Gu(a5(u.injector.get(L4,void 0,l.XFs.Self|l.XFs.Optional)).map(m3),u)}),S1(a=>{throw t._loader$=void 0,a}));return t._loader$=new X2.c(r,()=>new nn.xQ).pipe((0,e2.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,cn.D)(this.loader.load(e)):Mi(e()).pipe((0,On.zg)(t=>t instanceof l.YKP?(0,$e.of)(t):(0,cn.D)(this.compiler.compileModuleAsync(t))))}}class s0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new u2,this.attachRef=null}}class u2{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new s0,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Ah{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Wm(n){throw n}function Zm(n,e,t){return e.parse("/")}function F3(n,e){return(0,$e.of)(null)}const Km={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ym={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ir=(()=>{class n{constructor(t,i,r,a,u,h,m,F){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=a,this.config=F,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nn.xQ,this.errorHandler=Wm,this.malformedUriErrorHandler=Zm,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:F3,afterPreactivation:F3},this.urlHandlingStrategy=new Ah,this.routeReuseStrategy=new D5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(l.h0i),this.console=u.get(l.c2e);const k=u.get(l.R0b);this.isNgZoneEnabled=k instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(F),this.currentUrlTree=new ra(new Ot([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _3(h,m,A=>this.triggerEvent(new Xi(A)),A=>this.triggerEvent(new di(A))),this.routerState=f5(this.currentUrlTree,this.rootComponentType),this.transitions=new ln({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(Tr(r=>0!==r.id),(0,nt.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ti(r=>{let a=!1,u=!1;return(0,$e.of)(r).pipe((0,Rn.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ti(h=>{const m=this.browserUrlTree.toString(),F=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||F)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return x5(h.source)&&(this.browserUrlTree=h.extractedUrl),(0,$e.of)(h).pipe(ti(M=>{const k=this.transitions.getValue();return i.next(new U(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),k!==this.transitions.getValue()?Ji.E:Promise.resolve(M)}),function(n,e,t,i){return ti(r=>function(n,e,t,i,r){return new Nh(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,nt.U)(a=>Object.assign(Object.assign({},r),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Rn.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(n,e,t,i,r){return(0,On.zg)(a=>function(n,e,t,i,r="emptyOnly",a="legacy"){try{const u=new C(n,e,t,i,r,a).recognize();return null===u?y(new t0):(0,$e.of)(u)}catch(u){return y(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),i,r).pipe((0,nt.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Rn.b)(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const k=new je(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);i.next(k)}));if(F&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:k,extractedUrl:A,source:P,restoredState:j,extras:K}=h,he=new U(k,this.serializeUrl(A),P,j);i.next(he);const be=f5(A,this.rootComponentType).snapshot;return(0,$e.of)(Object.assign(Object.assign({},h),{targetSnapshot:be,urlAfterRedirects:A,extras:Object.assign(Object.assign({},K),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,this.browserUrlTree=h.urlAfterRedirects,h.resolve(null),Ji.E}),Jc(h=>{const{targetSnapshot:m,id:F,extractedUrl:b,rawUrl:M,extras:{skipLocationChange:k,replaceUrl:A}}=h;return this.hooks.beforePreactivation(m,{navigationId:F,appliedUrlTree:b,rawUrlTree:M,skipLocationChange:!!k,replaceUrl:!!A})}),(0,Rn.b)(h=>{const m=new We(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,nt.U)(h=>Object.assign(Object.assign({},h),{guards:w5(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function(n,e){return(0,On.zg)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?(0,$e.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,i){return(0,cn.D)(n).pipe((0,On.zg)(r=>function(n,e,t,i,r){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,$e.of)(!0);const u=a.map(h=>{const m=A4(h,e,r);let F;if(function(n){return n&&D1(n.canDeactivate)}(m))F=Mi(m.canDeactivate(n,e,t,i));else{if(!D1(m))throw new Error("Invalid CanDeactivate guard");F=Mi(m(n,e,t,i))}return F.pipe(ui())});return(0,$e.of)(u).pipe(aa())}(r.component,r.route,t,e,i)),ui(r=>!0!==r,!0))}(u,i,r,n).pipe((0,On.zg)(h=>h&&function(n){return"boolean"==typeof n}(h)?function(n,e,t,i){return(0,cn.D)(e).pipe(Ja(r=>X1(function(n,e){return null!==n&&e&&e(new e3(n)),(0,$e.of)(!0)}(r.route.parent,i),function(n,e){return null!==n&&e&&e(new t3(n)),(0,$e.of)(!0)}(r.route,i),function(n,e,t){const i=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>ns(()=>{const h=u.guards.map(m=>{const F=A4(m,u.node,t);let b;if(function(n){return n&&D1(n.canActivateChild)}(F))b=Mi(F.canActivateChild(i,n));else{if(!D1(F))throw new Error("Invalid CanActivateChild guard");b=Mi(F(i,n))}return b.pipe(ui())});return(0,$e.of)(h).pipe(aa())}));return(0,$e.of)(a).pipe(aa())}(n,r.path,t),function(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return(0,$e.of)(!0);const r=i.map(a=>ns(()=>{const u=A4(a,e,t);let h;if(function(n){return n&&D1(n.canActivate)}(u))h=Mi(u.canActivate(e,n));else{if(!D1(u))throw new Error("Invalid CanActivate guard");h=Mi(u(e,n))}return h.pipe(ui())}));return(0,$e.of)(r).pipe(aa())}(n,r.route,t))),ui(r=>!0!==r,!0))}(i,a,n,e):(0,$e.of)(h)),(0,nt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Rn.b)(h=>{if(h3(h.guardsResult)){const F=o5(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw F.url=h.guardsResult,F}const m=new Ht(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),Tr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Jc(h=>{if(h.guards.canActivateChecks.length)return(0,$e.of)(h).pipe((0,Rn.b)(m=>{const F=new pn(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(F)}),ti(m=>{let F=!1;return(0,$e.of)(m).pipe(function(n,e){return(0,On.zg)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return(0,$e.of)(t);let a=0;return(0,cn.D)(r).pipe(Ja(u=>function(n,e,t,i){return function(n,e,t,i){const r=Object.keys(n);if(0===r.length)return(0,$e.of)({});const a={};return(0,cn.D)(r).pipe((0,On.zg)(u=>function(n,e,t,i){const r=A4(n,e,i);return Mi(r.resolve?r.resolve(e,t):r(e,t))}(n[u],e,t,i).pipe((0,Rn.b)(h=>{a[u]=h}))),Lc(1),(0,On.zg)(()=>Object.keys(a).length===r.length?(0,$e.of)(a):Ji.E))}(n._resolve,n,e,i).pipe((0,nt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),p5(n,t).resolve),null)))}(u.route,i,n,e)),(0,Rn.b)(()=>a++),Lc(1),(0,On.zg)(u=>a===r.length?(0,$e.of)(t):Ji.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Rn.b)({next:()=>F=!0,complete:()=>{F||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Rn.b)(m=>{const F=new $n(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(F)}))}),Jc(h=>{const{targetSnapshot:m,id:F,extractedUrl:b,rawUrl:M,extras:{skipLocationChange:k,replaceUrl:A}}=h;return this.hooks.afterPreactivation(m,{navigationId:F,appliedUrlTree:b,rawUrlTree:M,skipLocationChange:!!k,replaceUrl:!!A})}),(0,nt.U)(h=>{const m=function(n,e,t){const i=d3(n,e._root,t?t._root:void 0);return new Bc(i,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,Rn.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,nt.U)(i=>(new Uu(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Rn.b)({next(){a=!0},complete(){a=!0}}),Vc(()=>{var h;if(!a&&!u){const m=`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(r),this.cancelNavigationTransition(r,m)):this.cancelNavigationTransition(r,m)}(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===r.id&&(this.currentNavigation=null)}),S1(h=>{if(u=!0,function(n){return n&&n[n3]}(h)){const m=h3(h.url);m||(this.navigated=!0,this.restoreHistory(r,!0));const F=new le(r.id,this.serializeUrl(r.extractedUrl),h.message);i.next(F),m?setTimeout(()=>{const b=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),M={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||x5(r.source)};this.scheduleNavigation(b,"imperative",null,M,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const m=new Ne(r.id,this.serializeUrl(r.extractedUrl),h);i.next(m);try{r.resolve(this.errorHandler(h))}catch(F){r.reject(F)}}return Ji.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,i)&&setTimeout(()=>{const{source:r,state:a,urlTree:u}=i,h={replaceUrl:!0};if(a){const m=Object.assign({},a);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(h.state=m)}this.scheduleNavigation(u,r,a,h)},0),this.lastLocationChangeInfo=i}))}extractLocationChangeInfoFromEvent(t){var i;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,i){if(!t)return!0;const r=i.urlTree.toString()===t.urlTree.toString();return i.transitionId!==t.transitionId||!r||!("hashchange"===i.source&&"popstate"===t.source||"popstate"===i.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){p3(t),this.config=t.map(m3),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:a,fragment:u,queryParamsHandling:h,preserveFragment:m}=i,F=r||this.routerState.root,b=m?this.currentUrlTree.fragment:u;let M=null;switch(h){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=a||null}return null!==M&&(M=this.removeEmptyProps(M)),function(n,e,t,i,r){if(0===t.length)return _5(e.root,e.root,e,i,r);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new S4(!0,0,n);let e=0,t=!1;const i=n.reduce((r,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return hi(a.outlets,(m,F)=>{h[F]="string"==typeof m?m.split("/"):m}),[...r,{outlets:h}]}if(a.segmentPath)return[...r,a.segmentPath]}return"string"!=typeof a?[...r,a]:0===u?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,a]},[]);return new S4(t,e,i)}(t);if(a.toRoot())return _5(e.root,new Ot([],{}),e,i,r);const u=function(n,e,t){if(n.isAbsolute)return new D4(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new D4(a,a===e.root,0)}const i=M4(n.commands[0])?0:1;return function(n,e,t){let i=n,r=e,a=t;for(;a>r;){if(a-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new D4(i,!1,r-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(a,e,n),h=u.processChildren?x4(u.segmentGroup,u.index,a.commands):k4(u.segmentGroup,u.index,a.commands);return _5(u.segmentGroup,h,e,i,r)}(F,this.currentUrlTree,t,M,null!=b?b:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=h3(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},Km):!1===i?Object.assign({},Ym):i,h3(t))return _4(this.currentUrlTree,t,r);const a=this.parseUrl(t);return _4(this.currentUrlTree,a,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const a=t[r];return null!=a&&(i[r]=a),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,a,u){var h,m;if(this.disposed)return Promise.resolve(!1);const F=this.getTransition(),b=x5(i)&&F&&!x5(F.source),A=(this.lastSuccessfulId===F.id||this.currentNavigation?F.rawUrl:F.urlAfterRedirects).toString()===t.toString();if(b&&A)return Promise.resolve(!0);let P,j,K;u?(P=u.resolve,j=u.reject,K=u.promise):K=new Promise((ye,Ae)=>{P=ye,j=Ae});const he=++this.navigationId;let be;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),be=r&&r.\u0275routerPageId?r.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):be=0,this.setTransition({id:he,targetPageId:be,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:P,reject:j,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(ye=>Promise.reject(ye))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",a):this.location.go(r,"",a)}restoreHistory(t,i=!1){var r,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new le(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.DyG),l.LFG(Pu),l.LFG(u2),l.LFG(et),l.LFG(l.zs3),l.LFG(l.v3s),l.LFG(l.Sil),l.LFG(void 0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function x5(n){return"imperative"!==n}let a0=(()=>{class n{constructor(t,i,r,a,u){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.name=a||mt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new A5(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(u2),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class A5{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===s2?this.route:e===u2?this.childContexts:this.parent.get(e,t)}}class Lh{}class Vh{preload(e,t){return(0,$e.of)(null)}}let I5=(()=>{class n{constructor(t,i,r,a,u){this.router=t,this.injector=a,this.preloadingStrategy=u,this.loader=new _3(i,r,F=>t.triggerEvent(new Xi(F)),F=>t.triggerEvent(new di(F)))}setUpPreloading(){this.subscription=this.router.events.pipe(Tr(t=>t instanceof ne),Ja(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const a of i)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;r.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?r.push(this.preloadConfig(t,a)):a.children&&r.push(this.processRoutes(t,a.children));return(0,cn.D)(r).pipe((0,Bs.J)(),(0,nt.U)(a=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?(0,$e.of)(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,On.zg)(a=>(i._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ir),l.LFG(l.v3s),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(Lh))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),V4=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof U?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ne&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof rs&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new rs(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ir),l.LFG(R2),l.LFG(void 0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const y3=new l.OlP("ROUTER_CONFIGURATION"),Jm=new l.OlP("ROUTER_FORROOT_GUARD"),Xm=[et,{provide:Pu,useClass:o3},{provide:Ir,useFactory:function(n,e,t,i,r,a,u,h={},m,F){const b=new Ir(null,n,e,t,i,r,a,a5(u));return m&&(b.urlHandlingStrategy=m),F&&(b.routeReuseStrategy=F),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(h,b),h.enableTracing&&b.events.subscribe(M=>{var k,A;null===(k=console.group)||void 0===k||k.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(A=console.groupEnd)||void 0===A||A.call(console)}),b},deps:[Pu,u2,et,l.zs3,l.v3s,l.Sil,L4,y3,[class{},new l.FiY],[class{},new l.FiY]]},u2,{provide:s2,useFactory:function(n){return n.routerState.root},deps:[Ir]},{provide:l.v3s,useClass:l.EAV},I5,Vh,class{preload(e,t){return t().pipe(S1(()=>(0,$e.of)(null)))}},{provide:y3,useValue:{enableTracing:!1}}];function Oh(){return new l.PXZ("Router",Ir)}let L5=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[Xm,Rh(t),{provide:Jm,useFactory:mM,deps:[[Ir,new l.FiY,new l.tp0]]},{provide:y3,useValue:i||{}},{provide:_e,useFactory:eg,deps:[te,[new l.tBr(ge),new l.FiY],y3]},{provide:V4,useFactory:Cz,deps:[Ir,R2,y3]},{provide:Lh,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Vh},{provide:l.PXZ,multi:!0,useFactory:Oh},[zh,{provide:l.ip1,multi:!0,useFactory:tg,deps:[zh]},{provide:ng,useFactory:_M,deps:[zh]},{provide:l.tb,multi:!0,useExisting:ng}]]}}static forChild(t){return{ngModule:n,providers:[Rh(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Jm,8),l.LFG(Ir,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Cz(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new V4(n,e,t)}function eg(n,e,t={}){return t.useHash?new Ie(n,e):new Ee(n,e)}function mM(n){return"guarded"}function Rh(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:L4,multi:!0,useValue:n}]}let zh=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new nn.xQ}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(h=>i=h),a=this.injector.get(Ir),u=this.injector.get(y3);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),i(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?(0,$e.of)(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),a.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(y3),r=this.injector.get(I5),a=this.injector.get(V4),u=this.injector.get(Ir),h=this.injector.get(l.z2F);t===h.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&u.initialNavigation(),r.setUpPreloading(),a.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function tg(n){return n.appInitializer.bind(n)}function _M(n){return n.bootstrapListener.bind(n)}const ng=new l.OlP("Router Initializer"),ig=[];let yM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[L5.forRoot(ig)],L5]}),n})();var Ds={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M447.1 256C447.1 273.7 433.7 288 416 288H109.3l105.4 105.4c12.5 12.5 12.5 32.75 0 45.25C208.4 444.9 200.2 448 192 448s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25l160-160c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L109.3 224H416C433.7 224 447.1 238.3 447.1 256z"]},P9={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M224 256c70.7 0 128-57.31 128-128S294.7 0 224 0C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3C0 496.5 15.52 512 34.66 512h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304zM616 200h-48v-48C568 138.8 557.3 128 544 128s-24 10.75-24 24v48h-48C458.8 200 448 210.8 448 224s10.75 24 24 24h48v48C520 309.3 530.8 320 544 320s24-10.75 24-24v-48h48C629.3 248 640 237.3 640 224S629.3 200 616 200z"]},hU={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M319.9 320c57.41 0 103.1-46.56 103.1-104c0-57.44-46.54-104-103.1-104c-57.41 0-103.1 46.56-103.1 104C215.9 273.4 262.5 320 319.9 320zM369.9 352H270.1C191.6 352 128 411.7 128 485.3C128 500.1 140.7 512 156.4 512h327.2C499.3 512 512 500.1 512 485.3C512 411.7 448.4 352 369.9 352zM512 160c44.18 0 80-35.82 80-80S556.2 0 512 0c-44.18 0-80 35.82-80 80S467.8 160 512 160zM183.9 216c0-5.449 .9824-10.63 1.609-15.91C174.6 194.1 162.6 192 149.9 192H88.08C39.44 192 0 233.8 0 285.3C0 295.6 7.887 304 17.62 304h199.5C196.7 280.2 183.9 249.7 183.9 216zM128 160c44.18 0 80-35.82 80-80S172.2 0 128 0C83.82 0 48 35.82 48 80S83.82 160 128 160zM551.9 192h-61.84c-12.8 0-24.88 3.037-35.86 8.24C454.8 205.5 455.8 210.6 455.8 216c0 33.71-12.78 64.21-33.16 88h199.7C632.1 304 640 295.6 640 285.3C640 233.8 600.6 192 551.9 192z"]};class vn{}vn.BASE_URL="http://14.99.147.156:8888/rajuri-steel/public/api/",vn.BASE_URL_ADMIN="http://192.168.1.94:5000/user/",vn.LOGIN=vn.BASE_URL+"login",vn.SOCIAL_LOGIN=vn.BASE_URL+"socialLogin",vn.LOGOUT=vn.BASE_URL+"logout",vn.SIGNUP=vn.BASE_URL+"signup",vn.USERS_LIST=vn.BASE_URL+"users/list",vn.RESEND_OTP=vn.BASE_URL+"login",vn.UPLOAD_IMAGE=vn.BASE_URL+"uploadFile",vn.GET_USER_PROFILE_INFO=vn.BASE_URL+"getUserDetails",vn.UPDATE_PERSONAL_INFO=vn.BASE_URL+"updatePersonalInfo",vn.GET_NEWS_INFO_FROM_YOUTUBE_URL=vn.BASE_URL+"youtubeLinkDetails",vn.GET_HOME_DATA=vn.BASE_URL+"getHomeData",vn.GET_PAGE_CONTENT=vn.BASE_URL+"getPageContent",vn.GET_USER=vn.BASE_URL+"chatUser";var X=B(8239);const pt_firebase={apiKey:"AIzaSyC8qMF-PkOwchr848q6-1xBX3VVFzUyJaM",authDomain:"rajuri-steel.firebaseapp.com",projectId:"rajuri-steel",storageBucket:"rajuri-steel.appspot.com",messagingSenderId:"84925232773",appId:"1:84925232773:web:d205737d5d5e6615d5dbec",measurementId:"G-WQP36Y21G9"};var Je,Ys=B(8026),ma=B(3910),ga=B(5422),O=B(3854),a2e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},q4={},yA=yA||{},It=a2e||self;function Yv(){}function vA(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function R9(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var wA="closure_uid_"+(1e9*Math.random()>>>0),l2e=0;function u2e(n,e,t){return n.call.apply(n.bind,arguments)}function d2e(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function ds(n,e,t){return(ds=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?u2e:d2e).apply(null,arguments)}function Qv(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function hs(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[r].apply(i,u)}}function Ll(){this.s=this.s,this.o=this.o}var f2e={};Ll.prototype.s=!1,Ll.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,wA)&&n[wA]||(n[wA]=++l2e)}(this);delete f2e[n]}},Ll.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const MU=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},SU=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let a=0;a<i;a++)a in r&&e.call(t,r[a],a,n)};function DU(n){return Array.prototype.concat.apply([],arguments)}function bA(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function Jv(n){return/^[\s\xa0]*$/.test(n)}var Js,kU=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qs(n,e){return-1!=n.indexOf(e)}function EA(n,e){return n<e?-1:n>e?1:0}e:{var xU=It.navigator;if(xU){var NU=xU.userAgent;if(NU){Js=NU;break e}}Js=""}function MA(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function TU(n){const e={};for(const t in n)e[t]=n[t];return e}var AU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function IU(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let a=0;a<AU.length;a++)t=AU[a],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function SA(n){return SA[" "](n),n}SA[" "]=Yv;var Xv,n,g2e=Qs(Js,"Opera"),ed=Qs(Js,"Trident")||Qs(Js,"MSIE"),LU=Qs(Js,"Edge"),DA=LU||ed,PU=Qs(Js,"Gecko")&&!(Qs(Js.toLowerCase(),"webkit")&&!Qs(Js,"Edge"))&&!(Qs(Js,"Trident")||Qs(Js,"MSIE"))&&!Qs(Js,"Edge"),C2e=Qs(Js.toLowerCase(),"webkit")&&!Qs(Js,"Edge");function VU(){var n=It.document;return n?n.documentMode:void 0}e:{var kA="",xA=(n=Js,PU?/rv:([^\);]+)(\)|;)/.exec(n):LU?/Edge\/([\d\.]+)/.exec(n):ed?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):C2e?/WebKit\/(\S+)/.exec(n):g2e?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xA&&(kA=xA?xA[1]:""),ed){var NA=VU();if(null!=NA&&NA>parseFloat(kA)){Xv=String(NA);break e}}Xv=kA}var _2e={};function F2e(){return e=_2e,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=kU(String(Xv)).split("."),t=kU("9").split("."),i=Math.max(e.length,t.length);for(let u=0;0==n&&u<i;u++){var r=e[u]||"",a=t[u]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==r[0].length&&0==a[0].length)break;n=EA(0==r[1].length?0:parseInt(r[1],10),0==a[1].length?0:parseInt(a[1],10))||EA(0==r[2].length,0==a[2].length)||EA(r[2],a[2]),r=r[3],a=a[3]}while(0==n)}return 0<=n}();var e}var y2e=It.document&&ed&&(VU()||parseInt(Xv,10))||void 0,v2e=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",Yv,e),It.removeEventListener("test",Yv,e)}catch(t){}return n}();function ks(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function z9(n,e){if(ks.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(PU){e:{try{SA(e.nodeName);var r=!0;break e}catch(a){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:w2e[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&z9.Z.h.call(this)}}ks.prototype.h=function(){this.defaultPrevented=!0},hs(z9,ks);var w2e={2:"touch",3:"pen",4:"mouse"};z9.prototype.h=function(){z9.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var H9="closure_listenable_"+(1e6*Math.random()|0),b2e=0;function E2e(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++b2e,this.ca=this.fa=!1}function ew(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function tw(n){this.src=n,this.g={},this.h=0}function AA(n,e){var t=e.type;if(t in n.g){var a,i=n.g[t],r=MU(i,e);(a=0<=r)&&Array.prototype.splice.call(i,r,1),a&&(ew(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function IA(n,e,t,i){for(var r=0;r<n.length;++r){var a=n[r];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==i)return r}return-1}tw.prototype.add=function(n,e,t,i,r){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=IA(n,e,i,r);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new E2e(e,this.src,a,!!i,r)).fa=t,n.push(e)),e};var LA="closure_lm_"+(1e6*Math.random()|0),PA={};function RU(n,e,t,i,r){if(i&&i.once)return HU(n,e,t,i,r);if(Array.isArray(e)){for(var a=0;a<e.length;a++)RU(n,e[a],t,i,r);return null}return t=zA(t),n&&n[H9]?n.N(e,t,R9(i)?!!i.capture:!!i,r):zU(n,e,t,!1,i,r)}function zU(n,e,t,i,r,a){if(!e)throw Error("Invalid event type");var u=R9(r)?!!r.capture:!!r,h=OA(n);if(h||(n[LA]=h=new tw(n)),(t=h.add(e,t,i,u,a)).proxy)return t;if(i=function(){var e=S2e;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)v2e||(r=u),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(jU(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function HU(n,e,t,i,r){if(Array.isArray(e)){for(var a=0;a<e.length;a++)HU(n,e[a],t,i,r);return null}return t=zA(t),n&&n[H9]?n.O(e,t,R9(i)?!!i.capture:!!i,r):zU(n,e,t,!0,i,r)}function BU(n,e,t,i,r){if(Array.isArray(e))for(var a=0;a<e.length;a++)BU(n,e[a],t,i,r);else i=R9(i)?!!i.capture:!!i,t=zA(t),n&&n[H9]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=IA(a=n.g[e],t,i,r))&&(ew(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=OA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=IA(e,t,i,r)),(t=-1<n?e[n]:null)&&VA(t))}function VA(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[H9])AA(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(jU(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=OA(e))?(AA(t,n),0==t.h&&(t.src=null,e[LA]=null)):ew(n)}}}function jU(n){return n in PA?PA[n]:PA[n]="on"+n}function S2e(n,e){if(n.ca)n=!0;else{e=new z9(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&VA(n),n=t.call(i,e)}return n}function OA(n){return(n=n[LA])instanceof tw?n:null}var RA="__closure_events_fn_"+(1e9*Math.random()>>>0);function zA(n){return"function"==typeof n?n:(n[RA]||(n[RA]=function(e){return n.handleEvent(e)}),n[RA])}function Pr(){Ll.call(this),this.i=new tw(this),this.P=this,this.I=null}function fs(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new ks(e,n);else if(e instanceof ks)e.target=e.target||n;else{var r=e;IU(e=new ks(i,n),r)}if(r=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];r=nw(u,i,!0,e)&&r}if(r=nw(u=e.g=n,i,!0,e)&&r,r=nw(u,i,!1,e)&&r,t)for(a=0;a<t.length;a++)r=nw(u=e.g=t[a],i,!1,e)&&r}function nw(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&AA(n.i,u),r=!1!==h.call(m,i)&&r}}return r&&!i.defaultPrevented}hs(Pr,Ll),Pr.prototype[H9]=!0,Pr.prototype.removeEventListener=function(n,e,t,i){BU(this,n,e,t,i)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)ew(t[i]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Pr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var HA=It.JSON.stringify;function D2e(){var n=GU;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jA,UU=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new x2e,n=>n.reset());class x2e{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function N2e(n){It.setTimeout(()=>{throw n},0)}function BA(n,e){jA||function(){var n=It.Promise.resolve(void 0);jA=function(){n.then(A2e)}}(),UA||(jA(),UA=!0),GU.add(n,e)}var UA=!1,GU=new class{constructor(){this.h=this.g=null}add(e,t){const i=UU.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function A2e(){for(var n;n=D2e();){try{n.h.call(n.g)}catch(t){N2e(t)}var e=UU;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}UA=!1}function iw(n,e){Pr.call(this),this.h=n||1,this.g=e||It,this.j=ds(this.kb,this),this.l=Date.now()}function GA(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function qA(n,e,t){if("function"==typeof n)t&&(n=ds(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ds(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function qU(n){n.g=qA(()=>{n.g=null,n.i&&(n.i=!1,qU(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}hs(iw,Pr),(Je=iw.prototype).da=!1,Je.S=null,Je.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fs(this,"tick"),this.da&&(GA(this),this.start()))}},Je.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Je.M=function(){iw.Z.M.call(this),GA(this),delete this.g};class I2e extends Ll{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qU(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function B9(n){Ll.call(this),this.h=n,this.g={}}hs(B9,Ll);var $U=[];function WU(n,e,t,i){Array.isArray(t)||(t&&($U[0]=t.toString()),t=$U);for(var r=0;r<t.length;r++){var a=RU(e,t[r],i||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function ZU(n){MA(n.g,function(e,t){this.g.hasOwnProperty(t)&&VA(e)},n),n.g={}}function rw(){this.g=!0}function td(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var a=r[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<r.length;u++)r[u]=""}}}return HA(t)}catch(h){return e}}(n,t)+(i?" "+i:"")})}B9.prototype.M=function(){B9.Z.M.call(this),ZU(this)},B9.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rw.prototype.Aa=function(){this.g=!1},rw.prototype.info=function(){};var Y0={},KU=null;function sw(){return KU=KU||new Pr}function YU(n){ks.call(this,Y0.Ma,n)}function j9(n){const e=sw();fs(e,new YU(e,n))}function QU(n,e){ks.call(this,Y0.STAT_EVENT,n),this.stat=e}function Xs(n){const e=sw();fs(e,new QU(e,n))}function JU(n,e){ks.call(this,Y0.Na,n),this.size=e}function U9(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Y0.Ma="serverreachability",hs(YU,ks),Y0.STAT_EVENT="statevent",hs(QU,ks),Y0.Na="timingevent",hs(JU,ks);var ow={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},XU={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $A(){}function tG(){}$A.prototype.h=null;var KA,G9={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function WA(){ks.call(this,"d")}function ZA(){ks.call(this,"c")}function aw(){}function q9(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new B9(this),this.P=R2e,this.W=new iw(n=DA?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new nG}function nG(){this.i=null,this.g="",this.h=!1}hs(WA,ks),hs(ZA,ks),hs(aw,$A),aw.prototype.g=function(){return new XMLHttpRequest},aw.prototype.i=function(){return{}},KA=new aw;var R2e=45e3,YA={},cw={};function QA(n,e,t){n.K=1,n.v=fw($4(e)),n.s=t,n.U=!0,iG(n,null)}function iG(n,e){n.F=Date.now(),$9(n),n.A=$4(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),hG(t.h,"t",i),n.C=0,t=n.l.H,n.h=new nG,n.g=PG(n.l,t?e:null,!n.s),0<n.O&&(n.L=new I2e(ds(n.Ia,n,n.g),n.O)),WU(n.V,n.g,"readystatechange",n.gb),e=n.H?TU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),j9(1),function(n,e,t,i,r,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),m=0;m<h.length;m++){var F=h[m].split("=");if(1<F.length){var b=F[0];F=F[1];var M=b.split("_");u=2<=M.length&&"type"==M[1]?u+(b+"=")+F+"&":u+(b+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rG(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function sG(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=z2e(n,t),r==cw){4==e&&(n.o=4,Xs(14),i=!1),td(n.j,n.m,null,"[Incomplete Response]");break}if(r==YA){n.o=4,Xs(15),td(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}td(n.j,n.m,r,null),JA(n,r)}rG(n)&&r!=cw&&r!=YA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Xs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),lI(e),e.L=!0,Xs(11))):(td(n.j,n.m,t,"[Invalid Chunked Response]"),Q0(n),W9(n))}function z2e(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?cw:(t=Number(e.substring(t,i)),isNaN(t)?YA:(i+=1)+t>e.length?cw:(e=e.substr(i,t),n.C=i+t,e))}function $9(n){n.Y=Date.now()+n.P,oG(n,n.P)}function oG(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=U9(ds(n.eb,n),e)}function lw(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function W9(n){0==n.l.G||n.I||TG(n.l,n)}function Q0(n){lw(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,GA(n.W),ZU(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function JA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||tI(t.i,n)))if(t.I=n.N,!n.J&&tI(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch(F){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=U9(ds(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Fw(t),Cw(t)}cI(t),Xs(18)}if(1>=mG(t.i)&&t.ka){try{t.ka()}catch(F){}t.ka=void 0}}else e6(t,11)}else if((n.J||t.g==n)&&Fw(t),!Jv(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let F=r[e];if(t.U=F[0],F=F[1],2==t.G)if("c"==F[0]){t.J=F[1],t.la=F[2];const b=F[3];null!=b&&(t.ma=b,t.h.info("VER="+t.ma));const M=F[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const k=F[5];null!=k&&"number"==typeof k&&0<k&&(t.K=i=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const A=n.g;if(A){const P=A.g?A.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P){var a=i.i;!a.g&&(Qs(P,"spdy")||Qs(P,"quic")||Qs(P,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(nI(a,a.h),a.h=null))}if(i.D){const j=A.g?A.g.getResponseHeader("X-HTTP-Session-Id"):null;j&&(i.sa=j,pi(i.F,i.D,j))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((i=t).oa=LG(i,i.H?i.la:null,i.W),u.J){gG(i.i,u);var h=u,m=i.K;m&&h.setTimeout(m),h.B&&(lw(h),$9(h)),i.g=u}else xG(i);0<t.l.length&&_w(t)}else"stop"!=F[0]&&"close"!=F[0]||e6(t,7);else 3==t.G&&("stop"==F[0]||"close"==F[0]?"stop"==F[0]?e6(t,7):oI(t):"noop"!=F[0]&&t.j&&t.j.wa(F),t.A=0)}j9(4)}catch(F){}}function XA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vA(n)||"string"==typeof n)SU(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(vA(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;r=(i=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(vA(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n)).length;for(var a=0;a<r;a++)e.call(void 0,i[a],t&&t[a],n)}}function nd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof nd)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function eI(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];J0(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)J0(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function J0(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Je=q9.prototype).setTimeout=function(n){this.P=n},Je.gb=function(n){n=n.target;const e=this.L;e&&3==W4(n)?e.l():this.Ia(n)},Je.Ia=function(n){try{if(n==this.g)e:{const b=W4(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>b)&&(3!=b||DA||this.g&&(this.h.h||this.g.ga()||EG(this.g)))){this.I||4!=b||7==e||j9(8==e||0>=M?3:2),lw(this);var t=this.g.ba();this.N=t;t:if(rG(this)){var i=EG(this.g);n="";var r=i.length,a=4==W4(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Q0(this),W9(this);var u="";break t}this.h.i=new It.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:a&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function(n,e,t,i,r,a,u){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,b,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jv(h)){var F=h;break t}}F=null}if(!(t=F)){this.i=!1,this.o=3,Xs(12),Q0(this),W9(this);break e}td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,JA(this,t)}this.U?(sG(this,b,u),DA&&this.i&&3==b&&(WU(this.V,this.W,"tick",this.fb),this.W.start())):(td(this.j,this.m,u,null),JA(this,u)),4==b&&Q0(this),this.i&&!this.I&&(4==b?TG(this.l,this):(this.i=!1,$9(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Xs(12)):(this.o=0,Xs(13)),Q0(this),W9(this)}}}catch(b){}},Je.fb=function(){if(this.g){var n=W4(this.g),e=this.g.ga();this.C<e.length&&(lw(this),sG(this,n,e),this.i&&4!=n&&$9(this))}},Je.cancel=function(){this.I=!0,Q0(this)},Je.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(j9(3),Xs(17)),Q0(this),this.o=2,W9(this)):oG(this,this.Y-n)},(Je=nd.prototype).R=function(){eI(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Je.T=function(){return eI(this),this.g.concat()},Je.get=function(n,e){return J0(this.h,n)?this.h[n]:e},Je.set=function(n,e){J0(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Je.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],a=this.get(r);n.call(e,a,r,this)}};var aG=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function X0(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof X0){this.g=void 0!==e?e:n.g,uw(this,n.j),this.s=n.s,dw(this,n.i),hw(this,n.m),this.l=n.l,e=n.h;var t=new Y9;t.i=e.i,e.g&&(t.g=new nd(e.g),t.h=e.h),cG(this,t),this.o=n.o}else n&&(t=String(n).match(aG))?(this.g=!!e,uw(this,t[1]||"",!0),this.s=Z9(t[2]||""),dw(this,t[3]||"",!0),hw(this,t[4]),this.l=Z9(t[5]||"",!0),cG(this,t[6]||"",!0),this.o=Z9(t[7]||"")):(this.g=!!e,this.h=new Y9(null,this.g))}function $4(n){return new X0(n)}function uw(n,e,t){n.j=t?Z9(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dw(n,e,t){n.i=t?Z9(e,!0):e}function hw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function cG(n,e,t){e instanceof Y9?(n.h=e,function(n,e){e&&!n.j&&(Pl(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(uG(this,i),hG(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=K9(e,W2e)),n.h=new Y9(e,n.g))}function pi(n,e,t){n.h.set(e,t)}function fw(n){return pi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Z9(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function K9(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,G2e),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function G2e(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}X0.prototype.toString=function(){var n=[],e=this.j;e&&n.push(K9(e,lG,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(K9(e,lG,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(K9(t,"/"==t.charAt(0)?$2e:q2e,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",K9(t,Z2e)),n.join("")};var lG=/[#\/\?@]/g,q2e=/[#\?:]/g,$2e=/[#\?]/g,W2e=/[#\?@]/g,Z2e=/#/g;function Y9(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pl(n){n.g||(n.g=new nd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var a=n[t].substring(0,i);r=n[t].substring(i+1)}else a=n[t];e(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function uG(n,e){Pl(n),e=id(n,e),J0(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,J0((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&eI(n)))}function dG(n,e){return Pl(n),e=id(n,e),J0(n.g.h,e)}function hG(n,e,t){uG(n,e),0<t.length&&(n.i=null,n.g.set(id(n,e),bA(t)),n.h+=t.length)}function id(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function fG(n){this.l=n||Q2e,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Je=Y9.prototype).add=function(n,e){Pl(this),this.i=null,n=id(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Je.forEach=function(n,e){Pl(this),this.g.forEach(function(t,i){SU(t,function(r){n.call(e,r,i,this)},this)},this)},Je.T=function(){Pl(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],a=0;a<r.length;a++)t.push(e[i]);return t},Je.R=function(n){Pl(this);var e=[];if("string"==typeof n)dG(this,n)&&(e=DU(e,this.g.get(id(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=DU(e,n[t])}return e},Je.set=function(n,e){return Pl(this),this.i=null,dG(this,n=id(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Je.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Je.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var a=0;a<i.length;a++){var u=r;""!==i[a]&&(u+="="+encodeURIComponent(String(i[a]))),n.push(u)}}return this.i=n.join("&")};var Q2e=10;function pG(n){return!!n.h||!!n.g&&n.g.size>=n.j}function mG(n){return n.h?1:n.g?n.g.size:0}function tI(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function nI(n,e){n.g?n.g.add(e):n.h=e}function gG(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function CG(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return bA(n.i)}function iI(){}function J2e(){this.g=new iI}function X2e(n,e,t){const i=t||"";try{XA(n,function(r,a){let u=r;R9(r)&&(u=HA(r)),e.push(i+a+"="+encodeURIComponent(u))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function pw(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(a){}}function Q9(n){this.l=n.$b||null,this.j=n.ib||!1}function mw(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=rI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fG.prototype.cancel=function(){if(this.i=CG(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},iI.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},iI.prototype.parse=function(n){return It.JSON.parse(n,void 0)},hs(Q9,$A),Q9.prototype.g=function(){return new mw(this.l,this.j)},Q9.prototype.i=function(n){return function(){return n}}({}),hs(mw,Pr);var rI=0;function _G(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function J9(n){n.readyState=4,n.l=null,n.j=null,n.A=null,X9(n)}function X9(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Je=mw.prototype).open=function(n,e){if(this.readyState!=rI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,X9(this)},Je.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Je.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,J9(this)),this.readyState=rI},Je.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,X9(this)),this.g&&(this.readyState=3,X9(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_G(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Je.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?J9(this):X9(this),3==this.readyState&&_G(this)}},Je.Ua=function(n){this.g&&(this.response=this.responseText=n,J9(this))},Je.Ta=function(n){this.g&&(this.response=n,J9(this))},Je.ha=function(){this.g&&J9(this)},Je.setRequestHeader=function(n,e){this.v.append(n,e)},Je.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Je.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(mw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tae=It.JSON.parse;function ir(n){Pr.call(this),this.headers=new nd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=FG,this.K=this.L=!1}hs(ir,Pr);var FG="",nae=/^https?$/i,iae=["POST","PUT"];function sae(n){return"content-type"==n.toLowerCase()}function yG(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vG(n),gw(n)}function vG(n){n.D||(n.D=!0,fs(n,"complete"),fs(n,"error"))}function wG(n){if(n.h&&void 0!==yA&&(!n.C[1]||4!=W4(n)||2!=n.ba()))if(n.v&&4==W4(n))qA(n.Fa,0,n);else if(fs(n,"readystatechange"),4==W4(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(aG)[1]||null;if(!r&&It.self&&It.self.location){var a=It.self.location.protocol;r=a.substr(0,a.length-1)}i=!nae.test(r?r.toLowerCase():"")}t=i}if(t)fs(n,"complete"),fs(n,"success");else{n.m=6;try{var u=2<W4(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.ba()+"]",vG(n)}}finally{gw(n)}}}function gw(n,e){if(n.g){bG(n);const t=n.g,i=n.C[0]?Yv:null;n.g=null,n.C=null,e||fs(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function bG(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function W4(n){return n.g?n.g.readyState:0}function EG(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case FG:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function sI(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function(n){let e="";return MA(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):pi(n,e,t))}function ep(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function MG(n){this.za=0,this.l=[],this.h=new rw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ep("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ep("baseRetryDelayMs",5e3,n),this.$a=ep("retryDelaySeedMs",1e4,n),this.Ya=ep("forwardChannelMaxRetries",2,n),this.ra=ep("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new fG(n&&n.concurrentRequestLimit),this.Ca=new J2e,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function oI(n){if(SG(n),3==n.G){var e=n.V++,t=$4(n.F);pi(t,"SID",n.J),pi(t,"RID",e),pi(t,"TYPE","terminate"),tp(n,t),(e=new q9(n,n.h,e,void 0)).K=2,e.v=fw($4(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=PG(e.l,null),e.g.ea(e.v)),e.F=Date.now(),$9(e)}IG(n)}function Cw(n){n.g&&(lI(n),n.g.cancel(),n.g=null)}function SG(n){Cw(n),n.u&&(It.clearTimeout(n.u),n.u=null),Fw(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function aI(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&_w(n)}function _w(n){pG(n.i)||n.m||(n.m=!0,BA(n.Ha,n),n.C=0)}function DG(n,e){var t;t=e?e.m:n.V++;const i=$4(n.F);pi(i,"SID",n.J),pi(i,"RID",t),pi(i,"AID",n.U),tp(n,i),n.o&&n.s&&sI(i,n.o,n.s),t=new q9(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=kG(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),nI(n.i,t),QA(t,i,e)}function tp(n,e){n.j&&XA({},function(t,i){pi(e,i,t)})}function kG(n,e,t){t=Math.min(n.l.length,t);var i=n.j?ds(n.j.Oa,n.j,n):null;e:{var r=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=r[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let F=r[m].h;const b=r[m].g;if(F-=a,0>F)a=Math.max(0,r[m].h-100),h=!1;else try{X2e(b,u,"req"+F+"_")}catch(M){i&&i(b)}}if(h){i=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function xG(n){n.g||n.u||(n.Y=1,BA(n.Ga,n),n.A=0)}function cI(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=U9(ds(n.Ga,n),AG(n,n.A)),n.A++,0))}function lI(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function NG(n){n.g=new q9(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$4(n.oa);pi(e,"RID","rpc"),pi(e,"SID",n.J),pi(e,"CI",n.N?"0":"1"),pi(e,"AID",n.U),tp(n,e),pi(e,"TYPE","xmlhttp"),n.o&&n.s&&sI(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=fw($4(e)),t.s=null,t.U=!0,iG(t,n)}function Fw(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function TG(n,e){var t=null;if(n.g==e){Fw(n),lI(n),n.g=null;var i=2}else{if(!tI(n.i,e))return;t=e.D,gG(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;fs(i=sw(),new JU(i,t,e,r)),_w(n)}else xG(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function(n,e){return!(mG(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=U9(ds(n.Ha,n,e),AG(n,n.C)),n.C++,0)))}(n,e)||2==i&&cI(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:e6(n,5);break;case 4:e6(n,10);break;case 3:e6(n,6);break;default:e6(n,2)}}function AG(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function e6(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=ds(n.jb,n);t||(t=new X0("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||uw(t,"https"),fw(t)),function(n,e){const t=new rw;if(It.Image){const i=new Image;i.onload=Qv(pw,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Qv(pw,t,i,"TestLoadImage: error",!1,e),i.onabort=Qv(pw,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Qv(pw,t,i,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Xs(2);n.G=0,n.j&&n.j.va(e),IG(n),SG(n)}function IG(n){n.G=0,n.I=-1,n.j&&((0!=CG(n.i).length||0!=n.l.length)&&(n.i.i.length=0,bA(n.l),n.l.length=0),n.j.ua())}function LG(n,e,t){let i=function(n){return n instanceof X0?$4(n):new X0(n,void 0)}(t);if(""!=i.i)e&&dw(i,e+"."+i.i),hw(i,i.m);else{const r=It.location;i=function(n,e,t,i){var r=new X0(null,void 0);return n&&uw(r,n),e&&dw(r,e),t&&hw(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&MA(n.aa,function(r,a){pi(i,a,r)}),t=n.sa,(e=n.D)&&t&&pi(i,e,t),pi(i,"VER",n.ma),tp(n,i),i}function PG(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Ba&&!n.qa?new Q9({ib:!0}):n.qa)).L=n.H,e}function VG(){}function yw(){if(ed&&!(10<=Number(y2e)))throw Error("Environmental error: no available transport.")}function wo(n,e){Pr.call(this),this.g=new MG(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Jv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new rd(this)}function OG(n){WA.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function RG(){ZA.call(this),this.status=1}function rd(n){this.g=n}(Je=ir.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():KA.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:KA),this.g.onreadystatechange=ds(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void yG(this,a)}n=t||"";const r=new nd(this.headers);i&&XA(i,function(a,u){r.set(u,a)}),i=function(n){e:{var e=sae;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=It.FormData&&n instanceof It.FormData,!(0<=MU(iae,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bG(this),0<this.B&&((this.K=function(n){return ed&&F2e()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ds(this.pa,this)):this.A=qA(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){yG(this,a)}},Je.pa=function(){void 0!==yA&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fs(this,"timeout"),this.abort(8))},Je.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fs(this,"complete"),fs(this,"abort"),gw(this))},Je.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gw(this,!0)),ir.Z.M.call(this)},Je.Fa=function(){this.s||(this.F||this.v||this.l?wG(this):this.cb())},Je.cb=function(){wG(this)},Je.ba=function(){try{return 2<W4(this)?this.g.status:-1}catch(n){return-1}},Je.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Je.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tae(e)}},Je.Da=function(){return this.m},Je.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Je=MG.prototype).ma=8,Je.G=1,Je.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Je.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new q9(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=TU(a),IU(a,this.P)):a=this.P),null===this.o&&(r.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=kG(this,r,e),pi(t=$4(this.F),"RID",n),pi(t,"CVER",22),this.D&&pi(t,"X-HTTP-Session-Id",this.D),tp(this,t),this.o&&a&&sI(t,this.o,a),nI(this.i,r),this.Ra&&pi(t,"TYPE","init"),this.ja?(pi(t,"$req",e),pi(t,"SID","null"),r.$=!0,QA(r,t,null)):QA(r,t,e),this.G=2}}else 3==this.G&&(n?DG(this,n):0==this.l.length||pG(this.i)||DG(this))},Je.Ga=function(){if(this.u=null,NG(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=U9(ds(this.bb,this),n)}},Je.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xs(10),Cw(this),NG(this))},Je.ab=function(){null!=this.v&&(this.v=null,Cw(this),cI(this),Xs(19))},Je.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Xs(2)):(this.h.info("Failed to ping google.com"),Xs(1))},(Je=VG.prototype).xa=function(){},Je.wa=function(){},Je.va=function(){},Je.ua=function(){},Je.Oa=function(){},yw.prototype.g=function(n,e){return new wo(n,e)},hs(wo,Pr),wo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),BA(ds(n.hb,n,e))),Xs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=LG(n,null,n.W),_w(n)},wo.prototype.close=function(){oI(this.g)},wo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,aI(this.g,e)}else this.v?((e={}).__data__=HA(n),aI(this.g,e)):aI(this.g,n)},wo.prototype.M=function(){this.g.j=null,delete this.j,oI(this.g),delete this.g,wo.Z.M.call(this)},hs(OG,WA),hs(RG,ZA),hs(rd,VG),rd.prototype.xa=function(){fs(this.g,"a")},rd.prototype.wa=function(n){fs(this.g,new OG(n))},rd.prototype.va=function(n){fs(this.g,new RG(n))},rd.prototype.ua=function(){fs(this.g,"b")},yw.prototype.createWebChannel=yw.prototype.g,wo.prototype.send=wo.prototype.u,wo.prototype.open=wo.prototype.m,wo.prototype.close=wo.prototype.close,ow.NO_ERROR=0,ow.TIMEOUT=8,ow.HTTP_ERROR=6,XU.COMPLETE="complete",tG.EventType=G9,G9.OPEN="a",G9.CLOSE="b",G9.ERROR="c",G9.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.La,ir.prototype.getLastErrorCode=ir.prototype.Da,ir.prototype.getStatus=ir.prototype.ba,ir.prototype.getResponseJson=ir.prototype.Qa,ir.prototype.getResponseText=ir.prototype.ga,ir.prototype.send=ir.prototype.ea;var cae=q4.createWebChannelTransport=function(){return new yw},lae=q4.getStatEventTarget=function(){return sw()},uI=q4.ErrorCode=ow,uae=q4.EventType=XU,dae=q4.Event=Y0,zG=q4.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hae=q4.FetchXmlHttpFactory=Q9,vw=q4.WebChannel=tG,fae=q4.XhrIo=ir;const HG="@firebase/firestore";class ps{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ps.UNAUTHENTICATED=new ps(null),ps.GOOGLE_CREDENTIALS=new ps("google-credentials-uid"),ps.FIRST_PARTY=new ps("first-party-uid"),ps.MOCK_USER=new ps("mock-user");let sd="9.6.7";const Vl=new ga.Yd("@firebase/firestore");function dI(){return Vl.logLevel}function Re(n,...e){if(Vl.logLevel<=ga.in.DEBUG){const t=e.map(hI);Vl.debug(`Firestore (${sd}): ${n}`,...t)}}function rr(n,...e){if(Vl.logLevel<=ga.in.ERROR){const t=e.map(hI);Vl.error(`Firestore (${sd}): ${n}`,...t)}}function np(n,...e){if(Vl.logLevel<=ga.in.WARN){const t=e.map(hI);Vl.warn(`Firestore (${sd}): ${n}`,...t)}}function hI(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${sd}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function kt(n,e){n||at()}function Ue(n,e){return n}const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class BG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ps.UNAUTHENTICATED))}shutdown(){}}class Cae{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _ae{constructor(e){this.t=e,this.currentUser=ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const a=F=>this.i!==r?(r=this.i,t(F)):Promise.resolve();let u=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Vr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const F=u;e.enqueueRetryable((0,X.Z)(function*(){yield F.promise,yield a(i.currentUser)}))},m=F=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=F,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(F=>m(F)),setTimeout(()=>{if(!this.auth){const F=this.t.getImmediate({optional:!0});F?m(F):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Vr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(kt("string"==typeof i.accessToken),new BG(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new ps(e)}}class Fae{constructor(e,t,i){this.type="FirstParty",this.user=ps.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class yae{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new Fae(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ps.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vae{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=a=>{null!=a.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const r=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>r(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?r(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new jG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class bo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.I(i),this.T=i=>t.writeSequenceNumber(i))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function wae(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}bo.A=-1;class UG{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=wae(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%e.length))}return i}}function on(n,e){return n<e?-1:n>e?1:0}function od(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function GG(n){return n+"\0"}class vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vr(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new vr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function qG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function t6(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $G(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ip{constructor(e,t,i){void 0===t?t=0:t>e.length&&at(),void 0===i?i=e.length-t:i>e.length-t&&at(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===ip.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ip?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=e.get(r),u=t.get(r);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends ip{construct(e,t,i){return new wn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Le(Fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const bae=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends ip{construct(e,t,i){return new Or(e,t,i)}static isValidIdentifier(e){return bae.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(0===i.length)throw new Le(Fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new Le(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Le(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else"`"===h?(u=!u,r++):"."!==h||u?(i+=h,r++):(a(),r++)}if(a(),u)throw new Le(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class ad{constructor(e){this.fields=e,e.sort(Or.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let a=0;a<i.length;++a)r+=String.fromCharCode(i[a]);return r}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const Mae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ol(n){if(kt(!!n),"string"==typeof n){let e=0;const t=Mae.exec(n);if(kt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Li(n.seconds),nanos:Li(n.nanos)}}function Li(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function n6(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function fI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function WG(n){const e=n.mapValue.fields.__previous_value__;return fI(e)?WG(e):e}function rp(n){const e=Ol(n.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}class Sae{constructor(e,t,i,r,a,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class i6{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new i6("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof i6&&e.projectId===this.projectId&&e.database===this.database}}function r6(n){return null==n}function sp(n){return 0===n&&1/n==-1/0}function ZG(n){return"number"==typeof n&&Number.isInteger(n)&&!sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(wn.fromString(e))}static fromName(e){return new Ke(wn.fromString(e).popFirst(5))}static empty(){return new Ke(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new wn(e.slice()))}}const Dae={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function s6(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fI(n)?4:10:at()}function Ca(n,e){if(n===e)return!0;const t=s6(n);if(t!==s6(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rp(n).isEqual(rp(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const a=Ol(i.timestampValue),u=Ol(r.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,n6(n.bytesValue).isEqual(n6(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Li(i.geoPointValue.latitude)===Li(r.geoPointValue.latitude)&&Li(i.geoPointValue.longitude)===Li(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Li(i.integerValue)===Li(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const a=Li(i.doubleValue),u=Li(r.doubleValue);return a===u?sp(a)===sp(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return od(n.arrayValue.values||[],e.arrayValue.values||[],Ca);case 10:return function(i,r){const a=i.mapValue.fields||{},u=r.mapValue.fields||{};if(qG(a)!==qG(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!Ca(a[h],u[h])))return!1;return!0}(n,e);default:return at()}var r}function op(n,e){return void 0!==(n.values||[]).find(t=>Ca(t,e))}function cd(n,e){if(n===e)return 0;const t=s6(n),i=s6(e);if(t!==i)return on(t,i);switch(t){case 0:return 0;case 1:return on(n.booleanValue,e.booleanValue);case 2:return function(r,a){const u=Li(r.integerValue||r.doubleValue),h=Li(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return KG(n.timestampValue,e.timestampValue);case 4:return KG(rp(n),rp(e));case 5:return on(n.stringValue,e.stringValue);case 6:return function(r,a){const u=n6(r),h=n6(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,a){const u=r.split("/"),h=a.split("/");for(let m=0;m<u.length&&m<h.length;m++){const F=on(u[m],h[m]);if(0!==F)return F}return on(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,a){const u=on(Li(r.latitude),Li(a.latitude));return 0!==u?u:on(Li(r.longitude),Li(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,a){const u=r.values||[],h=a.values||[];for(let m=0;m<u.length&&m<h.length;++m){const F=cd(u[m],h[m]);if(F)return F}return on(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,a){const u=r.fields||{},h=Object.keys(u),m=a.fields||{},F=Object.keys(m);h.sort(),F.sort();for(let b=0;b<h.length&&b<F.length;++b){const M=on(h[b],F[b]);if(0!==M)return M;const k=cd(u[h[b]],m[F[b]]);if(0!==k)return k}return on(h.length,F.length)}(n.mapValue,e.mapValue);default:throw at()}}function KG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return on(n,e);const t=Ol(n),i=Ol(e),r=on(t.seconds,i.seconds);return 0!==r?r:on(t.nanos,i.nanos)}function ld(n){return pI(n)}function pI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Ol(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?n6(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",a=!0;for(const u of i.values||[])a?a=!1:r+=",",r+=pI(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let a="{",u=!0;for(const h of r)u?u=!1:a+=",",a+=`${h}:${pI(i.fields[h])}`;return a+"}"}(n.mapValue):at();var e}function ww(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mI(n){return!!n&&"integerValue"in n}function bw(n){return!!n&&"arrayValue"in n}function YG(n){return!!n&&"nullValue"in n}function QG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ew(n){return!!n&&"mapValue"in n}function ap(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return t6(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ap(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ap(n.arrayValue.values[t]);return e}return Object.assign({},n)}class xs{constructor(e){this.value=e}static empty(){return new xs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ew(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ap(t)}setAll(e){let t=Or.emptyPath(),i={},r=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,r),i={},r=[],t=h.popLast()}u?i[h.lastSegment()]=ap(u):r.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Ew(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ew(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){t6(t,(r,a)=>e[r]=a);for(const r of i)delete e[r]}clone(){return new xs(ap(this.value))}}function JG(n){const e=[];return t6(n.fields,(t,i)=>{const r=new Or([t]);if(Ew(i)){const a=JG(i.mapValue).fields;if(0===a.length)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)}),new ad(e)}class Si{constructor(e,t,i,r,a,u){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Si(e,0,wt.min(),wt.min(),xs.empty(),0)}static newFoundDocument(e,t,i){return new Si(e,1,t,wt.min(),i,0)}static newNoDocument(e,t){return new Si(e,2,t,wt.min(),xs.empty(),0)}static newUnknownDocument(e,t){return new Si(e,3,t,wt.min(),xs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let gI=(()=>{class n{constructor(t,i,r,a){this.indexId=t,this.collectionGroup=i,this.fields=r,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class Mw{constructor(e,t){this.fieldPath=e,this.kind=t}}class cp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cp(0,Sw.min())}}class Sw{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Sw(wt.min(),Ke.empty(),-1)}}class kae{constructor(e,t=null,i=[],r=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=h,this.P=null}}function XG(n,e=null,t=[],i=[],r=null,a=null,u=null){return new kae(n,e,t,i,r,a,u)}function lp(n){const e=Ue(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+ld(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),r6(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>ld(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>ld(i)).join(",")),e.P=t}return e.P}function Dw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!Oae(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!Ca(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nq(n.startAt,e.startAt)&&nq(n.endAt,e.endAt)}function kw(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class e1 extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,i):new Nae(e,t,i):"array-contains"===t?new Iae(e,i):"in"===t?new Lae(e,i):"not-in"===t?new Pae(e,i):"array-contains-any"===t?new Vae(e,i):new e1(e,t,i)}static v(e,t,i){return"in"===t?new Tae(e,i):new Aae(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(cd(t,this.value)):null!==t&&s6(this.value)===s6(t)&&this.V(cd(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Nae extends e1{constructor(e,t,i){super(e,t,i),this.key=Ke.fromName(i.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.V(t)}}class Tae extends e1{constructor(e,t){super(e,"in",t),this.keys=eq(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Aae extends e1{constructor(e,t){super(e,"not-in",t),this.keys=eq(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eq(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Ke.fromName(i.referenceValue))}class Iae extends e1{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bw(t)&&op(t.arrayValue,this.value)}}class Lae extends e1{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&op(this.value.arrayValue,t)}}class Pae extends e1{constructor(e,t){super(e,"not-in",t)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!op(this.value.arrayValue,t)}}class Vae extends e1{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>op(this.value.arrayValue,i))}}class ud{constructor(e,t){this.position=e,this.inclusive=t}}class dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function Oae(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tq(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],u=n.position[r];if(i=a.field.isKeyField()?Ke.comparator(Ke.fromName(u.referenceValue),t.key):cd(u,t.data.field(a.field)),"desc"===a.dir&&(i*=-1),0!==i)break}return i}function nq(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ca(n.position[t],e.position[t]))return!1;return!0}class Z4{constructor(e,t=null,i=[],r=[],a=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function iq(n,e,t,i,r,a,u,h){return new Z4(n,e,t,i,r,a,u,h)}function hd(n){return new Z4(n)}function xw(n){return!r6(n.limit)&&"F"===n.limitType}function Nw(n){return!r6(n.limit)&&"L"===n.limitType}function CI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _I(n){for(const e of n.filters)if(e.S())return e.field;return null}function FI(n){return null!==n.collectionGroup}function fd(n){const e=Ue(n);if(null===e.D){e.D=[];const t=_I(e),i=CI(e);if(null!==t&&null===i)t.isKeyField()||e.D.push(new dd(t)),e.D.push(new dd(Or.keyField(),"asc"));else{let r=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(r=!0);if(!r){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new dd(Or.keyField(),a))}}}return e.D}function g2(n){const e=Ue(n);if(!e.C)if("F"===e.limitType)e.C=XG(e.path,e.collectionGroup,fd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of fd(e))t.push(new dd(a.field,"desc"===a.dir?"asc":"desc"));const i=e.endAt?new ud(e.endAt.position,!e.endAt.inclusive):null,r=e.startAt?new ud(e.startAt.position,!e.startAt.inclusive):null;e.C=XG(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.C}function rq(n,e,t){return new Z4(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function up(n,e){return Dw(g2(n),g2(e))&&n.limitType===e.limitType}function sq(n){return`${lp(g2(n))}|lt:${n.limitType}`}function yI(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${ld(i.value)}`;var i}).join(", ")}]`),r6(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ld(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ld(t)).join(",")),`Target(${e})`}(g2(n))}; limitType=${n.limitType})`}function vI(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Ke.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,a,u){const h=tq(r,a,u);return r.inclusive?h<=0:h<0}(t.startAt,fd(t),i)||t.endAt&&!function(r,a,u){const h=tq(r,a,u);return r.inclusive?h>=0:h>0}(t.endAt,fd(t),i)));var t,i}function oq(n){return(e,t)=>{let i=!1;for(const r of fd(n)){const a=Rae(r,e,t);if(0!==a)return a;i=i||r.field.isKeyField()}return 0}}function Rae(n,e,t){const i=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(r,a,u){const h=a.data.field(r),m=u.data.field(r);return null!==h&&null!==m?cd(h,m):at()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return at()}}function aq(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function cq(n){return{integerValue:""+n}}function lq(n,e){return ZG(e)?cq(e):aq(n,e)}class Tw{constructor(){this._=void 0}}function zae(n,e,t){return n instanceof pd?function(i,r){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(a.fields.__previous_value__=r),{mapValue:a}}(t,e):n instanceof o6?dq(n,e):n instanceof a6?hq(n,e):function(i,r){const a=uq(i,r),u=fq(a)+fq(i.k);return mI(a)&&mI(i.k)?cq(u):aq(i.O,u)}(n,e)}function Hae(n,e,t){return n instanceof o6?dq(n,e):n instanceof a6?hq(n,e):t}function uq(n,e){return n instanceof md?mI(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class pd extends Tw{}class o6 extends Tw{constructor(e){super(),this.elements=e}}function dq(n,e){const t=pq(e);for(const i of n.elements)t.some(r=>Ca(r,i))||t.push(i);return{arrayValue:{values:t}}}class a6 extends Tw{constructor(e){super(),this.elements=e}}function hq(n,e){let t=pq(e);for(const i of n.elements)t=t.filter(r=>!Ca(r,i));return{arrayValue:{values:t}}}class md extends Tw{constructor(e,t){super(),this.O=e,this.k=t}}function fq(n){return Li(n.integerValue||n.doubleValue)}function pq(n){return bw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dp{constructor(e,t){this.field=e,this.transform=t}}class jae{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Aw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Iw{}function Uae(n,e,t){n instanceof hp?function(i,r,a){const u=i.value.clone(),h=_q(i.fieldTransforms,r,a.transformResults);u.setAll(h),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof c6?function(i,r,a){if(!Aw(i.precondition,r))return void r.convertToUnknownDocument(a.version);const u=_q(i.fieldTransforms,r,a.transformResults),h=r.data;h.setAll(Cq(i)),h.setAll(u),r.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wI(n,e,t){var r;n instanceof hp?function(i,r,a){if(!Aw(i.precondition,r))return;const u=i.value.clone(),h=Fq(i.fieldTransforms,a,r);u.setAll(h),r.convertToFoundDocument(gq(r),u).setHasLocalMutations()}(n,e,t):n instanceof c6?function(i,r,a){if(!Aw(i.precondition,r))return;const u=Fq(i.fieldTransforms,a,r),h=r.data;h.setAll(Cq(i)),h.setAll(u),r.convertToFoundDocument(gq(r),h).setHasLocalMutations()}(n,e,t):Aw(n.precondition,r=e)&&r.convertToNoDocument(wt.min())}function Gae(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=uq(i.transform,r||null);null!=a&&(null==t&&(t=xs.empty()),t.set(i.field,a))}return t||null}function mq(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&od(t,i,(r,a)=>function(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof o6&&i instanceof o6||t instanceof a6&&i instanceof a6?od(t.elements,i.elements,Ca):t instanceof md&&i instanceof md?Ca(t.k,i.k):t instanceof pd&&i instanceof pd);var t,i}(r,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}function gq(n){return n.isFoundDocument()?n.version:wt.min()}class hp extends Iw{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}}class c6 extends Iw{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}}function Cq(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function _q(n,e,t){const i=new Map;kt(n.length===t.length);for(let r=0;r<t.length;r++){const a=n[r],u=a.transform,h=e.data.field(a.field);i.set(a.field,Hae(u,h,t[r]))}return i}function Fq(n,e,t){const i=new Map;for(const r of n){const a=r.transform,u=t.data.field(r.field);i.set(r.field,zae(a,u,e))}return i}class fp extends Iw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class bI extends Iw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class qae{constructor(e){this.count=e}}var or,mn;function yq(n){switch(n){default:return at();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}function vq(n){if(void 0===n)return rr("GRPC error has no .code"),Fe.UNKNOWN;switch(n){case or.OK:return Fe.OK;case or.CANCELLED:return Fe.CANCELLED;case or.UNKNOWN:return Fe.UNKNOWN;case or.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case or.INTERNAL:return Fe.INTERNAL;case or.UNAVAILABLE:return Fe.UNAVAILABLE;case or.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case or.NOT_FOUND:return Fe.NOT_FOUND;case or.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case or.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case or.ABORTED:return Fe.ABORTED;case or.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case or.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case or.DATA_LOSS:return Fe.DATA_LOSS;default:return at()}}(mn=or||(or={}))[mn.OK=0]="OK",mn[mn.CANCELLED=1]="CANCELLED",mn[mn.UNKNOWN=2]="UNKNOWN",mn[mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mn[mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mn[mn.NOT_FOUND=5]="NOT_FOUND",mn[mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",mn[mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",mn[mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",mn[mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mn[mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mn[mn.ABORTED=10]="ABORTED",mn[mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",mn[mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",mn[mn.INTERNAL=13]="INTERNAL",mn[mn.UNAVAILABLE=14]="UNAVAILABLE",mn[mn.DATA_LOSS=15]="DATA_LOSS";class $i{constructor(e,t){this.comparator=e,this.root=t||ms.EMPTY}insert(e,t){return new $i(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ms.BLACK,null,null))}remove(e){return new $i(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ms.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lw(this.root,e,this.comparator,!0)}}class Lw{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ms{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=null!=i?i:ms.RED,this.left=null!=r?r:ms.EMPTY,this.right=null!=a?a:ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new ms(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ms.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ms.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}ms.EMPTY=null,ms.RED=!0,ms.BLACK=!1,ms.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,i,r){return this}insert(n,e,t){return new ms(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mi{constructor(e){this.comparator=e,this.data=new $i(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wq(this.data.getIterator())}getIteratorFrom(e){return new wq(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(0!==this.comparator(r,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mi(this.comparator);return t.data=e,t}}class wq{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gd(n){return n.hasNext()?n.getNext():void 0}const $ae=new $i(Ke.comparator);function C2(){return $ae}const Wae=new $i(Ke.comparator);function EI(){return Wae}const Zae=new $i(Ke.comparator),Kae=new mi(Ke.comparator);function kn(...n){let e=Kae;for(const t of n)e=e.add(t);return e}const Yae=new mi(on);function Pw(){return Yae}class pp{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,mp.createSynthesizedTargetChangeForCurrentChange(e,t)),new pp(wt.min(),i,Pw(),C2(),kn())}}class mp{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new mp(wr.EMPTY_BYTE_STRING,t,kn(),kn(),kn())}}class Vw{constructor(e,t,i,r){this.M=e,this.removedTargetIds=t,this.key=i,this.$=r}}class bq{constructor(e,t){this.targetId=e,this.F=t}}class Eq{constructor(e,t,i=wr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class Mq{constructor(){this.B=0,this.L=Dq(),this.U=wr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=kn(),t=kn(),i=kn();return this.L.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:at()}}),new mp(this.U,this.q,e,t,i)}J(){this.K=!1,this.L=Dq()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Qae{constructor(e){this.nt=e,this.st=new Map,this.it=C2(),this.rt=Sq(),this.ot=new mi(on)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const i=this.lt(t);switch(e.state){case 0:this.ft(t)&&i.W(e.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(e.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(t);break;case 3:this.ft(t)&&(i.et(),i.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),i.W(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((i,r)=>{this.ft(r)&&t(r)})}_t(e){const t=e.targetId,i=e.F.count,r=this.wt(t);if(r){const a=r.target;if(kw(a))if(0===i){const u=new Ke(a.path);this.at(t,u,Si.newNoDocument(u,wt.min()))}else kt(1===i);else this.gt(t)!==i&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,u)=>{const h=this.wt(u);if(h){if(a.current&&kw(h.target)){const m=new Ke(h.target.path);null!==this.it.get(m)||this.It(u,m)||this.at(u,m,Si.newNoDocument(m,e))}a.j&&(t.set(u,a.H()),a.J())}});let i=kn();this.rt.forEach((a,u)=>{let h=!0;u.forEachWhile(m=>{const F=this.wt(m);return!F||2===F.purpose||(h=!1,!1)}),h&&(i=i.add(a))}),this.it.forEach((a,u)=>u.setReadTime(e));const r=new pp(e,t,this.ot,this.it,i);return this.it=C2(),this.rt=Sq(),this.ot=new mi(on),r}ut(e,t){if(!this.ft(e))return;const i=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,i),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,i){if(!this.ft(e))return;const r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),i&&(this.it=this.it.insert(t,i))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Mq,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new mi(on),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new Mq),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Sq(){return new $i(Ke.comparator)}function Dq(){return new $i(Ke.comparator)}const Jae={asc:"ASCENDING",desc:"DESCENDING"},Xae={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class e3e{constructor(e,t){this.databaseId=e,this.N=t}}function gp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kq(n,e){return n.N?e.toBase64():e.toUint8Array()}function t3e(n,e){return gp(n,e.toTimestamp())}function Rr(n){return kt(!!n),wt.fromTimestamp(function(e){const t=Ol(e);return new vr(t.seconds,t.nanos)}(n))}function MI(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function xq(n){const e=wn.fromString(n);return kt(Rq(e)),e}function Cp(n,e){return MI(n.databaseId,e.path)}function k3(n,e){const t=xq(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(Tq(t))}function SI(n,e){return MI(n.databaseId,e)}function Nq(n){const e=xq(n);return 4===e.length?wn.emptyPath():Tq(e)}function _p(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tq(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Aq(n,e,t){return{name:Cp(n,e),fields:t.value.mapValue.fields}}function Iq(n,e,t){const i=k3(n,e.name),r=Rr(e.updateTime),a=new xs({mapValue:{fields:e.fields}}),u=Si.newFoundDocument(i,r,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Fp(n,e){let t;if(e instanceof hp)t={update:Aq(n,e.key,e.value)};else if(e instanceof fp)t={delete:Cp(n,e.key)};else if(e instanceof c6)t={update:Aq(n,e.key,e.data),updateMask:u3e(e.fieldMask)};else{if(!(e instanceof bI))return at();t={verify:Cp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const u=a.transform;if(u instanceof pd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof o6)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof a6)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof md)return{fieldPath:a.field.canonicalString(),increment:u.k};throw at()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:t3e(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:at()),t;var r}function DI(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?sr.updateTime(Rr(r.updateTime)):void 0!==r.exists?sr.exists(r.exists):sr.none():sr.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,u){let h=null;"setToServerValue"in u?(kt("REQUEST_TIME"===u.setToServerValue),h=new pd):"appendMissingElements"in u?h=new o6(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new a6(u.removeAllFromArray.values||[]):"increment"in u?h=new md(a,u.increment):at();const m=Or.fromServerFormat(u.fieldPath);return new dp(m,h)}(n,r)):[];var r;if(e.update){const r=k3(n,e.update.name),a=new xs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new ad((e.updateMask.fieldPaths||[]).map(F=>Or.fromServerFormat(F)));return new c6(r,a,u,t,i)}return new hp(r,a,t,i)}if(e.delete){const r=k3(n,e.delete);return new fp(r,t)}if(e.verify){const r=k3(n,e.verify);return new bI(r,t)}return at()}function Lq(n,e){return{documents:[SI(n,e.path)]}}function Pq(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=SI(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=SI(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(m){if(0===m.length)return;const F=m.map(b=>function(M){if("=="===M.op){if(QG(M.value))return{unaryFilter:{field:Cd(M.field),op:"IS_NAN"}};if(YG(M.value))return{unaryFilter:{field:Cd(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(QG(M.value))return{unaryFilter:{field:Cd(M.field),op:"IS_NOT_NAN"}};if(YG(M.value))return{unaryFilter:{field:Cd(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cd(M.field),op:a3e(M.op),value:M.value}}}(b));return 1===F.length?F[0]:{compositeFilter:{op:"AND",filters:F}}}(e.filters);r&&(t.structuredQuery.where=r);const a=function(m){if(0!==m.length)return m.map(F=>{return{field:Cd((b=F).field),direction:o3e(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(F=e.limit,n.N||r6(F)?F:{value:F});var F,h,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Vq(n){let e=Nq(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){kt(1===i);const b=t.from[0];b.allDescendants?r=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=Oq(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new dd(_d((M=b).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let h=null;t.limit&&(h=function(b){let M;return M="object"==typeof b?b.value:b,r6(M)?null:M}(t.limit));let m=null;var b;t.startAt&&(m=new ud((b=t.startAt).values||[],!!b.before));let F=null;return t.endAt&&(F=function(b){return new ud(b.values||[],!b.before)}(t.endAt)),iq(e,r,u,a,h,"F",m,F)}function Oq(n){return n?void 0!==n.unaryFilter?[l3e(n)]:void 0!==n.fieldFilter?[c3e(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Oq(e)).reduce((e,t)=>e.concat(t)):at():[]}function o3e(n){return Jae[n]}function a3e(n){return Xae[n]}function Cd(n){return{fieldPath:n.canonicalString()}}function _d(n){return Or.fromServerFormat(n.fieldPath)}function c3e(n){return e1.create(_d(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function l3e(n){switch(n.unaryFilter.op){case"IS_NAN":const e=_d(n.unaryFilter.field);return e1.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=_d(n.unaryFilter.field);return e1.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_d(n.unaryFilter.field);return e1.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=_d(n.unaryFilter.field);return e1.create(r,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function u3e(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Rq(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function zr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zq(e)),e=d3e(n.get(t),e);return zq(e)}function d3e(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function zq(n){return n+"\x01\x01"}function x3(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&at(),n.charAt(u+1)){case"\x01":const h=n.substring(a,u);let m;0===r.length?m=h:(r+=h,m=r,r=""),i.push(m);break;case"\x10":r+=n.substring(a,u),r+="\0";break;case"\x11":r+=n.substring(a,u+1);break;default:at()}a=u+2}return new wn(i)}class h3e{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Eo{constructor(e,t,i){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=i}}Eo.store="owner",Eo.key="owner";class Rl{constructor(e,t,i){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=i}}Rl.store="mutationQueues",Rl.keyPath="userId";class ni{constructor(e,t,i,r,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=i,this.baseMutations=r,this.mutations=a}}ni.store="mutations",ni.keyPath="batchId",ni.userMutationsIndex="userMutationsIndex",ni.userMutationsKeyPath=["userId","batchId"];class Ns{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,zr(t)]}static key(e,t,i){return[e,zr(t),i]}}Ns.store="documentMutations",Ns.PLACEHOLDER=new Ns;class f3e{constructor(e,t){this.path=e,this.readTime=t}}class p3e{constructor(e,t){this.path=e,this.version=t}}class Pi{constructor(e,t,i,r,a,u){this.unknownDocument=e,this.noDocument=t,this.document=i,this.hasCommittedMutations=r,this.readTime=a,this.parentPath=u}}Pi.store="remoteDocuments",Pi.readTimeIndex="readTimeIndex",Pi.readTimeIndexPath="readTime",Pi.collectionReadTimeIndex="collectionReadTimeIndex",Pi.collectionReadTimeIndexPath=["parentPath","readTime"];class N3{constructor(e){this.byteSize=e}}N3.store="remoteDocumentGlobal",N3.key="remoteDocumentGlobalKey";class P1{constructor(e,t,i,r,a,u,h){this.targetId=e,this.canonicalId=t,this.readTime=i,this.resumeToken=r,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=u,this.query=h}}P1.store="targets",P1.keyPath="targetId",P1.queryTargetsIndexName="queryTargetsIndex",P1.queryTargetsKeyPath=["canonicalId","targetId"];class gs{constructor(e,t,i){this.targetId=e,this.path=t,this.sequenceNumber=i}}gs.store="targetDocuments",gs.keyPath=["targetId","path"],gs.documentTargetsIndex="documentTargetsIndex",gs.documentTargetsKeyPath=["path","targetId"];class Mo{constructor(e,t,i,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=i,this.targetCount=r}}Mo.key="targetGlobalKey",Mo.store="targetGlobal";class l6{constructor(e,t){this.collectionId=e,this.parent=t}}l6.store="collectionParents",l6.keyPath=["collectionId","parent"];class K4{constructor(e,t,i,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=i,this.inForeground=r}}K4.store="clientMetadata",K4.keyPath="clientId";class Fd{constructor(e,t,i){this.bundleId=e,this.createTime=t,this.version=i}}Fd.store="bundles",Fd.keyPath="bundleId";class yd{constructor(e,t,i){this.name=e,this.readTime=t,this.bundledQuery=i}}yd.store="namedQueries",yd.keyPath="name";class So{constructor(e,t,i){this.indexId=e,this.collectionGroup=t,this.fields=i}}So.store="indexConfiguration",So.keyPath="indexId",So.collectionGroupIndex="collectionGroupIndex",So.collectionGroupIndexPath="collectionGroup";class _2{constructor(e,t,i,r,a,u){this.indexId=e,this.uid=t,this.sequenceNumber=i,this.readTime=r,this.documentKey=a,this.largestBatchId=u}}_2.store="indexState",_2.keyPath=["indexId","uid"],_2.sequenceNumberIndex="sequenceNumberIndex",_2.sequenceNumberIndexPath=["uid","sequenceNumber"];class F2{constructor(e,t,i,r,a){this.indexId=e,this.uid=t,this.arrayValue=i,this.directionalValue=r,this.documentKey=a}}F2.store="indexEntries",F2.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],F2.documentKeyIndex="documentKeyIndex",F2.documentKeyIndexPath=["indexId","uid","documentKey"];class Hr{constructor(e,t,i,r,a,u){this.userId=e,this.collectionPath=t,this.documentId=i,this.collectionGroup=r,this.largestBatchId=a,this.overlayMutation=u}}Hr.store="documentOverlays",Hr.keyPath=["userId","collectionPath","documentId"],Hr.collectionPathOverlayIndex="collectionPathOverlayIndex",Hr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Hr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Hr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const Hq=[Rl.store,ni.store,Ns.store,Pi.store,P1.store,Eo.store,Mo.store,gs.store,K4.store,N3.store,l6.store,Fd.store,yd.store],Bq=[...Hq,Hr.store],m3e=[...Bq,So.store,_2.store,F2.store],jq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,i)=>{t(e)})}static reject(e){return new ve((t,i)=>{i(e)})}static waitFor(e){return new ve((t,i)=>{let r=0,a=0,u=!1;e.forEach(h=>{++r,h.next(()=>{++a,u&&a===r&&t()},m=>i(m))}),u=!0,a===r&&t()})}static or(e){let t=ve.resolve(!1);for(const i of e)t=t.next(r=>r?ve.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,a)=>{i.push(t.call(this,r,a))}),this.waitFor(i)}}class Ow{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Vr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new yp(e,t.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=kI(i.target.error);this.At.reject(new yp(e,r))}}static open(e,t,i,r){try{return new Ow(t,e.transaction(r,i))}catch(a){throw new yp(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new C3e(t)}}class _a{constructor(e,t,i){this.name=e,this.version=t,this.bt=i,12.2===_a.vt((0,O.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),d6(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,O.hl)())return!1;if(_a.St())return!0;const e=(0,O.z$)(),t=_a.vt(e),i=0<t&&t<10,r=_a.Dt(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}xt(e){var t=this;return(0,X.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{i(u.target.result)},a.onblocked=()=>{r(new yp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const h=u.target.error;r("VersionError"===h.name?new Le(Fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(Fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new yp(e,h))},a.onupgradeneeded=u=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.bt.kt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=i=>t.Ot(i)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var a=this;return(0,X.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.xt(e);const m=Ow.open(a.db,e,u?"readonly":"readwrite",i),F=r(m).next(b=>(m.Pt(),b)).catch(b=>(m.abort(b),ve.reject(b))).toPromise();return F.catch(()=>{}),yield m.Rt,F}catch(m){const F="FirebaseError"!==m.name&&h<3;if(Re("SimpleDb","Transaction failed with error:",m.message,"Retrying:",F),a.close(),!F)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class g3e{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return d6(this.$t.delete())}}class yp extends Le{constructor(e,t){super(Fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function u6(n){return"IndexedDbTransactionError"===n.name}class C3e{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),d6(i)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),d6(this.store.add(e))}get(e){return d6(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),d6(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),d6(this.store.count())}qt(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),a=[];return this.Kt(r,(u,h)=>{a.push(h)}).next(()=>a)}{const r=this.store.getAll(i.range);return new ve((a,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(a,u,h)=>h.delete())}Qt(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.Kt(r,t)}Wt(e){const t=this.cursor({});return new ve((i,r)=>{t.onerror=a=>{const u=kI(a.target.error);r(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():i()}):i()}})}Kt(e,t){const i=[];return new ve((r,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void r();const m=new g3e(h),F=t(h.primaryKey,h.value,m);if(F instanceof ve){const b=F.catch(M=>(m.done(),ve.reject(M)));i.push(b)}m.isDone?r():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>ve.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.jt?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function d6(n){return new ve((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=kI(i.target.error);t(r)}})}let Gq=!1;function kI(n){const e=_a.vt((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gq||(Gq=!0,setTimeout(()=>{throw i},0)),i}}return n}class qq extends Uq{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Br(n,e){const t=Ue(n);return _a.Nt(t.zt,e)}class xI{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&Uae(a,e,i[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&wI(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&wI(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const i=e.get(t.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(wt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kn())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(t,i)=>mq(t,i))&&od(this.baseMutations,e.baseMutations,(t,i)=>mq(t,i))}}class NI{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){kt(e.mutations.length===i.length);let r=Zae;const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new NI(e,t,i,r)}}class TI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zl{constructor(e,t,i,r,a=wt.min(),u=wt.min(),h=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new zl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $q{constructor(e){this.Ht=e}}function Wq(n,e){let t;if(e.document)t=Iq(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Ke.fromSegments(e.noDocument.path),r=f6(e.noDocument.readTime);t=Si.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const i=Ke.fromSegments(e.unknownDocument.path),r=f6(e.unknownDocument.version);t=Si.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(II(e.readTime)),t}function Zq(n,e){const t=AI(e.readTime),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const r={name:Cp(u=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:gp(u,h.version.toTimestamp())};return new Pi(null,null,r,e.hasCommittedMutations,t,i)}var u,h;if(e.isNoDocument()){const r=e.key.path.toArray(),a=h6(e.version),u=e.hasCommittedMutations;return new Pi(null,new f3e(r,a),null,u,t,i)}if(e.isUnknownDocument()){const r=e.key.path.toArray(),a=h6(e.version);return new Pi(new p3e(r,a),null,null,!0,t,i)}return at()}function AI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function II(n){const e=new vr(n[0],n[1]);return wt.fromTimestamp(e)}function h6(n){const e=n.toTimestamp();return new h3e(e.seconds,e.nanoseconds)}function f6(n){const e=new vr(n.seconds,n.nanoseconds);return wt.fromTimestamp(e)}function vd(n,e){const t=(e.baseMutations||[]).map(a=>DI(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const i=e.mutations.map(a=>DI(n.Ht,a)),r=vr.fromMillis(e.localWriteTimeMs);return new xI(e.batchId,r,t,i)}function vp(n){const e=f6(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?f6(n.lastLimboFreeSnapshotVersion):wt.min();let i;var r;return void 0!==n.query.documents?(kt(1===(r=n.query).documents.length),i=g2(hd(Nq(r.documents[0])))):i=g2(Vq(n.query)),new zl(i,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function Kq(n,e){const t=h6(e.snapshotVersion),i=h6(e.lastLimboFreeSnapshotVersion);let r;r=kw(e.target)?Lq(n.Ht,e.target):Pq(n.Ht,e.target);const a=e.resumeToken.toBase64();return new P1(e.targetId,lp(e.target),t,a,e.sequenceNumber,i,r)}function LI(n){const e=Vq({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rq(e,e.limit,"L"):e}function PI(n,e){return new TI(e.largestBatchId,DI(n.Ht,e.overlayMutation))}function Yq(n,e){const t=e.path.lastSegment();return[n,zr(e.path.popLast()),t]}class _3e{getBundleMetadata(e,t){return Qq(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:f6(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Qq(e).put({bundleId:(i=t).id,createTime:h6(Rr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Jq(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:LI(r.bundledQuery),readTime:f6(r.readTime)};var r})}saveNamedQuery(e,t){return Jq(e).put({name:(i=t).name,readTime:h6(Rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Qq(n){return Br(n,Fd.store)}function Jq(n){return Br(n,yd.store)}class VI{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new VI(e,t.uid||"")}getOverlay(e,t){return wp(e).get(Yq(this.userId,t)).next(i=>i?PI(this.O,i):null)}saveOverlays(e,t,i){const r=[];return i.forEach(a=>{const u=new TI(t,a);r.push(this.Yt(e,u))}),ve.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(u=>r.add(zr(u.getCollectionPath())));const a=[];return r.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,i],[this.userId,u,i+1],!1,!0);a.push(wp(e).Gt(Hr.collectionPathOverlayIndex,h))}),ve.waitFor(a)}getOverlaysForCollection(e,t,i){const r=new Map,a=zr(t),u=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return wp(e).qt(Hr.collectionPathOverlayIndex,u).next(h=>{for(const m of h){const F=PI(this.O,m);r.set(F.getKey(),F)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const a=new Map;let u;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wp(e).Qt({index:Hr.collectionGroupOverlayIndex,range:h},(m,F,b)=>{const M=PI(this.O,F);a.size<r||M.largestBatchId===u?(a.set(M.getKey(),M),u=M.largestBatchId):b.done()}).next(()=>a)}Yt(e,t){return wp(e).put(function(i,r,a){const[u,h,m]=Yq(r,a.mutation.key);return new Hr(r,h,m,a.mutation.key.getCollectionGroup(),a.largestBatchId,Fp(i.Ht,a.mutation))}(this.O,this.userId,t))}}function wp(n){return Br(n,Hr.store)}class Rw{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(Li(e.integerValue));else if("doubleValue"in e){const i=Li(e.doubleValue);isNaN(i)?this.ee(t,13):(this.ee(t,15),sp(i)?t.ne(0):t.ne(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ee(t,20),"string"==typeof i?t.se(i):(t.se(`${i.seconds||""}`),t.ne(i.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(n6(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?Ca(e,Dae)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):at()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const i=e.fields||{};this.ee(t,55);for(const r of Object.keys(i))this.ie(r,t),this.Zt(i[r],t)}ae(e,t){const i=e.values||[];this.ee(t,50);for(const r of i)this.Zt(r,t)}ce(e,t){this.ee(t,37),Ke.fromName(e).path.forEach(i=>{this.ee(t,60),this.he(i,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function F3e(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Xq(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const a=F3e(255&t[r]);if(i+=a,8!==a)break}return i}(n);return Math.ceil(e/8)}Rw.le=new Rw;class y3e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.de(i.value),i=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.me(i.value),i=t.next();this.ge()}ye(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{const r=t.codePointAt(0);this.de(240|r>>>18),this.de(128|63&r>>>12),this.de(128|63&r>>>6),this.de(128|63&r)}}this._e()}pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{const r=t.codePointAt(0);this.me(240|r>>>18),this.me(128|63&r>>>12),this.me(128|63&r>>>6),this.me(128|63&r)}}this.ge()}Ie(e){const t=this.Ee(e),i=Xq(t);this.Te(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ae(e){const t=this.Ee(e),i=Xq(t);this.Te(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(r){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,r,!1),new Uint8Array(a.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class v3e{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class w3e{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class e${constructor(){this.Se=new y3e,this.De=new v3e(this.Se),this.Ce=new w3e(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class OI{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}}function RI(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:(t=t$(n.arrayValue,e.arrayValue),0!==t?t:t$(n.directionalValue,e.directionalValue)))}function t$(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class b3e{constructor(){this.xe=new zI}addToCollectionParentIndex(e,t){return this.xe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t,i){return ve.resolve(kn())}getFieldIndex(e,t){return ve.resolve(null)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}updateCollectionGroup(e,t,i){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class zI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new mi(wn.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new mi(wn.comparator)).toArray()}}class E3e{constructor(e){this.user=e,this.ke=new zI,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:i,parent:zr(r)};return n$(e).put(a)}return ve.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[GG(t),""],!1,!0);return n$(e).qt(r).next(a=>{for(const u of a){if(u.collectionId!==t)break;i.push(x3(u.parent))}return i})}addFieldIndex(e,t){const i=Hw(e),r=new So((a=t).indexId,a.collectionGroup,a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind]));var a;return delete r.indexId,i.add(r).next()}deleteFieldIndex(e,t){const i=Hw(e),r=Bw(e),a=zw(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,i){return ve.resolve(kn())}getFieldIndex(e,t){return ve.resolve(null)}Oe(e,t){const i=new e$;for(const r of e.fields.filter(u=>2!==u.kind)){const a=t.data.field(r.fieldPath);if(null==a)return null;const u=i.Ne(r.kind);Rw.le.Xt(a,u)}return i.Ve()}Me(e){const t=new e$;return Rw.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const i=Hw(e),r=Bw(e);return(t?i.qt(So.collectionGroupIndex,IDBKeyRange.bound(t,t)):i.qt()).next(a=>{const u=[];return ve.forEach(a,h=>r.get([h.indexId,this.uid]).next(m=>{u.push(function(F,b){const M=b?new cp(b.sequenceNumber,new Sw(f6(b.readTime),new Ke(x3(b.documentKey)),b.largestBatchId)):cp.empty(),k=F.fields.map(([A,P])=>new Mw(Or.fromServerFormat(A),P));return new gI(F.indexId,F.collectionGroup,k,M)}(h,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>i.indexState.sequenceNumber-r.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=Hw(e),a=Bw(e);return this.$e(e).next(u=>r.qt(So.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>ve.forEach(h,m=>{return a.put(new _2(m.indexId,this.user.uid||"",u,h6((k=i).readTime),zr(k.documentKey.path),k.largestBatchId));var k})))}updateIndexEntries(e,t){const i=new Map;return ve.forEach(t,(r,a)=>{const u=i.get(r.collectionGroup);return(u?ve.resolve(u):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),ve.forEach(h,m=>this.Fe(e,r,m).next(F=>{const b=this.Be(a,m);return F.isEqual(b)?ve.resolve():this.Le(e,a,F,b)}))))})}Ue(e,t,i){return zw(e).put(new F2(i.indexId,this.uid,i.arrayValue,i.directionalValue,zr(t.key.path)))}qe(e,t,i){return zw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,zr(t.key.path)])}Fe(e,t,i){const r=zw(e);let a=new mi(RI);return r.Qt({index:F2.documentKeyIndex,range:IDBKeyRange.only([i.indexId,this.uid,zr(t.path)])},(u,h)=>{a=a.add(new OI(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}Be(e,t){let i=new mi(RI);const r=this.Oe(t,e);if(null==r)return i;const a=t.fields.find(h=>2===h.kind);if(null!=a){const u=e.data.field(a.fieldPath);if(bw(u))for(const h of u.arrayValue.values||[])i=i.add(new OI(t.indexId,e.key,this.Me(h),r))}else i=i.add(new OI(t.indexId,e.key,new Uint8Array,r));return i}Le(e,t,i,r){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(u,h,m,F,b){const M=u.getIterator(),k=h.getIterator();let A=gd(M),P=gd(k);for(;A||P;){let j=!1,K=!1;if(A&&P){const he=m(A,P);he<0?K=!0:he>0&&(j=!0)}else null!=A?K=!0:j=!0;j?(F(P),P=gd(k)):K?(b(A),A=gd(M)):(A=gd(M),P=gd(k))}}(i,r,RI,u=>{a.push(this.Ue(e,t,u))},u=>{a.push(this.qe(e,t,u))}),ve.waitFor(a)}$e(e){let t=1;return Bw(e).Qt({index:_2.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,a)=>{a.done(),t=r.sequenceNumber+1}).next(()=>t)}}function n$(n){return Br(n,l6.store)}function zw(n){return Br(n,F2.store)}function Hw(n){return Br(n,So.store)}function Bw(n){return Br(n,_2.store)}const i$={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class V1{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new V1(e,V1.DEFAULT_COLLECTION_PERCENTILE,V1.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function r$(n,e,t){const i=n.store(ni.store),r=n.store(Ns.store),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=i.Qt({range:u},(b,M,k)=>(h++,k.delete()));a.push(m.next(()=>{kt(1===h)}));const F=[];for(const b of t.mutations){const M=Ns.key(e,b.key.path,t.batchId);a.push(r.delete(M)),F.push(b.key)}return ve.waitFor(a).next(()=>F)}function jw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}V1.DEFAULT_COLLECTION_PERCENTILE=10,V1.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,V1.DEFAULT=new V1(41943040,V1.DEFAULT_COLLECTION_PERCENTILE,V1.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),V1.DISABLED=new V1(-1,0,0);class HI{constructor(e,t,i,r){this.userId=e,this.O=t,this.indexManager=i,this.referenceDelegate=r,this.Ke={}}static Jt(e,t,i,r){kt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new HI(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hl(e).Qt({index:ni.userMutationsIndex,range:i},(r,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const a=wd(e),u=Hl(e);return u.add({}).next(h=>{kt("number"==typeof h);const m=new xI(h,t,i,r),F=function(k,A,P){const j=P.baseMutations.map(he=>Fp(k.Ht,he)),K=P.mutations.map(he=>Fp(k.Ht,he));return new ni(A,P.batchId,P.localWriteTime.toMillis(),j,K)}(this.O,this.userId,m),b=[];let M=new mi((k,A)=>on(k.canonicalString(),A.canonicalString()));for(const k of r){const A=Ns.key(this.userId,k.key.path,h);M=M.add(k.key.path.popLast()),b.push(u.put(F)),b.push(a.put(A,Ns.PLACEHOLDER))}return M.forEach(k=>{b.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Ke[h]=m.keys()}),ve.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return Hl(e).get(t).next(i=>i?(kt(i.userId===this.userId),vd(this.O,i)):null)}Ge(e,t){return this.Ke[t]?ve.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Ke[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return Hl(e).Qt({index:ni.userMutationsIndex,range:r},(u,h,m)=>{h.userId===this.userId&&(kt(h.batchId>=i),a=vd(this.O,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Hl(e).Qt({index:ni.userMutationsIndex,range:t,reverse:!0},(r,a,u)=>{i=a.batchId,u.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hl(e).qt(ni.userMutationsIndex,t).next(i=>i.map(r=>vd(this.O,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Ns.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return wd(e).Qt({range:r},(u,h,m)=>{const[F,b,M]=u,k=x3(b);if(F===this.userId&&t.path.isEqual(k))return Hl(e).get(M).next(A=>{if(!A)throw at();kt(A.userId===this.userId),a.push(vd(this.O,A))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new mi(on);const r=[];return t.forEach(a=>{const u=Ns.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(u),m=wd(e).Qt({range:h},(F,b,M)=>{const[k,A,P]=F,j=x3(A);k===this.userId&&a.path.isEqual(j)?i=i.add(P):M.done()});r.push(m)}),ve.waitFor(r).next(()=>this.je(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=Ns.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(a);let h=new mi(on);return wd(e).Qt({range:u},(m,F,b)=>{const[M,k,A]=m,P=x3(k);M===this.userId&&i.isPrefixOf(P)?P.length===r&&(h=h.add(A)):b.done()}).next(()=>this.je(e,h))}je(e,t){const i=[],r=[];return t.forEach(a=>{r.push(Hl(e).get(a).next(u=>{if(null===u)throw at();kt(u.userId===this.userId),i.push(vd(this.O,u))}))}),ve.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return r$(e.zt,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),ve.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const i=IDBKeyRange.lowerBound(Ns.prefixForUser(this.userId)),r=[];return wd(e).Qt({range:i},(a,u,h)=>{if(a[0]===this.userId){const m=x3(a[1]);r.push(m)}else h.done()}).next(()=>{kt(0===r.length)})})}containsKey(e,t){return s$(e,this.userId,t)}We(e){return o$(e).get(this.userId).next(t=>t||new Rl(this.userId,-1,""))}}function s$(n,e,t){const i=Ns.prefixForPath(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let u=!1;return wd(n).Qt({range:a,jt:!0},(h,m,F)=>{const[b,M,k]=h;b===e&&M===r&&(u=!0),F.done()}).next(()=>u)}function Hl(n){return Br(n,ni.store)}function wd(n){return Br(n,Ns.store)}function o$(n){return Br(n,Rl.store)}class p6{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new p6(0)}static Je(){return new p6(-1)}}class M3e{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const i=new p6(t.highestTargetId);return t.highestTargetId=i.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>wt.fromTimestamp(new vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Ye(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Xe(e,r)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(i=>(i.targetCount+=1,this.tn(t,i),this.Xe(e,i))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>bd(e).delete(t.targetId)).next(()=>this.Ye(e)).next(i=>(kt(i.targetCount>0),i.targetCount-=1,this.Xe(e,i)))}removeTargets(e,t,i){let r=0;const a=[];return bd(e).Qt((u,h)=>{const m=vp(h);m.sequenceNumber<=t&&null===i.get(m.targetId)&&(r++,a.push(this.removeTargetData(e,m)))}).next(()=>ve.waitFor(a)).next(()=>r)}forEachTarget(e,t){return bd(e).Qt((i,r)=>{const a=vp(r);t(a)})}Ye(e){return a$(e).get(Mo.key).next(t=>(kt(null!==t),t))}Xe(e,t){return a$(e).put(Mo.key,t)}Ze(e,t){return bd(e).put(Kq(this.O,t))}tn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const i=lp(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return bd(e).Qt({range:r,index:P1.queryTargetsIndexName},(u,h,m)=>{const F=vp(h);Dw(t,F.target)&&(a=F,m.done())}).next(()=>a)}addMatchingKeys(e,t,i){const r=[],a=Bl(e);return t.forEach(u=>{const h=zr(u.path);r.push(a.put(new gs(i,h))),r.push(this.referenceDelegate.addReference(e,i,u))}),ve.waitFor(r)}removeMatchingKeys(e,t,i){const r=Bl(e);return ve.forEach(t,a=>{const u=zr(a.path);return ve.waitFor([r.delete([i,u]),this.referenceDelegate.removeReference(e,i,a)])})}removeMatchingKeysForTargetId(e,t){const i=Bl(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Bl(e);let a=kn();return r.Qt({range:i,jt:!0},(u,h,m)=>{const F=x3(u[1]),b=new Ke(F);a=a.add(b)}).next(()=>a)}containsKey(e,t){const i=zr(t.path),r=IDBKeyRange.bound([i],[GG(i)],!1,!0);let a=0;return Bl(e).Qt({index:gs.documentTargetsIndex,jt:!0,range:r},([u,h],m,F)=>{0!==u&&(a++,F.done())}).next(()=>a>0)}Tt(e,t){return bd(e).get(t).next(i=>i?vp(i):null)}}function bd(n){return Br(n,P1.store)}function a$(n){return Br(n,Mo.store)}function Bl(n){return Br(n,gs.store)}function m6(n){return BI.apply(this,arguments)}function BI(){return(BI=(0,X.Z)(function*(n){if(n.code!==Fe.FAILED_PRECONDITION||n.message!==jq)throw n;Re("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function c$([n,e],[t,i]){const r=on(n,t);return 0===r?on(e,i):r}class S3e{constructor(e){this.en=e,this.buffer=new mi(c$),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();c$(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class D3e{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const i=this.on?3e5:6e4;Re("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,X.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(r){u6(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield m6(r)}yield t.un(e)}))}}class k3e{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(bo.A);const i=new S3e(t);return this.an.forEachTarget(e,r=>i.rn(r.sequenceNumber)).next(()=>this.an.ln(e,r=>i.rn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.an.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(i$)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i$):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let i,r,a,u,h,m,F;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),r=this.params.maximumSequenceNumbersToCollect):r=M,u=Date.now(),this.nthSequenceNumber(e,r))).next(M=>(i=M,h=Date.now(),this.removeTargets(e,i,t))).next(M=>(a=M,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(M=>(F=Date.now(),dI()<=ga.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${r} in `+(h-u)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${M} documents in `+(F-m)+`ms\nTotal Duration: ${F-b}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:M})))}}class x3e{constructor(e,t){this.db=e,this.garbageCollector=new k3e(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}dn(e){let t=0;return this.ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(i,r)=>t(r))}addReference(e,t,i){return Uw(e,i)}removeReference(e,t,i){return Uw(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Uw(e,t)}wn(e,t){return function(i,r){let a=!1;return o$(i).Wt(u=>s$(i,u,r).next(h=>(h&&(a=!0),ve.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this._n(e,(u,h)=>{if(h<=t){const m=this.wn(e,u).next(F=>{if(!F)return a++,i.getEntry(e,u).next(()=>(i.removeEntry(u,wt.min()),Bl(e).delete([0,zr(u.path)])))});r.push(m)}}).next(()=>ve.waitFor(r)).next(()=>i.apply(e)).next(()=>a)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Uw(e,t)}_n(e,t){const i=Bl(e);let r,a=bo.A;return i.Qt({index:gs.documentTargetsIndex},([u,h],{path:m,sequenceNumber:F})=>{0===u?(a!==bo.A&&t(new Ke(x3(r)),a),a=F,r=m):a=bo.A}).next(()=>{a!==bo.A&&t(new Ke(x3(r)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uw(n,e){return Bl(n).put((i=n.currentSequenceNumber,new gs(0,zr(e.path),i)));var i}class Ed{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,a]of i)if(this.equalsFn(r,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0!==r){for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t])}else this.inner[i]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),!0;return!1}forEach(e){t6(this.inner,(t,i)=>{for(const[r,a]of i)e(r,a)})}isEmpty(){return $G(this.inner)}}class l${constructor(){this.changes=new Ed(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ve.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N3e{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return jl(e).put(Gw(t),i)}removeEntry(e,t){const i=jl(e),r=Gw(t);return i.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.mn(e,i)))}getEntry(e,t){return jl(e).get(Gw(t)).next(i=>this.gn(t,i))}yn(e,t){return jl(e).get(Gw(t)).next(i=>({document:this.gn(t,i),size:jw(i)}))}getEntries(e,t){let i=C2();return this.pn(e,t,(r,a)=>{const u=this.gn(r,a);i=i.insert(r,u)}).next(()=>i)}In(e,t){let i=C2(),r=new $i(Ke.comparator);return this.pn(e,t,(a,u)=>{const h=this.gn(a,u);i=i.insert(a,h),r=r.insert(a,jw(u))}).next(()=>({documents:i,En:r}))}pn(e,t,i){if(t.isEmpty())return ve.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let u=a.getNext();return jl(e).Qt({range:r},(h,m,F)=>{const b=Ke.fromSegments(h);for(;u&&Ke.comparator(u,b)<0;)i(u,null),u=a.getNext();u&&u.isEqual(b)&&(i(u,m),u=a.hasNext()?a.getNext():null),u?F.Ut(u.path.toArray()):F.done()}).next(()=>{for(;u;)i(u,null),u=a.hasNext()?a.getNext():null})}getAll(e,t,i){let r=C2();const a=t.length+1,u={};if(i.isEqual(wt.min())){const h=t.toArray();u.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),m=AI(i);u.range=IDBKeyRange.lowerBound([h,m],!0),u.index=Pi.collectionReadTimeIndex}return jl(e).Qt(u,(h,m,F)=>{if(h.length!==a)return;const b=this.gn(Ke.fromSegments(h),m);t.isPrefixOf(b.key.path)?r=r.insert(b.key,b):F.done()}).next(()=>r)}newChangeBuffer(e){return new T3e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return u$(e).get(N3.key).next(t=>(kt(!!t),t))}mn(e,t){return u$(e).put(N3.key,t)}gn(e,t){if(t){const i=Wq(this.O,t);if(!i.isNoDocument()||!i.version.isEqual(wt.min()))return i}return Si.newInvalidDocument(e)}}class T3e extends l${constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Ed(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new mi((a,u)=>on(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const h=this.An.get(a);if(u.isValidDocument()){const m=Zq(this.Tn.O,u);r=r.add(a.path.popLast()),i+=jw(m)-h,t.push(this.Tn.addEntry(e,a,m))}else if(i-=h,this.trackRemovals){const m=Zq(this.Tn.O,u.convertToNoDocument(wt.min()));t.push(this.Tn.addEntry(e,a,m))}else t.push(this.Tn.removeEntry(e,a))}),r.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,i)),ve.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(i=>(this.An.set(t,i.size),i.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:i,En:r})=>(r.forEach((a,u)=>{this.An.set(a,u)}),i))}}function u$(n){return Br(n,N3.store)}function jl(n){return Br(n,Pi.store)}function Gw(n){return n.path.toArray()}class A3e{constructor(e){this.O=e}kt(e,t,i,r){const a=new Ow("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore(Eo.store),(h=e).createObjectStore(Rl.store,{keyPath:Rl.keyPath}),h.createObjectStore(ni.store,{keyPath:ni.keyPath,autoIncrement:!0}).createIndex(ni.userMutationsIndex,ni.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Ns.store),d$(e),function(h){h.createObjectStore(Pi.store)}(e));let u=ve.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore(gs.store),h.deleteObjectStore(P1.store),h.deleteObjectStore(Mo.store)}(e),d$(e)),u=u.next(()=>function(h){const m=h.store(Mo.store),F=new Mo(0,0,wt.min().toTimestamp(),0);return m.put(Mo.key,F)}(a))),i<4&&r>=4&&(0!==i&&(u=u.next(()=>function(h,m){return m.store(ni.store).qt().next(F=>{h.deleteObjectStore(ni.store),h.createObjectStore(ni.store,{keyPath:ni.keyPath,autoIncrement:!0}).createIndex(ni.userMutationsIndex,ni.userMutationsKeyPath,{unique:!0});const b=m.store(ni.store),M=F.map(k=>b.put(k));return ve.waitFor(M)})}(e,a))),u=u.next(()=>{!function(h){h.createObjectStore(K4.store,{keyPath:K4.keyPath})}(e)})),i<5&&r>=5&&(u=u.next(()=>this.Rn(a))),i<6&&r>=6&&(u=u.next(()=>(function(h){h.createObjectStore(N3.store)}(e),this.Pn(a)))),i<7&&r>=7&&(u=u.next(()=>this.bn(a))),i<8&&r>=8&&(u=u.next(()=>this.vn(e,a))),i<9&&r>=9&&(u=u.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const m=h.objectStore(Pi.store);m.createIndex(Pi.readTimeIndex,Pi.readTimeIndexPath,{unique:!1}),m.createIndex(Pi.collectionReadTimeIndex,Pi.collectionReadTimeIndexPath,{unique:!1})}(t)})),i<10&&r>=10&&(u=u.next(()=>this.Vn(a))),i<11&&r>=11&&(u=u.next(()=>{(function(h){h.createObjectStore(Fd.store,{keyPath:Fd.keyPath})})(e),function(h){h.createObjectStore(yd.store,{keyPath:yd.keyPath})}(e)})),i<12&&r>=12&&(u=u.next(()=>{!function(h){const m=h.createObjectStore(Hr.store,{keyPath:Hr.keyPath});m.createIndex(Hr.collectionPathOverlayIndex,Hr.collectionPathOverlayIndexPath,{unique:!1}),m.createIndex(Hr.collectionGroupOverlayIndex,Hr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),i<13&&r>=13&&(u=u.next(()=>{!function(h){h.createObjectStore(So.store,{keyPath:So.keyPath,autoIncrement:!0}).createIndex(So.collectionGroupIndex,So.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(_2.store,{keyPath:_2.keyPath}).createIndex(_2.sequenceNumberIndex,_2.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(F2.store,{keyPath:F2.keyPath}).createIndex(F2.documentKeyIndex,F2.documentKeyIndexPath,{unique:!1})}(e)})),u}Pn(e){let t=0;return e.store(Pi.store).Qt((i,r)=>{t+=jw(r)}).next(()=>{const i=new N3(t);return e.store(N3.store).put(N3.key,i)})}Rn(e){const t=e.store(Rl.store),i=e.store(ni.store);return t.qt().next(r=>ve.forEach(r,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.qt(ni.userMutationsIndex,u).next(h=>ve.forEach(h,m=>{kt(m.userId===a.userId);const F=vd(this.O,m);return r$(e,a.userId,F).next(()=>{})}))}))}bn(e){const t=e.store(gs.store),i=e.store(Pi.store);return e.store(Mo.store).get(Mo.key).next(r=>{const a=[];return i.Qt((u,h)=>{const m=new wn(u),F=[0,zr(m)];a.push(t.get(F).next(b=>b?ve.resolve():t.put(new gs(0,zr(m),r.highestListenSequenceNumber))))}).next(()=>ve.waitFor(a))})}vn(e,t){e.createObjectStore(l6.store,{keyPath:l6.keyPath});const i=t.store(l6.store),r=new zI,a=u=>{if(r.add(u)){const h=u.lastSegment(),m=u.popLast();return i.put({collectionId:h,parent:zr(m)})}};return t.store(Pi.store).Qt({jt:!0},(u,h)=>{const m=new wn(u);return a(m.popLast())}).next(()=>t.store(Ns.store).Qt({jt:!0},([u,h,m],F)=>{const b=x3(h);return a(b.popLast())}))}Vn(e){const t=e.store(P1.store);return t.Qt((i,r)=>{const a=vp(r),u=Kq(this.O,a);return t.put(u)})}}function d$(n){n.createObjectStore(gs.store,{keyPath:gs.keyPath}).createIndex(gs.documentTargetsIndex,gs.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(P1.store,{keyPath:P1.keyPath}).createIndex(P1.queryTargetsIndexName,P1.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Mo.store)}const jI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class UI{constructor(e,t,i,r,a,u,h,m,F,b,M=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Sn=a,this.window=u,this.document=h,this.Dn=F,this.Cn=b,this.schemaVersion=M,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=k=>Promise.resolve(),!UI.Vt())throw new Le(Fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x3e(this,r),this.Bn=t+"main",this.O=new $q(m),this.Ln=new _a(this.Bn,this.schemaVersion,new A3e(this.O)),this.Un=new M3e(this.referenceDelegate,this.O),this.qn=new N3e(this.O),this.Kn=new _3e,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===b&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(Fe.FAILED_PRECONDITION,jI);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new bo(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var i=(0,X.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,X.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,X.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qw(e).put(new K4(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(u6(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return bp(e).get(Eo.key).next(t=>ve.resolve(this.ts(t)))}es(e){return qw(e).delete(this.clientId)}ns(){var e=this;return(0,X.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Br(i,K4.store);return r.qt().next(a=>{const u=e.rs(a,18e5),h=a.filter(m=>-1===u.indexOf(m));return ve.forEach(h,m=>r.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const i of t)e.Gn.removeItem(e.os(i.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?ve.resolve(!0):bp(e).get(Eo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Le(Fe.FAILED_PRECONDITION,jI);return!1}}return!(!this.networkEnabled||!this.inForeground)||qw(e).qt().next(i=>void 0===this.rs(i,5e3).find(r=>{if(this.clientId!==r.clientId){const u=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,X.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[Eo.store,K4.store],t=>{const i=new qq(t,bo.A);return e.Xn(i).next(()=>e.es(i))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(i=>this.ss(i.updateTimeMs,t)&&!this.cs(i.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>qw(e).qt().next(t=>this.rs(t,18e5).map(i=>i.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return HI.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new E3e(e)}getDocumentOverlayCache(e){return VI.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,i){Re("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",a=13===(u=this.schemaVersion)?m3e:12===u?Bq:11===u?Hq:void at();var u;let h;return this.Ln.runTransaction(e,r,a,m=>(h=new qq(m,this.Nn?this.Nn.next():bo.A),"readwrite-primary"===t?this.Jn(h).next(F=>!!F||this.Yn(h)).next(F=>{if(!F)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Le(Fe.FAILED_PRECONDITION,jq);return i(h)}).next(F=>this.Zn(h).next(()=>F)):this._s(h).next(()=>i(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}_s(e){return bp(e).get(Eo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(Fe.FAILED_PRECONDITION,jI)})}Zn(e){const t=new Eo(this.clientId,this.allowTabSynchronization,Date.now());return bp(e).put(Eo.key,t)}static Vt(){return _a.Vt()}Xn(e){const t=bp(e);return t.get(Eo.key).next(i=>this.ts(i)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete(Eo.key)):ve.resolve())}ss(e,t){const i=Date.now();return!(e<i-t||e>i&&(rr(`Detected an update time that is in the future: ${e} > ${i}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const i=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Re("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return rr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function bp(n){return Br(n,Eo.store)}function qw(n){return Br(n,K4.store)}function GI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class I3e{constructor(e,t){this.progress=e,this.ws=t}}class L3e{constructor(e,t,i){this.qn=e,this.gs=t,this.indexManager=i}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(i=>this.ps(e,t,i))}ps(e,t,i){return this.qn.getEntry(e,t).next(r=>{for(const a of i)a.applyToLocalView(r);return r})}Is(e,t){e.forEach((i,r)=>{for(const a of t)a.applyToLocalView(r)})}Es(e,t){return this.qn.getEntries(e,t).next(i=>this.Ts(e,i).next(()=>i))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(i=>this.Is(t,i))}As(e,t,i){return Ke.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Rs(e,t.path):FI(t)?this.Ps(e,t,i):this.bs(e,t,i);var r}Rs(e,t){return this.ys(e,new Ke(t)).next(i=>{let r=EI();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ps(e,t,i){const r=t.collectionGroup;let a=EI();return this.indexManager.getCollectionParents(e,r).next(u=>ve.forEach(u,h=>{const m=(F=t,b=h.child(r),new Z4(b,null,F.explicitOrderBy.slice(),F.filters.slice(),F.limit,F.limitType,F.startAt,F.endAt));var F,b;return this.bs(e,m,i).next(F=>{F.forEach((b,M)=>{a=a.insert(b,M)})})}).next(()=>a))}bs(e,t,i){let r;return this.qn.getAll(e,t.path,i).next(a=>(r=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const u of a)for(const h of u.mutations){const m=h.key;let F=r.get(m);null==F&&(F=Si.newInvalidDocument(m),r=r.insert(m,F)),wI(h,F,u.localWriteTime),F.isFoundDocument()||(r=r.remove(m))}}).next(()=>(r.forEach((a,u)=>{vI(t,u)||(r=r.remove(a))}),r))}}class qI{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.vs=i,this.Vs=r}static Ss(e,t){let i=kn(),r=kn();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new qI(e,t.fromCache,i,r)}}class h${Ds(e){this.Cs=e}As(e,t,i,r){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||i.isEqual(wt.min())?this.Ns(e,t):this.Cs.Es(e,r).next(a=>{const u=this.xs(t,a);return(xw(t)||Nw(t))&&this.ks(t.limitType,u,r,i)?this.Ns(e,t):(dI()<=ga.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yI(t)),this.Cs.As(e,t,i).next(h=>(u.forEach(m=>{h=h.insert(m.key,m)}),h)))});var a}xs(e,t){let i=new mi(oq(e));return t.forEach((r,a)=>{vI(e,a)&&(i=i.add(a))}),i}ks(e,t,i,r){if(i.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ns(e,t){return dI()<=ga.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",yI(t)),this.Cs.As(e,t,wt.min())}}class P3e{constructor(e,t,i,r){this.persistence=e,this.Os=t,this.O=r,this.Ms=new $i(on),this.$s=new Ed(a=>lp(a),Dw),this.Fs=wt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(i)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new L3e(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function f$(n,e,t,i){return new P3e(n,e,t,i)}function p$(n,e){return $I.apply(this,arguments)}function $I(){return($I=(0,X.Z)(function*(n,e){const t=Ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.gs.getAllMutationBatches(i).next(a=>(r=a,t.Ls(e),t.gs.getAllMutationBatches(i))).next(a=>{const u=[],h=[];let m=kn();for(const F of r){u.push(F.batchId);for(const b of F.mutations)m=m.add(b.key)}for(const F of a){h.push(F.batchId);for(const b of F.mutations)m=m.add(b.key)}return t.Us.Es(i,m).next(F=>({qs:F,removedBatchIds:u,addedBatchIds:h}))})})})).apply(this,arguments)}function V3e(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,h,m,F){const b=m.batch,M=b.keys();let k=ve.resolve();return M.forEach(A=>{k=k.next(()=>F.getEntry(h,A)).next(P=>{const j=m.docVersions.get(A);kt(null!==j),P.version.compareTo(j)<0&&(b.applyToRemoteDocument(P,m),P.isValidDocument()&&(P.setReadTime(m.commitVersion),F.addEntry(P)))})}),k.next(()=>u.gs.removeMutationBatch(h,b))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.gs.performConsistencyCheck(i)).next(()=>t.Us.Es(i,r))})}function m$(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function O3e(n,e){const t=Ue(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach((F,b)=>{const M=r.get(b);if(!M)return;h.push(t.Un.removeMatchingKeys(a,F.removedDocuments,b).next(()=>t.Un.addMatchingKeys(a,F.addedDocuments,b)));let k=M.withSequenceNumber(a.currentSequenceNumber);var A,P,j;e.targetMismatches.has(b)?k=k.withResumeToken(wr.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):F.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(F.resumeToken,i)),r=r.insert(b,k),P=k,j=F,(0===(A=M).resumeToken.approximateByteSize()||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8||j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(a,k))});let m=C2();if(e.documentUpdates.forEach(F=>{e.resolvedLimboDocuments.has(F)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,F))}),h.push(g$(a,u,e.documentUpdates).next(F=>{m=F})),!i.isEqual(wt.min())){const F=t.Un.getLastRemoteSnapshotVersion(a).next(b=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(F)}return ve.waitFor(h).next(()=>u.apply(a)).next(()=>t.Us.Ts(a,m)).next(()=>m)}).then(a=>(t.Ms=r,a))}function g$(n,e,t){let i=kn();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let a=C2();return t.forEach((u,h)=>{const m=r.get(u);h.isNoDocument()&&h.version.isEqual(wt.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):Re("LocalStore","Ignoring outdated watch update for ",u,". Current version:",m.version," Watch version:",h.version)}),a})}function R3e(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(i,e)))}function Md(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Un.getTargetData(i,e).next(a=>a?(r=a,ve.resolve(r)):t.Un.allocateTargetId(i).next(u=>(r=new zl(e,u,0,i.currentSequenceNumber),t.Un.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ms.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.$s.set(e,i.targetId)),i})}function Sd(n,e,t){return WI.apply(this,arguments)}function WI(){return(WI=(0,X.Z)(function*(n,e,t){const i=Ue(n),r=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",a,u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!u6(u))throw u;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.$s.delete(r.target)})).apply(this,arguments)}function $w(n,e,t){const i=Ue(n);let r=wt.min(),a=kn();return i.persistence.runTransaction("Execute query","readonly",u=>function(h,m,F){const b=Ue(h),M=b.$s.get(F);return void 0!==M?ve.resolve(b.Ms.get(M)):b.Un.getTargetData(m,F)}(i,u,g2(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Un.getMatchingKeysForTargetId(u,h.targetId).next(m=>{a=m})}).next(()=>i.Os.As(u,e,t?r:wt.min(),t?a:kn())).next(h=>({documents:h,Ks:a})))}function C$(n,e){const t=Ue(n),i=Ue(t.Un),r=t.Ms.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",a=>i.Tt(a,e).next(u=>u?u.target:null))}function _$(n){const e=Ue(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(i,r,a){const u=Ue(i);let h=C2(),m=AI(a);const F=jl(r),b=IDBKeyRange.lowerBound(m,!0);return F.Qt({index:Pi.readTimeIndex,range:b},(M,k)=>{const A=Wq(u.O,k);h=h.insert(A.key,A),m=k.readTime}).next(()=>({ws:h,readTime:II(m)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:i})=>(e.Fs=i,t))}function ZI(){return(ZI=(0,X.Z)(function*(n){const e=Ue(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(i){const r=jl(i);let a=wt.min();return r.Qt({index:Pi.readTimeIndex,reverse:!0},(u,h,m)=>{h.readTime&&(a=II(h.readTime)),m.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})})).apply(this,arguments)}function KI(){return(KI=(0,X.Z)(function*(n,e,t,i){const r=Ue(n);let a=kn(),u=C2();for(const F of t){const b=e.Gs(F.metadata.name);F.document&&(a=a.add(b));const M=e.js(F);M.setReadTime(e.Qs(F.metadata.readTime)),u=u.insert(b,M)}const h=r.Bs.newChangeBuffer({trackRemovals:!0}),m=yield Md(r,(F=i,g2(hd(wn.fromString(`__bundle__/docs/${F}`)))));var F;return r.persistence.runTransaction("Apply bundle documents","readwrite",F=>g$(F,h,u).next(b=>(h.apply(F),b)).next(b=>r.Un.removeMatchingKeysForTargetId(F,m.targetId).next(()=>r.Un.addMatchingKeys(F,a,m.targetId)).next(()=>r.Us.Ts(F,b)).next(()=>b)))})).apply(this,arguments)}function B3e(n,e){return YI.apply(this,arguments)}function YI(){return(YI=(0,X.Z)(function*(n,e,t=kn()){const i=yield Md(n,g2(LI(e.bundledQuery))),r=Ue(n);return r.persistence.runTransaction("Save named query","readwrite",a=>{const u=Rr(e.readTime);if(i.snapshotVersion.compareTo(u)>=0)return r.Kn.saveNamedQuery(a,e);const h=i.withResumeToken(wr.EMPTY_BYTE_STRING,u);return r.Ms=r.Ms.insert(h.targetId,h),r.Un.updateTargetData(a,h).next(()=>r.Un.removeMatchingKeysForTargetId(a,i.targetId)).next(()=>r.Un.addMatchingKeys(a,t,i.targetId)).next(()=>r.Kn.saveNamedQuery(a,e))})})).apply(this,arguments)}class j3e{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return ve.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var i;return this.Ws.set(t.id,{id:(i=t).id,version:i.version,createTime:Rr(i.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(i=t).name,query:LI(i.bundledQuery),readTime:Rr(i.readTime)}),ve.resolve();var i}}class U3e{constructor(){this.overlays=new $i(Ke.comparator),this.Hs=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,i){return i.forEach(r=>{this.Yt(e,t,r)}),ve.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Hs.get(i);return void 0!==r&&(r.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(i)),ve.resolve()}getOverlaysForCollection(e,t,i){const r=new Map,a=t.length+1,u=new Ke(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,F=m.getKey();if(!t.isPrefixOf(F.path))break;F.path.length===a&&m.largestBatchId>i&&r.set(m.getKey(),m)}return ve.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new $i((F,b)=>F-b);const u=this.overlays.getIterator();for(;u.hasNext();){const F=u.getNext().value;if(F.getKey().getCollectionGroup()===t&&F.largestBatchId>i){let b=a.get(F.largestBatchId);null===b&&(b=new Map,a=a.insert(F.largestBatchId,b)),b.set(F.getKey(),F)}}const h=new Map,m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((F,b)=>h.set(b,F)),!(h.size>=r)););return ve.resolve(h)}Yt(e,t,i){if(null===i)return;const r=this.overlays.get(i.key);null!==r&&this.Hs.get(r.largestBatchId).delete(i.key),this.overlays=this.overlays.insert(i.key,new TI(t,i));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(i.key)}}class QI{constructor(){this.Js=new mi(jr.Ys),this.Xs=new mi(jr.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const i=new jr(e,t);this.Js=this.Js.add(i),this.Xs=this.Xs.add(i)}ti(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ei(new jr(e,t))}ni(e,t){e.forEach(i=>this.removeReference(i,t))}si(e){const t=new Ke(new wn([])),i=new jr(t,e),r=new jr(t,e+1),a=[];return this.Xs.forEachInRange([i,r],u=>{this.ei(u),a.push(u.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Ke(new wn([])),i=new jr(t,e),r=new jr(t,e+1);let a=kn();return this.Xs.forEachInRange([i,r],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new jr(e,0),i=this.Js.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class jr{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Ke.comparator(e.key,t.key)||on(e.oi,t.oi)}static Zs(e,t){return on(e.oi,t.oi)||Ke.comparator(e.key,t.key)}}class G3e{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new mi(jr.Ys)}checkEmpty(e){return ve.resolve(0===this.gs.length)}addMutationBatch(e,t,i,r){const a=this.ci;this.ci++;const u=new xI(a,t,i,r);this.gs.push(u);for(const h of r)this.ui=this.ui.add(new jr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ve.resolve(u)}lookupMutationBatch(e,t){return ve.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.hi(t+1),a=r<0?0:r;return ve.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return ve.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new jr(t,0),r=new jr(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([i,r],u=>{const h=this.ai(u.oi);a.push(h)}),ve.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new mi(on);return t.forEach(r=>{const a=new jr(r,0),u=new jr(r,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,u],h=>{i=i.add(h.oi)})}),ve.resolve(this.li(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;Ke.isDocumentKey(a)||(a=a.child(""));const u=new jr(new Ke(a),0);let h=new mi(on);return this.ui.forEachWhile(m=>{const F=m.key.path;return!!i.isPrefixOf(F)&&(F.length===r&&(h=h.add(m.oi)),!0)},u),ve.resolve(this.li(h))}li(e){const t=[];return e.forEach(i=>{const r=this.ai(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){kt(0===this.fi(t.batchId,"removed")),this.gs.shift();let i=this.ui;return ve.forEach(t.mutations,r=>{const a=new jr(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ui=i})}Qe(e){}containsKey(e,t){const i=new jr(t,0),r=this.ui.firstAfterOrEqual(i);return ve.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ve.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class q3e{constructor(e){this.di=e,this.docs=new $i(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,u=this.di(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ve.resolve(i?i.document.mutableCopy():Si.newInvalidDocument(t))}getEntries(e,t){let i=C2();return t.forEach(r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Si.newInvalidDocument(r))}),ve.resolve(i)}getAll(e,t,i){let r=C2();const a=new Ke(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||m.readTime.compareTo(i)<=0||(r=r.insert(m.key,m.mutableCopy()))}return ve.resolve(r)}_i(e,t){return ve.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new $3e(this)}getSize(e){return ve.resolve(this.size)}}class $3e extends l${constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Tn.addEntry(e,r)):this.Tn.removeEntry(i)}),ve.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class W3e{constructor(e){this.persistence=e,this.wi=new Ed(t=>lp(t),Dw),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.mi=0,this.gi=new QI,this.targetCount=0,this.yi=p6.He()}forEachTarget(e,t){return this.wi.forEach((i,r)=>t(r)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.mi&&(this.mi=t),ve.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new p6(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Ze(t),ve.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.wi.forEach((u,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.wi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),ve.waitFor(a).next(()=>r)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const i=this.wi.get(t)||null;return ve.resolve(i)}addMatchingKeys(e,t,i){return this.gi.ti(t,i),ve.resolve()}removeMatchingKeys(e,t,i){this.gi.ni(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach(u=>{a.push(r.markPotentiallyOrphaned(e,u))}),ve.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const i=this.gi.ri(t);return ve.resolve(i)}containsKey(e,t){return ve.resolve(this.gi.containsKey(t))}}class Z3e{constructor(e,t){this.pi={},this.overlays={},this.Nn=new bo(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new W3e(this),this.indexManager=new b3e,this.qn=new q3e(i=>this.referenceDelegate.Ii(i)),this.O=new $q(t),this.Kn=new j3e(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new U3e,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.pi[e.toKey()];return i||(i=new G3e(t,this.referenceDelegate),this.pi[e.toKey()]=i),i}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const r=new K3e(this.Nn.next());return this.referenceDelegate.Ei(),i(r).next(a=>this.referenceDelegate.Ti(r).next(()=>a)).toPromise().then(a=>(r.raiseOnCommittedEvent(),a))}Ai(e,t){return ve.or(Object.values(this.pi).map(i=>()=>i.containsKey(e,t)))}}class K3e extends Uq{constructor(e){super(),this.currentSequenceNumber=e}}class JI{constructor(e){this.persistence=e,this.Ri=new QI,this.Pi=null}static bi(e){return new JI(e)}get vi(){if(this.Pi)return this.Pi;throw at()}addReference(e,t,i){return this.Ri.addReference(i,t),this.vi.delete(i.toString()),ve.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.vi.add(i.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(r=>this.vi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(a=>this.vi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.vi,i=>{const r=Ke.fromPath(i);return this.Vi(e,r).next(a=>{a||t.removeEntry(r,wt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(i=>{i?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return ve.or([()=>ve.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function F$(n,e){return`firestore_clients_${n}_${e}`}function y$(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function XI(n,e){return`firestore_targets_${n}_${e}`}class Ww{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Si(e,t,i){const r=JSON.parse(i);let a,u="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(a=new Le(r.error.code,r.error.message))),u?new Ww(e,t,r.state,a):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Si(e,t){const i=JSON.parse(t);let r,a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&(a="string"==typeof i.error.message&&"string"==typeof i.error.code,a&&(r=new Le(i.error.code,i.error.message))),a?new Ep(e,i.state,r):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,a=Pw();for(let u=0;r&&u<i.activeTargetIds.length;++u)r=ZG(i.activeTargetIds[u]),a=a.add(i.activeTargetIds[u]);return r?new Zw(e,a):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class eL{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eL(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tL{constructor(){this.activeTargetIds=Pw()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nL{constructor(e,t,i,r,a){this.window=e,this.Sn=t,this.persistenceKey=i,this.xi=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new $i(on),this.started=!1,this.$i=[];const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=F$(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new tL),this.Li=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,X.Z)(function*(){const t=yield e.syncEngine.ds();for(const r of t){if(r===e.xi)continue;const a=e.getItem(F$(e.persistenceKey,r));if(a){const u=Zw.Si(r,a);u&&(e.Mi=e.Mi.insert(u.clientId,u))}}e.ji();const i=e.storage.getItem(e.Ki);if(i){const r=e.Qi(i);r&&e.Wi(r)}for(const r of e.$i)e.Oi(r);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,i){this.Hi(e,t,i),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(XI(this.persistenceKey,e));if(i){const r=Ep.Si(e,i);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(XI(this.persistenceKey,e))}updateQueryState(e,t,i){this.Xi(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Ji(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Re("SharedClientState","EVENT",i.key,i.newValue),i.key===this.Fi)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,X.Z)(function*(){if(t.started){if(null!==i.key)if(t.Li.test(i.key)){if(null==i.newValue){const r=t.er(i.key);return t.nr(r,null)}{const r=t.sr(i.key,i.newValue);if(r)return t.nr(r.clientId,r)}}else if(t.Ui.test(i.key)){if(null!==i.newValue){const r=t.ir(i.key,i.newValue);if(r)return t.rr(r)}}else if(t.qi.test(i.key)){if(null!==i.newValue){const r=t.cr(i.key,i.newValue);if(r)return t.ur(r)}}else if(i.key===t.Ki){if(null!==i.newValue){const r=t.Qi(i.newValue);if(r)return t.Wi(r)}}else if(i.key===t.Bi){const r=function(a){let u=bo.A;if(null!=a)try{const h=JSON.parse(a);kt("number"==typeof h),u=h}catch(h){rr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(i.newValue);r!==bo.A&&t.sequenceNumberHandler(r)}else if(i.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(i)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,i){const r=new Ww(this.currentUser,e,t,i),a=y$(this.persistenceKey,this.currentUser,e);this.setItem(a,r.Di())}Ji(e){const t=y$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,i){const r=XI(this.persistenceKey,e),a=new Ep(e,t,i);this.setItem(r,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const i=this.er(e);return Zw.Si(i,t)}ir(e,t){const i=this.Ui.exec(e),r=Number(i[1]);return Ww.Si(new ps(void 0!==i[2]?i[2]:null),r,t)}cr(e,t){const i=this.qi.exec(e),r=Number(i[1]);return Ep.Si(r,t)}Qi(e){return eL.Si(e)}rr(e){var t=this;return(0,X.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const i=t?this.Mi.insert(e,t):this.Mi.remove(e),r=this.zi(this.Mi),a=this.zi(i),u=[],h=[];return a.forEach(m=>{r.has(m)||u.push(m)}),r.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.dr(u,h).then(()=>{this.Mi=i})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=Pw();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class v${constructor(){this._r=new tL,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,i){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new tL,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Y3e{mr(e){}shutdown(){}}class w${constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Q3e={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class J3e{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class X3e extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,i,r,a){const u=this.$r(e,t);Re("RestConnection","Sending: ",u,i);const h={};return this.Fr(h,r,a),this.Br(e,u,h,i).then(m=>(Re("RestConnection","Received: ",m),m),m=>{throw np("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",i),m})}Lr(e,t,i,r,a){return this.Mr(e,t,i,r,a)}Fr(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+sd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,a)=>e[a]=r),i&&i.headers.forEach((r,a)=>e[a]=r)}$r(e,t){return`${this.kr}/v1/${t}:${Q3e[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,i,r){return new Promise((a,u)=>{const h=new fae;h.listenOnce(uae.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case uI.NO_ERROR:const F=h.getResponseJson();Re("Connection","XHR received:",JSON.stringify(F)),a(F);break;case uI.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),u(new Le(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case uI.HTTP_ERROR:const b=h.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',b,"response text:",h.getResponseText()),b>0){const M=h.getResponseJson().error;if(M&&M.status&&M.message){const k=function(A){const P=A.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(P)>=0?P:Fe.UNKNOWN}(M.status);u(new Le(k,M.message))}else u(new Le(Fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Le(Fe.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(r);h.send(t,"POST",m,i,15)})}Ur(e,t,i){const r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cae(),u=lae(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new hae({})),this.Fr(h.initMessageHeaders,t,i),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=r.join("");Re("Connection","Creating WebChannel: "+m,h);const F=a.createWebChannel(m,h);let b=!1,M=!1;const k=new J3e({Ar:P=>{M?Re("Connection","Not sending because WebChannel is closed:",P):(b||(Re("Connection","Opening WebChannel transport."),F.open(),b=!0),Re("Connection","WebChannel sending:",P),F.send(P))},Rr:()=>F.close()}),A=(P,j,K)=>{P.listen(j,he=>{try{K(he)}catch(be){setTimeout(()=>{throw be},0)}})};return A(F,vw.EventType.OPEN,()=>{M||Re("Connection","WebChannel transport opened.")}),A(F,vw.EventType.CLOSE,()=>{M||(M=!0,Re("Connection","WebChannel transport closed"),k.Cr())}),A(F,vw.EventType.ERROR,P=>{M||(M=!0,np("Connection","WebChannel transport errored:",P),k.Cr(new Le(Fe.UNAVAILABLE,"The operation could not be completed")))}),A(F,vw.EventType.MESSAGE,P=>{var j;if(!M){const K=P.data[0];kt(!!K);const he=K,be=he.error||(null===(j=he[0])||void 0===j?void 0:j.error);if(be){Re("Connection","WebChannel received error:",be);const ye=be.status;let Ae=function(ut){const Et=or[ut];if(void 0!==Et)return vq(Et)}(ye),ze=be.message;void 0===Ae&&(Ae=Fe.INTERNAL,ze="Unknown error status: "+ye+" with message "+be.message),M=!0,k.Cr(new Le(Ae,ze)),F.close()}else Re("Connection","WebChannel received:",K),k.Nr(K)}}),A(u,dae.STAT_EVENT,P=>{P.stat===zG.PROXY?Re("Connection","Detected buffering proxy"):P.stat===zG.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.Dr()},0),k}}function b$(){return"undefined"!=typeof window?window:null}function Kw(){return"undefined"!=typeof document?document:null}function Mp(n){return new e3e(n,!0)}class iL{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=i,this.Kr=r,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),i=Math.max(0,Date.now()-this.Wr),r=Math.max(0,t-i);r>0&&Re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,r,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class E${constructor(e,t,i,r,a,u,h,m){this.Sn=e,this.Xr=i,this.Zr=r,this.eo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new iL(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,X.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,X.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var i=this;return(0,X.Z)(function*(){i._o(),i.wo(),i.ro.cancel(),i.no++,4!==e?i.ro.reset():t&&t.code===Fe.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),i.ro.zr()):t&&t.code===Fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.mo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.no===t&&this.po(i,r)},i=>{e(()=>{const r=new Le(Fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Io(r)})})}po(e,t){const i=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{i(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(r=>{i(()=>this.Io(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}uo(){var e=this;this.state=5,this.ro.Hr((0,X.Z)(function*(){e.state=0,e.start()}))}Io(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e4e extends E${constructor(e,t,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,u),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:at(),r=e.targetChange.targetIds||[],a=function(m,F){return m.N?(kt(void 0===F||"string"==typeof F),wr.fromBase64String(F||"")):(kt(void 0===F||F instanceof Uint8Array),wr.fromUint8Array(F||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const F=void 0===m.code?Fe.UNKNOWN:vq(m.code);return new Le(F,m.message||"")}(u);t=new Eq(i,r,a,h||null)}else if("documentChange"in e){const i=e.documentChange,r=k3(n,i.document.name),a=Rr(i.document.updateTime),u=new xs({mapValue:{fields:i.document.fields}}),h=Si.newFoundDocument(r,a,u);t=new Vw(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const i=e.documentDelete,r=k3(n,i.document),a=i.readTime?Rr(i.readTime):wt.min(),u=Si.newNoDocument(r,a);t=new Vw([],i.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const i=e.documentRemove,r=k3(n,i.document);t=new Vw([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return at();{const i=e.filter,a=new qae(i.count||0);t=new bq(i.targetId,a)}}var m;return t}(this.O,e),i=function(r){if(!("targetChange"in r))return wt.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?wt.min():a.readTime?Rr(a.readTime):wt.min()}(e);return this.listener.To(t,i)}Ao(e){const t={};t.database=_p(this.O),t.addTarget=function(r,a){let u;const h=a.target;return u=kw(h)?{documents:Lq(r,h)}:{query:Pq(r,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=kq(r,a.resumeToken):a.snapshotVersion.compareTo(wt.min())>0&&(u.readTime=gp(r,a.snapshotVersion.toTimestamp())),u}(this.O,e);const i=function(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.fo(t)}Ro(e){const t={};t.database=_p(this.O),t.removeTarget=e,this.fo(t)}}class t4e extends E${constructor(e,t,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,u),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(i,r){let a=Rr(i.updateTime?i.updateTime:r);return a.isEqual(wt.min())&&(a=Rr(r)),new jae(a,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Rr(e.commitTime);return this.listener.Vo(i,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=_p(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Fp(this.O,i))};this.fo(t)}}class n4e extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=i,this.O=r,this.Co=!1}No(){if(this.Co)throw new Le(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,i){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.eo.Mr(e,t,i,r,a)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Le(Fe.UNKNOWN,r.toString())})}Lr(e,t,i){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.eo.Lr(e,t,i,r,a)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Le(Fe.UNKNOWN,r.toString())})}terminate(){this.Co=!0}}class i4e{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(rr(t),this.Oo=!1):Re("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class r4e{constructor(e,t,i,r,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(h=>{i.enqueueAndForget((0,X.Z)(function*(){var m;Ul(u)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,X.Z)(function*(F){const b=Ue(F);b.Ko.add(4),yield Dd(b),b.Qo.set("Unknown"),b.Ko.delete(4),yield Sp(b)}),function(F){return m.apply(this,arguments)})(u))}))}),this.Qo=new i4e(i,r)}}function Sp(n){return rL.apply(this,arguments)}function rL(){return(rL=(0,X.Z)(function*(n){if(Ul(n))for(const e of n.Go)yield e(!0)})).apply(this,arguments)}function Dd(n){return sL.apply(this,arguments)}function sL(){return(sL=(0,X.Z)(function*(n){for(const e of n.Go)yield e(!1)})).apply(this,arguments)}function Yw(n,e){const t=Ue(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),cL(t)?aL(t):xd(t).co()&&oL(t,e))}function Dp(n,e){const t=Ue(n),i=xd(t);t.qo.delete(e),i.co()&&M$(t,e),0===t.qo.size&&(i.co()?i.ho():Ul(t)&&t.Qo.set("Unknown"))}function oL(n,e){n.Wo.Z(e.targetId),xd(n).Ao(e)}function M$(n,e){n.Wo.Z(e),xd(n).Ro(e)}function aL(n){n.Wo=new Qae({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),xd(n).start(),n.Qo.Mo()}function cL(n){return Ul(n)&&!xd(n).oo()&&n.qo.size>0}function Ul(n){return 0===Ue(n).Ko.size}function S$(n){n.Wo=void 0}function s4e(n){return lL.apply(this,arguments)}function lL(){return(lL=(0,X.Z)(function*(n){n.qo.forEach((e,t)=>{oL(n,e)})})).apply(this,arguments)}function o4e(n,e){return uL.apply(this,arguments)}function uL(){return(uL=(0,X.Z)(function*(n,e){S$(n),cL(n)?(n.Qo.Bo(e),aL(n)):n.Qo.set("Unknown")})).apply(this,arguments)}function a4e(n,e,t){return dL.apply(this,arguments)}function dL(){return(dL=(0,X.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof Eq&&2===e.state&&e.cause)try{yield(i=(0,X.Z)(function*(r,a){const u=a.cause;for(const h of a.targetIds)r.qo.has(h)&&(yield r.remoteSyncer.rejectListen(h,u),r.qo.delete(h),r.Wo.removeTarget(h))}),function(r,a){return i.apply(this,arguments)})(n,e)}catch(i){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Qw(n,i)}else if(e instanceof Vw?n.Wo.ct(e):e instanceof bq?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(wt.min()))try{const i=yield m$(n.localStore);t.compareTo(i)>=0&&(yield function(r,a){const u=r.Wo.yt(a);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const F=r.qo.get(m);F&&r.qo.set(m,F.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const m=r.qo.get(h);if(!m)return;r.qo.set(h,m.withResumeToken(wr.EMPTY_BYTE_STRING,m.snapshotVersion)),M$(r,h);const F=new zl(m.target,h,1,m.sequenceNumber);oL(r,F)}),r.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(i){Re("RemoteStore","Failed to raise snapshot:",i),yield Qw(n,i)}var i})).apply(this,arguments)}function Qw(n,e,t){return hL.apply(this,arguments)}function hL(){return(hL=(0,X.Z)(function*(n,e,t){if(!u6(e))throw e;n.Ko.add(1),yield Dd(n),n.Qo.set("Offline"),t||(t=()=>m$(n.localStore)),n.asyncQueue.enqueueRetryable((0,X.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Sp(n)}))})).apply(this,arguments)}function D$(n,e){return e().catch(t=>Qw(n,t,e))}function kd(n){return fL.apply(this,arguments)}function fL(){return(fL=(0,X.Z)(function*(n){const e=Ue(n),t=Gl(e);let i=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;c4e(e);)try{const r=yield R3e(e.localStore,i);if(null===r){0===e.Uo.length&&t.ho();break}i=r.batchId,l4e(e,r)}catch(r){yield Qw(e,r)}k$(e)&&x$(e)})).apply(this,arguments)}function c4e(n){return Ul(n)&&n.Uo.length<10}function l4e(n,e){n.Uo.push(e);const t=Gl(n);t.co()&&t.bo&&t.vo(e.mutations)}function k$(n){return Ul(n)&&!Gl(n).oo()&&n.Uo.length>0}function x$(n){Gl(n).start()}function u4e(n){return pL.apply(this,arguments)}function pL(){return(pL=(0,X.Z)(function*(n){Gl(n).Do()})).apply(this,arguments)}function d4e(n){return mL.apply(this,arguments)}function mL(){return(mL=(0,X.Z)(function*(n){const e=Gl(n);for(const t of n.Uo)e.vo(t.mutations)})).apply(this,arguments)}function h4e(n,e,t){return gL.apply(this,arguments)}function gL(){return(gL=(0,X.Z)(function*(n,e,t){const i=n.Uo.shift(),r=NI.from(i,e,t);yield D$(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield kd(n)})).apply(this,arguments)}function f4e(n,e){return CL.apply(this,arguments)}function CL(){return(CL=(0,X.Z)(function*(n,e){var t;e&&Gl(n).bo&&(yield(t=(0,X.Z)(function*(i,r){if(yq(a=r.code)&&a!==Fe.ABORTED){const u=i.Uo.shift();Gl(i).ao(),yield D$(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,r)),yield kd(i)}var a}),function(i,r){return t.apply(this,arguments)})(n,e)),k$(n)&&x$(n)})).apply(this,arguments)}function N$(n,e){return _L.apply(this,arguments)}function _L(){return(_L=(0,X.Z)(function*(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const i=Ul(t);t.Ko.add(3),yield Dd(t),i&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Sp(t)})).apply(this,arguments)}function FL(n,e){return yL.apply(this,arguments)}function yL(){return(yL=(0,X.Z)(function*(n,e){const t=Ue(n);e?(t.Ko.delete(2),yield Sp(t)):e||(t.Ko.add(2),yield Dd(t),t.Qo.set("Unknown"))})).apply(this,arguments)}function xd(n){return n.zo||(n.zo=function(e,t,i){const r=Ue(e);return r.No(),new e4e(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,i)}(n.datastore,n.asyncQueue,{Pr:s4e.bind(null,n),vr:o4e.bind(null,n),To:a4e.bind(null,n)}),n.Go.push(function(){var e=(0,X.Z)(function*(t){t?(n.zo.ao(),cL(n)?aL(n):n.Qo.set("Unknown")):(yield n.zo.stop(),S$(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Gl(n){return n.Ho||(n.Ho=function(e,t,i){const r=Ue(e);return r.No(),new t4e(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,i)}(n.datastore,n.asyncQueue,{Pr:u4e.bind(null,n),vr:f4e.bind(null,n),So:d4e.bind(null,n),Vo:h4e.bind(null,n)}),n.Go.push(function(){var e=(0,X.Z)(function*(t){t?(n.Ho.ao(),yield kd(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class vL{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,i,r,a){const u=Date.now()+i,h=new vL(e,t,u,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(Fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(n,e){if(rr("AsyncQueue",`${e}: ${n}`),u6(n))return new Le(Fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Td{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ke.comparator(t.key,i.key):(t,i)=>Ke.comparator(t.key,i.key),this.keyedMap=EI(),this.sortedSet=new $i(this.comparator)}static emptySet(e){return new Td(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Td)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Td;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class T${constructor(){this.Jo=new $i(Ke.comparator)}track(e){const t=e.doc.key,i=this.Jo.get(t);i?0!==e.type&&3===i.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==i.type?this.Jo=this.Jo.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Jo=this.Jo.remove(t):1===e.type&&2===i.type?this.Jo=this.Jo.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):at():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,i)=>{e.push(i)}),e}}class Ad{constructor(e,t,i,r,a,u,h,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,i,r){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Ad(e,t,Td.emptySet(t),a,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&up(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class p4e{constructor(){this.Xo=void 0,this.listeners=[]}}class m4e{constructor(){this.queries=new Ed(e=>sq(e),up),this.onlineState="Unknown",this.Zo=new Set}}function wL(n,e){return bL.apply(this,arguments)}function bL(){return(bL=(0,X.Z)(function*(n,e){const t=Ue(n),i=e.query;let r=!1,a=t.queries.get(i);if(a||(r=!0,a=new p4e),r)try{a.Xo=yield t.onListen(i)}catch(u){const h=Nd(u,`Initialization of query '${yI(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&SL(t)})).apply(this,arguments)}function EL(n,e){return ML.apply(this,arguments)}function ML(){return(ML=(0,X.Z)(function*(n,e){const t=Ue(n),i=e.query;let r=!1;const a=t.queries.get(i);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),r=0===a.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)})).apply(this,arguments)}function g4e(n,e){const t=Ue(n);let i=!1;for(const r of e){const u=t.queries.get(r.query);if(u){for(const h of u.listeners)h.ec(r)&&(i=!0);u.Xo=r}}i&&SL(t)}function C4e(n,e,t){const i=Ue(n),r=i.queries.get(e);if(r)for(const a of r.listeners)a.onError(t);i.queries.delete(e)}function SL(n){n.Zo.forEach(e=>{e.next()})}class DL{constructor(e,t,i){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=i||{}}ec(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Ad(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Ad.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class _4e{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class A${constructor(e){this.O=e}Gs(e){return k3(this.O,e)}js(e){return e.metadata.exists?Iq(this.O,e.document,!1):Si.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Rr(e)}}class F4e{constructor(e,t,i){this.hc=e,this.localStore=t,this.O=i,this.queries=[],this.documents=[],this.progress=I$(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,i=new A$(this.O);for(const r of e)if(r.metadata.queries){const a=i.Gs(r.metadata.name);for(const u of r.metadata.queries){const h=(t.get(u)||kn()).add(a);t.set(u,h)}}return t}complete(){var e=this;return(0,X.Z)(function*(){const t=yield function(n,e,t,i){return KI.apply(this,arguments)}(e.localStore,new A$(e.O),e.documents,e.hc.id),i=e.fc(e.documents);for(const r of e.queries)yield B3e(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",new I3e(Object.assign({},e.progress),t)})()}}function I$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class L${constructor(e){this.key=e}}class P${constructor(e){this.key=e}}class V${constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=kn(),this.mutatedKeys=kn(),this.mc=oq(e),this.gc=new Td(this.mc)}get yc(){return this.dc}Ic(e,t){const i=t?t.Ec:new T$,r=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,u=r,h=!1;const m=xw(this.query)&&r.size===this.query.limit?r.last():null,F=Nw(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((b,M)=>{const k=r.get(b),A=vI(this.query,M)?M:null,P=!!k&&this.mutatedKeys.has(k.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let K=!1;k&&A?k.data.isEqual(A.data)?P!==j&&(i.track({type:3,doc:A}),K=!0):this.Tc(k,A)||(i.track({type:2,doc:A}),K=!0,(m&&this.mc(A,m)>0||F&&this.mc(A,F)<0)&&(h=!0)):!k&&A?(i.track({type:0,doc:A}),K=!0):k&&!A&&(i.track({type:1,doc:k}),K=!0,(m||F)&&(h=!0)),K&&(A?(u=u.add(A),a=j?a.add(b):a.delete(b)):(u=u.delete(b),a=a.delete(b)))}),xw(this.query)||Nw(this.query))for(;u.size>this.query.limit;){const b=xw(this.query)?u.last():u.first();u=u.delete(b.key),a=a.delete(b.key),i.track({type:1,doc:b})}return{gc:u,Ec:i,ks:h,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((F,b)=>function(M,k){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return A(M)-A(k)}(F.type,b.type)||this.mc(F.doc,b.doc)),this.Ac(i);const u=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,m=h!==this._c;return this._c=h,0!==a.length||m?{snapshot:new Ad(this.query,e.gc,r,a,e.mutatedKeys,0===h,m,!1),Pc:u}:{Pc:u}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new T$,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=kn(),this.gc.forEach(i=>{this.bc(i.key)&&(this.wc=this.wc.add(i.key))});const t=[];return e.forEach(i=>{this.wc.has(i)||t.push(new P$(i))}),this.wc.forEach(i=>{e.has(i)||t.push(new L$(i))}),t}vc(e){this.dc=e.Ks,this.wc=kn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Ad.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class y4e{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class v4e{constructor(e){this.key=e,this.Sc=!1}}class w4e{constructor(e,t,i,r,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Dc={},this.Cc=new Ed(h=>sq(h),up),this.Nc=new Map,this.xc=new Set,this.kc=new $i(Ke.comparator),this.Oc=new Map,this.Mc=new QI,this.$c={},this.Fc=new Map,this.Bc=p6.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function b4e(n,e){return kL.apply(this,arguments)}function kL(){return(kL=(0,X.Z)(function*(n,e){const t=QL(n);let i,r;const a=t.Cc.get(e);if(a)i=a.targetId,t.sharedClientState.addLocalQueryTarget(i),r=a.view.Vc();else{const u=yield Md(t.localStore,g2(e));t.isPrimaryClient&&Yw(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);i=u.targetId,r=yield xL(t,e,i,"current"===h)}return r})).apply(this,arguments)}function xL(n,e,t,i){return NL.apply(this,arguments)}function NL(){return(NL=(0,X.Z)(function*(n,e,t,i){n.Uc=(b,M,k)=>{return(A=(0,X.Z)(function*(P,j,K,he){let be=j.view.Ic(K);be.ks&&(be=yield $w(P.localStore,j.query,!1).then(({documents:ze})=>j.view.Ic(ze,be)));const ye=he&&he.targetChanges.get(j.targetId),Ae=j.view.applyChanges(be,P.isPrimaryClient,ye);return HL(P,j.targetId,Ae.Pc),Ae.snapshot}),function(P,j,K,he){return A.apply(this,arguments)})(n,b,M,k);var A};const r=yield $w(n.localStore,e,!0),a=new V$(e,r.Ks),u=a.Ic(r.documents),h=mp.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),m=a.applyChanges(u,n.isPrimaryClient,h);HL(n,t,m.Pc);const F=new y4e(e,t,a);return n.Cc.set(e,F),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),m.snapshot})).apply(this,arguments)}function E4e(n,e){return TL.apply(this,arguments)}function TL(){return(TL=(0,X.Z)(function*(n,e){const t=Ue(n),i=t.Cc.get(e),r=t.Nc.get(i.targetId);if(r.length>1)return t.Nc.set(i.targetId,r.filter(a=>!up(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Sd(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Dp(t.remoteStore,i.targetId),Id(t,i.targetId)}).catch(m6))):(Id(t,i.targetId),yield Sd(t.localStore,i.targetId,!0))})).apply(this,arguments)}function AL(){return(AL=(0,X.Z)(function*(n,e,t){const i=JL(n);try{const r=yield function(a,u){const h=Ue(a),m=vr.now(),F=u.reduce((M,k)=>M.add(k.key),kn());let b;return h.persistence.runTransaction("Locally write mutations","readwrite",M=>h.Us.Es(M,F).next(k=>{b=k;const A=[];for(const P of u){const j=Gae(P,b.get(P.key));null!=j&&A.push(new c6(P.key,j,JG(j.value.mapValue),sr.exists(!0)))}return h.gs.addMutationBatch(M,m,A,u)})).then(M=>(M.applyToLocalDocumentSet(b),{batchId:M.batchId,changes:b}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let m=a.$c[a.currentUser.toKey()];m||(m=new $i(on)),m=m.insert(u,h),a.$c[a.currentUser.toKey()]=m}(i,r.batchId,t),yield Y4(i,r.changes),yield kd(i.remoteStore)}catch(r){const a=Nd(r,"Failed to persist write");t.reject(a)}})).apply(this,arguments)}function O$(n,e){return IL.apply(this,arguments)}function IL(){return(IL=(0,X.Z)(function*(n,e){const t=Ue(n);try{const i=yield O3e(t.localStore,e);e.targetChanges.forEach((r,a)=>{const u=t.Oc.get(a);u&&(kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?u.Sc=!0:r.modifiedDocuments.size>0?kt(u.Sc):r.removedDocuments.size>0&&(kt(u.Sc),u.Sc=!1))}),yield Y4(t,i,e)}catch(i){yield m6(i)}})).apply(this,arguments)}function R$(n,e,t){const i=Ue(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.Cc.forEach((a,u)=>{const h=u.view.tc(e);h.snapshot&&r.push(h.snapshot)}),function(a,u){const h=Ue(a);h.onlineState=u;let m=!1;h.queries.forEach((F,b)=>{for(const M of b.listeners)M.tc(u)&&(m=!0)}),m&&SL(h)}(i.eventManager,e),r.length&&i.Dc.To(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function S4e(n,e,t){return LL.apply(this,arguments)}function LL(){return(LL=(0,X.Z)(function*(n,e,t){const i=Ue(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Oc.get(e),a=r&&r.key;if(a){let u=new $i(Ke.comparator);u=u.insert(a,Si.newNoDocument(a,wt.min()));const h=kn().add(a),m=new pp(wt.min(),new Map,new mi(on),u,h);yield O$(i,m),i.kc=i.kc.remove(a),i.Oc.delete(e),BL(i)}else yield Sd(i.localStore,e,!1).then(()=>Id(i,e,t)).catch(m6)})).apply(this,arguments)}function D4e(n,e){return PL.apply(this,arguments)}function PL(){return(PL=(0,X.Z)(function*(n,e){const t=Ue(n),i=e.batch.batchId;try{const r=yield V3e(t.localStore,e);zL(t,i,null),RL(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Y4(t,r)}catch(r){yield m6(r)}})).apply(this,arguments)}function k4e(n,e,t){return VL.apply(this,arguments)}function VL(){return(VL=(0,X.Z)(function*(n,e,t){const i=Ue(n);try{const r=yield function(a,u){const h=Ue(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let F;return h.gs.lookupMutationBatch(m,u).next(b=>(kt(null!==b),F=b.keys(),h.gs.removeMutationBatch(m,b))).next(()=>h.gs.performConsistencyCheck(m)).next(()=>h.Us.Es(m,F))})}(i.localStore,e);zL(i,e,t),RL(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Y4(i,r)}catch(r){yield m6(r)}})).apply(this,arguments)}function OL(){return(OL=(0,X.Z)(function*(n,e){const t=Ue(n);Ul(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(a){const u=Ue(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Fc.get(i)||[];r.push(e),t.Fc.set(i,r)}catch(i){const r=Nd(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})).apply(this,arguments)}function RL(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function zL(n,e,t){const i=Ue(n);let r=i.$c[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.$c[i.currentUser.toKey()]=r}}function Id(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Nc.get(e))n.Cc.delete(i),t&&n.Dc.qc(i,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(i=>{n.Mc.containsKey(i)||z$(n,i)})}function z$(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Dp(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),BL(n))}function HL(n,e,t){for(const i of t)i instanceof L$?(n.Mc.addReference(i.key,e),N4e(n,i)):i instanceof P$?(Re("SyncEngine","Document no longer in limbo: "+i.key),n.Mc.removeReference(i.key,e),n.Mc.containsKey(i.key)||z$(n,i.key)):at()}function N4e(n,e){const t=e.key,i=t.path.canonicalString();n.kc.get(t)||n.xc.has(i)||(Re("SyncEngine","New document in limbo: "+t),n.xc.add(i),BL(n))}function BL(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Ke(wn.fromString(e)),i=n.Bc.next();n.Oc.set(i,new v4e(t)),n.kc=n.kc.insert(t,i),Yw(n.remoteStore,new zl(g2(hd(t.path)),i,2,bo.A))}}function Y4(n,e,t){return jL.apply(this,arguments)}function jL(){return(jL=(0,X.Z)(function*(n,e,t){const i=Ue(n),r=[],a=[],u=[];var h;i.Cc.isEmpty()||(i.Cc.forEach((h,m)=>{u.push(i.Uc(m,e,t).then(F=>{if(F){i.isPrimaryClient&&i.sharedClientState.updateQueryState(m.targetId,F.fromCache?"not-current":"current"),r.push(F);const b=qI.Ss(m.targetId,F);a.push(b)}}))}),yield Promise.all(u),i.Dc.To(r),yield(h=(0,X.Z)(function*(m,F){const b=Ue(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ve.forEach(F,k=>ve.forEach(k.vs,A=>b.persistence.referenceDelegate.addReference(M,k.targetId,A)).next(()=>ve.forEach(k.Vs,A=>b.persistence.referenceDelegate.removeReference(M,k.targetId,A)))))}catch(M){if(!u6(M))throw M;Re("LocalStore","Failed to update sequence numbers: "+M)}for(const M of F){const k=M.targetId;if(!M.fromCache){const A=b.Ms.get(k),j=A.withLastLimboFreeSnapshotVersion(A.snapshotVersion);b.Ms=b.Ms.insert(k,j)}}}),function(m,F){return h.apply(this,arguments)})(i.localStore,a))})).apply(this,arguments)}function T4e(n,e){return UL.apply(this,arguments)}function UL(){return(UL=(0,X.Z)(function*(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const i=yield p$(t.localStore,e);t.currentUser=e,(r=t).Fc.forEach(u=>{u.forEach(h=>{h.reject(new Le(Fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Fc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Y4(t,i.qs)}var r})).apply(this,arguments)}function A4e(n,e){const t=Ue(n),i=t.Oc.get(e);if(i&&i.Sc)return kn().add(i.key);{let r=kn();const a=t.Nc.get(e);if(!a)return r;for(const u of a){const h=t.Cc.get(u);r=r.unionWith(h.view.yc)}return r}}function I4e(n,e){return GL.apply(this,arguments)}function GL(){return(GL=(0,X.Z)(function*(n,e){const t=Ue(n),i=yield $w(t.localStore,e.query,!0),r=e.view.vc(i);return t.isPrimaryClient&&HL(t,e.targetId,r.Pc),r})).apply(this,arguments)}function L4e(n){return qL.apply(this,arguments)}function qL(){return(qL=(0,X.Z)(function*(n){const e=Ue(n);return _$(e.localStore).then(t=>Y4(e,t))})).apply(this,arguments)}function P4e(n,e,t,i){return $L.apply(this,arguments)}function $L(){return($L=(0,X.Z)(function*(n,e,t,i){const r=Ue(n),a=yield function(u,h){const m=Ue(u),F=Ue(m.gs);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>F.Ge(b,h).next(M=>M?m.Us.Es(b,M):ve.resolve(null)))}(r.localStore,e);var h;null!==a?("pending"===t?yield kd(r.remoteStore):"acknowledged"===t||"rejected"===t?(zL(r,e,i||null),RL(r,e),h=e,Ue(Ue(r.localStore).gs).Qe(h)):at(),yield Y4(r,a)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function WL(){return(WL=(0,X.Z)(function*(n,e){const t=Ue(n);if(QL(t),JL(t),!0===e&&!0!==t.Lc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield H$(t,i.toArray());t.Lc=!0,yield FL(t.remoteStore,!0);for(const a of r)Yw(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const i=[];let r=Promise.resolve();t.Nc.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?i.push(u):r=r.then(()=>(Id(t,u),Sd(t.localStore,u,!0))),Dp(t.remoteStore,u)}),yield r,yield H$(t,i),function(a){const u=Ue(a);u.Oc.forEach((h,m)=>{Dp(u.remoteStore,m)}),u.Mc.ii(),u.Oc=new Map,u.kc=new $i(Ke.comparator)}(t),t.Lc=!1,yield FL(t.remoteStore,!1)}})).apply(this,arguments)}function H$(n,e,t){return ZL.apply(this,arguments)}function ZL(){return(ZL=(0,X.Z)(function*(n,e,t){const i=Ue(n),r=[],a=[];for(const u of e){let h;const m=i.Nc.get(u);if(m&&0!==m.length){h=yield Md(i.localStore,g2(m[0]));for(const F of m){const b=i.Cc.get(F),M=yield I4e(i,b);M.snapshot&&a.push(M.snapshot)}}else{const F=yield C$(i.localStore,u);h=yield Md(i.localStore,F),yield xL(i,B$(F),u,!1)}r.push(h)}return i.Dc.To(a),r})).apply(this,arguments)}function B$(n){return iq(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function O4e(n){const e=Ue(n);return Ue(Ue(e.localStore).persistence).ds()}function R4e(n,e,t,i){return KL.apply(this,arguments)}function KL(){return(KL=(0,X.Z)(function*(n,e,t,i){const r=Ue(n);if(r.Lc)Re("SyncEngine","Ignoring unexpected query state notification.");else if(r.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield _$(r.localStore),u=pp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Y4(r,a,u);break}case"rejected":yield Sd(r.localStore,e,!0),Id(r,e,i);break;default:at()}})).apply(this,arguments)}function z4e(n,e,t){return YL.apply(this,arguments)}function YL(){return(YL=(0,X.Z)(function*(n,e,t){const i=QL(n);if(i.Lc){for(const r of e){if(i.Nc.has(r)){Re("SyncEngine","Adding an already active target "+r);continue}const a=yield C$(i.localStore,r),u=yield Md(i.localStore,a);yield xL(i,B$(a),u.targetId,!1),Yw(i.remoteStore,u)}for(const r of t)i.Nc.has(r)&&(yield Sd(i.localStore,r,!1).then(()=>{Dp(i.remoteStore,r),Id(i,r)}).catch(m6))}})).apply(this,arguments)}function QL(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=O$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A4e.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S4e.bind(null,e),e.Dc.To=g4e.bind(null,e.eventManager),e.Dc.qc=C4e.bind(null,e.eventManager),e}function JL(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D4e.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k4e.bind(null,e),e}class j${constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,X.Z)(function*(){t.O=Mp(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return f$(this.persistence,new h$,e.initialUser,this.O)}jc(e){return new Z3e(JI.bi,this.O)}Gc(e){return new v$}terminate(){var e=this;return(0,X.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class U$ extends j${constructor(e,t,i){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,X.Z)(function*(){yield t().call(i,e),yield function(n){return ZI.apply(this,arguments)}(i.localStore),yield i.zc.initialize(i,e),yield JL(i.zc.syncEngine),yield kd(i.zc.remoteStore),yield i.persistence.Hn(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Wc(e){return f$(this.persistence,new h$,e.initialUser,this.O)}Qc(e){return new D3e(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=GI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?V1.withCacheSize(this.cacheSizeBytes):V1.DEFAULT;return new UI(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,b$(),Kw(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new v$}}class B4e extends U${constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,X.Z)(function*(){yield t().call(i,e);const r=i.zc.syncEngine;i.sharedClientState instanceof nL&&(i.sharedClientState.syncEngine={hr:P4e.bind(null,r),lr:R4e.bind(null,r),dr:z4e.bind(null,r),ds:O4e.bind(null,r),ar:L4e.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Hn(function(){var a=(0,X.Z)(function*(u){yield function(n,e){return WL.apply(this,arguments)}(i.zc.syncEngine,u),i.gcScheduler&&(u&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):u||i.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}Gc(e){const t=b$();if(!nL.Vt(t))throw new Le(Fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=GI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nL(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class XL{initialize(e,t){var i=this;return(0,X.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>R$(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=T4e.bind(null,i.syncEngine),yield FL(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new m4e}createDatastore(e){const t=Mp(e.databaseInfo.databaseId),i=new X3e(e.databaseInfo);return new n4e(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,a=h=>R$(this.syncEngine,h,0),u=w$.Vt()?new w$:new Y3e,new r4e(t,i,r,a,u);var t,i,r,a,u}createSyncEngine(e,t){return function(i,r,a,u,h,m,F){const b=new w4e(i,r,a,u,h,m);return F&&(b.Lc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,X.Z)(function*(t){const i=Ue(t);Re("RemoteStore","RemoteStore shutting down."),i.Ko.add(5),yield Dd(i),i.jo.shutdown(),i.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function G$(n,e=10240){let t=0;return{read:()=>(0,X.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,X.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class j4e{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(i=>{i&&i.ac()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,X.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,X.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,X.Z)(function*(){const t=yield e.tu();if(null===t)return null;const i=e.Xc.decode(t),r=Number(i);isNaN(r)&&e.eu(`length string (${i}) is not valid number`);const a=yield e.nu(r);return new _4e(JSON.parse(a),t.length+r)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,X.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}nu(e){var t=this;return(0,X.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const i=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,X.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class U4e{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,X.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(Fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,X.Z)(function*(a,u){const h=Ue(a),m=_p(h.O)+"/documents",F={documents:u.map(A=>Cp(h.O,A))},b=yield h.Lr("BatchGetDocuments",m,F),M=new Map;b.forEach(A=>{const P=function(n,e){return"found"in e?function(t,i){kt(!!i.found);const r=k3(t,i.found.name),a=Rr(i.found.updateTime),u=new xs({mapValue:{fields:i.found.fields}});return Si.newFoundDocument(r,a,u)}(n,e):"missing"in e?function(t,i){kt(!!i.missing),kt(!!i.readTime);const r=k3(t,i.missing),a=Rr(i.readTime);return Si.newNoDocument(r,a)}(n,e):at()}(h.O,A);M.set(P.key.toString(),P)});const k=[];return u.forEach(A=>{const P=M.get(A.toString());kt(!!P),k.push(P)}),k}),function(a,u){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new fp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,X.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const a=Ke.fromPath(r);e.mutations.push(new bI(a,e.precondition(a)))}),yield(i=(0,X.Z)(function*(r,a){const u=Ue(r),h=_p(u.O)+"/documents",m={writes:a.map(F=>Fp(u.O,F))};yield u.Mr("Commit",h,m)}),function(r,a){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=wt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Le(Fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sr.updateTime(t):sr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(wt.min()))throw new Le(Fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sr.updateTime(t)}return sr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class G4e{constructor(e,t,i,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=i,this.deferred=r,this.ru=5,this.ro=new iL(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,X.Z)(function*(){const t=new U4e(e.datastore),i=e.cu(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(a=>{e.uu(a)}))}).catch(r=>{e.uu(r)})}))}cu(e){try{const t=this.updateFunction(e);return!r6(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!yq(t)}return!1}}class q4e{constructor(e,t,i,r){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ps.UNAUTHENTICATED,this.clientId=UG.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var u=(0,X.Z)(function*(h){Re("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(i,u=>(Re("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,X.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,X.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Nd(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function q$(n,e){return eP.apply(this,arguments)}function eP(){return(eP=(0,X.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,X.Z)(function*(a){i.isEqual(a)||(yield p$(e.localStore,a),i=a)});return function(a){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function $$(n,e){return tP.apply(this,arguments)}function tP(){return(tP=(0,X.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield nP(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>N$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,a)=>N$(e.remoteStore,a)),n.onlineComponents=e})).apply(this,arguments)}function nP(n){return iP.apply(this,arguments)}function iP(){return(iP=(0,X.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield q$(n,new j$)),n.offlineComponents})).apply(this,arguments)}function Xw(n){return rP.apply(this,arguments)}function rP(){return(rP=(0,X.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield $$(n,new XL)),n.onlineComponents})).apply(this,arguments)}function W$(n){return nP(n).then(e=>e.persistence)}function sP(n){return nP(n).then(e=>e.localStore)}function Z$(n){return Xw(n).then(e=>e.remoteStore)}function oP(n){return Xw(n).then(e=>e.syncEngine)}function Ld(n){return aP.apply(this,arguments)}function aP(){return(aP=(0,X.Z)(function*(n){const e=yield Xw(n),t=e.eventManager;return t.onListen=b4e.bind(null,e.syncEngine),t.onUnlisten=E4e.bind(null,e.syncEngine),t})).apply(this,arguments)}function K$(n,e,t={}){const i=new Vr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(r,a,u,h,m){const F=new Jw({next:M=>{a.enqueueAndForget(()=>EL(r,b));const k=M.docs.has(u);!k&&M.fromCache?m.reject(new Le(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&M.fromCache&&h&&"server"===h.source?m.reject(new Le(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(M)},error:M=>m.reject(M)}),b=new DL(hd(u.path),F,{includeMetadataChanges:!0,uc:!0});return wL(r,b)}(yield Ld(n),n.asyncQueue,e,t,i)})),i.promise}function Y$(n,e,t={}){const i=new Vr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(r,a,u,h,m){const F=new Jw({next:M=>{a.enqueueAndForget(()=>EL(r,b)),M.fromCache&&"server"===h.source?m.reject(new Le(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(M)},error:M=>m.reject(M)}),b=new DL(u,F,{includeMetadataChanges:!0,uc:!0});return wL(r,b)}(yield Ld(n),n.asyncQueue,e,t,i)})),i.promise}const Q$=new Map;function cP(n,e,t){if(!t)throw new Le(Fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function J$(n,e,t,i){if(!0===e&&!0===i)throw new Le(Fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function X$(n){if(!Ke.isDocumentKey(n))throw new Le(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function eW(n){if(Ke.isDocumentKey(n))throw new Le(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eb(n);throw new Le(Fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tW(n,e){if(e<=0)throw new Le(Fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nW{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,J$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nW({}),this._settingsFrozen=!1,e instanceof i6?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Le(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new i6(r.options.projectId)}(e))}get app(){if(!this._app)throw new Le(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nW(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gae;switch(t.type){case"gapi":const i=t.client;return kt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new yae(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Le(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Q$.get(e);t&&(Re("ComponentProvider","Removing Datastore"),Q$.delete(e),t.terminate())}(this),Promise.resolve()}}class ii{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new T3(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ii(this.firestore,e,this._key)}}class Ts{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ts(this.firestore,e,this._query)}}class T3 extends Ts{constructor(e,t,i){super(e,t,hd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ii(this.firestore,null,new Ke(e))}withConverter(e){return new T3(this.firestore,e,this._path)}}function iW(n,e,...t){if(n=(0,O.m9)(n),cP("collection","path",e),n instanceof kp){const i=wn.fromString(e,...t);return eW(i),new T3(n,null,i)}{if(!(n instanceof ii||n instanceof T3))throw new Le(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(wn.fromString(e,...t));return eW(i),new T3(n.firestore,null,i)}}function tb(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=UG.R()),cP("doc","path",e),n instanceof kp){const i=wn.fromString(e,...t);return X$(i),new ii(n,null,new Ke(i))}{if(!(n instanceof ii||n instanceof T3))throw new Le(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(wn.fromString(e,...t));return X$(i),new ii(n.firestore,n instanceof T3?n.converter:null,new Ke(i))}}function rW(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof ii||n instanceof T3)&&(e instanceof ii||e instanceof T3)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function sW(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof Ts&&e instanceof Ts&&n.firestore===e.firestore&&up(n._query,e._query)&&n.converter===e.converter}class nce{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new iL(this,"async_queue_retry"),this.yu=()=>{const t=Kw();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Kw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Kw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Vr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,X.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!u6(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(i=>{throw this._u=i,this.wu=!1,rr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(i)),i}).then(i=>(this.wu=!1,i))));return this.hu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const r=vL.createAndSchedule(this,e,t,i,a=>this.Tu(a));return this.du.push(r),r}pu(){this._u&&at()}verifyOperationInProgress(){}Au(){var e=this;return(0,X.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function lP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class ice{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gi extends kp{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new nce,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||oW(this),this._firestoreClient.terminate()}}function ar(n){return n._firestoreClient||oW(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function oW(n){var e;const t=n._freezeSettings(),i=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Sae(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new q4e(n._authCredentials,n._appCheckCredentials,n._queue,i)}function aW(n,e,t){const i=new Vr;return n.asyncQueue.enqueue((0,X.Z)(function*(){try{yield q$(n,t),yield $$(n,e),i.resolve()}catch(r){if(!("FirebaseError"===(a=r).name?a.code===Fe.FAILED_PRECONDITION||a.code===Fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var a})).then(()=>i.promise)}function cW(n){if(n._initialized||n._terminated)throw new Le(Fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Q4{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class A3{constructor(e){this._byteString=e}static fromBase64String(e){try{return new A3(wr.fromBase64String(e))}catch(t){throw new Le(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new A3(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class g6{constructor(e){this._methodName=e}}class nb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}}const fce=/^__.*__$/;class pce{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new c6(e,this.data,this.fieldMask,t,this.fieldTransforms):new hp(e,this.data,t,this.fieldTransforms)}}class lW{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new c6(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class ib{constructor(e,t,i,r,a,u){this.settings=e,this.databaseId=t,this.O=i,this.ignoreUndefinedProperties=r,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new ib(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:i,Cu:!1});return r.Nu(e),r}xu(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:i,Cu:!1});return r.vu(),r}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return ob(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(uW(this.Vu)&&fce.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class mce{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=i||Mp(e)}Fu(e,t,i,r=!1){return new ib({Vu:e,methodName:t,$u:i,path:Or.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function C6(n){const e=n._freezeSettings(),t=Mp(n._databaseId);return new mce(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rb(n,e,t,i,r,a={}){const u=n.Fu(a.merge||a.mergeFields?2:0,e,t,r);fP("Data must be an object, but it was:",u,i);const h=fW(i,u);let m,F;if(a.merge)m=new ad(u.fieldMask),F=u.fieldTransforms;else if(a.mergeFields){const b=[];for(const M of a.mergeFields){const k=pP(e,M,t);if(!u.contains(k))throw new Le(Fe.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);mW(b,k)||b.push(k)}m=new ad(b),F=u.fieldTransforms.filter(M=>m.covers(M.field))}else m=null,F=u.fieldTransforms;return new pce(new xs(h),m,F)}class xp extends g6{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xp}}function dW(n,e,t){return new ib({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class uP extends g6{_toFieldTransform(e){return new dp(e.path,new pd)}isEqual(e){return e instanceof uP}}class gce extends g6{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=dW(this,e,!0),i=this.Bu.map(a=>_6(a,t)),r=new o6(i);return new dp(e.path,r)}isEqual(e){return this===e}}class Cce extends g6{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=dW(this,e,!0),i=this.Bu.map(a=>_6(a,t)),r=new a6(i);return new dp(e.path,r)}isEqual(e){return this===e}}class _ce extends g6{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new md(e.O,lq(e.O,this.Lu));return new dp(e.path,t)}isEqual(e){return this===e}}function dP(n,e,t,i){const r=n.Fu(1,e,t);fP("Data must be an object, but it was:",r,i);const a=[],u=xs.empty();t6(i,(m,F)=>{const b=sb(e,m,t);F=(0,O.m9)(F);const M=r.xu(b);if(F instanceof xp)a.push(b);else{const k=_6(F,M);null!=k&&(a.push(b),u.set(b,k))}});const h=new ad(a);return new lW(u,h,r.fieldTransforms)}function hP(n,e,t,i,r,a){const u=n.Fu(1,e,t),h=[pP(e,i,t)],m=[r];if(a.length%2!=0)throw new Le(Fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)h.push(pP(e,a[k])),m.push(a[k+1]);const F=[],b=xs.empty();for(let k=h.length-1;k>=0;--k)if(!mW(F,h[k])){const A=h[k];let P=m[k];P=(0,O.m9)(P);const j=u.xu(A);if(P instanceof xp)F.push(A);else{const K=_6(P,j);null!=K&&(F.push(A),b.set(A,K))}}const M=new ad(F);return new lW(b,M,u.fieldTransforms)}function hW(n,e,t,i=!1){return _6(t,n.Fu(i?4:3,e))}function _6(n,e){if(pW(n=(0,O.m9)(n)))return fP("Unsupported field value:",e,n),fW(n,e);if(n instanceof g6)return function(t,i){if(!uW(i.Vu))throw i.Ou(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Ou(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,i){const r=[];let a=0;for(const u of t){let h=_6(u,i.ku(a));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),a++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return lq(i.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=vr.fromDate(t);return{timestampValue:gp(i.O,r)}}if(t instanceof vr){const r=new vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gp(i.O,r)}}if(t instanceof nb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof A3)return{bytesValue:kq(i.O,t._byteString)};if(t instanceof ii){const r=i.databaseId,a=t.firestore._databaseId;if(!a.isEqual(r))throw i.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:MI(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.Ou(`Unsupported field value: ${eb(t)}`)}(n,e)}function fW(n,e){const t={};return $G(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):t6(n,(i,r)=>{const a=_6(r,e.Du(i));null!=a&&(t[i]=a)}),{mapValue:{fields:t}}}function pW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vr||n instanceof nb||n instanceof A3||n instanceof ii||n instanceof g6)}function fP(n,e,t){if(!pW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=eb(t);throw e.Ou("an object"===i?n+" a custom object":n+" "+i)}var i}function pP(n,e,t){if((e=(0,O.m9)(e))instanceof Q4)return e._internalPath;if("string"==typeof e)return sb(n,e);throw ob("Field path arguments must be of type string or ",n,!1,void 0,t)}const Fce=new RegExp("[~\\*/\\[\\]]");function sb(n,e,t){if(e.search(Fce)>=0)throw ob(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Q4(...e.split("."))._internalPath}catch(i){throw ob(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ob(n,e,t,i,r){const a=i&&!i.isEmpty(),u=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${r}`),m+=")"),new Le(Fe.INVALID_ARGUMENT,h+n+m)}function mW(n,e){return n.some(t=>t.isEqual(e))}class Np{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ii(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yce(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ab("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yce extends Np{data(){return super.data()}}function ab(n,e){return"string"==typeof e?sb(n,e):e instanceof Q4?e._internalPath:e._delegate._internalPath}class F6{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class J4 extends Np{constructor(e,t,i,r,a,u){super(e,t,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ab("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Tp extends J4{data(e={}){return super.data(e)}}class ql{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new F6(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Tp(this._firestore,this._userDataWriter,i.key,i,new F6(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>({type:"added",doc:new Tp(i._firestore,i._userDataWriter,u.doc.key,u.doc,new F6(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:a++}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>r||3!==u.type).map(u=>{const h=new Tp(i._firestore,i._userDataWriter,u.doc.key,u.doc,new F6(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,F=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),F=a.indexOf(u.doc.key)),{type:vce(u.type),doc:h,oldIndex:m,newIndex:F}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vce(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function gW(n,e){return n instanceof J4&&e instanceof J4?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ql&&e instanceof ql&&n._firestore===e._firestore&&sW(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function CW(n){if(Nw(n)&&0===n.explicitOrderBy.length)throw new Le(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ap{}function $l(n,...e){for(const t of e)n=t._apply(n);return n}class wce extends Ap{constructor(e,t,i){super(),this.Uu=e,this.qu=t,this.Ku=i,this.type="where"}_apply(e){const t=C6(e.firestore),i=function(r,a,u,h,m,F,b){let M;if(m.isKeyField()){if("array-contains"===F||"array-contains-any"===F)throw new Le(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${F}' queries on documentId().`);if("in"===F||"not-in"===F){bW(b,F);const A=[];for(const P of b)A.push(wW(h,r,P));M={arrayValue:{values:A}}}else M=wW(h,r,b)}else"in"!==F&&"not-in"!==F&&"array-contains-any"!==F||bW(b,F),M=hW(u,"where",b,"in"===F||"not-in"===F);const k=e1.create(m,F,M);return function(A,P){if(P.S()){const K=_I(A);if(null!==K&&!K.isEqual(P.field))throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${K.toString()}' and '${P.field.toString()}'`);const he=CI(A);null!==he&&EW(0,P.field,he)}const j=function(K,he){for(const be of K.filters)if(he.indexOf(be.op)>=0)return be.op;return null}(A,function(K){switch(K){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(P.op));if(null!==j)throw new Le(Fe.INVALID_ARGUMENT,j===P.op?`Invalid query. You cannot use more than one '${P.op.toString()}' filter.`:`Invalid query. You cannot use '${P.op.toString()}' filters with '${j.toString()}' filters.`)}(r,k),k}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Ts(e.firestore,e.converter,function(r,a){const u=r.filters.concat([a]);return new Z4(r.path,r.collectionGroup,r.explicitOrderBy.slice(),u,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Ece extends Ap{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(i,r,a){if(null!==i.startAt)throw new Le(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Le(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new dd(r,a);return function(h,m){if(null===CI(h)){const F=_I(h);null!==F&&EW(0,F,m.field)}}(i,u),u}(e._query,this.Uu,this.Gu);return new Ts(e.firestore,e.converter,function(i,r){const a=i.explicitOrderBy.concat([r]);return new Z4(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class _W extends Ap{constructor(e,t,i){super(),this.type=e,this.ju=t,this.Qu=i}_apply(e){return new Ts(e.firestore,e.converter,rq(e._query,this.ju,this.Qu))}}class FW extends Ap{constructor(e,t,i){super(),this.type=e,this.Wu=t,this.zu=i}_apply(e){const t=vW(e,this.type,this.Wu,this.zu);return new Ts(e.firestore,e.converter,(r=t,new Z4((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class yW extends Ap{constructor(e,t,i){super(),this.type=e,this.Wu=t,this.zu=i}_apply(e){const t=vW(e,this.type,this.Wu,this.zu);return new Ts(e.firestore,e.converter,(r=t,new Z4((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function vW(n,e,t,i){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof Np)return function(r,a,u,h,m){if(!h)throw new Le(Fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const F=[];for(const b of fd(r))if(b.field.isKeyField())F.push(ww(a,h.key));else{const M=h.data.field(b.field);if(fI(M))throw new Le(Fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const k=b.field.canonicalString();throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}F.push(M)}return new ud(F,m)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=C6(n.firestore);return function(a,u,h,m,F,b){const M=a.explicitOrderBy;if(F.length>M.length)throw new Le(Fe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let A=0;A<F.length;A++){const P=F[A];if(M[A].field.isKeyField()){if("string"!=typeof P)throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof P}`);if(!FI(a)&&-1!==P.indexOf("/"))throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${P}' contains a slash.`);const j=a.path.child(wn.fromString(P));if(!Ke.isDocumentKey(j))throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const K=new Ke(j);k.push(ww(u,K))}else{const j=hW(h,m,P);k.push(j)}}return new ud(k,b)}(n._query,n.firestore._databaseId,r,e,t,i)}}function wW(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Le(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FI(e)&&-1!==t.indexOf("/"))throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(wn.fromString(t));if(!Ke.isDocumentKey(i))throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ww(n,new Ke(i))}if(t instanceof ii)return ww(n,t._key);throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eb(t)}.`)}function bW(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(Fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function EW(n,e,t){if(!t.isEqual(e))throw new Le(Fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mP{convertValue(e,t="none"){switch(s6(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Li(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(n6(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const i={};return t6(e.fields,(r,a)=>{i[r]=this.convertValue(a,t)}),i}convertGeoPoint(e){return new nb(Li(e.latitude),Li(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=WG(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const t=Ol(e);return new vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=wn.fromString(e);kt(Rq(i));const r=new i6(i.get(1),i.get(3)),a=new Ke(i.popFirst(5));return r.isEqual(t)||rr(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function cb(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Ace extends mP{constructor(e){super(),this.firestore=e}convertBytes(e){return new A3(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ii(this.firestore,null,t)}}class MW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=C6(e)}set(e,t,i){this._verifyNotCommitted();const r=Wl(e,this._firestore),a=cb(r.converter,t,i),u=rb(this._dataReader,"WriteBatch.set",r._key,a,null!==r.converter,i);return this._mutations.push(u.toMutation(r._key,sr.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const a=Wl(e,this._firestore);let u;return u="string"==typeof(t=(0,O.m9)(t))||t instanceof Q4?hP(this._dataReader,"WriteBatch.update",a._key,t,i,r):dP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,sr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wl(e,this._firestore);return this._mutations=this._mutations.concat(new fp(t._key,sr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(Fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wl(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Le(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class y6 extends mP{constructor(e){super(),this.firestore=e}convertBytes(e){return new A3(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ii(this.firestore,null,t)}}function SW(n,e,t){n=un(n,ii);const i=un(n.firestore,gi),r=cb(n.converter,e,t);return Pd(i,[rb(C6(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,sr.none())])}function DW(n,e,t,...i){n=un(n,ii);const r=un(n.firestore,gi),a=C6(r);let u;return u="string"==typeof(e=(0,O.m9)(e))||e instanceof Q4?hP(a,"updateDoc",n._key,e,t,i):dP(a,"updateDoc",n._key,e),Pd(r,[u.toMutation(n._key,sr.exists(!0))])}function kW(n,...e){var t,i,r;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||lP(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(lP(e[u])){const M=e[u];e[u]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[u+1]=null===(i=M.error)||void 0===i?void 0:i.bind(M),e[u+2]=null===(r=M.complete)||void 0===r?void 0:r.bind(M)}let m,F,b;if(n instanceof ii)F=un(n.firestore,gi),b=hd(n._key.path),m={next:M=>{e[u]&&e[u](gP(F,n,M))},error:e[u+1],complete:e[u+2]};else{const M=un(n,Ts);F=un(M.firestore,gi),b=M._query;const k=new y6(F);m={next:A=>{e[u]&&e[u](new ql(F,k,M,A))},error:e[u+1],complete:e[u+2]},CW(n._query)}return function(M,k,A,P){const j=new Jw(P),K=new DL(k,j,A);return M.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return wL(yield Ld(M),K)})),()=>{j.Jc(),M.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return EL(yield Ld(M),K)}))}}(ar(F),b,h,m)}function Pd(n,e){return function(t,i){const r=new Vr;return t.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(n,e,t){return AL.apply(this,arguments)}(yield oP(t),i,r)})),r.promise}(ar(n),e)}function gP(n,e,t){const i=t.docs.get(e._key),r=new y6(n);return new J4(n,r,e._key,i,new F6(t.hasPendingWrites,t.fromCache),e.converter)}class jce extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=C6(e)}get(e){const t=Wl(e,this._firestore),i=new Ace(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return at();const a=r[0];if(a.isFoundDocument())return new Np(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new Np(this._firestore,i,t._key,null,t.converter);throw at()})}set(e,t,i){const r=Wl(e,this._firestore),a=cb(r.converter,t,i),u=rb(this._dataReader,"Transaction.set",r._key,a,null!==r.converter,i);return this._transaction.set(r._key,u),this}update(e,t,i,...r){const a=Wl(e,this._firestore);let u;return u="string"==typeof(t=(0,O.m9)(t))||t instanceof Q4?hP(this._dataReader,"Transaction.update",a._key,t,i,r):dP(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Wl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wl(e,this._firestore),i=new y6(this._firestore);return super.get(e).then(r=>new J4(this._firestore,i,t._key,r._document,new F6(!1,!1),t.converter))}}function Zl(...n){return new gce("arrayUnion",n)}function Ur(...n){return new Cce("arrayRemove",n)}!function(n,e=!0){sd=Ys.SDK_VERSION,(0,Ys._registerComponent)(new ma.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),a=new gi(r,new _ae(t.getProvider("auth-internal")),new vae(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC")),(0,Ys.registerVersion)(HG,"3.4.5",n),(0,Ys.registerVersion)(HG,"3.4.5","esm2017")}();var lb=B(3637),bn=B(5943);function CP(){return n=>n.lift(new Wce)}class Wce{call(e,t){return t.subscribe(new Zce(e))}}class Zce extends yn.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function NW(n,e){return t=>t.lift(new Kce(n,e))}class Kce{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Yce(e,this.compare,this.keySelector))}}class Yce extends yn.L{constructor(e,t,i){super(e),this.keySelector=i,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(r){return this.destination.error(r)}let i=!1;if(this.hasKey)try{const{compare:r}=this;i=r(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;i||(this.key=t,this.destination.next(e))}}var br=B(8939),_P=(B(8426),B(3394));function FP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TW(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function AW(){if("undefined"==typeof atob)throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ip{constructor(e){this._delegate=e}static fromBase64String(e){return AW(),new Ip(A3.fromBase64String(e))}static fromUint8Array(e){return TW(),new Ip(A3.fromUint8Array(e))}toBase64(){return AW(),this._delegate.toBase64()}toUint8Array(){return TW(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yP(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of["next","error","complete"])if(i in t&&"function"==typeof t[i])return!0;return!1}(n)}class ele{enableIndexedDbPersistence(e,t){return function(n,e){cW(n=un(n,gi));const t=ar(n),i=n._freezeSettings(),r=new XL;return aW(t,r,new U$(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){cW(n=un(n,gi));const e=ar(n),t=n._freezeSettings(),i=new XL;return aW(e,i,new B4e(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Le(Fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,X.Z)(function*(){try{yield(t=(0,X.Z)(function*(i){if(!_a.Vt())return Promise.resolve();const r=i+"main";yield _a.delete(r)}),function(i){return t.apply(this,arguments)})(GI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IW{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof i6||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&np("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function(n,e,t,i={}){var r;const a=(n=un(n,kp))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&np("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let u,h;if("string"==typeof i.mockUserToken)u=i.mockUserToken,h=ps.MOCK_USER;else{u=(0,O.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new Le(Fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ps(m)}n._authCredentials=new Cae(new BG(u,h))}}(this._delegate,e,t,i)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,X.Z)(function*(){const e=yield W$(n),t=yield Z$(n);return e.setNetworkEnabled(!0),function(i){const r=Ue(i);return r.Ko.delete(0),Sp(r)}(t)}))}(ar(n=un(n,gi)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,X.Z)(function*(){const e=yield W$(n),t=yield Z$(n);return e.setNetworkEnabled(!1),(i=(0,X.Z)(function*(r){const a=Ue(r);a.Ko.add(0),yield Dd(a),a.Qo.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(ar(n=un(n,gi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,J$("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(n,e){return OL.apply(this,arguments)}(yield oP(e),t)})),t.promise}(ar(n=un(n,gi)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new Jw(e);return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return i=yield Ld(n),r=t,Ue(i).Zo.add(r),void r.next();var i,r})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return i=yield Ld(n),r=t,void Ue(i).Zo.delete(r);var i,r}))}}(ar(n=un(n,gi)),lP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vd(this,iW(this._delegate,e))}catch(t){throw t1(t,"collection()","Firestore.collection()")}}doc(e){try{return new y2(this,tb(this._delegate,e))}catch(t){throw t1(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new n1(this,function(n,e){if(n=un(n,kp),cP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(Fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ts(n,null,(t=e,new Z4(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw t1(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){const i=yield(r=n,Xw(r).then(a=>a.datastore));var r;new G4e(n.asyncQueue,i,e,t).run()})),t.promise}(ar(n=un(n,gi)),t=>e(new jce(n,t)))}(this._delegate,t=>e(new LW(this,t)))}batch(){return ar(this._delegate),new PW(new MW(this._delegate,e=>Pd(this._delegate,e)))}loadBundle(e){return function(n,e){const t=ar(n=un(n,gi)),i=new ice;return function(n,e,t,i){const r=function(a,u){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,F){if(m instanceof Uint8Array)return G$(m,F);if(m instanceof ArrayBuffer)return G$(new Uint8Array(m),F);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new j4e(m,u);var m}(t,Mp(e));n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){!function(n,e,t){const i=Ue(n);var r;(r=(0,X.Z)(function*(a,u,h){try{const m=yield u.getMetadata();if(yield function(k,A){const P=Ue(k),j=Rr(A.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",K=>P.Kn.getBundleMetadata(K,A.id)).then(K=>!!K&&K.createTime.compareTo(j)>=0)}(a.localStore,m))return yield u.close(),void h._completeWith((k=m,{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}));h._updateProgress(I$(m));const F=new F4e(m,a.localStore,u.O);let b=yield u.Kc();for(;b;){const k=yield F.lc(b);k&&h._updateProgress(k),b=yield u.Kc()}const M=yield F.complete();yield Y4(a,M.ws,void 0),yield function(k,A){const P=Ue(k);return P.persistence.runTransaction("Save bundle","readwrite",j=>P.Kn.saveBundleMetadata(j,A))}(a.localStore,m),h._completeWith(M.progress)}catch(m){np("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m)}var k}),function(a,u,h){return r.apply(this,arguments)})(i,e,t).then(()=>{i.sharedClientState.notifyBundleLoaded()})}(yield oP(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,X.Z)(function*(){return function(t,i){const r=Ue(t);return r.persistence.runTransaction("Get named query","readonly",a=>r.Kn.getNamedQuery(a,i))}(yield sP(n),e)}))}(ar(n=un(n,gi)),e).then(t=>t?new Ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new n1(this,t):null)}}class ub extends mP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ip(new A3(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return y2.forKey(t,this.firestore,null)}}class LW{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ub(e)}get(e){const t=w6(e);return this._delegate.get(t).then(i=>new Lp(this._firestore,new J4(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=w6(e);return i?(FP("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const a=w6(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,i,...r),this}delete(e){const t=w6(e);return this._delegate.delete(t),this}}class PW{constructor(e){this._delegate=e}set(e,t,i){const r=w6(e);return i?(FP("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const a=w6(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,i,...r),this}delete(e){const t=w6(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class v6{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Tp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pp(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=v6.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let a=r.get(t);return a||(a=new v6(e,new ub(e),t),r.set(t,a)),a}}v6.INSTANCES=new WeakMap;class y2{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ub(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new y2(t,new ii(t._delegate,i,new Ke(e)))}static forKey(e,t,i){return new y2(t,new ii(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Vd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vd(this.firestore,iW(this._delegate,e))}catch(t){throw t1(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof ii&&rW(this._delegate,e)}set(e,t){t=FP("DocumentReference.set",t);try{return t?SW(this._delegate,e,t):SW(this._delegate,e)}catch(i){throw t1(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?DW(this._delegate,e):DW(this._delegate,e,t,...i)}catch(r){throw t1(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Pd(un(n.firestore,gi),[new fp(n._key,sr.none())])}(this._delegate)}onSnapshot(...e){const t=VW(e),i=OW(e,r=>new Lp(this.firestore,new J4(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return kW(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=un(n,ii);const e=un(n.firestore,gi),t=ar(e),i=new y6(e);return function(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return(i=(0,X.Z)(function*(r,a,u){try{const h=yield function(m,F){const b=Ue(m);return b.persistence.runTransaction("read document","readonly",M=>b.Us.ys(M,F))}(r,a);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Le(Fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Nd(h,`Failed to get document '${a} from cache`);u.reject(m)}}),function(r,a,u){return i.apply(this,arguments)})(yield sP(n),e,t);var i})),t.promise}(t,n._key).then(r=>new J4(e,i,n._key,r,new F6(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=un(n,ii);const e=un(n.firestore,gi);return K$(ar(e),n._key,{source:"server"}).then(t=>gP(e,n,t))}(this._delegate):function(n){n=un(n,ii);const e=un(n.firestore,gi);return K$(ar(e),n._key).then(t=>gP(e,n,t))}(this._delegate),t.then(i=>new Lp(this.firestore,new J4(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new y2(this.firestore,this._delegate.withConverter(e?v6.getInstance(this.firestore,e):null))}}function t1(n,e,t){return n.message=n.message.replace(e,t),n}function VW(n){for(const e of n)if("object"==typeof e&&!yP(e))return e;return{}}function OW(n,e){var t,i;let r;return r=yP(n[0])?n[0]:yP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{r.next&&r.next(e(a))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Lp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new y2(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gW(this._delegate,e._delegate)}}class Pp extends Lp{data(e){const t=this._delegate.data(e);return function(n,e){n||at()}(void 0!==t),t}}class n1{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ub(e)}where(e,t,i){try{return new n1(this.firestore,$l(this._delegate,function(n,e,t){const i=e,r=ab("where",n);return new wce(r,i,t)}(e,t,i)))}catch(r){throw t1(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n1(this.firestore,$l(this._delegate,function(n,e="asc"){const t=e,i=ab("orderBy",n);return new Ece(i,t)}(e,t)))}catch(i){throw t1(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n1(this.firestore,$l(this._delegate,function(n){return tW("limit",n),new _W("limit",n,"F")}(e)))}catch(t){throw t1(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n1(this.firestore,$l(this._delegate,function(n){return tW("limitToLast",n),new _W("limitToLast",n,"L")}(e)))}catch(t){throw t1(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n1(this.firestore,$l(this._delegate,function(...n){return new FW("startAt",n,!0)}(...e)))}catch(t){throw t1(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n1(this.firestore,$l(this._delegate,function(...n){return new FW("startAfter",n,!1)}(...e)))}catch(t){throw t1(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n1(this.firestore,$l(this._delegate,function(...n){return new yW("endBefore",n,!1)}(...e)))}catch(t){throw t1(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n1(this.firestore,$l(this._delegate,function(...n){return new yW("endAt",n,!0)}(...e)))}catch(t){throw t1(t,"endAt()","Query.endAt()")}}isEqual(e){return sW(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=un(n,Ts);const e=un(n.firestore,gi),t=ar(e),i=new y6(e);return function(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return(i=(0,X.Z)(function*(r,a,u){try{const h=yield $w(r,a,!0),m=new V$(a,h.Ks),F=m.Ic(h.documents),b=m.applyChanges(F,!1);u.resolve(b.snapshot)}catch(h){const m=Nd(h,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(r,a,u){return i.apply(this,arguments)})(yield sP(n),e,t);var i})),t.promise}(t,n._query).then(r=>new ql(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=un(n,Ts);const e=un(n.firestore,gi),t=ar(e),i=new y6(e);return Y$(t,n._query,{source:"server"}).then(r=>new ql(e,i,n,r))}(this._delegate):function(n){n=un(n,Ts);const e=un(n.firestore,gi),t=ar(e),i=new y6(e);return CW(n._query),Y$(t,n._query).then(r=>new ql(e,i,n,r))}(this._delegate),t.then(i=>new vP(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=VW(e),i=OW(e,r=>new vP(this.firestore,new ql(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return kW(this._delegate,t,i)}withConverter(e){return new n1(this.firestore,this._delegate.withConverter(e?v6.getInstance(this.firestore,e):null))}}class nle{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pp(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new n1(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pp(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nle(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Pp(this._firestore,i))})}isEqual(e){return gW(this._delegate,e._delegate)}}class Vd extends n1{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new y2(this.firestore,e):null}doc(e){try{return new y2(this.firestore,void 0===e?tb(this._delegate):tb(this._delegate,e))}catch(t){throw t1(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=un(n.firestore,gi),i=tb(n),r=cb(n.converter,e);return Pd(t,[rb(C6(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,sr.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new y2(this.firestore,t))}isEqual(e){return rW(this._delegate,e._delegate)}withConverter(e){return new Vd(this.firestore,this._delegate.withConverter(e?v6.getInstance(this.firestore,e):null))}}function w6(n){return un(n,ii)}class wP{constructor(...e){this._delegate=new Q4(...e)}static documentId(){return new wP(Or.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Q4&&this._delegate._internalPath.isEqual(e._internalPath)}}class b6{constructor(e){this._delegate=e}static serverTimestamp(){const e=new uP("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new b6(e)}static delete(){const e=new xp("deleteField");return e._methodName="FieldValue.delete",new b6(e)}static arrayUnion(...e){const t=Zl(...e);return t._methodName="FieldValue.arrayUnion",new b6(t)}static arrayRemove(...e){const t=Ur(...e);return t._methodName="FieldValue.arrayRemove",new b6(t)}static increment(e){const t=function(n){return new _ce("increment",n)}(e);return t._methodName="FieldValue.increment",new b6(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ile={Firestore:IW,GeoPoint:nb,Timestamp:vr,Blob:Ip,Transaction:LW,WriteBatch:PW,DocumentReference:y2,DocumentSnapshot:Lp,Query:n1,QueryDocumentSnapshot:Pp,QuerySnapshot:vP,CollectionReference:Vd,FieldPath:wP,FieldValue:b6,setLogLevel:function(n){!function(n){Vl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new ma.wA("firestore-compat",t=>((e,t)=>new IW(e,t,new ele))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},ile)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.14")}(_P.Z);var db=B(6682),Vp=B(309),ole=B(7771),ale=B(8858);class cle extends nn.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new lle(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,a=i.length;let u;if(this.closed)throw new h4.N;if(this.isStopped||this.hasError?u=C4.w.EMPTY:(this.observers.push(e),u=new ale.W(this,e)),r&&e.add(e=new Vp.ht(e,r)),t)for(let h=0;h<a&&!e.closed;h++)e.next(i[h]);else for(let h=0;h<a&&!e.closed;h++)e.next(i[h].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),u}_getNow(){return(this.scheduler||ole.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,a=r.length;let u=0;for(;u<a&&!(e-r[u].time<i);)u++;return a>t&&(u=Math.max(u,a-t)),u>0&&r.splice(0,u),r}}class lle{constructor(e,t){this.time=e,this.value=t}}function RW(n,e,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},r=>r.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,u,a=0,h=!1,m=!1;return function(b){let M;a++,!r||h?(h=!1,r=new cle(n,e,i),M=r.subscribe(this),u=b.subscribe({next(k){r.next(k)},error(k){h=!0,r.error(k)},complete(){m=!0,u=void 0,r.complete()}}),m&&(u=void 0)):M=r.subscribe(this),this.add(()=>{a--,M.unsubscribe(),M=void 0,u&&!m&&t&&0===a&&(u.unsubscribe(),u=void 0,r=void 0)})}}(i))}function zW(n,e){return e?ti(()=>n,e):ti(()=>n)}var bP=B(3101);B(2329);const BW=new Map,mle={activated:!1,tokenObservers:[]},gle={initialized:!1,enabled:!1};function Gr(n){return BW.get(n)||mle}function Fa(n,e){BW.set(n,e)}function fb(){return gle}class vle{constructor(e,t,i,r,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=r,r>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,X.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const r1=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function UW(n){if(!Gr(n).activated)throw r1.create("use-before-activation",{appName:n.name})}function DP(n,e){return kP.apply(this,arguments)}function kP(){return(kP=(0,X.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});r&&(i["X-Firebase-Client"]=r.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:i};let u,h;try{u=yield fetch(n,a)}catch(M){throw r1.create("fetch-network-error",{originalErrorMessage:M.message})}if(200!==u.status)throw r1.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(M){throw r1.create("fetch-parse-error",{originalErrorMessage:M.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw r1.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const F=1e3*Number(m[1]),b=Date.now();return{token:h.attestationToken,expireTimeMillis:b+F,issuedAtTimeMillis:b}})).apply(this,arguments)}function Dle(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Op="firebase-app-check-store";let gb=null;function qW(){return gb||(gb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(r1.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{const r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Op,{keyPath:"compositeKey"})}}}catch(t){e(r1.create("storage-open",{originalErrorMessage:t.message}))}}),gb)}function xP(){return(xP=(0,X.Z)(function*(n,e){const i=(yield qW()).transaction(Op,"readwrite"),a=i.objectStore(Op).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=m=>{u()},i.onerror=m=>{var F;h(r1.create("storage-set",{originalErrorMessage:null===(F=m.target.error)||void 0===F?void 0:F.message}))}})})).apply(this,arguments)}const Rp=new ga.Yd("@firebase/app-check");function KW(n,e){return(0,O.hl)()?function(n,e){return function(n,e){return xP.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Rp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function YW(){return fb().enabled}function QW(){return IP.apply(this,arguments)}function IP(){return(IP=(0,X.Z)(function*(){const n=fb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ole={error:"UNKNOWN_ERROR"};function Rle(n){return O.US.encodeString(JSON.stringify(n),!1)}function Cb(n){return LP.apply(this,arguments)}function LP(){return(LP=(0,X.Z)(function*(n,e=!1){const t=n.app;UW(t);const i=Gr(t);let a,r=i.token;if(!r){const m=yield i.cachedTokenPromise;m&&_b(m)&&(r=m)}if(!e&&r&&_b(r))return{token:r.token};let h,u=!1;if(YW()){i.exchangeTokenPromise||(i.exchangeTokenPromise=DP(Dle(t,yield QW()),n.platformLoggerProvider).then(F=>(i.exchangeTokenPromise=void 0,F)),u=!0);const m=yield i.exchangeTokenPromise;return yield KW(t,m),Fa(t,Object.assign(Object.assign({},i),{token:m})),{token:m.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(m=>(i.exchangeTokenPromise=void 0,m)),u=!0),r=yield i.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Rp.warn(m.message):Rp.error(m),a=m}return r?(h={token:r.token},Fa(t,Object.assign(Object.assign({},i),{token:r})),yield KW(t,r)):h=Hle(a),u&&XW(t,h),h})).apply(this,arguments)}function VP(n,e){const t=Gr(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Fa(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function JW(n){const{app:e}=n,t=Gr(e);let i=t.tokenRefresher;i||(i=function(n){const{app:e}=n;return new vle((0,X.Z)(function*(){let i;if(i=Gr(e).token?yield Cb(n,!0):yield Cb(n),i.error)throw i.error}),()=>!0,()=>{const t=Gr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Fa(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function XW(n,e){const t=Gr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function _b(n){return n.expireTimeMillis-Date.now()>0}function Hle(n){return{token:Rle(Ole),error:n}}class Ble{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Gr(this.app);for(const t of e)VP(this.app,t.next);return Promise.resolve()}}const aZ="app-check-internal";(0,Ys._registerComponent)(new ma.wA("app-check",n=>function(n,e){return new Ble(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(aZ).initialize()})),(0,Ys._registerComponent)(new ma.wA(aZ,n=>function(n){return{getToken:e=>Cb(n,e),addTokenListener:e=>function(n,e,t,i){const{app:r}=n,a=Gr(r),u={next:t,error:i,type:e};if(Fa(r,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&_b(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),JW(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>JW(n))}(n,"INTERNAL",e),removeTokenListener:e=>VP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ys.registerVersion)("@firebase/app-check","0.5.3");class zp{constructor(){return(0,bn.vb)("app-check")}}"undefined"!=typeof window&&window;var yb=B(7841);const BP=new l.OlP("angularfire2.auth.use-emulator"),jP=new l.OlP("angularfire2.auth.settings"),UP=new l.OlP("angularfire2.auth.tenant-id"),GP=new l.OlP("angularfire2.auth.langugage-code"),qP=new l.OlP("angularfire2.auth.use-device-language"),$P=new l.OlP("angularfire.auth.persistence"),WP=(n,e,t,i,r,a,u,h)=>(0,br.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),i&&(m.tenantId=i),m.languageCode=r,a&&m.useDeviceLanguage(),u)for(const[F,b]of Object.entries(u))m.settings[F]=b;return h&&m.setPersistence(h),m},[t,i,r,a,u,h]);let vb=(()=>{class n{constructor(t,i,r,a,u,h,m,F,b,M,k,A){const P=new nn.xQ,j=(0,$e.of)(void 0).pipe((0,Vp.QV)(u.outsideAngular),ti(()=>a.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8426)))),(0,nt.U)(()=>(0,br.on)(t,a,i)),(0,nt.U)(K=>WP(K,a,h,F,b,M,m,k)),RW({bufferSize:1,refCount:!1}));if(La(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,$e.of)(null);else{j.pipe(ui()).subscribe();const he=j.pipe(ti(Ae=>Ae.getRedirectResult().then(ze=>ze,()=>null)),bn.iC,RW({bufferSize:1,refCount:!1})),be=j.pipe(ti(Ae=>new ei.y(ze=>({unsubscribe:a.runOutsideAngular(()=>Ae.onAuthStateChanged(ut=>ze.next(ut),ut=>ze.error(ut),()=>ze.complete()))})))),ye=j.pipe(ti(Ae=>new ei.y(ze=>({unsubscribe:a.runOutsideAngular(()=>Ae.onIdTokenChanged(ut=>ze.next(ut),ut=>ze.error(ut),()=>ze.complete()))}))));this.authState=he.pipe(zW(be),(0,bP.R)(u.outsideAngular),(0,Vp.QV)(u.insideAngular)),this.user=he.pipe(zW(ye),(0,bP.R)(u.outsideAngular),(0,Vp.QV)(u.insideAngular)),this.idToken=this.user.pipe(ti(Ae=>Ae?(0,cn.D)(Ae.getIdToken()):(0,$e.of)(null))),this.idTokenResult=this.user.pipe(ti(Ae=>Ae?(0,cn.D)(Ae.getIdTokenResult()):(0,$e.of)(null))),this.credential=(0,db.T)(he,P,this.authState.pipe(Tr(Ae=>!Ae))).pipe((0,nt.U)(Ae=>(null==Ae?void 0:Ae.user)?Ae:null),(0,bP.R)(u.outsideAngular),(0,Vp.QV)(u.insideAngular))}return(0,br.pX)(this,j,a,{spy:{apply:(K,he,be)=>{(K.startsWith("signIn")||K.startsWith("createUser"))&&be.then(ye=>P.next(ye))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(br.Dh),l.LFG(br.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(bn.HU),l.LFG(BP,8),l.LFG(jP,8),l.LFG(UP,8),l.LFG(GP,8),l.LFG(qP,8),l.LFG($P,8),l.LFG(zp,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aue=(()=>{class n{constructor(){yb.Z.registerVersion("angularfire",bn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[vb]}),n})();function lZ(n,e){return function(n,e=lb.z){return new ei.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function ZP(n,e){return lZ(n,e).pipe((0,nt.U)(t=>({payload:t,type:"query"})))}function wb(n,e){return ZP(n,e).pipe(p4(void 0),CP(),(0,nt.U)(([t,i])=>{const r=i.payload.docChanges(),a=r.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((u,h)=>{const m=r.find(b=>b.doc.ref.isEqual(u.ref)),F=null==t?void 0:t.payload.docs.find(b=>b.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&F&&JSON.stringify(F.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),a}))}function uZ(n,e,t){return wb(n,t).pipe(eo((i,r)=>function(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return KP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return KP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KP(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(a=>a.payload),e),[]),NW(),(0,nt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function KP(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function dZ(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class hZ{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=wb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,nt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(p4(void 0),CP(),Tr(([i,r])=>r.length>0||!i),(0,nt.U)(([i,r])=>r),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(eo((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=dZ(e);return uZ(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return ZP(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),bn.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new fZ(this.ref.doc(e),this.afs)}}class fZ{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:a}=gZ(i,t);return new hZ(r,a,this.afs)}snapshotChanges(){return function(n,e){return lZ(n,e).pipe(p4(void 0),CP(),(0,nt.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,nt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cn.D)(this.ref.get(e)).pipe(bn.iC)}}class hue{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?wb(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),Tr(t=>t.length>0),bn.iC):wb(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(eo((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=dZ(e);return uZ(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return ZP(this.query,this.afs.schedulers.outsideAngular).pipe((0,nt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),bn.iC)}get(e){return(0,cn.D)(this.query.get(e)).pipe(bn.iC)}}const pZ=new l.OlP("angularfire2.enableFirestorePersistence"),mZ=new l.OlP("angularfire2.firestore.persistenceSettings"),fue=new l.OlP("angularfire2.firestore.settings"),pue=new l.OlP("angularfire2.firestore.use-emulator");function gZ(n,e=(t=>t)){return{query:e(n),ref:n}}let CZ=(()=>{class n{constructor(t,i,r,a,u,h,m,F,b,M,k,A,P,j,K,he,be){this.schedulers=m;const ye=(0,br.on)(t,h,i),Ae=b;M&&WP(ye,h,k,P,j,K,A,he),[this.firestore,this.persistenceEnabled$]=(0,br.cc)(`${ye.name}.firestore`,"AngularFirestore",ye.name,()=>{const ze=h.runOutsideAngular(()=>ye.firestore());if(a&&ze.settings(a),Ae&&ze.useEmulator(...Ae),r&&!La(u)){const ut=()=>{try{return(0,cn.D)(ze.enablePersistence(F||void 0).then(()=>!0,()=>!1))}catch(Et){return"undefined"!=typeof console&&console.warn(Et),(0,$e.of)(!1)}};return[ze,h.runOutsideAngular(ut)]}return[ze,(0,$e.of)(!1)]},[a,Ae,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=gZ(r,i),h=this.schedulers.ngZone.run(()=>a);return new hZ(h,u,this)}collectionGroup(t,i){const r=i||(u=>u),a=this.firestore.collectionGroup(t);return new hue(r(a),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new fZ(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(br.Dh),l.LFG(br.xv,8),l.LFG(pZ,8),l.LFG(fue,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(bn.HU),l.LFG(mZ,8),l.LFG(pue,8),l.LFG(vb,8),l.LFG(BP,8),l.LFG(jP,8),l.LFG(UP,8),l.LFG(GP,8),l.LFG(qP,8),l.LFG($P,8),l.LFG(zp,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mue=(()=>{class n{constructor(){yb.Z.registerVersion("angularfire",bn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:pZ,useValue:!0},{provide:mZ,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[CZ]}),n})();var gue=B(8819);class _ue{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new Fue(e,this.observables,this.project))}}class Fue extends Za{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let a=0;a<r;a++)this.toRespond.push(a);for(let a=0;a<r;a++)this.add(qn(this,t[a],void 0,a))}notifyNext(e,t,i){this.values[i]=t;const r=this.toRespond;if(r.length>0){const a=r.indexOf(i);-1!==a&&r.splice(a,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class vue{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new wue(e,this.predicate))}}class wue extends yn.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}const _Z="@firebase/database";let YP="";function yZ(n){YP=n}class bue{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Eue{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const vZ=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bue(e)}}catch(e){}return new Eue},E6=vZ("localStorage"),QP=vZ("sessionStorage"),Od=new ga.Yd("@firebase/database"),wZ=function(){let n=1;return function(){return n++}}(),bZ=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const i=t.digest();return O.US.encodeByteArray(i)},Hp=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Hp.apply(null,i):e+="object"==typeof i?(0,O.Pz)(i):i,e+=" "}return e};let M6=null,EZ=!0;const MZ=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Od.logLevel=ga.in.VERBOSE,M6=Od.log.bind(Od),e&&QP.set("logging_enabled",!0)):"function"==typeof n?M6=n:(M6=null,QP.remove("logging_enabled"))},qr=function(...n){if(!0===EZ&&(EZ=!1,null===M6&&!0===QP.get("logging_enabled")&&MZ(!0)),M6){const e=Hp.apply(null,n);M6(e)}},Bp=function(n){return function(...e){qr(n,...e)}},JP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Hp(...n);Od.error(e)},I3=function(...n){const e=`FIREBASE FATAL ERROR: ${Hp(...n)}`;throw Od.error(e),new Error(e)},s1=function(...n){const e="FIREBASE WARNING: "+Hp(...n);Od.warn(e)},bb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},X4="[MIN_NAME]",L3="[MAX_NAME]",S6=function(n,e){if(n===e)return 0;if(n===X4||e===L3)return-1;if(e===X4||n===L3)return 1;{const t=Eb(n),i=Eb(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Due=function(n,e){return n===e?0:n<e?-1:1},jp=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},XP=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,O.Pz)(e[i]),t+=":",t+=XP(n[e[i]]);return t+="}",t},SZ=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function $r(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const DZ=function(n){(0,O.hu)(!bb(n),"Invalid JSON number");const i=1023;let r,a,u,h,m;0===n?(a=0,u=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=h+i,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const F=[];for(m=52;m;m-=1)F.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)F.push(a%2?1:0),a=Math.floor(a/2);F.push(r?1:0),F.reverse();const b=F.join("");let M="";for(m=0;m<64;m+=8){let k=parseInt(b.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),M+=k}return M.toLowerCase()},Tue=new RegExp("^-?(0*)\\d{1,10}$"),kZ=-2147483648,eV=2147483647,Eb=function(n){if(Tue.test(n)){const e=Number(n);if(e>=kZ&&e<=eV)return e}return null},Rd=function(n){try{n()}catch(e){setTimeout(()=>{throw s1("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Up=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Iue{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){s1(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Lue{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(qr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',s1(e)}}let Gp=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const IZ=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PZ="websocket",VZ="long_polling";class nV{constructor(e,t,i,r,a=!1,u="",h=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=E6.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&E6.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function OZ(n,e,t){let i;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===PZ)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==VZ)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return $r(t,(a,u)=>{r.push(a+"="+u)}),i+r.join("&")}class Oue{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const iV={},rV={};function sV(n){const e=n.toString();return iV[e]||(iV[e]=new Oue),iV[e]}class zue{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Rd(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class zd{constructor(e,t,i,r,a,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bp(e),this.stats_=sV(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),OZ(t,VZ,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zue(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new oV((...a)=>{const[u,h,m,F,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&IZ.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zd.forceAllow_=!0}static forceDisallow(){zd.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!zd.forceAllow_&&(zd.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,O.h$)(t),r=SZ(i,1840);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class oV{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=wZ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=oV.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){qr("frame writing exception"),h.stack&&qr(h.stack),qr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qr("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const u=this.pendingSegs.shift();i=i+"&seg"+r+"="+u.seg+"&ts"+r+"="+u.ts+"&d"+r+"="+u.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{qr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let qp=null;"undefined"!=typeof MozWebSocket?qp=MozWebSocket:"undefined"!=typeof WebSocket&&(qp=WebSocket);let $p=(()=>{class n{constructor(t,i,r,a,u,h,m){this.connId=t,this.applicationId=r,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bp(this.connId),this.stats_=sV(i),this.connURL=n.connectionURL_(i,h,m,a),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,a){const u={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&IZ.test(location.hostname)&&(u.r="f"),i&&(u.s=i),r&&(u.ls=r),a&&(u.ac=a),OZ(t,PZ,u)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,E6.set("previous_websocket_failure",!0);try{if((0,O.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${YP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new qp(this.connURL,[],a)}else this.mySock=new qp(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(r){this.log_("Error instantiating WebSocket.");const a=r.message||r.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const a=r.message||r.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==qp&&!n.forceDisallow_}static previouslyFailed(){return E6.isInMemoryStorage||!0===E6.get("previous_websocket_failure")}markConnectionHealthy(){E6.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,O.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,O.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=SZ(i,16384);r.length>1&&this.sendString_(String(r.length));for(let a=0;a<r.length;a++)this.sendString_(r[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class aV{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[zd,$p]}initTransports_(e){const t=$p&&$p.isAvailable();let i=t&&!$p.previouslyFailed();if(e.webSocketOnly&&(t||s1("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$p];else{const r=this.transports_=[];for(const a of aV.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class YZ{constructor(e,t,i,r,a,u,h,m,F,b){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=F,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bp("c:"+this.id+":"),this.transportManager_=new aV(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Up(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=jp("t",e),i=jp("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=jp("t",e),i=jp("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=jp("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?JP("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&s1("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Up(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Up(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(E6.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class QZ{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class JZ{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===t&&(!i||i===r[a].context))return void r.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Sb extends JZ{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Sb}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function En(){return new xn("")}function Kt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Kl(n){return n.pieces_.length-n.pieceNum_}function zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new xn(n.pieces_,e)}function lV(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Wp(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function tK(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new xn(e,0)}function Ci(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof xn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new xn(t,0)}function Yt(n){return n.pieceNum_>=n.pieces_.length}function o1(n,e){const t=Kt(n),i=Kt(e);if(null===t)return e;if(t===i)return o1(zn(n),zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function a0e(n,e){const t=Wp(n,0),i=Wp(e,0);for(let r=0;r<t.length&&r<i.length;r++){const a=S6(t[r],i[r]);if(0!==a)return a}return t.length===i.length?0:t.length<i.length?-1:1}function uV(n,e){if(Kl(n)!==Kl(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function v2(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Kl(n)>Kl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class c0e{constructor(e,t){this.errorPrefix_=t,this.parts_=Wp(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,O.ug)(this.parts_[i]);nK(this)}}function nK(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+D6(n))}function D6(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class dV extends JZ{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new dV}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Zp=1e3;let kb,k6=(()=>{class n extends QZ{constructor(t,i,r,a,u,h,m,F){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=F,this.id=n.nextPersistentConnectionId_++,this.log_=Bp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Zp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,F&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dV.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Sb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const a=++this.requestNumber_,u={r:a,a:t,b:i};this.log_((0,O.Pz)(u)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),r&&(this.requestCBHash_[a]=r)}get(t){this.initConnection_();const i=new O.BH,r={p:t._path.toString(),q:t._queryObject},a={action:"g",request:r,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(r.p,m,!1,null),i.resolve(m)):i.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||a!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),i.promise}listen(t,i,r,a){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:i,query:t,tag:r};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),a=i._queryIdentifier;this.log_("Listen on "+r+" for "+a);const u={p:r};t.tag&&(u.q=i._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const F=m.d,b=m.s;n.warnOnListenWarnings_(F,i),(this.listens.get(r)&&this.listens.get(r).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(r,a),t.onComplete&&t.onComplete(b,F))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const r=(0,O.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const a='".indexOn": "'+i._queryParams.getIndex().toString()+'"',u=i._path.toString();s1(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,O.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,a=>{const u=a.s,h=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,a)&&this.connected_&&this.sendUnlisten_(r,a,t._queryObject,i)}sendUnlisten_(t,i,r,a){this.log_("Unlisten on "+t+" for "+i);const u={p:t};a&&(u.q=r,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,a){const u={p:i,d:r};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,i,r,a){this.putInternal("p",t,i,r,a)}merge(t,i,r,a){this.putInternal("m",t,i,r,a)}putInternal(t,i,r,a,u){this.initConnection_();const h={p:i,d:r};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,u=>{this.log_(i+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):JP("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Zp,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Zp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Zp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,X.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,F=null;const b=function(){F?F.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(A){(0,O.hu)(F,"sendRequest call when we're not connected not allowed."),F.sendRequest(A)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[A,P]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);m?qr("getToken() completed but was canceled"):(qr("getToken() completed. Creating connection."),t.authToken_=A&&A.accessToken,t.appCheckToken_=P&&P.token,F=new YZ(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,a,j=>{s1(j+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(A){t.log_("Failed to get token: "+A),m||(t.repoInfo_.nodeAdmin&&s1(A),b())}}})()}interrupt(t){qr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){qr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Zp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(u=>XP(u)).join("$"):"default";const a=this.removeListen_(t,r);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,i){const r=new xn(t).toString();let a;if(this.listens.has(r)){const u=this.listens.get(r);a=u.get(i),u.delete(i),0===u.size&&this.listens.delete(r)}else a=void 0;return a}onAuthRevoked_(t,i){qr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){qr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,O.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+YP.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Sb.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class Db{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new en(X4,e),r=new en(X4,t);return 0!==this.compare(i,r)}minPost(){return en.MIN}}class sK extends Db{static get __EMPTY_NODE(){return kb}static set __EMPTY_NODE(e){kb=e}compare(e,t){return S6(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(L3,kb)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,kb)}toString(){return".key"}}const P3=new sK;class xb{constructor(e,t,i,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,r&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let fV,ya=(()=>{class n{constructor(t,i,r,a,u){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=a?a:O1.EMPTY_NODE,this.right=null!=u?u:O1.EMPTY_NODE}copy(t,i,r,a,u){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let a=this;const u=r(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,i,r),null):0===u?a.copy(null,i,null,null,null):a.copy(null,null,null,null,a.right.insert(t,i,r)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return O1.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,a;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return O1.EMPTY_NODE;a=r.right.min_(),r=r.copy(a.key,a.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class O1{constructor(e,t=O1.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new O1(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ya.BLACK,null,null))}remove(e){return new O1(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ya.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xb(this.root_,null,this.comparator_,!0,e)}}function C0e(n,e){return S6(n.name,e.name)}function hV(n,e){return S6(n,e)}O1.EMPTY_NODE=new class{copy(e,t,i,r,a){return this}insert(e,t,i){return new ya(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const oK=function(n){return"number"==typeof n?"number:"+DZ(n):"string:"+n},aK=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===fV||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===fV||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let cK,lK,uK,Hd=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),aK(this.priorityNode_)}static set __childrenNodeConstructor(t){cK=t}static get __childrenNodeConstructor(){return cK}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Yt(t)?this:".priority"===Kt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=Kt(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,O.hu)(".priority"!==r||1===Kl(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(zn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+oK(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?DZ(this.value_):this.value_,this.lazyHash_=bZ(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(i),u=n.VALUE_TYPE_ORDER.indexOf(r);return(0,O.hu)(a>=0,"Unknown leaf type: "+i),(0,O.hu)(u>=0,"Unknown leaf type: "+r),a===u?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yn=new class extends Db{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),a=i.compareTo(r);return 0===a?S6(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(L3,new Hd("[PRIORITY-POST]",uK))}makePost(e,t){const i=lK(e);return new en(t,new Hd("[PRIORITY-POST]",i))}toString(){return".priority"}},w0e=Math.log(2);class b0e{constructor(e){this.count=parseInt(Math.log(e+1)/w0e,10),this.current_=this.count-1;const r=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Nb=function(n,e,t,i){n.sort(e);const r=function(m,F){const b=F-m;let M,k;if(0===b)return null;if(1===b)return M=n[m],k=t?t(M):M,new ya(k,M.node,ya.BLACK,null,null);{const A=parseInt(b/2,10)+m,P=r(m,A),j=r(A+1,F);return M=n[A],k=t?t(M):M,new ya(k,M.node,ya.BLACK,P,j)}},h=function(m){let F=null,b=null,M=n.length;const k=function(P,j){const K=M-P,he=M;M-=P;const be=r(K+1,he),ye=n[K],Ae=t?t(ye):ye;A(new ya(Ae,ye.node,j,null,be))},A=function(P){F?(F.left=P,F=P):(b=P,F=P)};for(let P=0;P<m.count;++P){const j=m.nextBitIsOne(),K=Math.pow(2,m.count-(P+1));j?k(K,ya.BLACK):(k(K,ya.BLACK),k(K,ya.RED))}return b}(new b0e(n.length));return new O1(i||e,h)};let pV;const Bd={};class ec{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(Bd&&Yn,"ChildrenNode.ts has not been loaded"),pV=pV||new ec({".priority":Bd},{".priority":Yn}),pV}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof O1?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==P3,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const a=t.getIterator(en.Wrap);let h,u=a.getNext();for(;u;)r=r||e.isDefinedOn(u.node),i.push(u),u=a.getNext();h=r?Nb(i,e.getCompare()):Bd;const m=e.toString(),F=Object.assign({},this.indexSet_);F[m]=e;const b=Object.assign({},this.indexes_);return b[m]=h,new ec(b,F)}addToIndexes(e,t){const i=(0,O.UI)(this.indexes_,(r,a)=>{const u=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(u,"Missing index implementation for "+a),r===Bd){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(en.Wrap);let F=m.getNext();for(;F;)F.name!==e.name&&h.push(F),F=m.getNext();return h.push(e),Nb(h,u.getCompare())}return Bd}{const h=t.get(e.name);let m=r;return h&&(m=m.remove(new en(e.name,h))),m.insert(e,e.node)}});return new ec(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,O.UI)(this.indexes_,r=>{if(r===Bd)return r;{const a=t.get(e.name);return a?r.remove(new en(e.name,a)):r}});return new ec(i,this.indexSet_)}}let Kp,Rt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&aK(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kp||(Kp=new n(new O1(hV),null,ec.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kp}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?Kp:i}}getChild(t){const i=Kt(t);return null===i?this:this.getImmediateChild(i).getChild(zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,O.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new en(t,i);let a,u;i.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(r,this.children_)):(a=this.children_.insert(t,i),u=this.indexMap_.addToIndexes(r,this.children_));const h=a.isEmpty()?Kp:this.priorityNode_;return new n(a,h,u)}}updateChild(t,i){const r=Kt(t);if(null===r)return i;{(0,O.hu)(".priority"!==Kt(t)||1===Kl(t),".priority must be the last token in a path");const a=this.getImmediateChild(r).updateChild(zn(t),i);return this.updateImmediateChild(r,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,a=0,u=!0;if(this.forEachChild(Yn,(h,m)=>{i[h]=m.val(t),r++,u&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):u=!1}),!t&&u&&a<2*r){const h=[];for(const m in i)h[m]=i[m];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+oK(this.getPriority().val())+":"),this.forEachChild(Yn,(i,r)=>{const a=r.hash();""!==a&&(t+=":"+i+":"+a)}),this.lazyHash_=""===t?"":bZ(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const a=this.resolveIndex_(r);if(a){const u=a.getPredecessorKey(new en(t,i));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new en(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new en(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(a=>i(a.name,a.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,en.Wrap);let u=a.peek();for(;null!=u&&i.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let u=a.peek();for(;null!=u&&i.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yp?-1:0}withIndex(t){if(t===P3||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===P3||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Yn),a=i.getIterator(Yn);let u=r.getNext(),h=a.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=r.getNext(),h=a.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===P3?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Yp=new class extends Rt{constructor(){super(new O1(hV),Rt.EMPTY_NODE,ec.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Rt.EMPTY_NODE}isEmpty(){return!1}};function Di(n,e=null){if(null===n)return Rt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Hd(n,Di(e));if(n instanceof Array){let t=Rt.EMPTY_NODE;return $r(n,(i,r)=>{if((0,O.r3)(n,i)&&"."!==i.substring(0,1)){const a=Di(r);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(Di(e))}{const t=[];let i=!1;if($r(n,(u,h)=>{if("."!==u.substring(0,1)){const m=Di(h);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new en(u,m)))}}),0===t.length)return Rt.EMPTY_NODE;const a=Nb(t,C0e,u=>u.name,hV);if(i){const u=Nb(t,Yn.getCompare());return new Rt(a,Di(e),new ec({".priority":u},{".priority":Yn}))}return new Rt(a,Di(e),ec.Default)}}Object.defineProperties(en,{MIN:{value:new en(X4,Rt.EMPTY_NODE)},MAX:{value:new en(L3,Yp)}}),sK.__EMPTY_NODE=Rt.EMPTY_NODE,Hd.__childrenNodeConstructor=Rt,function(n){fV=n}(Yp),function(n){uK=n}(Yp),function(n){lK=n}(Di);class mV extends Db{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Yt(e)&&".priority"!==Kt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),a=i.compareTo(r);return 0===a?S6(e.name,t.name):a}makePost(e,t){const i=Di(e),r=Rt.EMPTY_NODE.updateChild(this.indexPath_,i);return new en(t,r)}maxPost(){const e=Rt.EMPTY_NODE.updateChild(this.indexPath_,Yp);return new en(L3,e)}toString(){return Wp(this.indexPath_,0).join("/")}}const gV=new class extends Db{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?S6(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const i=Di(e);return new en(t,i)}toString(){return".value"}},jd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D0e=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const a=new Array(8);for(r=7;r>=0;r--)a[r]=jd.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)u+=jd.charAt(e[r]);return(0,O.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),fK=function(n){if(n===""+eV)return"-";const e=Eb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return L3;const a=jd.charAt(jd.indexOf(t[i])+1);return t[i]=a,t.slice(0,i+1).join("")},pK=function(n){if(n===""+kZ)return X4;const e=Eb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+eV:(delete t[t.length-1],t.join("")):(t[t.length-1]=jd.charAt(jd.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function mK(n){return{type:"value",snapshotNode:n}}function Ud(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Qp(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Jp(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class _V{constructor(e){this.index_=e}updateChild(e,t,i,r,a,u){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=u&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Qp(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Ud(t,i)):u.trackChildChange(Jp(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Yn,(r,a)=>{t.hasChild(r)||i.trackChildChange(Qp(r,a))}),t.isLeafNode()||t.forEachChild(Yn,(r,a)=>{if(e.hasChild(r)){const u=e.getImmediateChild(r);u.equals(a)||i.trackChildChange(Jp(r,a,u))}else i.trackChildChange(Ud(r,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Rt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Xp{constructor(e){this.indexedFilter_=new _V(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xp.getStartPost_(e),this.endPost_=Xp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,a,u){return this.matches(new en(t,i))||(i=Rt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,a,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Rt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Rt.EMPTY_NODE);const a=this;return t.forEachChild(Yn,(u,h)=>{a.matches(new en(u,h))||(r=r.updateImmediateChild(u,Rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class x0e{constructor(e){this.rangedFilter_=new Xp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,a,u){return this.rangedFilter_.matches(new en(t,i))||(i=Rt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,a,u):this.fullLimitUpdateChild_(e,t,i,a,u)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Rt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;r=Rt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;r=r.updateImmediateChild(h.name,h.node),u++}}else{let a,u,h,m;if(r=t.withIndex(this.index_),r=r.updatePriority(Rt.EMPTY_NODE),this.reverse_){m=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const M=this.index_.getCompare();h=(k,A)=>M(A,k)}else m=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let F=0,b=!1;for(;m.hasNext();){const M=m.getNext();!b&&h(a,M)<=0&&(b=!0),b&&F<this.limit_&&h(M,u)<=0?F++:r=r.updateImmediateChild(M.name,Rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,a){let u;if(this.reverse_){const M=this.index_.getCompare();u=(k,A)=>M(A,k)}else u=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const m=new en(t,i),F=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(h.hasChild(t)){const M=h.getImmediateChild(t);let k=r.getChildAfterChild(this.index_,F,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=r.getChildAfterChild(this.index_,k,this.reverse_);const A=null==k?1:u(k,m);if(b&&!i.isEmpty()&&A>=0)return null!=a&&a.trackChildChange(Jp(t,i,M)),h.updateImmediateChild(t,i);{null!=a&&a.trackChildChange(Qp(t,M));const j=h.updateImmediateChild(t,Rt.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=a&&a.trackChildChange(Ud(k.name,k.node)),j.updateImmediateChild(k.name,k.node)):j}}return i.isEmpty()?e:b&&u(F,m)>=0?(null!=a&&(a.trackChildChange(Qp(F.name,F.node)),a.trackChildChange(Ud(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(F.name,Rt.EMPTY_NODE)):e}}class Tb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:X4}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:L3}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yn}copy(){const e=new Tb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FV(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function yV(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function Ab(n,e){const t=n.copy();return t.index_=e,t}function gK(n){const e={};if(n.isDefault())return e;let t;return n.index_===Yn?t="$priority":n.index_===gV?t="$value":n.index_===P3?t="$key":((0,O.hu)(n.index_ instanceof mV,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function CK(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Yn&&(e.i=n.index_.toString()),e}class Ib extends QZ{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Bp("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=Ib.getListenId_(e,i),h={};this.listens_[u]=h;const m=gK(e._queryParams);this.restRequest_(a+".json",m,(F,b)=>{let M=b;if(404===F&&(M=null,F=null),null===F&&this.onDataUpdate_(a,M,!1,i),(0,O.DV)(this.listens_,u)===h){let k;k=F?401===F?"permission_denied":"rest_error:"+F:"ok",r(k,null)}})}unlisten(e,t){const i=Ib.getListenId_(e,t);delete this.listens_[i]}get(e){const t=gK(e._queryParams),i=e._path.toString(),r=new O.BH;return this.restRequest_(i+".json",t,(a,u)=>{let h=u;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(t.auth=r.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,O.cI)(h.responseText)}catch(F){s1("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,m)}else 401!==h.status&&404!==h.status&&s1("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}class P0e{constructor(){this.rootNode_=Rt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Lb(){return{value:null,children:new Map}}function Gd(n,e,t){if(Yt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=Kt(e);n.children.has(i)||n.children.set(i,Lb()),Gd(n.children.get(i),e=zn(e),t)}}function vV(n,e){if(Yt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Yn,(i,r)=>{Gd(n,new xn(i),r)}),vV(n,e)}}if(n.children.size>0){const t=Kt(e);return e=zn(e),n.children.has(t)&&vV(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function wV(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{wV(r,new xn(e.toString()+"/"+i),t)})}class O0e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&$r(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class H0e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new O0e(e);const i=1e4+2e4*Math.random();Up(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;$r(e,(r,a)=>{a>0&&(0,O.r3)(this.statsToReport_,r)&&(t[r]=a,i=!0)}),i&&this.server_.reportStats(t),Up(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var w2=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(w2||(w2={})),w2))();function MV(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Pb{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=w2.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Yt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new xn(e));return new Pb(En(),t,this.revert)}}return(0,O.hu)(Kt(this.path)===e,"operationForChild called for unrelated child."),new Pb(zn(this.path),this.affectedTree,this.revert)}}class em{constructor(e,t){this.source=e,this.path=t,this.type=w2.LISTEN_COMPLETE}operationForChild(e){return Yt(this.path)?new em(this.source,En()):new em(this.source,zn(this.path))}}class x6{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=w2.OVERWRITE}operationForChild(e){return Yt(this.path)?new x6(this.source,En(),this.snap.getImmediateChild(e)):new x6(this.source,zn(this.path),this.snap)}}class qd{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=w2.MERGE}operationForChild(e){if(Yt(this.path)){const t=this.children.subtree(new xn(e));return t.isEmpty()?null:t.value?new x6(this.source,En(),t.value):new qd(this.source,En(),t)}return(0,O.hu)(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qd(this.source,zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yl{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Kt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class B0e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tm(n,e,t,i,r,a){const u=i.filter(h=>h.type===t);u.sort((h,m)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const i=new en(e.childName,e.snapshotNode),r=new en(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,m)),u.forEach(h=>{const m=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);r.forEach(F=>{F.respondsTo(h.type)&&e.push(F.createEvent(m,n.query_))})})}function Vb(n,e){return{eventCache:n,serverCache:e}}function nm(n,e,t,i){return Vb(new Yl(e,t,i),n.serverCache)}function FK(n,e,t,i){return Vb(n.eventCache,new Yl(e,t,i))}function Ob(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function N6(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let SV;class Qn{constructor(e,t=(()=>(SV||(SV=new O1(Due)),SV))()){this.value=e,this.children=t}static fromObject(e){let t=new Qn(null);return $r(e,(i,r)=>{t=t.set(new xn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:En(),value:this.value};if(Yt(e))return null;{const i=Kt(e),r=this.children.get(i);if(null!==r){const a=r.findRootMostMatchingPathAndValue(zn(e),t);return null!=a?{path:Ci(new xn(i),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const t=Kt(e),i=this.children.get(t);return null!==i?i.subtree(zn(e)):new Qn(null)}}set(e,t){if(Yt(e))return new Qn(t,this.children);{const i=Kt(e),a=(this.children.get(i)||new Qn(null)).set(zn(e),t),u=this.children.insert(i,a);return new Qn(this.value,u)}}remove(e){if(Yt(e))return this.children.isEmpty()?new Qn(null):new Qn(null,this.children);{const t=Kt(e),i=this.children.get(t);if(i){const r=i.remove(zn(e));let a;return a=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&a.isEmpty()?new Qn(null):new Qn(this.value,a)}return this}}get(e){if(Yt(e))return this.value;{const t=Kt(e),i=this.children.get(t);return i?i.get(zn(e)):null}}setTree(e,t){if(Yt(e))return t;{const i=Kt(e),a=(this.children.get(i)||new Qn(null)).setTree(zn(e),t);let u;return u=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new Qn(this.value,u)}}fold(e){return this.fold_(En(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,a)=>{i[r]=a.fold_(Ci(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,En(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(Yt(e))return null;{const a=Kt(e),u=this.children.get(a);return u?u.findOnPath_(zn(e),Ci(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,En(),t)}foreachOnPath_(e,t,i){if(Yt(e))return this;{this.value&&i(t,this.value);const r=Kt(e),a=this.children.get(r);return a?a.foreachOnPath_(zn(e),Ci(t,r),i):new Qn(null)}}foreach(e){this.foreach_(En(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ci(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class va{constructor(e){this.writeTree_=e}static empty(){return new va(new Qn(null))}}function im(n,e,t){if(Yt(e))return new va(new Qn(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let a=i.value;const u=o1(r,e);return a=a.updateChild(u,t),new va(n.writeTree_.set(r,a))}{const r=new Qn(t),a=n.writeTree_.setTree(e,r);return new va(a)}}}function DV(n,e,t){let i=n;return $r(t,(r,a)=>{i=im(i,Ci(e,r),a)}),i}function yK(n,e){if(Yt(e))return va.empty();{const t=n.writeTree_.setTree(e,new Qn(null));return new va(t)}}function kV(n,e){return null!=T6(n,e)}function T6(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(o1(t.path,e)):null}function vK(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Yn,(i,r)=>{e.push(new en(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new en(i,r.value))}),e}function Ql(n,e){if(Yt(e))return n;{const t=T6(n,e);return new va(null!=t?new Qn(t):n.writeTree_.subtree(e))}}function xV(n){return n.writeTree_.isEmpty()}function $d(n,e){return wK(En(),n.writeTree_,e)}function wK(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,a)=>{".priority"===r?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):t=wK(Ci(n,r),a,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Ci(n,".priority"),i)),t}}function Rb(n,e){return DK(e,n)}function Y0e(n,e){if(n.snap)return v2(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&v2(Ci(n.path,t),e))return!0;return!1}function J0e(n){return n.visible}function bK(n,e,t){let i=va.empty();for(let r=0;r<n.length;++r){const a=n[r];if(e(a)){const u=a.path;let h;if(a.snap)v2(t,u)?(h=o1(t,u),i=im(i,h,a.snap)):v2(u,t)&&(h=o1(u,t),i=im(i,En(),a.snap.getChild(h)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(v2(t,u))h=o1(t,u),i=DV(i,h,a.children);else if(v2(u,t))if(h=o1(u,t),Yt(h))i=DV(i,En(),a.children);else{const m=(0,O.DV)(a.children,Kt(h));if(m){const F=m.getChild(zn(h));i=im(i,En(),F)}}}}}return i}function EK(n,e,t,i,r){if(i||r){const a=Ql(n.visibleWrites,e);return!r&&xV(a)?t:r||null!=t||kV(a,En())?$d(bK(n.allWrites,function(F){return(F.visible||r)&&(!i||!~i.indexOf(F.writeId))&&(v2(F.path,e)||v2(e,F.path))},e),t||Rt.EMPTY_NODE):null}{const a=T6(n.visibleWrites,e);if(null!=a)return a;{const u=Ql(n.visibleWrites,e);return xV(u)?t:null!=t||kV(u,En())?$d(u,t||Rt.EMPTY_NODE):null}}}function zb(n,e,t,i){return EK(n.writeTree,n.treePath,e,t,i)}function NV(n,e){return function(n,e,t){let i=Rt.EMPTY_NODE;const r=T6(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Yn,(a,u)=>{i=i.updateImmediateChild(a,u)}),i;if(t){const a=Ql(n.visibleWrites,e);return t.forEachChild(Yn,(u,h)=>{const m=$d(Ql(a,new xn(u)),h);i=i.updateImmediateChild(u,m)}),vK(a).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}return vK(Ql(n.visibleWrites,e)).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}(n.writeTree,n.treePath,e)}function MK(n,e,t,i){return function(n,e,t,i,r){(0,O.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const a=Ci(e,t);if(kV(n.visibleWrites,a))return null;{const u=Ql(n.visibleWrites,a);return xV(u)?r.getChild(t):$d(u,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Hb(n,e){return function(n,e){return T6(n.visibleWrites,e)}(n.writeTree,Ci(n.treePath,e))}function TV(n,e,t){return function(n,e,t,i){const r=Ci(e,t),a=T6(n.visibleWrites,r);return null!=a?a:i.isCompleteForChild(t)?$d(Ql(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function SK(n,e){return DK(Ci(n.treePath,e),n.writeTree)}function DK(n,e){return{treePath:n,writeTree:e}}class o6e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const a=r.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(i,Jp(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(i,Qp(i,r.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(i,Ud(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Jp(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const kK=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class AV{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Yl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TV(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:N6(this.viewCache_),a=function(n,e,t,i,r,a){return function(n,e,t,i,r,a,u){let h;const m=Ql(n.visibleWrites,e),F=T6(m,En());if(null!=F)h=F;else{if(null==t)return[];h=$d(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const b=[],M=u.getCompare(),k=a?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let A=k.getNext();for(;A&&b.length<r;)0!==M(A,i)&&b.push(A),A=k.getNext();return b}}(n.writeTree,n.treePath,e,t,i,r,a)}(this.writes_,r,t,1,i,e);return 0===a.length?null:a[0]}}function xK(n,e,t,i,r,a){const u=e.eventCache;if(null!=Hb(i,t))return e;{let h,m;if(Yt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const F=N6(e),M=NV(i,F instanceof Rt?F:Rt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),M,a)}else{const F=zb(i,N6(e));h=n.filter.updateFullNode(e.eventCache.getNode(),F,a)}else{const F=Kt(t);if(".priority"===F){(0,O.hu)(1===Kl(t),"Can't have a priority with additional path components");const b=u.getNode();m=e.serverCache.getNode();const M=MK(i,t,b,m);h=null!=M?n.filter.updatePriority(b,M):u.getNode()}else{const b=zn(t);let M;if(u.isCompleteForChild(F)){m=e.serverCache.getNode();const k=MK(i,t,u.getNode(),m);M=null!=k?u.getNode().getImmediateChild(F).updateChild(b,k):u.getNode().getImmediateChild(F)}else M=TV(i,F,e.serverCache);h=null!=M?n.filter.updateChild(u.getNode(),F,M,b,r,a):u.getNode()}}return nm(e,h,u.isFullyInitialized()||Yt(t),n.filter.filtersNodes())}}function Bb(n,e,t,i,r,a,u,h){const m=e.serverCache;let F;const b=u?n.filter:n.filter.getIndexedFilter();if(Yt(t))F=b.updateFullNode(m.getNode(),i,null);else if(b.filtersNodes()&&!m.isFiltered()){const A=m.getNode().updateChild(t,i);F=b.updateFullNode(m.getNode(),A,null)}else{const A=Kt(t);if(!m.isCompleteForPath(t)&&Kl(t)>1)return e;const P=zn(t),K=m.getNode().getImmediateChild(A).updateChild(P,i);F=".priority"===A?b.updatePriority(m.getNode(),K):b.updateChild(m.getNode(),A,K,P,kK,null)}const M=FK(e,F,m.isFullyInitialized()||Yt(t),b.filtersNodes());return xK(n,M,t,r,new AV(r,M,a),h)}function IV(n,e,t,i,r,a,u){const h=e.eventCache;let m,F;const b=new AV(r,e,a);if(Yt(t))F=n.filter.updateFullNode(e.eventCache.getNode(),i,u),m=nm(e,F,!0,n.filter.filtersNodes());else{const M=Kt(t);if(".priority"===M)F=n.filter.updatePriority(e.eventCache.getNode(),i),m=nm(e,F,h.isFullyInitialized(),h.isFiltered());else{const k=zn(t),A=h.getNode().getImmediateChild(M);let P;if(Yt(k))P=i;else{const j=b.getCompleteChild(M);P=null!=j?".priority"===lV(k)&&j.getChild(tK(k)).isEmpty()?j:j.updateChild(k,i):Rt.EMPTY_NODE}m=A.equals(P)?e:nm(e,n.filter.updateChild(h.getNode(),M,P,k,b,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function NK(n,e){return n.eventCache.isCompleteForChild(e)}function TK(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function LV(n,e,t,i,r,a,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let F,m=e;F=Yt(t)?i:new Qn(null).setTree(t,i);const b=e.serverCache.getNode();return F.children.inorderTraversal((M,k)=>{if(b.hasChild(M)){const P=TK(0,e.serverCache.getNode().getImmediateChild(M),k);m=Bb(n,m,new xn(M),P,r,a,u,h)}}),F.children.inorderTraversal((M,k)=>{const A=!e.serverCache.isCompleteForChild(M)&&void 0===k.value;if(!b.hasChild(M)&&!A){const j=TK(0,e.serverCache.getNode().getImmediateChild(M),k);m=Bb(n,m,new xn(M),j,r,a,u,h)}}),m}class g6e{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new _V(i.getIndex()),a=function(n){return n.loadsAllData()?new _V(n.getIndex()):n.hasLimit()?new x0e(n):new Xp(n)}(i);this.processor_=function(n){return{filter:n}}(a);const u=t.serverCache,h=t.eventCache,m=r.updateFullNode(Rt.EMPTY_NODE,u.getNode(),null),F=a.updateFullNode(Rt.EMPTY_NODE,h.getNode(),null),b=new Yl(m,u.isFullyInitialized(),r.filtersNodes()),M=new Yl(F,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Vb(M,b),this.eventGenerator_=new B0e(this.query_)}get query(){return this.query_}}function F6e(n,e){const t=N6(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Yt(e)&&!t.getImmediateChild(Kt(e)).isEmpty())?t.getChild(e):null}function AK(n){return 0===n.eventRegistrations_.length}function IK(n,e,t){const i=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,r);u&&i.push(u)})}if(e){let r=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(a+1));break}}else r.push(u)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function LK(n,e,t,i){e.type===w2.MERGE&&null!==e.source.queryId&&((0,O.hu)(N6(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(Ob(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,a=function(n,e,t,i,r){const a=new o6e;let u,h;if(t.type===w2.OVERWRITE){const F=t;F.source.fromUser?u=IV(n,e,F.path,F.snap,i,r,a):((0,O.hu)(F.source.fromServer,"Unknown source."),h=F.source.tagged||e.serverCache.isFiltered()&&!Yt(F.path),u=Bb(n,e,F.path,F.snap,i,r,h,a))}else if(t.type===w2.MERGE){const F=t;F.source.fromUser?u=function(n,e,t,i,r,a,u){let h=e;return i.foreach((m,F)=>{const b=Ci(t,m);NK(e,Kt(b))&&(h=IV(n,h,b,F,r,a,u))}),i.foreach((m,F)=>{const b=Ci(t,m);NK(e,Kt(b))||(h=IV(n,h,b,F,r,a,u))}),h}(n,e,F.path,F.children,i,r,a):((0,O.hu)(F.source.fromServer,"Unknown source."),h=F.source.tagged||e.serverCache.isFiltered(),u=LV(n,e,F.path,F.children,i,r,h,a))}else if(t.type===w2.ACK_USER_WRITE){const F=t;u=F.revert?function(n,e,t,i,r,a){let u;if(null!=Hb(i,t))return e;{const h=new AV(i,e,r),m=e.eventCache.getNode();let F;if(Yt(t)||".priority"===Kt(t)){let b;if(e.serverCache.isFullyInitialized())b=zb(i,N6(e));else{const M=e.serverCache.getNode();(0,O.hu)(M instanceof Rt,"serverChildren would be complete if leaf node"),b=NV(i,M)}b=b,F=n.filter.updateFullNode(m,b,a)}else{const b=Kt(t);let M=TV(i,b,e.serverCache);null==M&&e.serverCache.isCompleteForChild(b)&&(M=m.getImmediateChild(b)),F=null!=M?n.filter.updateChild(m,b,M,zn(t),h,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,Rt.EMPTY_NODE,zn(t),h,a):m,F.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=zb(i,N6(e)),u.isLeafNode()&&(F=n.filter.updateFullNode(F,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=Hb(i,En()),nm(e,F,u,n.filter.filtersNodes())}}(n,e,F.path,i,r,a):function(n,e,t,i,r,a,u){if(null!=Hb(r,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=i.value){if(Yt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Bb(n,e,t,m.getNode().getChild(t),r,a,h,u);if(Yt(t)){let F=new Qn(null);return m.getNode().forEachChild(P3,(b,M)=>{F=F.set(new xn(b),M)}),LV(n,e,t,F,r,a,h,u)}return e}{let F=new Qn(null);return i.foreach((b,M)=>{const k=Ci(t,b);m.isCompleteForPath(k)&&(F=F.set(b,m.getNode().getChild(k)))}),LV(n,e,t,F,r,a,h,u)}}(n,e,F.path,F.affectedTree,i,r,a)}else{if(t.type!==w2.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);u=function(n,e,t,i,r){const a=e.serverCache;return xK(n,FK(e,a.getNode(),a.isFullyInitialized()||Yt(t),a.isFiltered()),t,i,kK,r)}(n,e,t.path,i,a)}const m=a.getChanges();return function(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=Ob(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(mK(Ob(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,r,e,t,i);return function(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,PK(n,a.changes,a.viewCache.eventCache.getNode(),null)}function PK(n,e,t,i){return function(n,e,t,i){const r=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),tm(n,r,"child_removed",e,i,t),tm(n,r,"child_added",e,i,t),tm(n,r,"child_moved",a,i,t),tm(n,r,"child_changed",e,i,t),tm(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let jb,Gb;class VK{constructor(){this.views=new Map}}function PV(n,e,t,i){const r=e.source.queryId;if(null!==r){const a=n.views.get(r);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),LK(a,e,t,i)}{let a=[];for(const u of n.views.values())a=a.concat(LK(u,e,t,i));return a}}function OK(n,e,t,i,r){const u=n.views.get(e._queryIdentifier);if(!u){let h=zb(t,r?i:null),m=!1;h?m=!0:i instanceof Rt?(h=NV(t,i),m=!1):(h=Rt.EMPTY_NODE,m=!1);const F=Vb(new Yl(h,m,!1),new Yl(i,r,!1));return new g6e(e,F)}return u}function RK(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jl(n,e){let t=null;for(const i of n.views.values())t=t||F6e(i,e);return t}function zK(n,e){return e._queryParams.loadsAllData()?Ub(n):n.views.get(e._queryIdentifier)}function HK(n,e){return null!=zK(n,e)}function Xl(n){return null!=Ub(n)}function Ub(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let x6e=1;class BK{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qn(null),this.pendingWriteTree_={visibleWrites:va.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VV(n,e,t,i,r){return function(n,e,t,i,r){(0,O.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=im(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Wd(n,new x6({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function eu(n,e,t=!1){const i=function(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,a=!1,u=n.allWrites.length-1;for(;r&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&Y0e(h,i.path)?r=!1:v2(i.path,h.path)&&(a=!0)),u--}return!!r&&(a?(function(n){n.visibleWrites=bK(n.allWrites,J0e,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=yK(n.visibleWrites,i.path):$r(i.children,m=>{n.visibleWrites=yK(n.visibleWrites,Ci(i.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Qn(null);return null!=i.snap?a=a.set(En(),!0):$r(i.children,u=>{a=a.set(new xn(u),!0)}),Wd(n,new Pb(i.path,a,t))}return[]}function rm(n,e,t){return Wd(n,new x6({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function OV(n,e,t,i){const r=e._path,a=n.syncPointTree_.get(r);let u=[];if(a&&("default"===e._queryIdentifier||HK(a,e))){const h=function(n,e,t,i){const r=e._queryIdentifier,a=[];let u=[];const h=Xl(n);if("default"===r)for(const[m,F]of n.views.entries())u=u.concat(IK(F,t,i)),AK(F)&&(n.views.delete(m),F.query._queryParams.loadsAllData()||a.push(F.query));else{const m=n.views.get(r);m&&(u=u.concat(IK(m,t,i)),AK(m)&&(n.views.delete(r),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Xl(n)&&a.push(new((0,O.hu)(jb,"Reference.ts has not been loaded"),jb)(e._repo,e._path)),{removed:a,events:u}}(a,e,t,i);(function(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const m=h.removed;u=h.events;const F=-1!==m.findIndex(M=>M._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(r,(M,k)=>Xl(k));if(F&&!b){const M=n.syncPointTree_.subtree(r);if(!M.isEmpty()){const k=function(n){return n.fold((e,t,i)=>{if(t&&Xl(t))return[Ub(t)];{let r=[];return t&&(r=RK(t)),$r(i,(a,u)=>{r=r.concat(u)}),r}})}(M);for(let A=0;A<k.length;++A){const P=k[A],j=P.query,K=qK(n,P);n.listenProvider_.startListening(sm(j),$b(n,j),K.hashFn,K.onComplete)}}}if(!b&&m.length>0&&!i)if(F){const M=null;n.listenProvider_.stopListening(sm(e),M)}else m.forEach(M=>{const k=n.queryToTagMap.get(Wb(M));n.listenProvider_.stopListening(sm(M),k)});!function(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Wb(i),a=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(a)}}}(n,m)}return u}function jK(n,e,t){const i=e._path;let r=null,a=!1;n.syncPointTree_.foreachOnPath(i,(M,k)=>{const A=o1(M,i);r=r||Jl(k,A),a=a||Xl(k)});let h,u=n.syncPointTree_.get(i);u?(a=a||Xl(u),r=r||Jl(u,En())):(u=new VK,n.syncPointTree_=n.syncPointTree_.set(i,u)),null!=r?h=!0:(h=!1,r=Rt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((k,A)=>{const P=Jl(A,En());P&&(r=r.updateImmediateChild(k,P))}));const m=HK(u,e);if(!m&&!e._queryParams.loadsAllData()){const M=Wb(e);(0,O.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const k=x6e++;n.queryToTagMap.set(M,k),n.tagToQueryMap.set(k,M)}let b=function(n,e,t,i,r,a){const u=OK(n,e,i,r,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function(n,e){n.eventRegistrations_.push(e)}(u,t),function(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Yn,(a,u)=>{i.push(Ud(a,u))}),t.isFullyInitialized()&&i.push(mK(t.getNode())),PK(n,i,t.getNode(),e)}(u,t)}(u,e,t,Rb(n.pendingWriteTree_,i),r,h);if(!m&&!a){const M=zK(u,e);b=b.concat(function(n,e,t){const i=e._path,r=$b(n,e),a=qK(n,t),u=n.listenProvider_.startListening(sm(e),r,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,O.hu)(!Xl(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((F,b,M)=>{if(!Yt(F)&&b&&Xl(b))return[Ub(b).query];{let k=[];return b&&(k=k.concat(RK(b).map(A=>A.query))),$r(M,(A,P)=>{k=k.concat(P)}),k}});for(let F=0;F<m.length;++F){const b=m[F];n.listenProvider_.stopListening(sm(b),$b(n,b))}}return u}(n,e,M))}return b}function qb(n,e,t){const r=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,h)=>{const F=Jl(h,o1(u,e));if(F)return F});return EK(r,e,a,t,!0)}function Wd(n,e){return UK(e,n.syncPointTree_,null,Rb(n.pendingWriteTree_,En()))}function UK(n,e,t,i){if(Yt(n.path))return GK(n,e,t,i);{const r=e.get(En());null==t&&null!=r&&(t=Jl(r,En()));let a=[];const u=Kt(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const F=t?t.getImmediateChild(u):null,b=SK(i,u);a=a.concat(UK(h,m,F,b))}return r&&(a=a.concat(PV(r,n,i,t))),a}}function GK(n,e,t,i){const r=e.get(En());null==t&&null!=r&&(t=Jl(r,En()));let a=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,F=SK(i,u),b=n.operationForChild(u);b&&(a=a.concat(GK(b,h,m,F)))}),r&&(a=a.concat(PV(r,n,i,t))),a}function qK(n,e){const t=e.query,i=$b(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Rt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function(n,e,t){const i=RV(n,t);if(i){const r=zV(i),a=r.path,u=r.queryId,h=o1(a,e);return HV(n,a,new em(MV(u),h))}return[]}(n,t._path,i):function(n,e){return Wd(n,new em({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return OV(n,t,null,a)}}}}function $b(n,e){const t=Wb(e);return n.queryToTagMap.get(t)}function Wb(n){return n._path.toString()+"$"+n._queryIdentifier}function RV(n,e){return n.tagToQueryMap.get(e)}function zV(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new xn(n.substr(0,e))}}function HV(n,e,t){const i=n.syncPointTree_.get(e);return(0,O.hu)(i,"Missing sync point for query tag that we're tracking"),PV(i,t,Rb(n.pendingWriteTree_,e),null)}function sm(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,O.hu)(Gb,"Reference.ts has not been loaded"),Gb)(n._repo,n._path):n}class BV{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new BV(t)}node(){return this.node_}}class jV{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ci(this.path_,e);return new jV(this.syncTree_,t)}node(){return qb(this.syncTree_,this.path_)}}const $K=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?j6e(n[".sv"],e,t):"object"==typeof n[".sv"]?U6e(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},j6e=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,O.hu)(!1,"Unexpected server value: "+n)}},U6e=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,O.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,O.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const u=r.getValue();return"number"!=typeof u?i:u+i},WK=function(n,e,t,i){return GV(e,new jV(t,n),i)},UV=function(n,e,t){return GV(n,new BV(e),t)};function GV(n,e,t){const i=n.getPriority().val(),r=$K(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,h=$K(u.getValue(),e,t);return h!==u.getValue()||r!==u.getPriority().val()?new Hd(h,Di(r)):n}{const u=n;return a=u,r!==u.getPriority().val()&&(a=a.updatePriority(new Hd(r))),u.forEachChild(Yn,(h,m)=>{const F=GV(m,e.getImmediateChild(h),t);F!==m&&(a=a.updateImmediateChild(h,F))}),a}}class qV{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Zb(n,e){let t=e instanceof xn?e:new xn(e),i=n,r=Kt(t);for(;null!==r;){const a=(0,O.DV)(i.node.children,r)||{children:{},childCount:0};i=new qV(r,i,a),t=zn(t),r=Kt(t)}return i}function A6(n){return n.node.value}function $V(n,e){n.node.value=e,WV(n)}function ZK(n){return n.node.childCount>0}function Kb(n,e){$r(n.node.children,(t,i)=>{e(new qV(t,n,i))})}function KK(n,e,t,i){t&&!i&&e(n),Kb(n,r=>{KK(r,e,!0,i)}),t&&i&&e(n)}function om(n){return new xn(null===n.parent?n.name:om(n.parent)+"/"+n.name)}function WV(n){null!==n.parent&&function(n,e,t){const i=function(n){return void 0===A6(n)&&!ZK(n)}(t),r=(0,O.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,WV(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,WV(n))}(n.parent,n.name,n)}const W6e=/[\[\].#$\/\u0000-\u001F\u007F]/,Z6e=/[\[\].#$\u0000-\u001F\u007F]/,ZV=10485760,Yb=function(n){return"string"==typeof n&&0!==n.length&&!W6e.test(n)},YK=function(n){return"string"==typeof n&&0!==n.length&&!Z6e.test(n)},am=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!bb(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},V3=function(n,e,t,i){i&&void 0===e||cm((0,O.gK)(n,"value"),e,t)},cm=function(n,e,t){const i=t instanceof xn?new c0e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+D6(i));if("function"==typeof e)throw new Error(n+"contains a function "+D6(i)+" with contents = "+e.toString());if(bb(e))throw new Error(n+"contains "+e.toString()+" "+D6(i));if("string"==typeof e&&e.length>ZV/3&&(0,O.ug)(e)>ZV)throw new Error(n+"contains a string greater than "+ZV+" utf8 bytes "+D6(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,a=!1;if($r(e,(u,h)=>{if(".value"===u)r=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!Yb(u)))throw new Error(n+" contains an invalid key ("+u+") "+D6(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),nK(n)})(i,u),cm(n,h,i),function(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&a)throw new Error(n+' contains ".value" child '+D6(i)+" in addition to actual children.")}},QK=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];$r(e,(u,h)=>{const m=new xn(u);if(cm(r,h,Ci(t,m)),".priority"===lV(m)&&!am(h))throw new Error(r+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=Wp(i);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!Yb(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(a0e);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&v2(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,a)},KV=function(n,e,t){if(!t||void 0!==e){if(bb(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!am(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lm=function(n,e,t,i){if(!(i&&void 0===t||Yb(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},um=function(n,e,t,i){if(!(i&&void 0===t||YK(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},b2=function(n,e){if(".info"===Kt(e))throw new Error(n+" failed = Can't modify data under /.info/")},JK=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Yb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YK(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class J6e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qb(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],a=r.getPath();null!==t&&!uV(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(r)}t&&n.eventLists_.push(t)}function YV(n,e,t){Qb(n,t),XK(n,i=>uV(i,e))}function E2(n,e,t){Qb(n,t),XK(n,i=>v2(i,e)||v2(e,i))}function XK(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(X6e(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function X6e(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();M6&&qr("event: "+t.toString()),Rd(i)}}}const eY="repo_interrupt";class t5e{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new J6e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lb(),this.transactionQueueTree_=new qV,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tY(n){const t=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dm(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:tY(n)})}function nY(n,e,t,i,r){n.dataUpdateCount++;const a=new xn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(r)if(i){const m=(0,O.UI)(t,F=>Di(F));u=function(n,e,t,i){const r=RV(n,i);if(r){const a=zV(r),u=a.path,h=a.queryId,m=o1(u,e),F=Qn.fromObject(t);return HV(n,u,new qd(MV(h),m,F))}return[]}(n.serverSyncTree_,a,m,r)}else{const m=Di(t);u=function(n,e,t,i){const r=RV(n,i);if(null!=r){const a=zV(r),u=a.path,h=a.queryId,m=o1(u,e);return HV(n,u,new x6(MV(h),m,t))}return[]}(n.serverSyncTree_,a,m,r)}else if(i){const m=(0,O.UI)(t,F=>Di(F));u=function(n,e,t){const i=Qn.fromObject(t);return Wd(n,new qd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,a,m)}else{const m=Di(t);u=rm(n.serverSyncTree_,a,m)}let h=a;u.length>0&&(h=Kd(n,a)),E2(n.eventQueue_,h,u)}function iY(n,e){QV(n,"connected",e),!1===e&&function(n){Zd(n,"onDisconnectEvents");const e=dm(n),t=Lb();wV(n.onDisconnect_,En(),(r,a)=>{const u=WK(r,a,n.serverSyncTree_,e);Gd(t,r,u)});let i=[];wV(t,En(),(r,a)=>{i=i.concat(rm(n.serverSyncTree_,r,a));const u=tO(n,r);Kd(n,u)}),n.onDisconnect_=Lb(),E2(n.eventQueue_,En(),i)}(n)}function QV(n,e,t){const i=new xn("/.info/"+e),r=Di(t);n.infoData_.updateSnapshot(i,r);const a=rm(n.infoSyncTree_,i,r);E2(n.eventQueue_,i,a)}function Jb(n){return n.nextWriteId_++}function JV(n,e,t,i,r){Zd(n,"set",{path:e.toString(),value:t,priority:i});const a=dm(n),u=Di(t,i),h=qb(n.serverSyncTree_,e),m=UV(u,h,a),F=Jb(n),b=VV(n.serverSyncTree_,e,m,F,!0);Qb(n.eventQueue_,b),n.server_.put(e.toString(),u.val(!0),(k,A)=>{const P="ok"===k;P||s1("set at "+e+" failed: "+k);const j=eu(n.serverSyncTree_,F,!P);E2(n.eventQueue_,e,j),tu(0,r,k,A)});const M=tO(n,e);Kd(n,M),E2(n.eventQueue_,M,[])}function a5e(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&vV(n.onDisconnect_,e),tu(0,t,i,r)})}function rY(n,e,t,i){const r=Di(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(a,u)=>{"ok"===a&&Gd(n.onDisconnect_,e,r),tu(0,i,a,u)})}function XV(n,e,t){let i;i=".info"===Kt(e._path)?OV(n.infoSyncTree_,e,t):OV(n.serverSyncTree_,e,t),YV(n.eventQueue_,e._path,i)}function sY(n){n.persistentConnection_&&n.persistentConnection_.interrupt(eY)}function Zd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),qr(t,...e)}function tu(n,e,t,i){e&&Rd(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let a=r;i&&(a+=": "+i);const u=new Error(a);u.code=r,e(u)}})}function eO(n,e,t){return qb(n.serverSyncTree_,e,t)||Rt.EMPTY_NODE}function Xb(n,e=n.transactionQueueTree_){if(e||eE(n,e),A6(e)){const t=aY(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function(n,e,t){const i=t.map(F=>F.currentWriteId),r=eO(n,e,i);let a=r;const u=r.hash();for(let F=0;F<t.length;F++){const b=t[F];(0,O.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const M=o1(e,b.path);a=a.updateChild(M,b.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,F=>{Zd(n,"transaction put response",{path:m.toString(),status:F});let b=[];if("ok"===F){const M=[];for(let k=0;k<t.length;k++)t[k].status=2,b=b.concat(eu(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&M.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();eE(n,Zb(n.transactionQueueTree_,e)),Xb(n,n.transactionQueueTree_),E2(n.eventQueue_,e,b);for(let k=0;k<M.length;k++)Rd(M[k])}else{if("datastale"===F)for(let M=0;M<t.length;M++)t[M].status=3===t[M].status?4:0;else{s1("transaction at "+m.toString()+" failed: "+F);for(let M=0;M<t.length;M++)t[M].status=4,t[M].abortReason=F}Kd(n,e)}},u)}(n,om(e),t)}else ZK(e)&&Kb(e,t=>{Xb(n,t)})}function Kd(n,e){const t=oY(n,e),i=om(t);return function(n,e,t){if(0===e.length)return;const i=[];let r=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],F=o1(t,m.path);let M,b=!1;if((0,O.hu)(null!==F,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,M=m.abortReason,r=r.concat(eu(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)b=!0,M="maxretry",r=r.concat(eu(n.serverSyncTree_,m.currentWriteId,!0));else{const k=eO(n,m.path,u);m.currentInputSnapshot=k;const A=e[h].update(k.val());if(void 0!==A){cm("transaction failed: Data returned ",A,m.path);let P=Di(A);"object"==typeof A&&null!=A&&(0,O.r3)(A,".priority")||(P=P.updatePriority(k.getPriority()));const K=m.currentWriteId,he=dm(n),be=UV(P,k,he);m.currentOutputSnapshotRaw=P,m.currentOutputSnapshotResolved=be,m.currentWriteId=Jb(n),u.splice(u.indexOf(K),1),r=r.concat(VV(n.serverSyncTree_,m.path,be,m.currentWriteId,m.applyLocally)),r=r.concat(eu(n.serverSyncTree_,K,!0))}else b=!0,M="nodata",r=r.concat(eu(n.serverSyncTree_,m.currentWriteId,!0))}E2(n.eventQueue_,t,r),r=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===M?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(M),!1,null)))}eE(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Rd(i[h]);Xb(n,n.transactionQueueTree_)}(n,aY(n,t),i),i}function oY(n,e){let t,i=n.transactionQueueTree_;for(t=Kt(e);null!==t&&void 0===A6(i);)i=Zb(i,t),t=Kt(e=zn(e));return i}function aY(n,e){const t=[];return cY(n,e,t),t.sort((i,r)=>i.order-r.order),t}function cY(n,e,t){const i=A6(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Kb(e,r=>{cY(n,r,t)})}function eE(n,e){const t=A6(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,$V(e,t.length>0?t:void 0)}Kb(e,i=>{eE(n,i)})}function tO(n,e){const t=om(oY(n,e)),i=Zb(n.transactionQueueTree_,e);return function(n,e,t){let i=n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{nO(n,r)}),nO(n,i),KK(i,r=>{nO(n,r)}),t}function nO(n,e){const t=A6(e);if(t){const i=[];let r=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,O.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,O.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),r=r.concat(eu(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?$V(e,void 0):t.length=a+1,E2(n.eventQueue_,om(e),r);for(let u=0;u<i.length;u++)Rd(i[u])}}const iO=function(n,e){const t=C5e(n),i=t.namespace;return"firebase.com"===t.domain&&I3(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&I3("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&s1("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nV(t.host,t.secure,i,e,"ws"===t.scheme||"wss"===t.scheme,"",i!==t.subdomain),path:new xn(t.pathString)}},C5e=function(n){let e="",t="",i="",r="",a="",u=!0,h="https",m=443;if("string"==typeof n){let F=n.indexOf("//");F>=0&&(h=n.substring(0,F-1),n=n.substring(F+2));let b=n.indexOf("/");-1===b&&(b=n.length);let M=n.indexOf("?");-1===M&&(M=n.length),e=n.substring(0,Math.min(b,M)),b<M&&(r=function(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(a){}e+="/"+r}return e}(n.substring(b,M)));const k=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):s1(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,M)));F=e.indexOf(":"),F>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(F+1),10)):F=e.length;const A=e.slice(0,F);if("localhost"===A.toLowerCase())t="localhost";else if(A.split(".").length<=2)t=A;else{const P=e.indexOf(".");i=e.substring(0,P).toLowerCase(),t=e.substring(P+1),a=i}"ns"in k&&(a=k.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:u,scheme:h,pathString:r,namespace:a}};class lY{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class uY{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class dY{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class hY{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return a5e(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){b2("OnDisconnect.remove",this._path);const e=new O.BH;return rY(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){b2("OnDisconnect.set",this._path),V3("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return rY(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){b2("OnDisconnect.setWithPriority",this._path),V3("OnDisconnect.setWithPriority",e,this._path,!1),KV("OnDisconnect.setWithPriority",t,!1);const i=new O.BH;return function(n,e,t,i,r){const a=Di(t,i);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,h)=>{"ok"===u&&Gd(n.onDisconnect_,e,a),tu(0,r,u,h)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){b2("OnDisconnect.update",this._path),QK("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function(n,e,t,i){if((0,O.xb)(t))return qr("onDisconnect().update() called with empty data.  Don't do anything."),void tu(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,a)=>{"ok"===r&&$r(t,(u,h)=>{const m=Di(h);Gd(n.onDisconnect_,Ci(e,u),m)}),tu(0,i,r,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class R1{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Yt(this._path)?null:lV(this._path)}get ref(){return new M2(this._repo,this._path)}get _queryIdentifier(){const e=CK(this._queryParams),t=XP(e);return"{}"===t?"default":t}get _queryObject(){return CK(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof R1))return!1;const t=this._repo===e._repo,i=uV(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tE(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function nu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===P3){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==X4)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==L3)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===Yn){if(null!=e&&!am(e)||null!=t&&!am(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof mV||n.getIndex()===gV,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nE(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class M2 extends R1{constructor(e,t){super(e,t,new Tb,!1)}get parent(){const e=tK(this._path);return null===e?null:new M2(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class I6{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new xn(e),i=L6(this.ref,e);return new I6(this._node.getChild(t),i,Yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new I6(r,L6(this.ref,i),Yn)))}hasChild(e){const t=new xn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fY(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?L6(n._root,e):n._root}function pY(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=iO(e,n._repo.repoInfo_.nodeAdmin);JK("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&I3("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),fY(n,t.path.toString())}function L6(n,e){return null===Kt((n=(0,O.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),um("child","path",t,!1)):um("child","path",e,!1),new M2(n._repo,Ci(n._path,e));var t}function rO(n,e){n=(0,O.m9)(n),b2("set",n._path),V3("set",e,n._path,!1);const t=new O.BH;return JV(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function w5e(n,e){QK("update",e,n._path,!1);const t=new O.BH;return function(n,e,t,i){Zd(n,"update",{path:e.toString(),value:t});let r=!0;const a=dm(n),u={};if($r(t,(h,m)=>{r=!1,u[h]=WK(Ci(e,h),Di(m),n.serverSyncTree_,a)}),r)qr("update() called with empty data.  Don't do anything."),tu(0,i,"ok",void 0);else{const h=Jb(n),m=function(n,e,t,i){!function(n,e,t,i){(0,O.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=DV(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=Qn.fromObject(t);return Wd(n,new qd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,u,h);Qb(n.eventQueue_,m),n.server_.merge(e.toString(),t,(F,b)=>{const M="ok"===F;M||s1("update at "+e+" failed: "+F);const k=eu(n.serverSyncTree_,h,!M),A=k.length>0?Kd(n,e):e;E2(n.eventQueue_,A,k),tu(0,i,F,b)}),$r(t,F=>{const b=tO(n,Ci(e,F));Kd(n,b)}),E2(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function b5e(n){return function(n,e){const t=function(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(F,b)=>{const M=o1(F,t);i=i||Jl(b,M)});let r=n.syncPointTree_.get(t);r?i=i||Jl(r,En()):(r=new VK,n.syncPointTree_=n.syncPointTree_.set(t,r));const a=null!=i,u=a?new Yl(i,!0,!1):null;return function(n){return Ob(n.viewCache_)}(OK(r,e,Rb(n.pendingWriteTree_,e._path),a?u.getNode():Rt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(i=>{const r=Di(i).withIndex(e._queryParams.getIndex()),a=rm(n.serverSyncTree_,e._path,r);return YV(n.eventQueue_,e._path,a),Promise.resolve(r)},i=>(Zd(n,"get for query "+(0,O.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,O.m9)(n))._repo,n).then(e=>new I6(e,new M2(n._repo,n._path),n._queryParams.getIndex()))}class iE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new lY("value",this,new I6(e.snapshotNode,new M2(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uY(this,e,t):null}matches(e){return e instanceof iE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class rE{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new uY(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const i=L6(new M2(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new lY(e.type,this,new I6(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof rE&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function hm(n,e,t,i,r){let a;if("object"==typeof i&&(a=void 0,r=i),"function"==typeof i&&(a=i),r&&r.onlyOnce){const m=t,F=(b,M)=>{XV(n._repo,n,h),m(b,M)};F.userCallback=t.userCallback,F.context=t.context,t=F}const u=new dY(t,a||void 0),h="value"===e?new iE(u):new rE(e,u);return function(n,e,t){let i;i=".info"===Kt(e._path)?jK(n.infoSyncTree_,e,t):jK(n.serverSyncTree_,e,t),YV(n.eventQueue_,e._path,i)}(n._repo,n,h),()=>XV(n._repo,n,h)}function sO(n,e,t,i){return hm(n,"value",e,t,i)}function mY(n,e,t,i){return hm(n,"child_added",e,t,i)}function gY(n,e,t,i){return hm(n,"child_changed",e,t,i)}function CY(n,e,t,i){return hm(n,"child_moved",e,t,i)}function _Y(n,e,t,i){return hm(n,"child_removed",e,t,i)}function FY(n,e,t){let i=null;const r=t?new dY(t):null;"value"===e?i=new iE(r):e&&(i=new rE(e,r)),XV(n._repo,n,i)}class wa{}class yY extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){V3("endAt",this._value,e._path,!0);const t=yV(e._queryParams,this._value,this._key);if(nE(t),nu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new R1(e._repo,e._path,t,e._orderByCalled)}}class M5e extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){V3("endBefore",this._value,e._path,!1);const t=function(n,e,t){let i,r;return n.index_===P3?("string"==typeof e&&(e=pK(e)),r=yV(n,e,t)):(i=null==t?X4:pK(t),r=yV(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(nE(t),nu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new R1(e._repo,e._path,t,e._orderByCalled)}}class vY extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){V3("startAt",this._value,e._path,!0);const t=FV(e._queryParams,this._value,this._key);if(nE(t),nu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new R1(e._repo,e._path,t,e._orderByCalled)}}class k5e extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){V3("startAfter",this._value,e._path,!1);const t=function(n,e,t){let i;if(n.index_===P3)"string"==typeof e&&(e=fK(e)),i=FV(n,e,t);else{let r;r=null==t?L3:fK(t),i=FV(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(nE(t),nu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new R1(e._repo,e._path,t,e._orderByCalled)}}class N5e extends wa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new R1(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class A5e extends wa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new R1(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class L5e extends wa{constructor(e){super(),this._path=e}_apply(e){tE(e,"orderByChild");const t=new xn(this._path);if(Yt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new mV(t),r=Ab(e._queryParams,i);return nu(r),new R1(e._repo,e._path,r,!0)}}class V5e extends wa{_apply(e){tE(e,"orderByKey");const t=Ab(e._queryParams,P3);return nu(t),new R1(e._repo,e._path,t,!0)}}class R5e extends wa{_apply(e){tE(e,"orderByPriority");const t=Ab(e._queryParams,Yn);return nu(t),new R1(e._repo,e._path,t,!0)}}class H5e extends wa{_apply(e){tE(e,"orderByValue");const t=Ab(e._queryParams,gV);return nu(t),new R1(e._repo,e._path,t,!0)}}class j5e extends wa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(V3("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yY(this._value,this._key)._apply(new vY(this._value,this._key)._apply(e))}}function ba(n,...e){let t=(0,O.m9)(n);for(const i of e)t=i._apply(t);return t}(function(n){(0,O.hu)(!jb,"__referenceConstructor has already been defined"),jb=n})(M2),function(n){(0,O.hu)(!Gb,"__referenceConstructor has already been defined"),Gb=n}(M2);const oO={};function bY(n,e,t,i,r){let a=i||n.options.databaseURL;void 0===a&&(n.options.projectId||I3("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,F,u=iO(a,r),h=u.repoInfo;"undefined"!=typeof process&&(F=process.env.FIREBASE_DATABASE_EMULATOR_HOST),F?(m=!0,a=`http://${F}?ns=${h.namespace}`,u=iO(a,r),h=u.repoInfo):m=!u.repoInfo.secure;const b=r&&m?new Gp(Gp.OWNER):new Lue(n.name,n.options,e);JK("Invalid Firebase Database URL",u),Yt(u.path)||I3("Database URL must point to the root of a Firebase Database (not including a child path).");const M=function(n,e,t,i){let r=oO[e.name];r||(r={},oO[e.name]=r);let a=r[n.toURLString()];return a&&I3("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new t5e(n,false,t,i),r[n.toURLString()]=a,a}(h,n,b,new Iue(n.name,t));return new K5e(M,n)}class K5e{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=sV(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Ib(n.repoInfo_,(i,r,a,u)=>{nY(n,i,r,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iY(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new k6(n.repoInfo_,e,(i,r,a,u)=>{nY(n,i,r,a,u)},i=>{iY(n,i)},i=>{!function(n,e){$r(e,(t,i)=>{QV(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function(n,e){const t=n.toString();return rV[t]||(rV[t]=e()),rV[t]}(n.repoInfo_,()=>new H0e(n.stats_,n.server_)),n.infoData_=new P0e,n.infoSyncTree_=new BK({startListening:(i,r,a,u)=>{let h=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(h=rm(n.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),QV(n,"connected",!1),n.serverSyncTree_=new BK({startListening:(i,r,a,u)=>(n.server_.listen(i,a,r,(h,m)=>{const F=u(h,m);E2(n.eventQueue_,i._path,F)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new M2(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=oO[e];(!t||t[n.key]!==n)&&I3(`Database ${e}(${n.repoInfo_}) has already been deleted.`),sY(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&I3("Cannot call "+e+" on a deleted database.")}}function X5e(n,e){MZ(n,e)}class r8e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}k6.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},k6.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},yZ(Ys.SDK_VERSION),(0,Ys._registerComponent)(new ma.wA("database",(e,{instanceIdentifier:t})=>bY(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ys.registerVersion)(_Z,"0.12.5",void 0),(0,Ys.registerVersion)(_Z,"0.12.5","esm2017");const c8e=new ga.Yd("@firebase/database-compat"),EY=function(n){c8e.warn("FIREBASE WARNING: "+n)};class d8e{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),a=>i(a)),r}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let a=0;a<e.length;++a)r[""+a]=e[a];e=r,EY("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class h8e{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class iu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),um("DataSnapshot.child","path",e,!1),new iu(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),um("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new iu(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new Do(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Cs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const u=Cs.getCancelAndContextArgs_("Query.on",i,r),h=(F,b)=>{t.call(u.context,new iu(this.database,F),b)};h.userCallback=t,h.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return sO(this._delegate,h,m),t;case"child_added":return mY(this._delegate,h,m),t;case"child_removed":return _Y(this._delegate,h,m),t;case"child_changed":return gY(this._delegate,h,m),t;case"child_moved":return CY(this._delegate,h,m),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,FY(this._delegate,e,r)}else FY(this._delegate,e)}get(){return b5e(this._delegate).then(e=>new iu(this.database,e))}once(e,t,i,r){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=Cs.getCancelAndContextArgs_("Query.once",i,r),u=new O.BH,h=(F,b)=>{const M=new iu(this.database,F);t&&t.call(a.context,M,b),u.resolve(M)};h.userCallback=t,h.context=a.context;const m=F=>{a.cancel&&a.cancel.call(a.context,F),u.reject(F)};switch(e){case"value":sO(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":mY(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":_Y(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":gY(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":CY(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Cs(this.database,ba(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new N5e(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Cs(this.database,ba(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new A5e(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Cs(this.database,ba(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return um("orderByChild","path",n,!1),new L5e(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Cs(this.database,ba(this._delegate,new V5e))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Cs(this.database,ba(this._delegate,new R5e))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Cs(this.database,ba(this._delegate,new H5e))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Cs(this.database,ba(this._delegate,function(n=null,e){return lm("startAt","key",e,!0),new vY(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Cs(this.database,ba(this._delegate,function(n,e){return lm("startAfter","key",e,!0),new k5e(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Cs(this.database,ba(this._delegate,function(n,e){return lm("endAt","key",e,!0),new yY(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Cs(this.database,ba(this._delegate,function(n,e){return lm("endBefore","key",e,!0),new M5e(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Cs(this.database,ba(this._delegate,function(n,e){return lm("equalTo","key",e,!0),new j5e(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Cs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,O.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,O.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Do(this.database,new M2(this._delegate._repo,this._delegate._path))}}class Do extends Cs{constructor(e,t){super(e,new R1(t._repo,t._path,new Tb,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Do(this.database,L6(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Do(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new Do(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const i=rO(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let a=0;a<e.length;++a)r[""+a]=e[a];e=r,EY("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}b2("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const i=w5e(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function(n,e,t){if(b2("setWithPriority",n._path),V3("setWithPriority",e,n._path,!1),KV("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new O.BH;return JV(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),a=>i(a)),r}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return b2("remove",n._path),rO(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function(n,e,t){var i;if(n=(0,O.m9)(n),b2("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,a=new O.BH,h=sO(n,()=>{});return function(n,e,t,i,r,a){Zd(n,"transaction on "+e);const u={path:e,update:t,onComplete:i,status:null,order:wZ(),applyLocally:a,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=eO(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{cm("transaction failed: Data returned ",m,u.path),u.status=0;const F=Zb(n.transactionQueueTree_,e),b=A6(F)||[];let M;b.push(u),$V(F,b),"object"==typeof m&&null!==m&&(0,O.r3)(m,".priority")?(M=(0,O.DV)(m,".priority"),(0,O.hu)(am(M),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):M=(qb(n.serverSyncTree_,e)||Rt.EMPTY_NODE).getPriority().val();const k=dm(n),A=Di(m,M),P=UV(A,h,k);u.currentOutputSnapshotRaw=A,u.currentOutputSnapshotResolved=P,u.currentWriteId=Jb(n);const j=VV(n.serverSyncTree_,e,P,u.currentWriteId,u.applyLocally);E2(n.eventQueue_,e,j),Xb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,F,b)=>{let M=null;m?a.reject(m):(M=new I6(b,new M2(n._repo,n._path),Yn),a.resolve(new r8e(F,M)))},h,r),a.promise}(this._delegate,e,{applyLocally:i}).then(a=>new h8e(a.committed,new iu(this.database,a.snapshot)));return t&&r.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),r}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const i=function(n,e){n=(0,O.m9)(n),b2("setPriority",n._path),KV("setPriority",e,!1);const t=new O.BH;return JV(n._repo,Ci(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const i=function(n,e){n=(0,O.m9)(n),b2("push",n._path),V3("push",e,n._path,!0);const t=tY(n._repo),i=D0e(t),r=L6(n,i),a=L6(n,i);let u;return u=null!=e?rO(a,e).then(()=>a):Promise.resolve(a),r.then=u.then.bind(u),r.catch=u.then.bind(u,void 0),r}(this._delegate,e),r=i.then(u=>new Do(this.database,u));t&&r.then(()=>t(null),u=>t(u));const a=new Do(this.database,i);return a.then=r.then.bind(r),a.catch=r.catch.bind(r,void 0),a}onDisconnect(){return b2("Reference.onDisconnect",this._delegate._path),new d8e(new hY(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class fm{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,i={}){!function(n,e,t,i={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&I3("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let a;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&I3('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Gp(Gp.OWNER);else if(i.mockUserToken){const u="string"==typeof i.mockUserToken?i.mockUserToken:(0,O.Sg)(i.mockUserToken,n.app.options.projectId);a=new Gp(u)}!function(n,e,t,i){n.repoInfo_=new nV(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,a)}(this._delegate,e,t,i)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof Do){const t=pY(this._delegate,e.toString());return new Do(this,t)}{const t=fY(this._delegate,e);return new Do(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const i=pY(this._delegate,e);return new Do(this,i)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),sY(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(eY)}(n._repo)}(this._delegate)}}fm.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var p8e=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:a=!1}){yZ(t);const u=new ma.zt("auth-internal",new ma.H0("database-standalone"));return u.setComponent(new ma.wA("auth-internal",()=>i,"PRIVATE")),{instance:new fm(bY(n,u,void 0,e,a),n),namespace:r}}});const m8e=fm.ServerValue;function MY(n){return null==n}function SY(n){return"function"==typeof n.set}function DY(n,e){return SY(e)?e:n.ref(e)}function kY(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(SY(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function pm(n,e,t="on",i=lb.z){return new ei.y(r=>{let a=null;return a=n[t](e,(u,h)=>{i.schedule(()=>{r.next({snapshot:u,prevKey:h})}),"once"===t&&i.schedule(()=>r.complete())},u=>{i.schedule(()=>r.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,nt.U)(r=>{const{snapshot:a,prevKey:u}=r;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:u,key:h}}),(0,gue.B)())}function xY(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function v8e(n,e){const{payload:t,prevKey:i,key:r}=e,a=xY(n,r),u=function(n,e){if(MY(e))return 0;{const t=xY(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const F={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,F],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==i&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===r?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function NY(n){return(MY(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function TY(n,e,t){return function(n,e,t){return pm(n,"value","once",t).pipe(ti(i=>{const r=[(0,$e.of)(i)];return e.forEach(a=>r.push(pm(n,a,"on",t))),(0,db.T)(...r).pipe(eo(v8e,[]))}),NW())}(n,e=NY(e),t)}function AY(n,e,t){const i=(e=NY(e)).map(r=>pm(n,r,"on",t));return(0,db.T)(...i)}function IY(n,e){return function(i,r){return kY(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function M8e(n){return function(t){return t?kY(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function LY(n,e){return function(){return pm(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new ma.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new fm(r,i)},"PUBLIC").setServiceProps({Reference:Do,Query:Cs,Database:fm,DataSnapshot:iu,enableLogging:X5e,INTERNAL:p8e,ServerValue:m8e}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(_P.Z);const k8e=new l.OlP("angularfire2.realtimeDatabaseURL"),x8e=new l.OlP("angularfire2.database.use-emulator");let PY=(()=>{class n{constructor(t,i,r,a,u,h,m,F,b,M,k,A,P,j,K){this.schedulers=h;const he=m,be=(0,br.on)(t,u,i);F&&WP(be,u,b,k,A,P,M,j),this.database=(0,br.cc)(`${be.name}.database.${r}`,"AngularFireDatabase",be.name,()=>{const ye=u.runOutsideAngular(()=>be.database(r||void 0));return he&&ye.useEmulator(...he),ye},[he])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>DY(this.database,t));let a=r;return i&&(a=i(r)),function(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:IY(i,"update"),set:IY(i,"set"),push:r=>i.push(r),remove:M8e(i),snapshotChanges:r=>TY(n,r,t).pipe(bn.iC),stateChanges:r=>AY(n,r,t).pipe(bn.iC),auditTrail:r=>function(n,e,t){return function(n,e,t){return function(n,e){return pm(n,"value","on",e).pipe((0,nt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new _ue(n,t))}}(e),(0,nt.U)(([r,a])=>{const u=r.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:h}}),function(n){return e=>e.lift(new vue(n))}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,nt.U)(r=>r.actions))}(n,AY(n,e).pipe(eo((r,a)=>[...r,a],[])),t)}(n,r,t).pipe(bn.iC),valueChanges:(r,a)=>TY(n,r,t).pipe((0,nt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),bn.iC)}}(a,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>LY(n,e.schedulers.outsideAngular)().pipe(bn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>LY(n,e.schedulers.outsideAngular)().pipe(bn.iC,(0,nt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>DY(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(br.Dh),l.LFG(br.xv,8),l.LFG(k8e,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(bn.HU),l.LFG(x8e,8),l.LFG(vb,8),l.LFG(BP,8),l.LFG(jP,8),l.LFG(UP,8),l.LFG(GP,8),l.LFG(qP,8),l.LFG($P,8),l.LFG(zp,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),N8e=(()=>{class n{constructor(){yb.Z.registerVersion("angularfire",bn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[PY]}),n})();class A8e{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new I8e(e,this.dueTime,this.scheduler))}}class I8e extends yn.L{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(L8e,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function L8e(n){n.debouncedNext()}const VY="firebasestorage.googleapis.com",OY="storageBucket";class Vi extends O.ZR{constructor(e,t){super(aO(e),`Firebase Storage: ${t} (${aO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vi.prototype)}_codeEquals(e){return aO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function aO(n){return"storage/"+n}function cO(){return new Vi("unknown","An unknown error occurred, please check the error payload for server response.")}function RY(){return new Vi("canceled","User canceled the upload/download.")}function zY(){return new Vi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Yd(n){return new Vi("invalid-argument",n)}function HY(){return new Vi("app-deleted","The Firebase app was deleted.")}function BY(n){return new Vi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function mm(n,e){return new Vi("invalid-format","String does not match format '"+n+"': "+e)}function gm(n){throw new Vi("internal-error","Internal error: "+n)}class As{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=As.makeFromUrl(e,t)}catch(r){return new As(e,"")}if(""===i.path)return i;throw function(n){return new Vi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function F(Ae){Ae.path_=decodeURIComponent(Ae.path)}const M=t.replace(/[.]/g,"\\."),ye=[{regex:h,indices:{bucket:1,path:3},postModify:function(Ae){"/"===Ae.path.charAt(Ae.path.length-1)&&(Ae.path_=Ae.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${M}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:F},{regex:new RegExp(`^https?://${t===VY?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:F}];for(let Ae=0;Ae<ye.length;Ae++){const ze=ye[Ae],ut=ze.regex.exec(e);if(ut){let Sn=ut[ze.indices.path];Sn||(Sn=""),i=new As(ut[ze.indices.bucket],Sn),ze.postModify(i);break}}if(null==i)throw function(n){return new Vi("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class Z8e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sE(n){return"string"==typeof n||n instanceof String}function jY(n){return lO()&&n instanceof Blob}function lO(){return"undefined"!=typeof Blob}function uO(n,e,t,i){if(i<e)throw Yd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Yd(`Invalid value for '${n}'. Expected ${t} or less.`)}function tc(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function UY(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var ru=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(ru||(ru={})),ru))();class ede{constructor(e,t,i,r,a,u,h,m,F,b,M){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=F,this.progressCallback_=b,this.connectionFactory_=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,A)=>{this.resolve_=k,this.reject_=A,this.start_()})}start_(){const t=(i,r)=>{const a=this.resolve_,u=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==h){const m=cO();m.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,m):m)}else u(r.canceled?this.appDelete_?HY():RY():new Vi("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new oE(!1,null,!0)):this.backoffId_=function(n,e,t){let i=1,r=null,a=null,u=!1,h=0;function m(){return 2===h}let F=!1;function b(...K){F||(F=!0,e.apply(null,K))}function M(K){r=setTimeout(()=>{r=null,n(A,m())},K)}function k(){a&&clearTimeout(a)}function A(K,...he){if(F)return void k();if(K)return k(),void b.call(null,K,...he);if(m()||u)return k(),void b.call(null,K,...he);let ye;i<64&&(i*=2),1===h?(h=2,ye=0):ye=1e3*(i+Math.random()),M(ye)}let P=!1;function j(K){P||(P=!0,k(),!F&&(null!==r?(K||(h=2),clearTimeout(r),M(0)):K||(h=1)))}return M(0),a=setTimeout(()=>{u=!0,j(!0)},t),j}((i,r)=>{if(r)return void i(!1,new oE(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===ru.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const b=a.getErrorCode()===ru.ABORT;return void i(!1,new oE(!1,null,b))}const F=-1!==this.successCodes_.indexOf(m);i(!0,new oE(F,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||a}}class oE{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function ade(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(lO())return new Blob(n);throw new Vi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ko={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dO{constructor(e,t){this.data=e,this.contentType=t||null}}function hO(n,e){switch(n){case ko.RAW:return new dO(GY(e));case ko.BASE64:case ko.BASE64URL:return new dO(qY(n,e));case ko.DATA_URL:return new dO(function(n){const e=new $Y(n);return e.base64?qY(ko.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw mm(ko.DATA_URL,"Malformed data URL.")}return GY(e)}(e.rest)}(e),function(n){return new $Y(n).contentType}(e))}throw cO()}function GY(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function qY(n,e){switch(n){case ko.BASE64:{const r=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(r||a)throw mm(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ko.BASE64URL:{const r=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(r||a)throw mm(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(r){throw mm(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class $Y{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw mm(ko.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=e.substring(e.indexOf(",")+1)}}class O3{constructor(e,t){let i=0,r="";jY(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(jY(this.data_)){const r=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new O3(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new O3(i,!0)}}static getBlob(...e){if(lO()){const t=e.map(i=>i instanceof O3?i.data_:i);return new O3(ade.apply(null,t))}{const t=e.map(u=>sE(u)?hO(ko.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)r[a++]=u[h]}),new O3(r,!0)}}uploadData(){return this.data_}}function fO(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function WY(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function gde(n,e){return e}class a1{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||gde}}let aE=null;function Cm(){if(aE)return aE;const n=[];n.push(new a1("bucket")),n.push(new a1("generation")),n.push(new a1("metageneration")),n.push(new a1("name","fullPath",!0));const t=new a1("name");t.xform=function(a,u){return function(n){return!sE(n)||n.length<2?n:WY(n)}(u)},n.push(t);const r=new a1("size");return r.xform=function(a,u){return void 0!==u?Number(u):u},n.push(r),n.push(new a1("timeCreated")),n.push(new a1("updated")),n.push(new a1("md5Hash",null,!0)),n.push(new a1("cacheControl",null,!0)),n.push(new a1("contentDisposition",null,!0)),n.push(new a1("contentEncoding",null,!0)),n.push(new a1("contentLanguage",null,!0)),n.push(new a1("contentType",null,!0)),n.push(new a1("metadata","customMetadata",!0)),aE=n,aE}function ZY(n,e,t){const i=fO(e);return null===i?null:function(n,e,t){const i={type:"file"},r=t.length;for(let a=0;a<r;a++){const u=t[a];i[u.local]=u.xform(i,e[u.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const a=new As(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(i,n),i}(n,i,t)}function pO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const a=e[r];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const KY="prefixes";class R3{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function z3(n){if(!n)throw cO()}function cE(n,e){return function(i,r){const a=ZY(n,r,e);return z3(null!==a),a}}function Qd(n){return function(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Vi("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Vi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Vi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Vi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function _m(n){const e=Qd(n);return function(i,r){let a=e(i,r);return 404===i.getStatus()&&(a=function(n){return new Vi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=r.serverResponse,a}}function QY(n,e,t){const r=tc(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new R3(r,"GET",cE(n,t),u);return h.errorHandler=_m(e),h}function Mde(n,e,t,i,r){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),i&&(a.pageToken=i),r&&(a.maxResults=r);const h=tc(e.bucketOnlyServerUrl(),n.host,n._protocol),F=n.maxOperationRetryTime,b=new R3(h,"GET",function(n,e){return function(i,r){const a=function(n,e,t){const i=fO(t);return null===i?null:function(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[KY])for(const r of t[KY]){const a=r.replace(/\/$/,""),u=n._makeStorageReference(new As(e,a));i.prefixes.push(u)}if(t.items)for(const r of t.items){const a=n._makeStorageReference(new As(e,r.name));i.items.push(a)}return i}(n,e,i)}(n,e,r);return z3(null!==a),a}}(n,e.bucket),F);return b.urlParams=a,b.errorHandler=Qd(e),b}function XY(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),i}class lE{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function mO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){z3(!1)}return z3(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Ide={STATE_CHANGED:"state_changed"},c1={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gO(n){switch(n){case"running":case"pausing":case"canceling":return c1.RUNNING;case"paused":return c1.PAUSED;case"success":return c1.SUCCESS;case"canceled":return c1.CANCELED;case"error":default:return c1.ERROR}}class Lde{constructor(e,t,i){if(function(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Jd(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Vde extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ru.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ru.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ru.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw gm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const a in r)r.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,r[a].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw gm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Ea(){return new Vde}class iQ{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Cm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,a)=>{this._resolve=r,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function(n,e,t,i,r){const a=e.bucketOnlyServerUrl(),u=XY(e,i,r),h={name:u.fullPath},m=tc(a,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},M=pO(u,t),P=new R3(m,"POST",function(j){let K;mO(j);try{K=j.getResponseHeader("X-Goog-Upload-URL")}catch(he){z3(!1)}return z3(sE(K)),K},n.maxUploadRetryTime);return P.urlParams=h,P.headers=b,P.body=M,P.errorHandler=Qd(e),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ea,e,t);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function(n,e,t,i){const m=new R3(t,"POST",function(F){const b=mO(F,["active","final"]);let M=null;try{M=F.getResponseHeader("X-Goog-Upload-Size-Received")}catch(A){z3(!1)}M||z3(!1);const k=Number(M);return z3(!isNaN(k)),new lE(k,i.size(),"final"===b)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Qd(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(r,Ea,t,i);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new lE(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,a)=>{let u;try{u=function(n,e,t,i,r,a,u,h){const m=new lE(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw new Vi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const F=m.total-m.current;let b=F;r>0&&(b=Math.min(b,r));const M=m.current,P={"X-Goog-Upload-Command":b===F?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},j=i.slice(M,M+b);if(null===j)throw zY();const ye=new R3(t,"POST",function(Ae,ze){const ut=mO(Ae,["active","final"]),Et=m.current+b,Sn=i.size();let Gt;return Gt="final"===ut?cE(e,a)(Ae,ze):null,new lE(Et,Sn,"final"===ut,Gt)},e.maxUploadRetryTime);return ye.headers=P,ye.body=j.uploadData(),ye.progressCallback=h||null,ye.errorHandler=Qd(n),ye}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Ea,r,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=QY(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Ea,e,t);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function(n,e,t,i,r){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function(){let ye="";for(let Ae=0;Ae<2;Ae++)ye+=Math.random().toString().slice(2);return ye}();u["Content-Type"]="multipart/related; boundary="+m;const F=XY(e,i,r),b=pO(F,t),A=O3.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+F.contentType+"\r\n\r\n",i,"\r\n--"+m+"--");if(null===A)throw zY();const P={name:F.fullPath},j=tc(a,n.host,n._protocol),he=n.maxUploadRetryTime,be=new R3(j,"POST",cE(n,t),he);return be.urlParams=P,be.headers=u,be.body=A.uploadData(),be.errorHandler=Qd(e),be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Ea,e,t);this._request=r,r.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=RY(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=gO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const a=new Lde(t||void 0,i||void 0,r||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(gO(this._state)){case c1.SUCCESS:Jd(this._resolve.bind(null,this.snapshot))();break;case c1.CANCELED:case c1.ERROR:Jd(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gO(this._state)){case c1.RUNNING:case c1.PAUSED:e.next&&Jd(e.next.bind(e,this.snapshot))();break;case c1.SUCCESS:e.complete&&Jd(e.complete.bind(e))();break;case c1.CANCELED:case c1.ERROR:e.error&&Jd(e.error.bind(e,this._error))();break;default:e.error&&Jd(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class P6{constructor(e,t){this._service=e,this._location=t instanceof As?t:As.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new P6(e,t)}get root(){const e=new As(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WY(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new As(this._location.bucket,e);return new P6(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw BY(e)}}function sQ(n,e,t){return CO.apply(this,arguments)}function CO(){return(CO=(0,X.Z)(function*(n,e,t){const r=yield oQ(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield sQ(n,e,r.nextPageToken))})).apply(this,arguments)}function oQ(n,e){null!=e&&"number"==typeof e.maxResults&&uO("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=Mde(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,Ea)}function Zde(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const r=tc(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new R3(r,"GET",function(n,e){return function(i,r){const a=ZY(n,r,e);return z3(null!==a),function(n,e,t,i){const r=fO(e);if(null===r||!sE(r.downloadTokens))return null;const a=r.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(F=>{const M=n.fullPath;return tc("/b/"+u(n.bucket)+"/o/"+u(M),t,i)+UY({alt:"media",token:F})})[0]}(a,r,n.host,n._protocol)}}(n,t),u);return h.errorHandler=_m(e),h}(n.storage,n._location,Cm());return n.storage.makeRequestWithTokens(e,Ea).then(t=>{if(null===t)throw new Vi("no-download-url","The given file does not have any download URLs.");return t})}function aQ(n,e){const t=function(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new As(n._location.bucket,t);return new P6(n.storage,i)}function cQ(n,e){if(n instanceof _O){const t=n;if(null==t._bucket)throw new Vi("no-default-bucket","No default bucket found. Did you set the '"+OY+"' property when initializing the app?");const i=new P6(t,t._bucket);return null!=e?cQ(i,e):i}return void 0!==e?aQ(n,e):n}function Jde(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _O)return function(n,e){return new P6(n,e)}(n,e);throw Yd("To use ref(service, url), the first argument must be a Storage instance.")}return cQ(n,e)}function lQ(n,e){const t=null==e?void 0:e[OY];return null==t?null:As.makeFromBucketSpec(t,n)}class _O{constructor(e,t,i,r,a){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._bucket=null,this._host=VY,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?As.makeFromBucketSpec(r,this._host):lQ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?As.makeFromBucketSpec(this._url,e):lQ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,X.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,X.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new P6(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new Z8e(HY());{const a=function(n,e,t,i,r,a){const u=UY(n.urlParams),h=n.url+u,m=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,i),new ede(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var i=this;return(0,X.Z)(function*(){const[r,a]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,a).getPromise()})()}}const uQ="@firebase/storage";function fQ(n,e){return Jde(n=(0,O.m9)(n),e)}(0,Ys._registerComponent)(new ma.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new _O(t,i,r,e,Ys.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ys.registerVersion)(uQ,"0.9.2",""),(0,Ys.registerVersion)(uQ,"0.9.2","esm2017");class uE{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pQ{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new uE(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new uE(i,this,this._ref))},t)}on(e,t,i,r){let a;return t&&(a="function"==typeof t?u=>t(new uE(u,this,this._ref)):{next:t.next?u=>t.next(new uE(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,i||void 0,r||void 0)}}class mQ{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new nc(e,this._service))}get items(){return this._delegate.items.map(e=>new nc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class nc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return aQ(n,e)}(this._delegate,e);return new nc(t,this.storage)}get root(){return new nc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new nc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new pQ(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new iQ(n,new O3(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ko.RAW,i){this._throwIfRoot("putString");const r=hO(t,e),a=Object.assign({},i);return null==a.contentType&&null!=r.contentType&&(a.contentType=r.contentType),new pQ(new iQ(this._delegate,new O3(r.data,!0),a),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return sQ(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new mQ(e,this.storage))}list(e){return function(n,e){return oQ(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new mQ(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=QY(n.storage,n._location,Cm());return n.storage.makeRequestWithTokens(e,Ea)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,i){const a=tc(e.fullServerUrl(),n.host,n._protocol),h=pO(t,i),F=n.maxOperationRetryTime,b=new R3(a,"PATCH",cE(n,i),F);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=_m(e),b}(n.storage,n._location,e,Cm());return n.storage.makeRequestWithTokens(t,Ea)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return Zde(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const i=tc(e.fullServerUrl(),n.host,n._protocol),h=new R3(i,"DELETE",function(m,F){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=_m(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ea)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw BY(e)}}class gQ{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(CQ(e))throw Yd("ref() expected a child path but got a URL, use refFromURL instead.");return new nc(fQ(this._delegate,e),this)}refFromURL(e){if(!CQ(e))throw Yd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{As.makeFromUrl(e,this._delegate.host)}catch(t){throw Yd("refFromUrl() expected a valid full URL but got an invalid one.")}return new nc(fQ(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function(n,e,t,i={}){!function(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,O.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function CQ(n){return/^[A-Za-z]+:\/\//.test(n)}function phe(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new gQ(t,i)}function _Q(n){const e=function(n){return new ei.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function(n,e=lb.P){return t=>t.lift(new A8e(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,nt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function dE(n){return{getDownloadURL:()=>(0,$e.of)(void 0).pipe(bn.fc,ti(()=>n.getDownloadURL()),bn.iC),getMetadata:()=>(0,$e.of)(void 0).pipe(bn.fc,ti(()=>n.getMetadata()),bn.iC),delete:()=>(0,cn.D)(n.delete()),child:e=>dE(n.child(e)),updateMetadata:e=>(0,cn.D)(n.updateMetadata(e)),put:(e,t)=>_Q(n.put(e,t)),putString:(e,t,i)=>_Q(n.putString(e,t,i)),list:e=>(0,cn.D)(n.list(e)),listAll:()=>(0,cn.D)(n.listAll())}}!function(n){const e={TaskState:c1,TaskEvent:Ide,StringFormat:ko,Storage:gQ,Reference:nc};n.INTERNAL.registerComponent(new ma.wA("storage-compat",phe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(_P.Z);const Che=new l.OlP("angularfire2.storageBucket"),_he=new l.OlP("angularfire2.storage.maxUploadRetryTime"),Fhe=new l.OlP("angularfire2.storage.maxOperationRetryTime"),yhe=new l.OlP("angularfire2.storage.use-emulator");let FQ=(()=>{class n{constructor(t,i,r,a,u,h,m,F,b,M){const k=(0,br.on)(t,u,i);this.storage=(0,br.cc)(`${k.name}.storage.${r}`,"AngularFireStorage",k.name,()=>{const A=u.runOutsideAngular(()=>k.storage(r||void 0)),P=b;return P&&A.useEmulator(...P),m&&A.setMaxUploadRetryTime(m),F&&A.setMaxOperationRetryTime(F),A},[m,F])}ref(t){return dE(this.storage.ref(t))}refFromURL(t){return dE(this.storage.refFromURL(t))}upload(t,i,r){return dE(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(br.Dh),l.LFG(br.xv,8),l.LFG(Che,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(bn.HU),l.LFG(_he,8),l.LFG(Fhe,8),l.LFG(yhe,8),l.LFG(zp,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vhe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),whe=(()=>{class n{constructor(){yb.Z.registerVersion("angularfire",bn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[FQ],imports:[vhe]}),n})();class yQ{}const ic="*";function Ehe(n,e){return{type:7,name:n,definitions:e,options:{}}}function vQ(n,e=null){return{type:4,styles:e,timings:n}}function wQ(n,e=null){return{type:2,steps:n,options:e}}function Fm(n){return{type:6,styles:n,offset:null}}function FO(n,e,t){return{type:0,name:n,styles:e,options:t}}function bQ(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function EQ(n){Promise.resolve(null).then(n)}class Xd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){EQ(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class MQ{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const a=this.players.length;0==a?EQ(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++i==a&&this._onDestroy()}),u.onStart(()=>{++r==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const SQ=["toast-component",""];function Mhe(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){return l.CHM(t),l.oxw().remove()}),l.TgZ(1,"span",6),l._uU(2,"\xd7"),l.qZA(),l.qZA()}}function She(n,e){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.hij("[",t.duplicatesCount+1,"]")}}function Dhe(n,e){if(1&n&&(l.TgZ(0,"div"),l._uU(1),l.YNc(2,She,2,1,"ng-container",4),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.titleClass),l.uIk("aria-label",t.title),l.xp6(1),l.hij(" ",t.title," "),l.xp6(1),l.Q6J("ngIf",t.duplicatesCount)}}function khe(n,e){if(1&n&&l._UZ(0,"div",7),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.Q6J("innerHTML",t.message,l.oJD)}}function xhe(n,e){if(1&n&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.uIk("aria-label",t.message),l.xp6(1),l.hij(" ",t.message," ")}}function Nhe(n,e){if(1&n&&(l.TgZ(0,"div"),l._UZ(1,"div",9),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Udp("width",t.width+"%")}}function The(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){return l.CHM(t),l.oxw().remove()}),l.TgZ(1,"span",6),l._uU(2,"\xd7"),l.qZA(),l.qZA()}}function Ahe(n,e){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.hij("[",t.duplicatesCount+1,"]")}}function Ihe(n,e){if(1&n&&(l.TgZ(0,"div"),l._uU(1),l.YNc(2,Ahe,2,1,"ng-container",4),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.titleClass),l.uIk("aria-label",t.title),l.xp6(1),l.hij(" ",t.title," "),l.xp6(1),l.Q6J("ngIf",t.duplicatesCount)}}function Lhe(n,e){if(1&n&&l._UZ(0,"div",7),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.Q6J("innerHTML",t.message,l.oJD)}}function Phe(n,e){if(1&n&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.uIk("aria-label",t.message),l.xp6(1),l.hij(" ",t.message," ")}}function Vhe(n,e){if(1&n&&(l.TgZ(0,"div"),l._UZ(1,"div",9),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Udp("width",t.width+"%")}}class Ohe{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class hE{constructor(e,t,i,r,a,u){this.toastId=e,this.config=t,this.message=i,this.title=r,this.toastType=a,this.toastRef=u,this._onTap=new nn.xQ,this._onAction=new nn.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const DQ={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},kQ=new l.OlP("ToastConfig");class zhe{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new nn.xQ,this._activate=new nn.xQ,this._manualClose=new nn.xQ,this._resetTimeout=new nn.xQ,this._countDuplicate=new nn.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class Hhe{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,i){return e===hE?this._toastPackage:this._parentInjector.get(e,t,i)}}class Bhe extends class{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,i){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=i}attachComponentPortal(e,t){const i=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=i.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class jhe{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Uhe=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ghe=(()=>{class n{constructor(t,i,r,a){this._overlayContainer=t,this._componentFactoryResolver=i,this._appRef=r,this._document=a,this._paneElements=new Map}create(t,i){return this._createOverlayRef(this.getPaneElement(t,i))}getPaneElement(t="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[t]||(this._paneElements.get(i)[t]=this._createPaneElement(t,i)),this._paneElements.get(i)[t]}_createPaneElement(t,i){const r=this._document.createElement("div");return r.id="toast-container",r.classList.add(t),r.classList.add("toast-container"),i?i.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(t){return new Bhe(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new jhe(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Uhe),l.LFG(l._Vd),l.LFG(l.z2F),l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z1=(()=>{class n{constructor(t,i,r,a,u){this.overlay=i,this._injector=r,this.sanitizer=a,this.ngZone=u,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,i,r={},a=""){return this._preBuildNotification(a,t,i,this.applyConfig(r))}success(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,i,this.applyConfig(r))}error(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,i,this.applyConfig(r))}info(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,i,this.applyConfig(r))}warning(t,i,r={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,i,this.applyConfig(r))}clear(t){for(const i of this.toasts)if(void 0!==t){if(i.toastId===t)return void i.toastRef.manualClose()}else i.toastRef.manualClose()}remove(t){const i=this._findToast(t);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(t="",i="",r,a){const{includeTitleDuplicates:u}=this.toastrConfig;for(const h of this.toasts){const m=u&&h.title===t;if((!u||m)&&h.message===i)return h.toastRef.onDuplicate(r,a),h}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===t)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(t,i,r,a){return a.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,i,r,a)):this._buildNotification(t,i,r,a)}_buildNotification(t,i,r,a){if(!a.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(r,i,this.toastrConfig.resetTimeoutOnDuplicate&&a.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||i)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=i;let h=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(h=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const m=this.overlay.create(a.positionClass,this.overlayContainer);this.index=this.index+1;let F=i;i&&a.enableHtml&&(F=this.sanitizer.sanitize(l.q3G.HTML,i));const b=new zhe(m),M=new hE(this.index,a,F,r,t,b),k=new Hhe(M,this._injector),A=new Ohe(a.toastComponent,k),P=m.attach(A,this.toastrConfig.newestOnTop);b.componentInstance=P.instance;const j={toastId:this.index,title:r||"",message:i||"",toastRef:b,onShown:b.afterActivate(),onHidden:b.afterClosed(),onTap:M.onTap(),onAction:M.onAction(),portal:P};return h||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{j.toastRef.activate()})),this.toasts.push(j),j}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(kQ),l.LFG(Ghe),l.LFG(l.zs3),l.LFG(Y1),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qhe=(()=>{class n{constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.ngZone=r,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),i)):this.timeout=setTimeout(()=>t(),i)}outsideInterval(t,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),i)):this.intervalId=setInterval(()=>t(),i)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(z1),l.Y36(hE),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,i){1&t&&l.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&t&&(l.d8E("@flyInOut",i.state),l.Tol(i.toastClasses),l.Udp("display",i.displayStyle))},attrs:SQ,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,i){1&t&&(l.YNc(0,Mhe,3,0,"button",0),l.YNc(1,Dhe,3,5,"div",1),l.YNc(2,khe,1,3,"div",2),l.YNc(3,xhe,2,4,"div",3),l.YNc(4,Nhe,2,2,"div",4)),2&t&&(l.Q6J("ngIf",i.options.closeButton),l.xp6(1),l.Q6J("ngIf",i.title),l.xp6(1),l.Q6J("ngIf",i.message&&i.options.enableHtml),l.xp6(1),l.Q6J("ngIf",i.message&&!i.options.enableHtml),l.xp6(1),l.Q6J("ngIf",i.options.progressBar))},directives:[ai],encapsulation:2,data:{animation:[Ehe("flyInOut",[FO("inactive",Fm({opacity:0})),FO("active",Fm({opacity:1})),FO("removed",Fm({opacity:0})),bQ("inactive => active",vQ("{{ easeTime }}ms {{ easing }}")),bQ("active => removed",vQ("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const $he=Object.assign(Object.assign({},DQ),{toastComponent:qhe});let Whe=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:kQ,useValue:{default:$he,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ei]]}),n})(),Zhe=(()=>{class n{constructor(t,i,r){this.toastrService=t,this.toastPackage=i,this.appRef=r,this.width=-1,this.toastClasses="",this.state="inactive",this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(z1),l.Y36(hE),l.Y36(l.z2F))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,i){1&t&&l.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&t&&(l.Tol(i.toastClasses),l.Udp("display",i.displayStyle))},attrs:SQ,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,i){1&t&&(l.YNc(0,The,3,0,"button",0),l.YNc(1,Ihe,3,5,"div",1),l.YNc(2,Lhe,1,3,"div",2),l.YNc(3,Phe,2,4,"div",3),l.YNc(4,Vhe,2,2,"div",4)),2&t&&(l.Q6J("ngIf",i.options.closeButton),l.xp6(1),l.Q6J("ngIf",i.title),l.xp6(1),l.Q6J("ngIf",i.message&&i.options.enableHtml),l.xp6(1),l.Q6J("ngIf",i.message&&!i.options.enableHtml),l.xp6(1),l.Q6J("ngIf",i.options.progressBar))},directives:[ai],encapsulation:2}),n})();Object.assign(Object.assign({},DQ),{toastComponent:Zhe});let H1=(()=>{class n{constructor(t,i,r,a,u,h){this.afs=t,this.db=i,this.storage=r,this.datepipe=a,this.toastrService=u,this.router=h,this.timestamp=vr,this._data=new ln([]),this.previousChatData$=new ln([]),this.allGroups$=new ln([]),this.chatData$=new ln([]),this.redirectToChatPage=new l.vpe(!1),this.getChat=new ln(""),this.getTyping=new ln(""),this.isChatClear=!1,this.selectedGroupMember=[],this.chats=[],this.addGroupLoader=0,this.isAddMember=!1,this.isDeactivateAccount=!1,this.chatContent=!1,this.groupImageNameContent=!1,this.myProfileImageNameContent=!1,this.friendListContent=!1,this.fileExtensions=["png","PNG","jpg","JPG","jpeg","JPEG","tiff","TIFF","bmp","BMP"],this.isOpponentOnline=!1,this.currentDate=this.timestamp.now().toDate(),this.groups=[],this.userDetails={username:"",firstName:"",name:"Usama Shaikh",lastName:"",email:"",profilePicture:"",id:"6229f5e5b501ab796bf5b255"}}createGroup(t,i,r,a,u){var h=this;return new Promise(function(){var F=(0,X.Z)(function*(b,M){const k=t.map(K=>null==K?void 0:K.userId);let A=t.map(K=>({unreadCount:0,userId:null==K?void 0:K.userId}));A.push({unreadCount:0,userId:h.userDetails.id});let j={status:null,message:null,result:null};h.getUserById(h.userDetails.id).then(function(){var K=(0,X.Z)(function*(he){if(he){let be=[];const ye={isGroup:i,createAt:h.timestamp.now(),createdBy:h.userDetails.id,groupId:"",groupImage:"",members:[...k],isDeactivateUser:!1,modifiedAt:h.timestamp.now(),modifiedBy:h.userDetails.id,name:r,online:[],pinnedGroup:[],readCount:[...A],typing:[],blockUsers:[],viewBy:[...k],recentMessage:{isRead:"",message:"",readBy:"",sentAt:"",sentBy:"",timeMilliSeconds:"",type:""},users:be,lastUpdatedAt:h.timestamp.now()};i&&a&&(yield h.pushFileToStorage(a).then(Ae=>{ye.groupImage=Ae})),h.afs.collection("groups").add(ye).then(function(){var Ae=(0,X.Z)(function*(ze){ye.groupId=null==ze?void 0:ze.id,h.updateGroup(null==ze?void 0:ze.id,"groupId",null==ze?void 0:ze.id,!1).then(function(){var ut=(0,X.Z)(function*(Et){for(let Gt=0;Gt<ye.viewBy.length;Gt++)yield h.updateUser(ye.viewBy[Gt],"groups",null==ze?void 0:ze.id,!0).then(function(){var ki=(0,X.Z)(function*(ka){ka?yield h.getUserById(ye.viewBy[Gt]).then(function(){var x2=(0,X.Z)(function*(u1){u1&&(yield h.updateGroup(null==ze?void 0:ze.id,"users",u1,!0).then(Fu=>{be.push(u1)}).catch(Fu=>{console.log("error",Fu)}))});return function(u1){return x2.apply(this,arguments)}}()).catch(x2=>{console.log("error",x2)}):console.log("user not found")});return function(ka){return ki.apply(this,arguments)}}()).catch(function(){var ki=(0,X.Z)(function*(ka){console.log("error",ka)});return function(ka){return ki.apply(this,arguments)}}());ye.users=be,j.status=!0,j.message="Group created successfully",j.result=ye,b(j)});return function(Et){return ut.apply(this,arguments)}}())});return function(ze){return Ae.apply(this,arguments)}}()).catch(Ae=>{console.log("error",Ae),j.status=!1,j.message="Something went wrong, Please try again",j.result=null,b(j)})}else j.status=!1,j.message="logged in user not found",j.result=null,b(j)});return function(he){return K.apply(this,arguments)}}())});return function(b,M){return F.apply(this,arguments)}}())}getCursor(){var t,i;const r=this._data.value;return!!(null===(t=r[0])||void 0===t?void 0:t.doc)&&(null===(i=r[0])||void 0===i?void 0:i.doc)}mapAndUpdate(t){return t.snapshotChanges().subscribe(i=>{let r=i.map(a=>{const u=a.payload.doc.data(),h=a.payload.doc;return Object.assign(Object.assign({},u),{doc:h})});this._data.next(r),this.previousChatData$.next(r)})}getLoggedInUserGroups(t){this.afs.collection("groups",i=>i.where("viewBy","array-contains",this.userDetails.id).orderBy("lastUpdatedAt","desc")).snapshotChanges().subscribe(i=>{let r=i.map(a=>{const u=a.payload.doc.data(),h=a.payload.doc;return Object.assign(Object.assign({},u),{doc:h})});this.allGroups$.next(r)})}getChats(t){var i=this;return(0,X.Z)(function*(){t?i.afs.collection("chatroom").doc(t).collection("messages",a=>a.where("viewBy","array-contains",i.userDetails.id).orderBy("timeMilliSeconds","asc").limitToLast(20)).snapshotChanges().subscribe(a=>{var u;let h=a.map(m=>{const F=m.payload.doc.data(),b=m.payload.doc;return i.last=b,Object.assign(Object.assign({},F),{doc:b})});t==(null===(u=i.selectedGroup)||void 0===u?void 0:u.groupId)&&(i._data.next(h),i.chatData$.next(h),i.chats.length>0&&h.length>0?i.chats[i.chats.length-1].sentAt.seconds!==h[h.length-1].sentAt.seconds&&(i.chats=h):i.chats=h)}):i.toastrService.error("Something went wrong, Please try again")})()}getPreviousChat(t){const i=this.getCursor();if(t){const r=this.afs.collection("chatroom").doc(t).collection("messages",a=>a.where("viewBy","array-contains",this.userDetails.id).orderBy("timeMilliSeconds","asc").endBefore(i).limitToLast(10));this.mapAndUpdate(r)}else this.toastrService.error("Something went wrong, Please try again")}sendMsg(t,i,r,a,u=null,h){const m={isRead:!1,["text"===r?"message":"video"===r?"video":"image"===r?"image":"audio"===r?"audio":"document"]:i,viewBy:a,readBy:this.selectedGroup.isGroup?"":this.chatUserId,sentAt:this.timestamp.now(),sentBy:this.userDetails.id,timeMilliSeconds:this.timestamp.now(),type:r};return"video"===r&&(m.thumbnail="",m.base64Thumbnail=u),this.recentMsgObj=m,this.afs.collection("chatroom").doc(t).collection("messages").add(m).then(F=>{this.updateUnReadCount(t,!1).then(b=>{}).catch(b=>{console.log("error",b)}),m.msgId=null==F?void 0:F.id,this.updateRecentMessage(t,m).then(b=>{}).catch(b=>{console.log("error",b)}),this.updateMessage(t,m).then(b=>{}).catch(b=>{console.log("error",b)})}).catch(F=>{console.log("error",F),this.toastrService.error(F)})}updateRecentMessage(t,i){return new Promise((a,u)=>{const h={isRead:!1,["text"===i.type?"message":"video"===i.type?"video":"image"===i.type?"image":"audio"===i.type?"audio":"document"]:i["text"===i.type?"message":i.type],readBy:i.readBy,sentAt:i.sentAt,sentBy:i.sentBy,timeMilliSeconds:i.timeMilliSeconds,type:i.type,viewBy:i.viewBy,msgId:i.msgId};(null==i?void 0:i.thumbnail)&&(h.thumbnail=null==i?void 0:i.thumbnail),a(this.afs.collection("groups").doc(t).update({recentMessage:h,lastUpdatedAt:i.timeMilliSeconds}))})}updateUnReadCount(t,i){var r=this;return new Promise(function(){var u=(0,X.Z)(function*(h,m){var F,b;if(!1===i){let M=[],k=0;for(let A=0;A<r.selectedGroup.viewBy.length;A++){let P=yield null===(F=r.selectedGroup)||void 0===F?void 0:F.readCount.find(j=>(null==j?void 0:j.userId)===r.selectedGroup.viewBy[A]);if(P)if((null==P?void 0:P.userId)===r.userDetails.id)M.push({unreadCount:0,userId:r.userDetails.id});else{let j=P.unreadCount;j+=1,M.push({unreadCount:j,userId:P.userId})}else M.push({unreadCount:1,userId:r.selectedGroup.viewBy[A]});k++,k===r.selectedGroup.viewBy.length&&r.updateGroup(t,"readCount",M,!1).then(j=>{h(!0)}).catch(j=>{console.log("error",j)})}}else{let M=null===(b=r.selectedGroup)||void 0===b?void 0:b.readCount.filter(A=>A.userId!==r.userDetails.id),k={unreadCount:0,userId:r.userDetails.id};M&&M.push(k),r.updateGroup(t,"readCount",M,!1).then(A=>{h(!0)}).catch(A=>{console.log("error",A)})}});return function(h,m){return u.apply(this,arguments)}}())}checkExtension(t){const i=this.fileExtensions.find(r=>r===t);return!(!i||null==i)}pushFileToStorage(t){return new Promise((r,a)=>{const h=`${"CHAT_"+(t.type.includes("image")?"Images":t.type.includes("video")?"Videos":t.type.includes("audio")?"Audio":"Docs")}/${t.name}`,m=this.storage.ref(h);this.storage.upload(h,t).snapshotChanges().pipe(Vc(()=>{m.getDownloadURL().subscribe(b=>{r(b)})})).subscribe()})}updateUserTypingStatus(t,i){return this.afs.collection("groups").doc(t).update({typing:Zl(i)})}removeUserFromTyping(t,i){var r=this;return new Promise(function(){var u=(0,X.Z)(function*(h,m){t&&h(yield r.afs.collection("groups").doc(t).update({typing:Ur(i)}))});return function(h,m){return u.apply(this,arguments)}}())}getTypingStatus(t){return this.afs.collection("groups").doc(t).snapshotChanges().pipe((0,nt.U)(i=>Object.assign({},i.payload.data())))}getUserById(t){return new Promise((r,a)=>{this.afs.collection("users").doc(t).snapshotChanges().pipe((0,nt.U)(u=>Object.assign({},u.payload.data()))).subscribe(u=>{var h;"{}"!==u&&(null===(h=Object.keys(u))||void 0===h?void 0:h.length)>0?r(u):r([])})})}getFriend(t){return this.afs.collection("users").doc(t).snapshotChanges().pipe((0,nt.U)(i=>Object.assign({},i.payload.data())))}getGroupById(t){return new Promise((r,a)=>{this.afs.collection("groups").doc(t).snapshotChanges().pipe((0,nt.U)(u=>Object.assign({},u.payload.data()))).subscribe(u=>{var h;if("{}"!==u&&(null===(h=Object.keys(u))||void 0===h?void 0:h.length)>0){let m=u.members.filter(F=>F==this.userDetails.id);r(!!(m&&m.length>0)&&u)}else r(!1)})})}updateUser(t,i,r,a){return new Promise((h,m)=>{!0===a&&this.afs.collection("users").doc(t).update({[i]:Zl(r)}).then(F=>{h(!0)}).catch(F=>{console.log("error",F),h(!1)}),!1===a&&this.afs.collection("users").doc(t).update({[i]:Ur(r)}).then(F=>{h(!0)}).catch(F=>{console.log("error",F),h(!1)})})}removeValueFromGroup(t,i,r){return new Promise((u,h)=>{this.afs.collection("groups").doc(t).update({[i]:Ur(r)}).then(m=>{u(!0)}).catch(m=>{console.log("error",m),h(!1)})})}clearChat(){var t=this;return new Promise((r,a)=>{this.selectedGroup.groupId?(this.afs.collection("groups").doc(this.selectedGroup.groupId).update({recentMessage:{}}).then(u=>{}).catch(u=>{console.log("error",u)}),this.afs.collection("chatroom").doc(this.selectedGroup.groupId).collection("messages").snapshotChanges().subscribe(function(){var u=(0,X.Z)(function*(h){let m=h.map(F=>{const b=F.payload.doc.data(),M=F.payload.doc;return Object.assign(Object.assign({},b),{doc:M})});if(t.isChatClear)if(t.isChatClear=!1,m.length>0)for(let F=0;F<m.length;F++)try{yield t.afs.collection("chatroom").doc(t.selectedGroup.groupId).collection("messages").doc(m[F].doc.id).update({viewBy:Ur(t.userDetails.id)}),F===m.length-1&&r(!0)}catch(b){console.log(b)}else r(!0)});return function(h){return u.apply(this,arguments)}}())):(this.toastrService.error("Something went wrong, Please try again"),a(!1))})}deleteMsg(t){return new Promise((r,a)=>{var u;this.afs.collection("chatroom").doc(null===(u=this.selectedGroup)||void 0===u?void 0:u.groupId).collection("messages").doc(t).update({viewBy:Ur(this.userDetails.id)}).then(h=>{r("success")})})}isExistOneToOneGroup(t){var i=this;return new Promise((a,u)=>{this.afs.collection("groups",h=>h.where("isGroup","==",!1).where("members","array-contains",this.userDetails.id)).snapshotChanges().subscribe(function(){var h=(0,X.Z)(function*(m){let F=yield m.map(b=>{const M=b.payload.doc.data(),k=b.payload.doc;return Object.assign(Object.assign({},M),{doc:k})});if(F.length>0){let b=yield F.filter(M=>{let k=[];if(M.blockUsers&&M.blockUsers.length>0&&(k=M.blockUsers.filter(A=>A===i.userDetails.id)),k&&0===k.length){let A=M.members.find(P=>P===t);if(A)return A}});a(b)}else a([])});return function(m){return h.apply(this,arguments)}}())})}deleteOneToOneGroup(t){var i=this;return new Promise((a,u)=>{t?this.isExistOneToOneGroup(t).then(function(){var h=(0,X.Z)(function*(m){var F,b;if((null==m?void 0:m.length)>0)for(let M=0;M<(null==m?void 0:m.length);M++)(null===(F=m[M])||void 0===F?void 0:F.groupId)&&(yield i.afs.collection("groups").doc(null===(b=m[M])||void 0===b?void 0:b.groupId).delete().then(k=>{i.updateUser(i.userDetails.id,"groups",i.userDetails.id,!1).then(A=>{})}).catch(k=>{console.log("error",k)}))});return function(m){return h.apply(this,arguments)}}()).catch(h=>{console.log("error",h)}):u("user id not found")})}updateGroupDetails(t,i,r){return new Promise((u,h)=>{t?this.afs.collection("groups").doc(t).update({name:i,groupImage:r}).then(m=>{u(!0)}).catch(m=>{console.log("error",m),u(!1)}):h("Group id not found")})}deleteOneToManyGroup(t){return new Promise((r,a)=>{t&&this.userDetails.id&&this.afs.collection("groups").doc(t).delete().then(u=>{r(!0)}).catch(u=>{console.log("error",u),r(!1)})})}updateGroup(t,i,r,a){return new Promise((h,m)=>{a?this.afs.collection("groups").doc(t).update({[i]:Zl(r)}).then(F=>{h(!0)}).catch(F=>{console.log("error",F),m(!1)}):this.afs.collection("groups").doc(t).update({[i]:r}).then(F=>{h(!0)}).catch(F=>{console.log("error",F),m(!1)})})}exitGroup(){var t=this;return new Promise(function(){var r=(0,X.Z)(function*(a,u){var h;const m=t.selectedGroup.createdBy===t.userDetails.id,F=t.selectedGroup.members.filter(M=>M!==t.userDetails.id),b=t.selectedGroup.users.filter(M=>M.userId===t.userDetails.id);yield t.afs.collection("groups").doc(null===(h=t.selectedGroup)||void 0===h?void 0:h.groupId).update({members:Ur(t.userDetails.id),viewBy:Ur(t.userDetails.id),users:Ur(b[0])}).then(function(){var M=(0,X.Z)(function*(k){var A,P,j,K;m&&(1===(null==F?void 0:F.length)?t.deleteOneToManyGroup(null===(A=t.selectedGroup)||void 0===A?void 0:A.groupId).then(he=>{t.redirectToChatPage.next(!0)}).catch(he=>{console.log("error",he)}):(null==F?void 0:F.length)>0?yield t.updateGroup(null===(P=t.selectedGroup)||void 0===P?void 0:P.groupId,"createdBy",F[0],!1).then(he=>{}).catch(he=>{console.log("error",he)}):yield t.deleteOneToManyGroup(null===(j=t.selectedGroup)||void 0===j?void 0:j.groupId).then(he=>{}).catch(he=>{console.log("error",he)})),yield t.updateUser(t.userDetails.id,"groups",null===(K=t.selectedGroup)||void 0===K?void 0:K.groupId,!1).then(he=>{a(!0)}).catch(he=>{console.log("error",he)})});return function(k){return M.apply(this,arguments)}}()).catch(M=>{console.log("error",M),a(!1)})});return function(a,u){return r.apply(this,arguments)}}())}removeUserFromGroup(t){var i=this;return new Promise(function(){var a=(0,X.Z)(function*(u,h){var m;const F=i.selectedGroup.members.filter(k=>k!==t);i.selectedGroup.members=F;const b=i.selectedGroup.users.filter(k=>k.userId===t);i.selectedGroup.users=i.selectedGroup.users.filter(k=>k.userId!==t);const M=i.selectedGroup.readCount.filter(k=>k.userId!==t);i.selectedGroup.readCount=M,yield i.updateUser(t,"groups",null===(m=i.selectedGroup)||void 0===m?void 0:m.groupId,!1).then(function(){var k=(0,X.Z)(function*(A){var P;yield i.afs.collection("groups").doc(null===(P=i.selectedGroup)||void 0===P?void 0:P.groupId).update({members:Ur(t),users:Ur(b[0]),viewBy:Ur(t)}).then(function(){var j=(0,X.Z)(function*(K){var he;1===F.length&&i.deleteOneToManyGroup(null===(he=i.selectedGroup)||void 0===he?void 0:he.groupId).then(be=>{i.redirectToChatPage.next(!0)}).catch(be=>{console.log("error",be)})});return function(K){return j.apply(this,arguments)}}()).catch(j=>{console.log("error",j),h(!1)}),u(!0)});return function(A){return k.apply(this,arguments)}}()).catch(k=>{console.log("error",k),h(!1)})});return function(u,h){return a.apply(this,arguments)}}())}addNewMembersInGroup(t){var i=this;return new Promise(function(){var a=(0,X.Z)(function*(u,h){var m;for(let b=0;b<t.length;b++)yield i.updateUser(t[b].userId,"groups",null===(m=i.selectedGroup)||void 0===m?void 0:m.groupId,!0).then(function(){var M=(0,X.Z)(function*(k){var A,P;let j=t[b];i.selectedGroup.userList.push(t[b]),j.groups.push(null===(A=i.selectedGroup)||void 0===A?void 0:A.groupId),i.selectedGroup.users.push(j),yield i.afs.collection("groups").doc(null===(P=i.selectedGroup)||void 0===P?void 0:P.groupId).update({members:Zl(t[b].userId),users:Zl(t[b]),viewBy:Zl(t[b].userId)}).then(function(){var K=(0,X.Z)(function*(he){i.selectedGroup.members.push(t[b].userId),i.selectedGroup.viewBy.push(t[b].userId)});return function(he){return K.apply(this,arguments)}}()).catch(K=>{console.log("error",K),h(!1)})});return function(k){return M.apply(this,arguments)}}()).catch(M=>{console.log("error",M),h(!1)});u(!0)});return function(u,h){return a.apply(this,arguments)}}())}removeLoginUserFromGroup(t){var i=this;return new Promise(function(){var a=(0,X.Z)(function*(u,h){yield i.isExistOneToOneGroup(t).then(function(){var m=(0,X.Z)(function*(F){var b;(null==F?void 0:F.length)>0?yield i.afs.collection("groups").doc(null===(b=F[0])||void 0===b?void 0:b.groupId).update({viewBy:Ur(i.userDetails.id)}).then(M=>{u(!0)}).catch(M=>{console.log("error",M),u(!1)}):u(!0)});return function(F){return m.apply(this,arguments)}}()).catch(m=>{console.log("error",m),u(!1)})});return function(u,h){return a.apply(this,arguments)}}())}errorMsgAndRedirectToLogin(){this.toastrService.error("Something went wrong, Please try again"),this.router.navigate(["/"])}exitUserFromGroup(t){var i=this;new Promise(function(){var a=(0,X.Z)(function*(u,h){yield i.afs.collection("groups").doc(t).update({viewBy:Ur(i.userDetails.id)}).then(function(){var m=(0,X.Z)(function*(F){yield i.updateUser(i.userDetails.id,"groups",t,!1).then(function(){var b=(0,X.Z)(function*(M){});return function(M){return b.apply(this,arguments)}}()).catch(b=>{console.log("error",b)})});return function(F){return m.apply(this,arguments)}}())});return function(u,h){return a.apply(this,arguments)}}())}updateMessage(t,i){return new Promise((a,u)=>{this.afs.collection("chatroom").doc(t).collection("messages").doc(i.msgId).update({msgId:i.msgId}).then(h=>{a(!0)}).catch(h=>{console.log(h)})})}removeUserFromMessage(t,i,r){return new Promise((u,h)=>{this.afs.collection("chatroom").doc(t).collection("messages").doc(r).update({viewBy:Ur(i)}).then(m=>{u(!0)}).catch(m=>{console.log(m)})})}addBlockUserFromGroup(t){var i=this;const r=t.members.filter(h=>h!==this.userDetails.id);let a;return r&&r.length>0&&(a=r[0]),new Promise(function(){var h=(0,X.Z)(function*(m,F){yield i.isExistOneToOneGroup(a).then(function(){var b=(0,X.Z)(function*(M){(null==M?void 0:M.length)>0?i.afs.collection("groups").doc(M[0].groupId).update({blockUsers:Zl(a)}).then(k=>{m(!0)}).catch(k=>{console.log(k),m(!0)}).catch(k=>{console.log(k)}):m(!1)});return function(M){return b.apply(this,arguments)}}())});return function(m,F){return h.apply(this,arguments)}}())}removeBlockUserFromGroup(t){var i=this;return new Promise(function(){var a=(0,X.Z)(function*(u,h){yield i.isExistOneToOneGroup(t).then(function(){var m=(0,X.Z)(function*(F){(null==F?void 0:F.length)>0?i.afs.collection("groups").doc(F[0].groupId).update({blockUsers:Ur(t)}).then(b=>{u(!0)}).catch(b=>{console.log(b),u(!0)}):u(!1)});return function(F){return m.apply(this,arguments)}}())});return function(u,h){return a.apply(this,arguments)}}())}updateUserProfile(t){return new Promise((r,a)=>{this.updateUserInGroups(t),this.afs.collection("users").doc(this.userDetails.id).update(t).then(function(){var u=(0,X.Z)(function*(h){r(!0)});return function(h){return u.apply(this,arguments)}}()).catch(u=>{console.log(u),r(!0)})})}updateUserInGroups(t){var i=this;return(0,X.Z)(function*(){let r=yield i.afs.collection("groups",a=>a.where("members","array-contains",i.userDetails.id)).snapshotChanges().subscribe(function(){var a=(0,X.Z)(function*(u){let h=yield u.map(m=>{const F=m.payload.doc.data();return Object.assign({},F)});if(r.unsubscribe(),h.length>0)for(let m=0;m<h.length;m++)if(h[m]&&h[m].users&&h[m].users.length>0)for(let F=0;F<h[m].users.length;F++)h[m].users[F].userId===i.userDetails.id&&(h[m].users[F].name=t.name,h[m].users[F].profilePicture=t.profilePicture,yield i.afs.collection("groups").doc(h[m].groupId).update({users:h[m].users}).then(b=>{}).catch(b=>{console.log(b)}))});return function(u){return a.apply(this,arguments)}}())})()}getGroupMembersDetails(){if(this.selectedGroup.userList=[],this.selectedGroup.members&&this.selectedGroup.members.length>0&&this.selectedGroup.users&&this.selectedGroup.users.length>0)for(let t=0;t<this.selectedGroup.users.length;t++){let i=this.selectedGroup.viewBy.filter(r=>this.selectedGroup.users[t]&&r===this.selectedGroup.users[t].userId);i&&i.length>0&&this.selectedGroup.userList.push(this.selectedGroup.users[t])}}deActivateAccount(){var t=this;return new Promise((r,a)=>{let u=this.afs.collection("groups",h=>h.where("isGroup","==",!1).where("members","array-contains",this.userDetails.id)).snapshotChanges().subscribe(function(){var h=(0,X.Z)(function*(m){u.unsubscribe();let F=yield m.map(b=>{const M=b.payload.doc.data(),k=b.payload.doc;return Object.assign(Object.assign({},M),{doc:k})});if(F.length>0){for(let b=0;b<F.length;b++){let M=[];F&&F[b]&&F[b].blockUsers&&F[b].blockUsers.length>0&&(M=F[b].blockUsers.filter(k=>k===t.userDetails.id)),0===M.length&&(yield t.afs.collection("groups").doc(F[b].groupId).update({isDeactivateUser:!0,typing:Ur(t.userDetails.id),online:Ur(t.userDetails.id)}).then(k=>{}).catch(k=>{console.log("error",k)}))}r(!0)}else r([])});return function(m){return h.apply(this,arguments)}}())})}activateUser(t){var i=this;let r=this.afs.collection("groups",a=>a.where("isGroup","==",!1).where("members","array-contains",t)).snapshotChanges().subscribe(function(){var a=(0,X.Z)(function*(u){r.unsubscribe();let h=yield u.map(m=>{const F=m.payload.doc.data(),b=m.payload.doc;return Object.assign(Object.assign({},F),{doc:b})});if(h.length>0)for(let m=0;m<h.length;m++){let F=[];h&&h[m]&&h[m].blockUsers&&h[m].blockUsers.length>0&&(F=h[m].blockUsers.filter(b=>b===t)),0===F.length&&(yield i.afs.collection("groups").doc(h[m].groupId).update({isDeactivateUser:!1}).then(b=>{}).catch(b=>{console.log("error",b)}))}});return function(u){return a.apply(this,arguments)}}())}createUser(t){var i=this;return new Promise(function(){var a=(0,X.Z)(function*(u,h){i.afs.collection("users").doc(t.userId).set(t).then(function(){var m=(0,X.Z)(function*(F){u(!0)});return function(F){return m.apply(this,arguments)}}())});return function(u,h){return a.apply(this,arguments)}}())}updateProfile(t,i){return this.updateUserInGroups(i),new Promise((a,u)=>{this.afs.collection("users").doc(t).update({name:i.name,profilePicture:i.profilePicture}).then(h=>{a(!0)}).catch(h=>{console.log("error",h),a(!1)})})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(CZ),l.LFG(PY),l.LFG(FQ),l.LFG(bi),l.LFG(z1),l.LFG(Ir))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Khe{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const Yhe={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const _i="undefined"!=typeof window&&window||{};var fE=(()=>(function(n){n.isBs3="bs3",n.isBs4="bs4",n.isBs5="bs5"}(fE||(fE={})),fE))();let xo;function vO(){if(void 0===_i.document)return"bs4";const n=_i.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),_i.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=_i.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(_i.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(_i.document.head.removeChild(n),"bs4"):(_i.document.head.removeChild(n),"bs5")}function eh(){return void 0===_i||(void 0===_i.__theme?(xo||(xo=vO()),"bs3"===xo):"bs3"===_i.__theme)}function NQ(){return!eh()&&(xo||(xo=vO()),"bs4"===xo)}function ym(){return{isBs3:eh(),isBs4:NQ(),isBs5:!eh()&&!NQ()&&(xo||(xo=vO()),"bs5"===xo)}}"undefined"==typeof console||console;let wO,rfe=(()=>{class n{constructor(){this._focusTrapStack=[]}register(t){this._focusTrapStack=this._focusTrapStack.filter(r=>r!==t);let i=this._focusTrapStack;i.length&&i[i.length-1]._disable(),i.push(t),t._enable()}deregister(t){t._disable();const i=this._focusTrapStack,r=i.indexOf(t);-1!==r&&(i.splice(r,1),i.length&&i[i.length-1]._enable())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{wO="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){wO=!1}let AQ=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?m1(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wO)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IQ=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function(n){try{return n.frameElement}catch(e){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===PQ(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),a=PQ(t);return t.hasAttribute("contenteditable")?-1!==a:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==a:"video"===r?-1!==a&&(null!==a||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||LQ(n))}(t)&&!this.isDisabled(t)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(AQ))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function LQ(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function PQ(n){if(!LQ(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function VQ(n){return null!=n&&"false"!=`${n}`}class mfe{constructor(e,t,i,r,a=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,a||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),t&&(t.removeEventListener("focus",this.endAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement()))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);for(let i=0;i<t.length;i++)t[i].hasAttribute(`cdk-focus-${e}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]):t[i].hasAttribute(`cdk-focus-region-${e}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${e}', use 'cdkFocusRegion${e}' instead. The deprecated attribute will be removed in 8.0.0.`,t[i]);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const t=this._getFirstTabbableElement(e);return null==t||t.focus(),!!t}return e.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const e=this._getRegionBoundary("start");return e&&e.focus(),!!e}focusLastTabbableElement(){const e=this._getRegionBoundary("end");return e&&e.focus(),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=0;i<t.length;i++){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children||e.childNodes;for(let i=t.length-1;i>=0;i--){let r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(f4(1)).subscribe(e)}}let gfe=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new mfe(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(IQ),l.LFG(l.R0b),l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cfe=(()=>{class n{constructor(t,i,r){this._elementRef=t,this._focusTrapFactory=i,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=r,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(t){this.focusTrap.enabled=VQ(t)}get autoCapture(){return this._autoCapture}set autoCapture(t){this._autoCapture=VQ(t)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(t){const i=t.autoCapture;i&&!i.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(gfe),l.Y36(Ce))},n.\u0275dir=l.lG2({type:n,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[l.TTD]}),n})(),OQ=(()=>{class n{static forRoot(){return{ngModule:n,providers:[rfe,AQ,IQ]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ei]]}),n})();var _fe=B(9105);function pE(n,e,t,i){return(0,_fe.m)(t)&&(i=t,t=void 0),i?pE(n,e,t).pipe((0,nt.U)(r=>(0,Y2.k)(r)?i(...r):i(r))):new ei.y(r=>{RQ(n,e,function(u){r.next(arguments.length>1?Array.prototype.slice.call(arguments):u)},r,t)})}function RQ(n,e,t,i,r){let a;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const u=n;n.addEventListener(e,t,r),a=()=>u.removeEventListener(e,t,r)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const u=n;n.on(e,t),a=()=>u.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const u=n;n.addListener(e,t),a=()=>u.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let u=0,h=n.length;u<h;u++)RQ(n[u],e,t,i,r)}i.add(a)}var wfe=B(6465),Efe=B(6102);const Sfe=new class extends Efe.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let i,r=-1,a=t.length;e=e||t.shift();do{if(i=e.execute(e.state,e.delay))break}while(++r<a&&(e=t.shift()));if(this.active=!1,i){for(;++r<a&&(e=t.shift());)e.unsubscribe();throw i}}}(class extends wfe.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(()=>e.flush(null))))}recycleAsyncId(e,t,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(e,t,i);0===e.actions.length&&(cancelAnimationFrame(t),e.scheduled=void 0)}});var mE=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top"}(mE||(mE={})),mE))(),vm=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top"}(vm||(vm={})),vm))();function V6(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,i=null==t?void 0:t.getComputedStyle(n,null);return e?i&&i[e]:i}function bO(n){if(!n)return document.documentElement;let i,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&i!==n.nextElementSibling;)i=n.nextElementSibling,t=i.offsetParent;const r=t&&t.nodeName;return r&&"BODY"!==r&&"HTML"!==r?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===V6(t,"position")?bO(t):t:i?i.ownerDocument.documentElement:document.documentElement}function EO(n){return null!==n.parentNode?EO(n.parentNode):n}function gE(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=t?n:e,r=t?e:n,a=document.createRange();a.setStart(i,0),a.setEnd(r,0);const u=a.commonAncestorContainer;if(n!==u&&e!==u||i.contains(r))return function(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||bO(n.firstElementChild)===n)}(u)?u:bO(u);const h=EO(n);return h.host?gE(h.host,e):gE(n,EO(e).host)}function zQ(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===V6(e,"transform");)e=e.parentElement;return e||document.documentElement}function HQ(n,e){const t="x"===e?"Left":"Top",i="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${i}Width`])}function BQ(n,e,t,i){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function jQ(n){const e=n.body,t=n.documentElement;return{height:BQ("Height",e,t),width:BQ("Width",e,t)}}function wm(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function Fi(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function UQ(n){const e=n.getBoundingClientRect();if(!(e&&Fi(e.top)&&Fi(e.left)&&Fi(e.bottom)&&Fi(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},i="HTML"===n.nodeName?jQ(n.ownerDocument):void 0,r=(null==i?void 0:i.width)||n.clientWidth||Fi(e.right)&&Fi(t.left)&&e.right-t.left||0,a=(null==i?void 0:i.height)||n.clientHeight||Fi(e.bottom)&&Fi(t.top)&&e.bottom-t.top||0;let u=n.offsetWidth-r,h=n.offsetHeight-a;if(u||h){const m=V6(n);u-=HQ(m,"x"),h-=HQ(m,"y"),t.width-=u,t.height-=h}return wm(t)}function MO(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function SO(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:i}=V6(n);return/(auto|scroll|overlay)/.test(String(e)+String(i)+String(t))?n:SO(MO(n))}function DO(n,e,t=!1){var i,r,a,u,h,m;const F="HTML"===e.nodeName,b=UQ(n),M=UQ(e),A=(SO(n),V6(e)),P=parseFloat(A.borderTopWidth),j=parseFloat(A.borderLeftWidth);t&&F&&(M.top=Math.max(null!==(i=M.top)&&void 0!==i?i:0,0),M.left=Math.max(null!==(r=M.left)&&void 0!==r?r:0,0));const K=wm({top:(null!==(a=b.top)&&void 0!==a?a:0)-(null!==(u=M.top)&&void 0!==u?u:0)-P,left:(null!==(h=b.left)&&void 0!==h?h:0)-(null!==(m=M.left)&&void 0!==m?m:0)-j,width:b.width,height:b.height});if(K.marginTop=0,K.marginLeft=0,F){const he=parseFloat(A.marginTop),be=parseFloat(A.marginLeft);Fi(K.top)&&(K.top-=P-he),Fi(K.bottom)&&(K.bottom-=P-he),Fi(K.left)&&(K.left-=j-be),Fi(K.right)&&(K.right-=j-be),K.marginTop=he,K.marginLeft=be}return K}function GQ(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",i=n.nodeName;if("BODY"===i||"HTML"===i){const r=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||r)[t]}return n[t]}function qQ(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===V6(n,"position")||qQ(MO(n)))}function kO(n,e,t=0,i,r=!1){let a={top:0,left:0};const u=r?zQ(n):gE(n,e);if("viewport"===i)a=function(n,e=!1){const t=n.ownerDocument.documentElement,i=DO(n,t),r=Math.max(t.clientWidth,window.innerWidth||0),a=Math.max(t.clientHeight,window.innerHeight||0),u=e?0:GQ(t),h=e?0:GQ(t,"left");return wm({top:u-Number(null==i?void 0:i.top)+Number(null==i?void 0:i.marginTop),left:h-Number(null==i?void 0:i.left)+Number(null==i?void 0:i.marginLeft),width:r,height:a})}(u,r);else{let h;"scrollParent"===i?(h=SO(MO(e)),"BODY"===h.nodeName&&(h=n.ownerDocument.documentElement)):h="window"===i?n.ownerDocument.documentElement:i;const m=DO(h,u,r);if(m&&"HTML"===h.nodeName&&!qQ(u)){const{height:F,width:b}=jQ(n.ownerDocument);Fi(a.top)&&Fi(m.top)&&Fi(m.marginTop)&&(a.top+=m.top-m.marginTop),Fi(a.top)&&(a.bottom=Number(F)+Number(m.top)),Fi(a.left)&&Fi(m.left)&&Fi(m.marginLeft)&&(a.left+=m.left-m.marginLeft),Fi(a.top)&&(a.right=Number(b)+Number(m.left))}else m&&(a=m)}return Fi(a.left)&&(a.left+=t),Fi(a.top)&&(a.top+=t),Fi(a.right)&&(a.right-=t),Fi(a.bottom)&&(a.bottom-=t),a}function Nfe({width:n,height:e}){return n*e}function $Q(n,e,t,i,r=["top","bottom","right","left"],a="viewport",u=0){var h,m,F,b,M,k,A,P,j,K,he,be;if(-1===n.indexOf("auto"))return n;const ye=kO(t,i,u,a),Ae={top:{width:null!==(h=null==ye?void 0:ye.width)&&void 0!==h?h:0,height:(null!==(m=null==e?void 0:e.top)&&void 0!==m?m:0)-(null!==(F=null==ye?void 0:ye.top)&&void 0!==F?F:0)},right:{width:(null!==(b=null==ye?void 0:ye.right)&&void 0!==b?b:0)-(null!==(M=null==e?void 0:e.right)&&void 0!==M?M:0),height:null!==(k=null==ye?void 0:ye.height)&&void 0!==k?k:0},bottom:{width:null!==(A=null==ye?void 0:ye.width)&&void 0!==A?A:0,height:(null!==(P=null==ye?void 0:ye.bottom)&&void 0!==P?P:0)-(null!==(j=null==e?void 0:e.bottom)&&void 0!==j?j:0)},left:{width:(null!==(K=e.left)&&void 0!==K?K:0)-(null!==(he=null==ye?void 0:ye.left)&&void 0!==he?he:0),height:null!==(be=null==ye?void 0:ye.height)&&void 0!==be?be:0}},ze=Object.keys(Ae).map(Gt=>Object.assign(Object.assign({position:Gt},Ae[Gt]),{area:Nfe(Ae[Gt])})).sort((Gt,ki)=>ki.area-Gt.area);let ut=ze.filter(({width:Gt,height:ki})=>Gt>=t.clientWidth&&ki>=t.clientHeight);ut=ut.filter(({position:Gt})=>r.some(ki=>ki===Gt));const Et=ut.length>0?ut[0].position:ze[0].position,Sn=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${ym().isBs5?vm[Et]:Et}`),Et+(Sn?`-${Sn}`:"")}const CE=(n,e=0)=>n?parseFloat(n):e;function WQ(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),i=CE(null==t?void 0:t.marginTop)+CE(null==t?void 0:t.marginBottom),r=CE(null==t?void 0:t.marginLeft)+CE(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+r,height:Number(n.offsetHeight)+i}}function ZQ(n,e,t){return DO(e,t?zQ(n):gE(n,e),t)}function xO(n,e,t){var i,r,a;const u=t.split(" ")[0],h=WQ(n),m={width:h.width,height:h.height},F=-1!==["right","left"].indexOf(u),b=F?"top":"left",M=F?"left":"top",k=F?"height":"width",A=F?"width":"height";return m[b]=(null!==(i=e[b])&&void 0!==i?i:0)+e[k]/2-h[k]/2,m[M]=u===M?(null!==(r=e[M])&&void 0!==r?r:0)-h[A]:null!==(a=e[function(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(M)])&&void 0!==a?a:0,m}function KQ(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const Lfe={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function _E(n,e){return!!ym().isBs5&&Lfe[e].includes(n)}function YQ(n,e,t){!n||!e||Object.keys(e).forEach(i=>{let r="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&function(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[i])&&(r="px"),t?t.setStyle(n,i,`${String(e[i])}${r}`):n.style[i]=String(e[i])+r})}function Ofe(n){var e,t,i,r,a,u;let h=n.offsets.target;const m=n.instance.target.querySelector(".arrow");if(!m)return n;const F=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),b=F?"height":"width",M=F?"Top":"Left",k=M.toLowerCase(),A=F?"left":"top",P=F?"bottom":"right",j=WQ(m)[b],K=n.placement.split(" ")[1];(null!==(e=n.offsets.host[P])&&void 0!==e?e:0)-j<(null!==(t=h[k])&&void 0!==t?t:0)&&(h[k]-=(null!==(i=h[k])&&void 0!==i?i:0)-((null!==(r=n.offsets.host[P])&&void 0!==r?r:0)-j)),Number(n.offsets.host[k])+Number(j)>(null!==(a=h[P])&&void 0!==a?a:0)&&(h[k]+=Number(n.offsets.host[k])+Number(j)-Number(h[P])),h=wm(h);const he=V6(n.instance.target),be=parseFloat(he[`margin${M}`])||0,ye=parseFloat(he[`border${M}Width`])||0;let Ae;if(K){const ut=parseFloat(he.borderRadius)||0,Et=Number(be+ye+ut);Ae=k===K?Number(n.offsets.host[k])+Et:Number(n.offsets.host[k])+Number(n.offsets.host[b]-Et)}else Ae=Number(n.offsets.host[k])+Number(n.offsets.host[b]/2-j/2);let ze=Ae-(null!==(u=h[k])&&void 0!==u?u:0)-be-ye;return ze=Math.max(Math.min(h[b]-(j+5),ze),0),n.offsets.arrow={[k]:Math.round(ze),[A]:""},n.instance.arrow=m,n}function Rfe(n){if(n.offsets.target=wm(n.offsets.target),!KQ(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),xO(n.instance.target,n.offsets.host,n.placement)),n;const e=kO(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],i=n.placement.split(" ")[1]||"";const h=$Q("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),m=[t,h];return m.forEach((F,b)=>{var M,k,A,P,j,K,he,be,ye,Ae,ze,ut,Et,Sn,Gt,ki;if(t!==F||m.length===b+1)return;t=n.placement.split(" ")[0];const ka="left"===t&&Math.floor(null!==(M=n.offsets.target.right)&&void 0!==M?M:0)>Math.floor(null!==(k=n.offsets.host.left)&&void 0!==k?k:0)||"right"===t&&Math.floor(null!==(A=n.offsets.target.left)&&void 0!==A?A:0)<Math.floor(null!==(P=n.offsets.host.right)&&void 0!==P?P:0)||"top"===t&&Math.floor(null!==(j=n.offsets.target.bottom)&&void 0!==j?j:0)>Math.floor(null!==(K=n.offsets.host.top)&&void 0!==K?K:0)||"bottom"===t&&Math.floor(null!==(he=n.offsets.target.top)&&void 0!==he?he:0)<Math.floor(null!==(be=n.offsets.host.bottom)&&void 0!==be?be:0),x2=Math.floor(null!==(ye=n.offsets.target.left)&&void 0!==ye?ye:0)<Math.floor(null!==(Ae=e.left)&&void 0!==Ae?Ae:0),u1=Math.floor(null!==(ze=n.offsets.target.right)&&void 0!==ze?ze:0)>Math.floor(null!==(ut=e.right)&&void 0!==ut?ut:0),Fu=Math.floor(null!==(Et=n.offsets.target.top)&&void 0!==Et?Et:0)<Math.floor(null!==(Sn=e.top)&&void 0!==Sn?Sn:0),Hm=Math.floor(null!==(Gt=n.offsets.target.bottom)&&void 0!==Gt?Gt:0)>Math.floor(null!==(ki=e.bottom)&&void 0!==ki?ki:0),Xe="left"===t&&x2||"right"===t&&u1||"top"===t&&Fu||"bottom"===t&&Hm,ct=-1!==["top","bottom"].indexOf(t),Mt=ct&&"left"===i&&x2||ct&&"right"===i&&u1||!ct&&"left"===i&&Fu||!ct&&"right"===i&&Hm;(ka||Xe||Mt)&&((ka||Xe)&&(t=m[b+1]),Mt&&(i=function(n){return"right"===n?"left":"left"===n?"right":n}(i)),n.placement=t+(i?` ${i}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),xO(n.instance.target,n.offsets.host,n.placement)))}),n}function Hfe(n){var e;if(!KQ(n.options,"preventOverflow"))return n;const t="transform",i=n.instance.target.style,{top:r,left:a,[t]:u}=i;i.top="",i.left="",i[t]="";const h=kO(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);i.top=r,i.left=a,i[t]=u;const F={primary(b){var M,k,A,P;let j=n.offsets.target[b];return(null!==(M=n.offsets.target[b])&&void 0!==M?M:0)<(null!==(k=h[b])&&void 0!==k?k:0)&&(j=Math.max(null!==(A=n.offsets.target[b])&&void 0!==A?A:0,null!==(P=h[b])&&void 0!==P?P:0)),{[b]:j}},secondary(b){var M,k,A,P;const j="right"===b,K=j?"left":"top";let be=n.offsets.target[K];return(null!==(M=n.offsets.target[b])&&void 0!==M?M:0)>(null!==(k=h[b])&&void 0!==k?k:0)&&(be=Math.min(null!==(A=n.offsets.target[K])&&void 0!==A?A:0,(null!==(P=h[b])&&void 0!==P?P:0)-n.offsets.target[j?"width":"height"])),{[K]:be}}};return["left","right","top","bottom"].forEach(b=>{const M=-1!==["left","top","start"].indexOf(b)?F.primary:F.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),M(b))}),n}function Bfe(n){var e;const t=n.placement,i=t.split(" ")[0],r=t.split(" ")[1];if(r){const{host:a,target:u}=n.offsets,h=-1!==["bottom","top"].indexOf(i),m=h?"left":"top",F=h?"width":"height",b={start:{[m]:a[m]},end:{[m]:(null!==(e=a[m])&&void 0!==e?e:0)+a[F]-u[F]}};n.offsets.target=Object.assign(Object.assign({},u),{[m]:m===r?b.start[m]:b.end[m]})}return n}const Ufe=new class{position(e,t){return this.offset(e,t)}offset(e,t){return ZQ(t,e)}positionElements(e,t,i,r,a){const u=[Rfe,Bfe,Hfe,Ofe],m=function(n,e,t,i){if(!n||!e)return;const r=ZQ(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const a=!!t.match(/auto/g);let u=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const h=u.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return h&&(u=h[1]+(h[2]?` ${h[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(u)&&(u="auto"),u=$Q(u,r,n,e,i?i.allowedPositions:void 0),{options:i||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:xO(n,r,u),host:r,arrow:void 0},positionFixed:!1,placement:u,placementAuto:a}}(t,e,mE[i],a);if(m)return u.reduce((F,b)=>b(F),m)}};function Gfe(n,e,t,i,r,a){const u=Ufe.positionElements(n,e,t,i,r);if(!u)return;const h=function(n){var e,t,i,r;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(i=n.offsets.target.bottom)&&void 0!==i?i:0),right:Math.floor(null!==(r=n.offsets.target.right)&&void 0!==r?r:0)}}(u);YQ(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${h.left}px, ${h.top}px, 0px)`},a),u.instance.arrow&&YQ(u.instance.arrow,u.offsets.arrow,a),function(n,e){const t=n.instance.target;let i=t.className;const r=ym().isBs5?vm[n.placement]:n.placement;n.placementAuto&&(i=i.replace(/bs-popover-auto/g,`bs-popover-${r}`),i=i.replace(/ms-2|me-2|mb-2|mt-2/g,""),i=i.replace(/bs-tooltip-auto/g,`bs-tooltip-${r}`),i=i.replace(/\sauto/g,` ${r}`),-1!==i.indexOf("popover")&&(i=i+" "+function(n){return ym().isBs5?_E(n,"end")?"ms-2":_E(n,"start")?"me-2":_E(n,"top")?"mb-2":_E(n,"bottom")?"mt-2":"":""}(r)),-1!==i.indexOf("popover")&&-1===i.indexOf("popover-auto")&&(i+=" popover-auto"),-1!==i.indexOf("tooltip")&&-1===i.indexOf("tooltip-auto")&&(i+=" tooltip-auto")),i=i.replace(/left|right|top|bottom|end|start/g,`${r.split(" ")[0]}`),e?e.setAttribute(t,"class",i):t.className=i}(u,a)}let NO=(()=>{class n{constructor(t,i,r){this.update$$=new nn.xQ,this.positionElements=new Map,this.isDisabled=!1,m1(r)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,db.T)(pE(window,"scroll",{passive:!0}),pE(window,"resize",{passive:!0}),(0,$e.of)(0,Sfe),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(a=>{Gfe(FE(a.target),FE(a.element),a.attachment,a.appendToBody,this.options,i.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(FE(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(FE(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.R0b),l.LFG(l.FYo),l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FE(n){return"string"==typeof n?document.querySelector(n):n instanceof l.SBq?n.nativeElement:null!=n?n:null}class bm{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class qfe{constructor(e,t,i,r,a,u,h,m){this._viewContainerRef=e,this._renderer=t,this._elementRef=i,this._injector=r,this._componentFactoryResolver=a,this._ngZone=u,this._applicationRef=h,this._posService=m,this.onBeforeShow=new l.vpe,this.onShown=new l.vpe,this.onBeforeHide=new l.vpe,this.onHidden=new l.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=l.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof l.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const i=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!i)return;i.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,i,r,a,u,h;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const m=this._componentRef.location.nativeElement;return null===(t=m.parentNode)||void 0===t||t.removeChild(m),null===(r=null===(i=this._contentRef)||void 0===i?void 0:i.componentRef)||void 0===r||r.destroy(),this._viewContainerRef&&(null===(a=this._contentRef)||void 0===a?void 0:a.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(h=null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)||void 0===h||h.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const i=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),r=this._listenOpts.show=u=>{e.show?e.show(u):this.show(u),u()};return this._renderer&&(this._unregisterListenersFn=function(n,e){const t=function(n,e=Yhe){const t=(n||"").trim();if(0===t.length)return[];const i=t.split(/\s+/).map(a=>a.split(":")).map(a=>{const u=e[a[0]]||a;return new Khe(u[0],u[1])}),r=i.filter(a=>a.isManual());if(r.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===r.length&&i.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return i}(e.triggers),i=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const r=[],a=[],u=()=>{a.forEach(h=>r.push(h())),a.length=0};return t.forEach(h=>{const m=h.open===h.close,F=m?e.toggle:e.show;if(!m&&h.close&&e.hide){const b=n.listen(i,h.close,e.hide);a.push(()=>b)}F&&r.push(n.listen(i,h.open,()=>F(u)))}),()=>{r.forEach(h=>h())}}(this._renderer,{target:e.target,triggers:e.triggers,show:r,hide:i,toggle:u=>{this.isShown?i():r(u)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(i=>i.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(i=>i.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,i){if(!e)return new bm([]);if(e instanceof l.Rgc){if(this._viewContainerRef){const u=this._viewContainerRef.createEmbeddedView(e,t);return u.markForCheck(),new bm([u.rootNodes],u)}const a=e.createEmbeddedView({});return this._applicationRef.attachView(a),new bm([a.rootNodes],a)}if("function"==typeof e){const a=this._componentFactoryResolver.resolveComponentFactory(e),u=l.zs3.create({providers:this._providers,parent:this._injector}),h=a.create(u);return Object.assign(h.instance,i),this._applicationRef.attachView(h.hostView),new bm([[h.location.nativeElement]],h.hostView,h)}const r=this._renderer?[this._renderer.createText(`${e}`)]:[];return new bm([r])}}let TO=(()=>{class n{constructor(t,i,r,a,u){this._componentFactoryResolver=t,this._ngZone=i,this._injector=r,this._posService=a,this._applicationRef=u}createLoader(t,i,r){return new qfe(i,r,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l._Vd),l.LFG(l.R0b),l.LFG(l.zs3),l.LFG(NO),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $fe=["*"];let QQ=(()=>{class n{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),JQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const yE={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},Wfe=new l.OlP("override-default-config");let Zfe=(()=>{class n{constructor(t,i,r){this._element=i,this._renderer=r,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},t)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,eh()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(t){this.clickStartedInContent=t.target!==this._element.nativeElement}onClickStop(t){var i;this.config.ignoreBackdropClick||"static"===this.config.backdrop||t.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(i=this.bsModalService)||void 0===i||i.setDismissReason("backdrop-click"),this.hide())}onPopState(){var t;null===(t=this.bsModalService)||void 0===t||t.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(t){var i,r;!this.isShown||((27===t.keyCode||"Escape"===t.key)&&t.preventDefault(),this.config.keyboard&&this.level===(null===(i=this.bsModalService)||void 0===i?void 0:i.getModalsCount())&&(null===(r=this.bsModalService)||void 0===r||r.setDismissReason("esc"),this.hide()))}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,eh()?"in":"show"),setTimeout(()=>{var t,i;this.isShown=!1,document&&document.body&&1===(null===(t=this.bsModalService)||void 0===t?void 0:t.getModalsCount())&&(this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y","")),null===(i=this.bsModalService)||void 0===i||i.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(JQ),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(t,i){1&t&&l.NdJ("mousedown",function(a){return i.onClickStarted(a)})("click",function(a){return i.onClickStop(a)})("popstate",function(){return i.onPopState()},!1,l.Jf7)("keydown.esc",function(a){return i.onEsc(a)},!1,l.Jf7),2&t&&l.uIk("aria-modal",!0)("aria-labelledby",i.config.ariaLabelledBy)("aria-describedby",i.config.ariaDescribedby)},ngContentSelectors:$fe,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(t,i){1&t&&(l.F$t(),l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.Hsn(2),l.qZA(),l.qZA()),2&t&&l.Tol("modal-dialog"+(i.config.class?" "+i.config.class:""))},directives:[Cfe],encapsulation:2}),n})(),Kfe=(()=>{class n{constructor(t,i){this._isAnimated=!1,this._isShown=!1,this.element=t,this.renderer=i}get isAnimated(){return this._isAnimated}set isAnimated(t){this._isAnimated=t}get isShown(){return this._isShown}set isShown(t){this._isShown=t,t?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),eh()||(t?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),class{static reflow(e){}static getStyles(e){let t=e.ownerDocument.defaultView;return(!t||!t.opener)&&(t=_i),t.getComputedStyle(e)}static stackOverflowConfig(){const e=function(){const n=ym(),e=Object.keys(n).find(t=>n[t]);return fE[e]}();return{crossorigin:"bs3"!==e?"anonymous":void 0,integrity:"bs5"===e?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===e?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===e?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===e?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}.reflow(this.element.nativeElement)),this.isShown=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275cmp=l.Xpm({type:n,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),Yfe=1,su=(()=>{class n{constructor(t,i,r){this.clf=i,this.modalDefaultOption=r,this.onShow=new l.vpe,this.onShown=new l.vpe,this.onHide=new l.vpe,this.onHidden=new l.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=t.createRenderer(null,null),this.config=r?Object.assign({},yE,r):yE}show(t,i){this.modalsCount++,this._createLoaders();const r=(null==i?void 0:i.id)||Yfe++;return this.config=this.modalDefaultOption?Object.assign({},yE,this.modalDefaultOption,i):Object.assign({},yE,i),this.config.id=r,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(t)}hide(t){(1===this.modalsCount||null==t)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=t?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(t),this.removeLoaders(t)},this.config.animated?150:0)}_showBackdrop(){const t=!0===this.config.backdrop||"static"===this.config.backdrop,i=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),t&&i&&(this._backdropLoader.attach(Kfe).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(t){var i;const r=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const h of this.config.providers)r.provide(h);const a=new QQ,u=r.provide({provide:JQ,useValue:this.config}).provide({provide:QQ,useValue:a}).attach(Zfe).to("body");return a.hide=()=>{var h;return null===(h=u.instance)||void 0===h?void 0:h.hide()},a.setClass=h=>{u.instance&&(u.instance.config.class=h)},a.onHidden=new l.vpe,a.onHide=new l.vpe,this.copyEvent(r.onBeforeHide,a.onHide),this.copyEvent(r.onHidden,a.onHidden),u.show({content:t,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),u.instance&&(u.instance.level=this.getModalsCount(),a.content=r.getInnerComponent(),a.id=null===(i=u.instance.config)||void 0===i?void 0:i.id),a}_hideModal(t){if(null!=t){const i=this.loaders.findIndex(a=>{var u;return(null===(u=a.instance)||void 0===u?void 0:u.config.id)===t}),r=this.loaders[i];r&&r.hide(t)}else this.loaders.forEach(i=>{i.instance&&i.hide(i.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(t){this.lastDismissReason=t}removeBackdrop(){this._renderer.removeClass(document.body,"modal-open"),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const t=this._renderer.createElement("div");this._renderer.addClass(t,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,t);const i=t.offsetWidth-t.clientWidth;return this._renderer.removeChild(document.body,t),i}_createLoaders(){const t=this.clf.createLoader();this.copyEvent(t.onBeforeShow,this.onShow),this.copyEvent(t.onShown,this.onShown),this.copyEvent(t.onBeforeHide,this.onHide),this.copyEvent(t.onHidden,this.onHidden),this.loaders.push(t)}removeLoaders(t){if(null!=t){const i=this.loaders.findIndex(r=>{var a;return(null===(a=r.instance)||void 0===a?void 0:a.config.id)===t});i>=0&&(this.loaders.splice(i,1),this.loaders.forEach((r,a)=>{r.instance&&(r.instance.level=a+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(t,i){t.subscribe(r=>{i.emit(this.lastDismissReason||r)})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(TO),l.LFG(Wfe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();OQ.forRoot();let Qfe=(()=>{class n{static forRoot(){return{ngModule:n,providers:[su,TO,NO]}}static forChild(){return{ngModule:n,providers:[su,TO,NO]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[OQ]]}),n})(),Ma=(()=>{class n{constructor(t,i,r){this.chatService=t,this.toastrService=i,this.bsModalService=r,this.sideBarInfoOpen=0,this.chatRoomOpen=0,this.contactListOpen=0,this.createGroupOpen=0,this.myProfileOpen=0,this.addMemberOpen=0,this.blockUsersOpen=0,this.isLoading=0,this.loginUser={},this.removeChatDetails={},this.queryParams={secretKey:"",userId:""},this.friendList=[],this.tempFriendList=[],this.onOpenCloseChat=new l.vpe(!1),this.getFriendsData=new l.vpe(!1),this.getGroupDetail=new l.vpe(!1)}openSideBarInfo(){this.sideBarInfoOpen=1}closeSideBarInfo(){this.sideBarInfoOpen=0}openChatRoom(){this.chatRoomOpen=1}closeChatRoom(){this.chatRoomOpen=0}openContactList(){this.contactListOpen=1}closeContactList(){this.contactListOpen=0}openCreateGroup(){this.createGroupOpen=1}closeCreateGroup(){this.createGroupOpen=0}openMyProfile(){this.myProfileOpen=1}closeMyProfile(){this.myProfileOpen=0}openAddMember(){this.addMemberOpen=1}closeAddMember(){this.addMemberOpen=0}openBlockUsers(){this.blockUsersOpen=1}closeBlockUsers(){this.blockUsersOpen=0}getLocalStorage(t){return localStorage.getItem(t)}getUserDetails(){return this.getLocalStorage("ChatUserDetail")?JSON.parse(this.getLocalStorage("ChatUserDetail")||"{}"):{}}checkUserLogin(){const t=this.getUserDetails();return 0!=Object.keys(t).length}copy(t){return JSON.parse(JSON.stringify(t))}clearAllChatProperty(){this.chatService.chatUserId=null,this.chatService.isAddMember=!1,this.chatService.removeUserId="",this.chatService.selectedGroupMember=[],this.chatService.chats=[],this.chatService.selectedGroup=null,this.chatService.chatContent=!1,this.chatService.friendListContent=!1,this.chatService.groupImageNameContent=!1}removeChatValues(){localStorage.removeItem("groups"),localStorage.removeItem("lastselectedgroup")}deleteGroup(){this.chatService.deleteOneToManyGroup(this.chatService.selectedGroup.groupId).then(t=>{!0===t&&(this.closeChatRoom(),this.toastrService.success("Group is deleted"),this.chatService.groupImageNameContent=!1,this.chatService.chatContent=!1,this.bsModalService.hide(),this.chatService.selectedGroup={},this.closeSideBarInfo()),!1===t&&(this.bsModalService.hide(),this.toastrService.error("Something went wrong, Group is not deleted, Please try again"))}).catch(t=>{this.bsModalService.hide(),console.log("error",t),this.toastrService.error("Something went wrong, Group is not deleted, Please try again")})}exitGroup(){this.chatService.exitGroup().then(t=>{this.chatService.selectedGroup.userList.forEach((i,r)=>{i.userId===this.chatService.userDetails.id&&this.chatService.selectedGroup.userList.splice(r,1)}),this.clearAllChatProperty(),this.removeChatValues(),this.toastrService.success("Success"),this.bsModalService.hide(),this.closeSideBarInfo(),this.closeChatRoom()}).catch(t=>{this.bsModalService.hide(),console.log("error",t),this.toastrService.error("Something went wrong, Please try again")})}deleteChat(){var t=this;return(0,X.Z)(function*(){let i=t.chatService.selectedGroup.groupId;t.chatService.isChatClear=!0,t.bsModalService.hide(),yield t.chatService.clearChat(),t.chatService.exitUserFromGroup(i),t.chatService.getChats(i),t.removeChatDetails={groupId:i,isRemoveUserChat:!0},t.chatService.selectedGroup={},t.closeSideBarInfo(),t.closeChatRoom()})()}removeChatFromUser(){var t=this;return(0,X.Z)(function*(){if(t.chatService.chats.length>0){t.removeChatDetails.isRemoveUserChat=!1;for(let i=0;i<t.chatService.chats.length;i++)yield t.chatService.removeUserFromMessage(t.removeChatDetails.groupId,t.chatService.userDetails.id,t.chatService.chats[i].msgId)}})()}clearChat(){this.chatService.isChatClear=!0,this.bsModalService.hide(),this.isLoading=1,this.chatService.clearChat().then(t=>{var i;this.chatService.updateUnReadCount(null===(i=this.chatService.selectedGroup)||void 0===i?void 0:i.groupId,!0).then(r=>{}).catch(r=>{console.log("error",r)}),this.isLoading=0}).catch(t=>{this.bsModalService.hide(),this.isLoading=0,this.toastrService.error("Something went wrong, Please try again"),console.log("error",t)})}blockUser(){this.chatService.addBlockUserFromGroup(this.chatService.selectedGroup).then(t=>{this.bsModalService.hide()}).catch(t=>{console.log("error",t)})}removeUserFromGroup(t,i){this.chatService.removeUserFromGroup(t.userId).then(r=>{this.isLoading=0,this.chatService.removeUserId=t.userId,this.chatService.selectedGroup.userList.splice(i,1),this.toastrService.success("User removed"),this.bsModalService.hide()}).catch(r=>{this.bsModalService.hide(),console.log("error",r),this.isLoading=0})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(H1),l.LFG(z1),l.LFG(su))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class XQ{}class eJ{}class rc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),a=r.toLowerCase(),u=t.slice(i+1).trim();this.maybeSetNormalizedName(r,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof rc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new rc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof rc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===a.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Jfe{encodeKey(e){return tJ(e)}encodeValue(e){return tJ(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const e7e=/%(\d[a-f0-9])/gi,t7e={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function tJ(n){return encodeURIComponent(n).replace(e7e,(e,t)=>{var i;return null!==(i=t7e[t])&&void 0!==i?i:e})}function nJ(n){return`${n}`}class ou{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Jfe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const a=r.indexOf("="),[u,h]=-1==a?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,a)),e.decodeValue(r.slice(a+1))],m=t.get(u)||[];m.push(h),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(a=>{t.push({param:i,value:a,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ou({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(nJ(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(nJ(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class n7e{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function iJ(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function rJ(n){return"undefined"!=typeof Blob&&n instanceof Blob}function sJ(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Em{constructor(e,t,i,r){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,a=r):a=i,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new rc),this.context||(this.context=new n7e),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new ou,this.urlWithParams=t}serializeBody(){return null===this.body?null:iJ(this.body)||rJ(this.body)||sJ(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ou?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||sJ(this.body)?null:rJ(this.body)?this.body.type||null:iJ(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ou?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,a=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let F=e.headers||this.headers,b=e.params||this.params;const M=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(F=Object.keys(e.setHeaders).reduce((k,A)=>k.set(A,e.setHeaders[A]),F)),e.setParams&&(b=Object.keys(e.setParams).reduce((k,A)=>k.set(A,e.setParams[A]),b)),new Em(i,r,u,{params:b,headers:F,context:M,reportProgress:m,responseType:a,withCredentials:h})}}var cr=(()=>((cr=cr||{})[cr.Sent=0]="Sent",cr[cr.UploadProgress=1]="UploadProgress",cr[cr.ResponseHeader=2]="ResponseHeader",cr[cr.DownloadProgress=3]="DownloadProgress",cr[cr.Response=4]="Response",cr[cr.User=5]="User",cr))();class IO{constructor(e,t=200,i="OK"){this.headers=e.headers||new rc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class LO extends IO{constructor(e={}){super(e),this.type=cr.ResponseHeader}clone(e={}){return new LO({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wE extends IO{constructor(e={}){super(e),this.type=cr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new wE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class PO extends IO{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function VO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let OO=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let a;if(t instanceof Em)a=t;else{let m,F;m=r.headers instanceof rc?r.headers:new rc(r.headers),r.params&&(F=r.params instanceof ou?r.params:new ou({fromObject:r.params})),a=new Em(t,i,void 0!==r.body?r.body:null,{headers:m,context:r.context,params:F,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=(0,$e.of)(a).pipe(Ja(m=>this.handler.handle(m)));if(t instanceof Em||"events"===r.observe)return u;const h=u.pipe(Tr(m=>m instanceof wE));switch(r.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,nt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,nt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,nt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return h.pipe((0,nt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new ou).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,VO(r,i))}post(t,i,r={}){return this.request("POST",t,VO(r,i))}put(t,i,r={}){return this.request("PUT",t,VO(r,i))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(XQ))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class oJ{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const RO=new l.OlP("HTTP_INTERCEPTORS");let s7e=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const o7e=/^\)\]\}',?\n/;let aJ=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ei.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((A,P)=>r.setRequestHeader(A,P.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const A=t.detectContentTypeHeader();null!==A&&r.setRequestHeader("Content-Type",A)}if(t.responseType){const A=t.responseType.toLowerCase();r.responseType="json"!==A?A:"text"}const a=t.serializeBody();let u=null;const h=()=>{if(null!==u)return u;const A=1223===r.status?204:r.status,P=r.statusText||"OK",j=new rc(r.getAllResponseHeaders()),K=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return u=new LO({headers:j,status:A,statusText:P,url:K}),u},m=()=>{let{headers:A,status:P,statusText:j,url:K}=h(),he=null;204!==P&&(he=void 0===r.response?r.responseText:r.response),0===P&&(P=he?200:0);let be=P>=200&&P<300;if("json"===t.responseType&&"string"==typeof he){const ye=he;he=he.replace(o7e,"");try{he=""!==he?JSON.parse(he):null}catch(Ae){he=ye,be&&(be=!1,he={error:Ae,text:he})}}be?(i.next(new wE({body:he,headers:A,status:P,statusText:j,url:K||void 0})),i.complete()):i.error(new PO({error:he,headers:A,status:P,statusText:j,url:K||void 0}))},F=A=>{const{url:P}=h(),j=new PO({error:A,status:r.status||0,statusText:r.statusText||"Unknown Error",url:P||void 0});i.error(j)};let b=!1;const M=A=>{b||(i.next(h()),b=!0);let P={type:cr.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(P.total=A.total),"text"===t.responseType&&!!r.responseText&&(P.partialText=r.responseText),i.next(P)},k=A=>{let P={type:cr.UploadProgress,loaded:A.loaded};A.lengthComputable&&(P.total=A.total),i.next(P)};return r.addEventListener("load",m),r.addEventListener("error",F),r.addEventListener("timeout",F),r.addEventListener("abort",F),t.reportProgress&&(r.addEventListener("progress",M),null!==a&&r.upload&&r.upload.addEventListener("progress",k)),r.send(a),i.next({type:cr.Sent}),()=>{r.removeEventListener("error",F),r.removeEventListener("abort",F),r.removeEventListener("load",m),r.removeEventListener("timeout",F),t.reportProgress&&(r.removeEventListener("progress",M),null!==a&&r.upload&&r.upload.removeEventListener("progress",k)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(X3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const zO=new l.OlP("XSRF_COOKIE_NAME"),HO=new l.OlP("XSRF_HEADER_NAME");class cJ{}let c7e=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=wi(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce),l.LFG(l.Lbi),l.LFG(zO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),BO=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(cJ),l.LFG(HO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),l7e=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(RO,[]);this.chain=i.reduceRight((r,a)=>new oJ(r,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(eJ),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),u7e=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:BO,useClass:s7e}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:zO,useValue:t.cookieName}:[],t.headerName?{provide:HO,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[BO,{provide:RO,useExisting:BO,multi:!0},{provide:cJ,useClass:c7e},{provide:zO,useValue:"XSRF-TOKEN"},{provide:HO,useValue:"X-XSRF-TOKEN"}]}),n})(),d7e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[OO,{provide:XQ,useClass:l7e},aJ,{provide:eJ,useExisting:aJ}],imports:[[u7e.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),H3=(()=>{class n{constructor(t){this.httpClient=t,this.afterRemoveCardUpdateCardList=new nn.xQ,this.shareExploreMediaPreview=new ln({}),this.shareExploreMediaPreviewData=this.shareExploreMediaPreview.asObservable(),this.shareEventDetails=new ln({}),this.shareEventDetailsData=this.shareEventDetails.asObservable(),this.shareMyProfileMedia=new ln({}),this.shareMyProfileMediaData=this.shareMyProfileMedia.asObservable(),this.selectActivityInfo=new nn.xQ,this.selectLocationInfo=new nn.xQ,this.selectOfferInfo=new nn.xQ,this.changeLangSelect=new ln(""),this.changeLang=this.changeLangSelect.asObservable(),this.searchEvent=new ln({}),this.searchEventData=this.searchEvent.asObservable(),this.eventIdData=new ln({}),this.eventIdInfoData=this.eventIdData.asObservable(),this.eventCreateData=new nn.xQ,this.isTabOpenData=new nn.xQ,this.isTabCloseData=new nn.xQ,this.editNumberVerifyData=new nn.xQ,this.updateNotificationsStatus=new nn.xQ,this.deleteEventConfirmation=new nn.xQ,this.deletePostConfirmation=new nn.xQ,this.editNumberOrEmailVerify=new ln({}),this.editMobileNumberOrEmail=this.editNumberOrEmailVerify.asObservable(),this.shareOtherUser=new ln({}),this.shareOtherUserData=this.shareOtherUser.asObservable(),this.editAnswer=new ln({}),this.editAnswerData=this.editAnswer.asObservable()}callApiRequest(t,i){return this.httpClient.post(t,i).pipe((0,nt.U)(r=>r||void 0))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(OO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h7e=B(1555);function bE(n,e){return new ei.y(t=>{const i=n.length;if(0===i)return void t.complete();const r=new Array(i);let a=0,u=0;for(let h=0;h<i;h++){const m=(0,cn.D)(n[h]);let F=!1;t.add(m.subscribe({next:b=>{F||(F=!0,u++),r[h]=b},error:b=>t.error(b),complete:()=>{a++,(a===i||!F)&&(u===i&&t.next(e?e.reduce((b,M,k)=>(b[M]=r[k],b),{}):r),t.complete())}}))}})}let lJ=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),O6=(()=>{class n extends lJ{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const B3=new l.OlP("NgValueAccessor"),m7e={provide:B3,useExisting:(0,l.Gpc)(()=>j3),multi:!0},C7e=new l.OlP("CompositionEventMode");let j3=(()=>{class n extends lJ{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=z()?z().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(C7e,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&l.NdJ("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},features:[l._Bn([m7e]),l.qOj]}),n})();function au(n){return null==n||0===n.length}function dJ(n){return null!=n&&"number"==typeof n.length}const Is=new l.OlP("NgValidators"),cu=new l.OlP("NgAsyncValidators"),_7e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class S2{static min(e){return function(n){return e=>{if(au(e.value)||au(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(au(e.value)||au(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return au(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return au(n.value)||_7e.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>au(e.value)||!dJ(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>dJ(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return lu;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(au(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return MJ(e)}static composeAsync(e){return SJ(e)}}function lu(n){return null}function yJ(n){return null!=n}function vJ(n){const e=(0,l.QGY)(n)?(0,cn.D)(n):n;return(0,l.CqO)(e),e}function wJ(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function bJ(n,e){return e.map(t=>t(n))}function EJ(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function MJ(n){if(!n)return null;const e=n.filter(yJ);return 0==e.length?null:function(t){return wJ(bJ(t,e))}}function jO(n){return null!=n?MJ(EJ(n)):null}function SJ(n){if(!n)return null;const e=n.filter(yJ);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Y2.k)(e))return bE(e,null);if((0,h7e.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return bE(t.map(i=>e[i]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return bE(n=1===n.length&&(0,Y2.k)(n[0])?n[0]:n,null).pipe((0,nt.U)(t=>e(...t)))}return bE(n,null)}(bJ(t,e).map(vJ)).pipe((0,nt.U)(wJ))}}function UO(n){return null!=n?SJ(EJ(n)):null}function DJ(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function kJ(n){return n._rawValidators}function xJ(n){return n._rawAsyncValidators}function GO(n){return n?Array.isArray(n)?n:[n]:[]}function EE(n,e){return Array.isArray(n)?n.includes(e):n===e}function NJ(n,e){const t=GO(e);return GO(n).forEach(r=>{EE(t,r)||t.push(r)}),t}function TJ(n,e){return GO(e).filter(t=>!EE(n,t))}let AJ=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=jO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=UO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,i){return!!this.control&&this.control.hasError(t,i)}getError(t,i){return this.control?this.control.getError(t,i):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n}),n})(),l1=(()=>{class n extends AJ{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();class uu extends AJ{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class IJ{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let du=(()=>{class n extends IJ{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(uu,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[l.qOj]}),n})(),Mm=(()=>{class n extends IJ{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l1,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[l.qOj]}),n})();function SE(n,e){return[...e.path,n]}function Sm(n,e){WO(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&LJ(n,e)})}(n,e),function(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&LJ(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function DE(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),xE(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kE(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WO(n,e){const t=kJ(n);null!==e.validator?n.setValidators(DJ(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=xJ(n);null!==e.asyncValidator?n.setAsyncValidators(DJ(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();kE(e._rawValidators,r),kE(e._rawAsyncValidators,r)}function xE(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=kJ(n);if(Array.isArray(r)&&r.length>0){const a=r.filter(u=>u!==e.validator);a.length!==r.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const r=xJ(n);if(Array.isArray(r)&&r.length>0){const a=r.filter(u=>u!==e.asyncValidator);a.length!==r.length&&(t=!0,n.setAsyncValidators(a))}}}const i=()=>{};return kE(e._rawValidators,i),kE(e._rawAsyncValidators,i),t}function LJ(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZO(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function KO(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(a=>{a.constructor===j3?t=a:function(n){return Object.getPrototypeOf(n.constructor)===O6}(a)?i=a:r=a}),r||i||t||null}function NE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Dm="VALID",TE="INVALID",th="PENDING",km="DISABLED";function YO(n){return(JO(n)?n.validators:n)||null}function OJ(n){return Array.isArray(n)?jO(n):n||null}function QO(n,e){return(JO(e)?e.asyncValidators:n)||null}function RJ(n){return Array.isArray(n)?UO(n):n||null}function JO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class XO{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=OJ(this._rawValidators),this._composedAsyncValidatorFn=RJ(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Dm}get invalid(){return this.status===TE}get pending(){return this.status==th}get disabled(){return this.status===km}get enabled(){return this.status!==km}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=OJ(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=RJ(e)}addValidators(e){this.setValidators(NJ(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NJ(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TJ(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TJ(e,this._rawAsyncValidators))}hasValidator(e){return EE(this._rawValidators,e)}hasAsyncValidator(e){return EE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=th,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=km,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Dm,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dm||this.status===th)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?km:Dm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=th,this._hasOwnPendingAsyncValidator=!0;const t=vJ(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=i instanceof xm?i.controls.hasOwnProperty(r)?i.controls[r]:null:i instanceof eR&&i.at(r)||null}),i}(this,e)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?km:this.errors?TE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(th)?th:this._anyControlsHaveStatus(TE)?TE:Dm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){JO(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class nh extends XO{constructor(e=null,t,i){super(YO(t),QO(i,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class xm extends XO{constructor(e,t,i){super(YO(t),QO(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(i=>{this._throwIfControlMissing(i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t instanceof nh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,a)=>{i=t(i,r,a)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control with name: '${i}'.`)})}}class eR extends XO{constructor(e,t,i){super(YO(t),QO(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((i,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof nh?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,i)=>{if(void 0===e[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const I7e={provide:uu,useExisting:(0,l.Gpc)(()=>ih)},BJ=(()=>Promise.resolve(null))();let ih=(()=>{class n extends uu{constructor(t,i,r,a){super(),this.control=new nh,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=KO(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),ZO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?SE(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sm(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){BJ.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;BJ.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l1,9),l.Y36(Is,10),l.Y36(cu,10),l.Y36(B3,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([I7e]),l.qOj,l.TTD]}),n})(),Tm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),UJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const nR=new l.OlP("NgModelWithFormControlWarning"),z7e={provide:l1,useExisting:(0,l.Gpc)(()=>R6)};let R6=(()=>{class n extends l1{constructor(t,i){super(),this.validators=t,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Sm(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){DE(t.control||null,t,!1),NE(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(DE(i||null,t),r instanceof nh&&(Sm(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function(n,e){WO(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function(n,e){return xE(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){WO(this.form,this),this._oldForm&&xE(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Is,10),l.Y36(cu,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&l.NdJ("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([z7e]),l.qOj,l.TTD]}),n})();const j7e={provide:uu,useExisting:(0,l.Gpc)(()=>rh)};let rh=(()=>{class n extends uu{constructor(t,i,r,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=KO(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),ZO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return SE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l1,13),l.Y36(Is,10),l.Y36(cu,10),l.Y36(B3,10),l.Y36(nR,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([j7e]),l.qOj,l.TTD]}),n._ngModelWarningSentOnce=!1,n})(),sX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[UJ]]}),n})(),oX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[sX]}),n})(),aX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:nR,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[sX]}),n})(),hu=(()=>{class n{group(t,i=null){const r=this._reduceControls(t);let h,a=null,u=null;return null!=i&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(a=null!=i.validators?i.validators:null,u=null!=i.asyncValidators?i.asyncValidators:null,h=null!=i.updateOn?i.updateOn:void 0):(a=null!=i.validator?i.validator:null,u=null!=i.asyncValidator?i.asyncValidator:null)),new xm(r,{asyncValidators:u,updateOn:h,validators:a})}control(t,i,r){return new nh(t,i,r)}array(t,i,r){const a=t.map(u=>this._createControl(u));return new eR(a,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof nh||t instanceof xm||t instanceof eR?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,l.Yz7)({factory:function(){return new n},token:n,providedIn:aX}),n})(),Sa=(()=>{class n{constructor(t,i,r,a,u){this.bsModalService=t,this.toastrService=i,this.commonService=r,this.chatService=a,this.apiService=u}ngOnInit(){}closeModal(){this.bsModalService.hide()}submit(){switch(this.data.type){case"deleteGroup":this.commonService.deleteGroup();break;case"exitGroup":this.commonService.exitGroup();break;case"deleteChat":this.commonService.deleteChat();break;case"clearChat":this.commonService.clearChat();break;case"blockUser":this.commonService.blockUser();break;case"removeUserFromGroup":this.commonService.removeUserFromGroup(this.data.user,this.data.ind)}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(su),l.Y36(z1),l.Y36(Ma),l.Y36(H1),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-confirmation-modal"]],decls:8,vars:1,consts:[[1,"modal-body"],[1,"text-center"],[1,"text-center","mt-3"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-secondary","btn-sm","ms-3",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"h3",1),l._uU(2),l.qZA(),l.TgZ(3,"div",2),l.TgZ(4,"button",3),l.NdJ("click",function(){return i.submit()}),l._uU(5,"Yes"),l.qZA(),l.TgZ(6,"button",4),l.NdJ("click",function(){return i.bsModalService.hide()}),l._uU(7,"Cancel"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.hij("Are your sure you want to ",i.data.title,"?"))},styles:[".btn[_ngcontent-%COMP%]{min-width:130px}"]}),n})();const cX=new l.OlP("config"),lX=new l.OlP("NEW_CONFIG"),uX=new l.OlP("INITIAL_CONFIG"),r9e={img:"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ibGRzLXNwaW5uZXIiIHdpZHRoPSIzOXB4IiAgaGVpZ2h0PSIzOXB4IiAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIiBzdHlsZT0iYmFja2dyb3VuZDogbm9uZTsiPjxnIHRyYW5zZm9ybT0icm90YXRlKDAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3LjUiIHk9Ii0zLjUiIHJ4PSIwLjk1MDAwMDAwMDAwMDAwMDEiIHJ5PSItMC4wNyIgd2lkdGg9IjUiIGhlaWdodD0iMjciIGZpbGw9IiNGOTc3NTYiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjkxNjY2NjY2NjY2NjY2NjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMCA1MCA1MCkiPiAgPHJlY3QgeD0iNDcuNSIgeT0iLTMuNSIgcng9IjAuOTUwMDAwMDAwMDAwMDAwMSIgcnk9Ii0wLjA3IiB3aWR0aD0iNSIgaGVpZ2h0PSIyNyIgZmlsbD0iI0Y5Nzc1NiI+ICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuODMzMzMzMzMzMzMzMzMzNHMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+ICA8L3JlY3Q+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDYwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC43NXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+ICA8L3JlY3Q+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDkwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC42NjY2NjY2NjY2NjY2NjY2cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMTIwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC41ODMzMzMzMzMzMzMzMzM0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMTUwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC41cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMTgwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC40MTY2NjY2NjY2NjY2NjY3cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjEwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC4zMzMzMzMzMzMzMzMzMzMzcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMjQwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSItMC4yNXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+ICA8L3JlY3Q+PC9nPjxnIHRyYW5zZm9ybT0icm90YXRlKDI3MCA1MCA1MCkiPiAgPHJlY3QgeD0iNDcuNSIgeT0iLTMuNSIgcng9IjAuOTUwMDAwMDAwMDAwMDAwMSIgcnk9Ii0wLjA3IiB3aWR0aD0iNSIgaGVpZ2h0PSIyNyIgZmlsbD0iI0Y5Nzc1NiI+ICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9Im9wYWNpdHkiIHZhbHVlcz0iMTswIiBrZXlUaW1lcz0iMDsxIiBkdXI9IjFzIiBiZWdpbj0iLTAuMTY2NjY2NjY2NjY2NjY2NjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSI+PC9hbmltYXRlPiAgPC9yZWN0PjwvZz48ZyB0cmFuc2Zvcm09InJvdGF0ZSgzMDAgNTAgNTApIj4gIDxyZWN0IHg9IjQ3LjUiIHk9Ii0zLjUiIHJ4PSIwLjk1MDAwMDAwMDAwMDAwMDEiIHJ5PSItMC4wNyIgd2lkdGg9IjUiIGhlaWdodD0iMjciIGZpbGw9IiNGOTc3NTYiPiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJvcGFjaXR5IiB2YWx1ZXM9IjE7MCIga2V5VGltZXM9IjA7MSIgZHVyPSIxcyIgYmVnaW49Ii0wLjA4MzMzMzMzMzMzMzMzMzMzcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMzMwIDUwIDUwKSI+ICA8cmVjdCB4PSI0Ny41IiB5PSItMy41IiByeD0iMC45NTAwMDAwMDAwMDAwMDAxIiByeT0iLTAuMDciIHdpZHRoPSI1IiBoZWlnaHQ9IjI3IiBmaWxsPSIjRjk3NzU2Ij4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgdmFsdWVzPSIxOzAiIGtleVRpbWVzPSIwOzEiIGR1cj0iMXMiIGJlZ2luPSIwcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4gIDwvcmVjdD48L2c+PC9zdmc+",loaderStyles:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",background:"rgba(255, 255, 255, 0.8)","z-index":"50",display:"flex","justify-content":"center","align-items":"center"},imgStyles:{width:"30px"},hostStyles:{position:"relative"},rotate:{iterations:1/0}};let fu=(()=>{class n{constructor(t,i,r){this._config=t,this._el=i,this._renderer=r,this.loaderStyles=t.loaderStyles,this.imgStyles=t.imgStyles,this.hostStyles=t.hostStyles,this.img=t.img,this.rotateAnimaitioan=t.rotate}set loader(t){if(!t)return void(this.loaderEl&&this._setStyles(this.loaderEl,{display:"none"}));this.loaderEl=this._renderer.createElement("div");const i=this._renderer.createElement("img");i.animate([{transform:"rotate(360deg)"},{transform:"rotate(0deg)"}],this.rotateAnimaitioan),this._renderer.appendChild(this._el.nativeElement,this.loaderEl),this._renderer.appendChild(this.loaderEl,i),this._setStyles(this._el.nativeElement,this.hostStyles),this._setStyles(this.loaderEl,this.loaderStyles),this._setStyles(i,this.imgStyles),this._renderer.setAttribute(i,"src",this.img)}_setStyles(t,i){Object.keys(i).forEach(r=>{this._renderer.setStyle(t,r,i[r])})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(cX),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","loader",""]],inputs:{loader:"loader"}}),n})(),s9e=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:lX,useValue:t},{provide:uX,useValue:r9e},{provide:cX,useFactory:o9e,deps:[uX,lX]}]}}static forChild(t){return{ngModule:n}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ei]]}),n})();function o9e(n,e){const t=e?e.loaderStyles:null,i=e?e.imgStyles:null,r=e?e.rotate:null;return Object.assign(Object.assign(Object.assign({},n),e),{loaderStyles:Object.assign(Object.assign({},n.loaderStyles),t),imgStyles:Object.assign(Object.assign({},n.imgStyles),i),rotate:Object.assign(Object.assign({},n.rotate),r)})}function dX(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ye(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?dX(Object(t),!0).forEach(function(i){l9e(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dX(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function AE(n){return(AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function hX(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function l9e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cR(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var u,h,i=[],r=!0,a=!1;try{for(t=t.call(n);!(r=(u=t.next()).done)&&(i.push(u.value),!e||i.length!==e);r=!0);}catch(m){a=!0,h=m}finally{try{!r&&null!=t.return&&t.return()}finally{if(a)throw h}}return i}}(n,e)||fX(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LE(n){return function(n){if(Array.isArray(n))return lR(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||fX(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fX(n,e){if(n){if("string"==typeof n)return lR(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lR(n,e)}}function lR(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var pX=function(){},uR={},mX={},gX=null,CX={mark:pX,measure:pX};try{"undefined"!=typeof window&&(uR=window),"undefined"!=typeof document&&(mX=document),"undefined"!=typeof MutationObserver&&(gX=MutationObserver),"undefined"!=typeof performance&&(CX=performance)}catch(n){}var _X=(uR.navigator||{}).userAgent,FX=void 0===_X?"":_X,pu=uR,ri=mX,yX=gX,PE=CX,sc=!!ri.documentElement&&!!ri.head&&"function"==typeof ri.addEventListener&&"function"==typeof ri.createElement,vX=~FX.indexOf("MSIE")||~FX.indexOf("Trident/"),oc="___FONT_AWESOME___",bX="svg-inline--fa",z6="data-fa-i2svg",hR="data-fa-pseudo-element",fR="data-prefix",pR="data-icon",EX="fontawesome-i2svg",y9e=["HTML","HEAD","STYLE","SCRIPT"],MX=function(){try{return!0}catch(n){return!1}}(),mR={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},VE={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},SX={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},v9e={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},w9e=/fa[srltdbk\-\ ]/,DX="fa-layers-text",b9e=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,E9e={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},kX=[1,2,3,4,5,6,7,8,9,10],M9e=kX.concat([11,12,13,14,15,16,17,18,19,20]),S9e=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],D9e=[].concat(LE(Object.keys(VE)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","duotone-group","swap-opacity","primary","secondary"]).concat(kX.map(function(n){return"".concat(n,"x")})).concat(M9e.map(function(n){return"w-".concat(n)})),xX=pu.FontAwesomeConfig||{};ri&&"function"==typeof ri.querySelector&&[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=cR(n,2),i=e[1],r=function(n){return""===n||"false"!==n&&("true"===n||n)}(function(n){var e=ri.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(xX[i]=r)});var Im=Ye(Ye({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:bX,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),xX);Im.autoReplaceSvg||(Im.observeMutations=!1);var gt={};Object.keys(Im).forEach(function(n){Object.defineProperty(gt,n,{enumerable:!0,set:function(t){Im[n]=t,OE.forEach(function(i){return i(gt)})},get:function(){return Im[n]}})}),pu.FontAwesomeConfig=gt;var OE=[],U3={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Lm(){for(var n=12,e="";n-- >0;)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return e}function sh(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function gR(n){return n.classList?sh(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function NX(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function RE(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function CR(n){return n.size!==U3.size||n.x!==U3.x||n.y!==U3.y||n.rotate!==U3.rotate||n.flipX||n.flipY}function TX(){var n="fa",e=bX,t=gt.familyPrefix,i=gt.replacementClass,r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(t!==n||i!==e){var a=new RegExp("\\.".concat(n,"\\-"),"g"),u=new RegExp("\\--".concat(n,"\\-"),"g"),h=new RegExp("\\.".concat(e),"g");r=r.replace(a,".".concat(t,"-")).replace(u,"--".concat(t,"-")).replace(h,".".concat(i))}return r}var AX=!1;function _R(){gt.autoAddCss&&!AX&&(function(n){if(n&&sc){var e=ri.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=ri.head.childNodes,i=null,r=t.length-1;r>-1;r--){var a=t[r],u=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(u)>-1&&(i=a)}ri.head.insertBefore(e,i)}}(TX()),AX=!0)}var z9e={mixout:function(){return{dom:{css:TX,insertCss:_R}}},hooks:function(){return{beforeDOMElementCreation:function(){_R()},beforeI2svg:function(){_R()}}}},ac=pu||{};ac[oc]||(ac[oc]={}),ac[oc].styles||(ac[oc].styles={}),ac[oc].hooks||(ac[oc].hooks={}),ac[oc].shims||(ac[oc].shims=[]);var Da=ac[oc],IX=[],zE=!1;function B9e(n){!sc||(zE?setTimeout(n,0):IX.push(n))}function Pm(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,a=void 0===r?[]:r;return"string"==typeof n?NX(n):"<".concat(e," ").concat(function(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(NX(n[t]),'" ')},"").trim()}(i),">").concat(a.map(Pm).join(""),"</").concat(e,">")}function LX(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}sc&&((zE=(ri.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(ri.readyState))||ri.addEventListener("DOMContentLoaded",function n(){ri.removeEventListener("DOMContentLoaded",n),zE=1,IX.map(function(e){return e()})}));var FR=function(e,t,i,r){var m,F,b,a=Object.keys(e),u=a.length,h=void 0!==r?function(e,t){return function(i,r,a,u){return e.call(t,i,r,a,u)}}(t,r):t;for(void 0===i?(m=1,b=e[a[0]]):(m=0,b=i);m<u;m++)b=h(b,e[F=a[m]],F,e);return b};function yR(n){var e=function(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var a=n.charCodeAt(t++);56320==(64512&a)?e.push(((1023&r)<<10)+(1023&a)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function PX(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function vR(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.skipHooks,r=void 0!==i&&i,a=PX(e);"function"!=typeof Da.hooks.addPack||r?Da.styles[n]=Ye(Ye({},Da.styles[n]||{}),a):Da.hooks.addPack(n,PX(e)),"fas"===n&&vR("fa",e)}var Vm=Da.styles,q9e=Da.shims,$9e=Object.values(SX),wR=null,VX={},OX={},RX={},zX={},HX={},W9e=Object.keys(mR);function K9e(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function(n){return~D9e.indexOf(n)}(r)?null:r}var BX=function(){var e=function(a){return FR(Vm,function(u,h,m){return u[m]=FR(h,a,{}),u},{})};VX=e(function(r,a,u){return a[3]&&(r[a[3]]=u),a[2]&&a[2].filter(function(m){return"number"==typeof m}).forEach(function(m){r[m.toString(16)]=u}),r}),OX=e(function(r,a,u){return r[u]=u,a[2]&&a[2].filter(function(m){return"string"==typeof m}).forEach(function(m){r[m]=u}),r}),HX=e(function(r,a,u){var h=a[2];return r[u]=u,h.forEach(function(m){r[m]=u}),r});var t="far"in Vm||gt.autoFetchSvg,i=FR(q9e,function(r,a){var u=a[0],h=a[1],m=a[2];return"far"===h&&!t&&(h="fas"),"string"==typeof u&&(r.names[u]={prefix:h,iconName:m}),"number"==typeof u&&(r.unicodes[u.toString(16)]={prefix:h,iconName:m}),r},{names:{},unicodes:{}});RX=i.names,zX=i.unicodes,wR=HE(gt.styleDefault)};function bR(n,e){return(VX[n]||{})[e]}function oh(n,e){return(HX[n]||{})[e]}function jX(n){return RX[n]||{prefix:null,iconName:null}}function gu(){return wR}function HE(n){return VE[n]||VE[mR[n]]||(n in Da.styles?n:null)||null}function BE(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.skipLookups,i=void 0!==t&&t,r=null,a=n.reduce(function(u,h){var m=K9e(gt.familyPrefix,h);if(Vm[h]?(h=$9e.includes(h)?v9e[h]:h,r=h,u.prefix=h):W9e.indexOf(h)>-1?(r=h,u.prefix=HE(h)):m?u.iconName=m:h!==gt.replacementClass&&u.rest.push(h),!i&&u.prefix&&u.iconName){var F="fa"===r?jX(u.iconName):{},b=oh(u.prefix,u.iconName);F.prefix&&(r=null),u.iconName=F.iconName||b||u.iconName,u.prefix=F.prefix||u.prefix,"far"===u.prefix&&!Vm.far&&Vm.fas&&!gt.autoFetchSvg&&(u.prefix="fas")}return u},{prefix:null,iconName:null,rest:[]});return("fa"===a.prefix||"fa"===r)&&(a.prefix=gu()||"fas"),a}OE.push(function(n){wR=HE(n.styleDefault)}),BX();var J9e=function(){function n(){(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function(n,e,t){e&&hX(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var u=r.reduce(this._pullDefinitions,{});Object.keys(u).forEach(function(h){t.definitions[h]=Ye(Ye({},t.definitions[h]||{}),u[h]),vR(h,u[h]);var m=SX[h];m&&vR(m,u[h]),BX()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(a){var u=r[a],h=u.prefix,m=u.iconName,F=u.icon,b=F[2];t[h]||(t[h]={}),b.length>0&&b.forEach(function(M){"string"==typeof M&&(t[h][M]=F)}),t[h][m]=F}),t}}]),n}(),UX=[],ah={},ch={},X9e=Object.keys(ch);function MR(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var a=ah[n]||[];return a.forEach(function(u){e=u.apply(null,[e].concat(i))}),e}function B6(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=ah[n]||[];r.forEach(function(a){a.apply(null,t)})}function cc(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return ch[n]?ch[n].apply(null,e):void 0}function SR(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||gu();if(e)return e=oh(t,e)||e,LX(GX.definitions,t,e)||LX(Da.styles,t,e)}var GX=new J9e,npe={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return sc?(B6("beforeI2svg",e),cc("pseudoElements2svg",e),cc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===gt.autoReplaceSvg&&(gt.autoReplaceSvg=!0),gt.observeMutations=!0,B9e(function(){rpe({autoReplaceSvgRoot:t}),B6("watch",e)})}},No={noAuto:function(){gt.autoReplaceSvg=!1,gt.observeMutations=!1,B6("noAuto")},config:gt,dom:npe,parse:{icon:function(e){if(null===e)return null;if("object"===AE(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:oh(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=HE(e[0]);return{prefix:i,iconName:oh(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(gt.familyPrefix,"-"))>-1||e.match(w9e))){var r=BE(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||gu(),iconName:oh(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var a=gu();return{prefix:a,iconName:oh(a,e)||e}}}},library:GX,findIconDefinition:SR,toHtml:Pm},rpe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,i=void 0===t?ri:t;(Object.keys(Da.styles).length>0||gt.autoFetchSvg)&&sc&&gt.autoReplaceSvg&&No.dom.i2svg({node:i})};function jE(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return Pm(i)})}}),Object.defineProperty(n,"node",{get:function(){if(sc){var i=ri.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function DR(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,a=n.iconName,u=n.transform,h=n.symbol,m=n.title,F=n.maskId,b=n.titleId,M=n.extra,k=n.watchable,A=void 0!==k&&k,P=i.found?i:t,j=P.width,K=P.height,he="fak"===r,be=[gt.replacementClass,a?"".concat(gt.familyPrefix,"-").concat(a):""].filter(function(Gt){return-1===M.classes.indexOf(Gt)}).filter(function(Gt){return""!==Gt||!!Gt}).concat(M.classes).join(" "),ye={children:[],attributes:Ye(Ye({},M.attributes),{},{"data-prefix":r,"data-icon":a,class:be,role:M.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(j," ").concat(K)})},Ae=he&&!~M.classes.indexOf("fa-fw")?{width:"".concat(j/K*16*.0625,"em")}:{};A&&(ye.attributes[z6]=""),m&&(ye.children.push({tag:"title",attributes:{id:ye.attributes["aria-labelledby"]||"title-".concat(b||Lm())},children:[m]}),delete ye.attributes.title);var ze=Ye(Ye({},ye),{},{prefix:r,iconName:a,main:t,mask:i,maskId:F,transform:u,symbol:h,styles:Ye(Ye({},Ae),M.styles)}),ut=i.found&&t.found?cc("generateAbstractMask",ze)||{children:[],attributes:{}}:cc("generateAbstractIcon",ze)||{children:[],attributes:{}},Sn=ut.attributes;return ze.children=ut.children,ze.attributes=Sn,h?function(n){var t=n.iconName,i=n.children,r=n.attributes,a=n.symbol,u=!0===a?"".concat(n.prefix,"-").concat(gt.familyPrefix,"-").concat(t):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ye(Ye({},r),{},{id:u}),children:i}]}]}(ze):function(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,a=n.styles,u=n.transform;if(CR(u)&&t.found&&!i.found){var F={x:t.width/t.height/2,y:.5};r.style=RE(Ye(Ye({},a),{},{"transform-origin":"".concat(F.x+u.x/16,"em ").concat(F.y+u.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(ze)}function qX(n){var e=n.content,t=n.width,i=n.height,r=n.transform,a=n.title,u=n.extra,h=n.watchable,m=void 0!==h&&h,F=Ye(Ye(Ye({},u.attributes),a?{title:a}:{}),{},{class:u.classes.join(" ")});m&&(F[z6]="");var b=Ye({},u.styles);CR(r)&&(b.transform=function(n){var e=n.transform,t=n.width,r=n.height,a=void 0===r?16:r,u=n.startCentered,h=void 0!==u&&u,m="";return m+=h&&vX?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-a/2,"em) "):h?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(m+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),b["-webkit-transform"]=b.transform);var M=RE(b);M.length>0&&(F.style=M);var k=[];return k.push({tag:"span",attributes:F,children:[e]}),a&&k.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),k}function ape(n){var e=n.content,t=n.title,i=n.extra,r=Ye(Ye(Ye({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),a=RE(i.styles);a.length>0&&(r.style=a);var u=[];return u.push({tag:"span",attributes:r,children:[e]}),t&&u.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),u}var kR=Da.styles;function xR(n){var e=n[0],t=n[1],a=cR(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(a)?{tag:"g",attributes:{class:"".concat(gt.familyPrefix,"-").concat("duotone-group")},children:[{tag:"path",attributes:{class:"".concat(gt.familyPrefix,"-").concat("secondary"),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(gt.familyPrefix,"-").concat("primary"),fill:"currentColor",d:a[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:a}}}}var cpe={found:!1,width:512,height:512};function NR(n,e){var t=e;return"fa"===e&&null!==gt.styleDefault&&(e=gu()),new Promise(function(i,r){if(cc("missingIconAbstract"),"fa"===t){var u=jX(n)||{};n=u.iconName||n,e=u.prefix||e}if(n&&e&&kR[e]&&kR[e][n])return i(xR(kR[e][n]));(function(n,e){!MX&&!gt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(Ye(Ye({},cpe),{},{icon:gt.showMissingIcons&&n&&cc("missingIconAbstract")||{}}))})}var $X=function(){},TR=gt.measurePerformance&&PE&&PE.mark&&PE.measure?PE:{mark:$X,measure:$X},Om='FA "6.0.0"',AR_begin=function(e){return TR.mark("".concat(Om," ").concat(e," begins")),function(){return function(e){TR.mark("".concat(Om," ").concat(e," ends")),TR.measure("".concat(Om," ").concat(e),"".concat(Om," ").concat(e," begins"),"".concat(Om," ").concat(e," ends"))}(e)}},UE=function(){};function ZX(n){return"string"==typeof(n.getAttribute?n.getAttribute(z6):null)}function ppe(n){return ri.createElementNS("http://www.w3.org/2000/svg",n)}function mpe(n){return ri.createElement(n)}function KX(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.ceFn,i=void 0===t?"svg"===n.tag?ppe:mpe:t;if("string"==typeof n)return ri.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(u){r.setAttribute(u,n.attributes[u])});var a=n.children||[];return a.forEach(function(u){r.appendChild(KX(u,{ceFn:i}))}),r}var GE={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(KX(r),t)}),null===t.getAttribute(z6)&&gt.keepOriginalSource){var i=ri.createComment(function(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~gR(t).indexOf(gt.replacementClass))return GE.replace(e);var r=new RegExp("".concat(gt.familyPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var a=i[0].attributes.class.split(" ").reduce(function(h,m){return m===gt.replacementClass||m.match(r)?h.toSvg.push(m):h.toNode.push(m),h},{toNode:[],toSvg:[]});i[0].attributes.class=a.toSvg.join(" "),0===a.toNode.length?t.removeAttribute("class"):t.setAttribute("class",a.toNode.join(" "))}var u=i.map(function(h){return Pm(h)}).join("\n");t.setAttribute(z6,""),t.innerHTML=u}};function YX(n){n()}function QX(n,e){var t="function"==typeof e?e:UE;if(0===n.length)t();else{var i=YX;"async"===gt.mutateApproach&&(i=pu.requestAnimationFrame||YX),i(function(){var r=!0===gt.autoReplaceSvg?GE.replace:GE[gt.autoReplaceSvg]||GE.replace,a=AR_begin("mutate");n.map(r),a(),t()})}}var IR=!1;function JX(){IR=!0}function LR(){IR=!1}var qE=null;function XX(n){if(yX&&gt.observeMutations){var e=n.treeCallback,t=void 0===e?UE:e,i=n.nodeCallback,r=void 0===i?UE:i,a=n.pseudoElementsCallback,u=void 0===a?UE:a,h=n.observeMutationsRoot,m=void 0===h?ri:h;qE=new yX(function(F){if(!IR){var b=gu();sh(F).forEach(function(M){if("childList"===M.type&&M.addedNodes.length>0&&!ZX(M.addedNodes[0])&&(gt.searchPseudoElements&&u(M.target),t(M.target)),"attributes"===M.type&&M.target.parentNode&&gt.searchPseudoElements&&u(M.target.parentNode),"attributes"===M.type&&ZX(M.target)&&~S9e.indexOf(M.attributeName))if("class"===M.attributeName&&function(n){var e=n.getAttribute?n.getAttribute(fR):null,t=n.getAttribute?n.getAttribute(pR):null;return e&&t}(M.target)){var k=BE(gR(M.target)),P=k.iconName;M.target.setAttribute(fR,k.prefix||b),P&&M.target.setAttribute(pR,P)}else(function(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(gt.replacementClass)})(M.target)&&r(M.target)})}}),sc&&qE.observe(m,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function _pe(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var a=r.split(":"),u=a[0],h=a.slice(1);return u&&h.length>0&&(i[u]=h.join(":").trim()),i},{})),t}function Fpe(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=BE(gR(n));return r.prefix||(r.prefix=gu()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||r.prefix&&i.length>0&&(r.iconName=function(n,e){return(OX[n]||{})[e]}(r.prefix,n.innerText)||bR(r.prefix,yR(n.innerText))),r}function ype(n){var e=sh(n.attributes).reduce(function(r,a){return"class"!==r.name&&"style"!==r.name&&(r[a.name]=a.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return gt.autoA11y&&(t?e["aria-labelledby"]="".concat(gt.replacementClass,"-title-").concat(i||Lm()):(e["aria-hidden"]="true",e.focusable="false")),e}function eee(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=Fpe(n),i=t.iconName,r=t.prefix,a=t.rest,u=ype(n),h=MR("parseNodeAttributes",{},n),m=e.styleParser?_pe(n):[];return Ye({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:U3,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:m,attributes:u}},h)}var wpe=Da.styles;function tee(n){var e="nest"===gt.autoReplaceSvg?eee(n,{styleParser:!1}):eee(n);return~e.extra.classes.indexOf(DX)?cc("generateLayersText",n,e):cc("generateSvgReplacementMutation",n,e)}function nee(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!sc)return Promise.resolve();var t=ri.documentElement.classList,i=function(M){return t.add("".concat(EX,"-").concat(M))},r=function(M){return t.remove("".concat(EX,"-").concat(M))},a=Object.keys(gt.autoFetchSvg?mR:wpe),u=[".".concat(DX,":not([").concat(z6,"])")].concat(a.map(function(b){return".".concat(b,":not([").concat(z6,"])")})).join(", ");if(0===u.length)return Promise.resolve();var h=[];try{h=sh(n.querySelectorAll(u))}catch(b){}if(!(h.length>0))return Promise.resolve();i("pending"),r("complete");var m=AR_begin("onTree"),F=h.reduce(function(b,M){try{var k=tee(M);k&&b.push(k)}catch(A){MX||"MissingIcon"===A.name&&console.error(A)}return b},[]);return new Promise(function(b,M){Promise.all(F).then(function(k){QX(k,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),m(),b()})}).catch(function(k){m(),M(k)})})}function bpe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;tee(n).then(function(t){t&&QX([t],e)})}function Epe(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:SR(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:SR(r||{})),n(i,Ye(Ye({},t),{},{mask:r}))}}var Mpe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?U3:i,a=t.symbol,u=void 0!==a&&a,h=t.mask,m=void 0===h?null:h,F=t.maskId,b=void 0===F?null:F,M=t.title,k=void 0===M?null:M,A=t.titleId,P=void 0===A?null:A,j=t.classes,K=void 0===j?[]:j,he=t.attributes,be=void 0===he?{}:he,ye=t.styles,Ae=void 0===ye?{}:ye;if(e){var ze=e.prefix,ut=e.iconName,Et=e.icon;return jE(Ye({type:"icon"},e),function(){return B6("beforeDOMElementCreation",{iconDefinition:e,params:t}),gt.autoA11y&&(k?be["aria-labelledby"]="".concat(gt.replacementClass,"-title-").concat(P||Lm()):(be["aria-hidden"]="true",be.focusable="false")),DR({icons:{main:xR(Et),mask:m?xR(m.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ze,iconName:ut,transform:Ye(Ye({},U3),r),symbol:u,title:k,maskId:b,titleId:P,extra:{attributes:be,styles:Ae,classes:K}})})}},Spe={mixout:function(){return{icon:Epe(Mpe)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=nee,t.nodeCallback=bpe,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,a=t.callback;return nee(void 0===i?ri:i,void 0===a?function(){}:a)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,a=i.title,u=i.titleId,h=i.prefix,m=i.transform,F=i.symbol,b=i.mask,M=i.maskId,k=i.extra;return new Promise(function(A,P){Promise.all([NR(r,h),b.iconName?NR(b.iconName,b.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(j){var K=cR(j,2);A([t,DR({icons:{main:K[0],mask:K[1]},prefix:h,iconName:r,transform:m,symbol:F,maskId:M,title:a,titleId:u,extra:k,watchable:!0})])}).catch(P)})},e.generateAbstractIcon=function(t){var F,i=t.children,r=t.attributes,a=t.main,u=t.transform,m=RE(t.styles);return m.length>0&&(r.style=m),CR(u)&&(F=cc("generateAbstractTransformGrouping",{main:a,transform:u,containerWidth:a.width,iconWidth:a.width})),i.push(F||a.icon),{children:i,attributes:r}}}},Dpe={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,a=void 0===r?[]:r;return jE({type:"layer"},function(){B6("beforeDOMElementCreation",{assembler:t,params:i});var u=[];return t(function(h){Array.isArray(h)?h.map(function(m){u=u.concat(m.abstract)}):u=u.concat(h.abstract)}),[{tag:"span",attributes:{class:["".concat(gt.familyPrefix,"-layers")].concat(LE(a)).join(" ")},children:u}]})}}}},kpe={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,a=void 0===r?null:r,u=i.classes,h=void 0===u?[]:u,m=i.attributes,F=void 0===m?{}:m,b=i.styles,M=void 0===b?{}:b;return jE({type:"counter",content:t},function(){return B6("beforeDOMElementCreation",{content:t,params:i}),ape({content:t.toString(),title:a,extra:{attributes:F,styles:M,classes:["".concat(gt.familyPrefix,"-layers-counter")].concat(LE(h))}})})}}}},xpe={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,a=void 0===r?U3:r,u=i.title,h=void 0===u?null:u,m=i.classes,F=void 0===m?[]:m,b=i.attributes,M=void 0===b?{}:b,k=i.styles,A=void 0===k?{}:k;return jE({type:"text",content:t},function(){return B6("beforeDOMElementCreation",{content:t,params:i}),qX({content:t,transform:Ye(Ye({},U3),a),title:h,extra:{attributes:M,styles:A,classes:["".concat(gt.familyPrefix,"-layers-text")].concat(LE(F))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,a=i.transform,u=i.extra,h=null,m=null;if(vX){var F=parseInt(getComputedStyle(t).fontSize,10),b=t.getBoundingClientRect();h=b.width/F,m=b.height/F}return gt.autoA11y&&!r&&(u.attributes["aria-hidden"]="true"),Promise.resolve([t,qX({content:t.innerHTML,width:h,height:m,transform:a,title:r,extra:u,watchable:!0})])}}},Npe=new RegExp('"',"ug"),iee=[1105920,1112319];function ree(n,e){var t="".concat("data-fa-pseudo-element-pending").concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var u=sh(n.children).filter(function(ut){return ut.getAttribute(hR)===e})[0],h=pu.getComputedStyle(n,e),m=h.getPropertyValue("font-family").match(b9e),F=h.getPropertyValue("font-weight"),b=h.getPropertyValue("content");if(u&&!m)return n.removeChild(u),i();if(m&&"none"!==b&&""!==b){var M=h.getPropertyValue("content"),k=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(m[2])?VE[m[2].toLowerCase()]:E9e[F],A=function(n){var e=n.replace(Npe,""),t=function(n,e){var r,t=n.length,i=n.charCodeAt(0);return i>=55296&&i<=56319&&t>1&&(r=n.charCodeAt(1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e),i=t>=iee[0]&&t<=iee[1],r=2===e.length&&e[0]===e[1];return{value:yR(r?e[0]:e),isSecondary:i||r}}(M),P=A.value,j=A.isSecondary,K=m[0].startsWith("FontAwesome"),he=bR(k,P),be=he;if(K){var ye=function(n){var e=zX[n],t=bR("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(P);ye.iconName&&ye.prefix&&(he=ye.iconName,k=ye.prefix)}if(!he||j||u&&u.getAttribute(fR)===k&&u.getAttribute(pR)===be)i();else{n.setAttribute(t,be),u&&n.removeChild(u);var Ae={iconName:null,title:null,titleId:null,prefix:null,transform:U3,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},ze=Ae.extra;ze.attributes[hR]=e,NR(he,k).then(function(ut){var Et=DR(Ye(Ye({},Ae),{},{icons:{main:ut,mask:{prefix:null,iconName:null,rest:[]}},prefix:k,iconName:be,extra:ze,watchable:!0})),Sn=ri.createElement("svg");"::before"===e?n.insertBefore(Sn,n.firstChild):n.appendChild(Sn),Sn.outerHTML=Et.map(function(Gt){return Pm(Gt)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function Ape(n){return Promise.all([ree(n,"::before"),ree(n,"::after")])}function Ipe(n){return!(n.parentNode===document.head||~y9e.indexOf(n.tagName.toUpperCase())||n.getAttribute(hR)||n.parentNode&&"svg"===n.parentNode.tagName)}function see(n){if(sc)return new Promise(function(e,t){var i=sh(n.querySelectorAll("*")).filter(Ipe).map(Ape),r=AR_begin("searchPseudoElements");JX(),Promise.all(i).then(function(){r(),LR(),e()}).catch(function(){r(),LR(),t()})})}var oee=!1,aee=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var a=r.toLowerCase().split("-"),u=a[0],h=a.slice(1).join("-");if(u&&"h"===h)return i.flipX=!0,i;if(u&&"v"===h)return i.flipY=!0,i;if(h=parseFloat(h),isNaN(h))return i;switch(u){case"grow":i.size=i.size+h;break;case"shrink":i.size=i.size-h;break;case"left":i.x=i.x-h;break;case"right":i.x=i.x+h;break;case"up":i.y=i.y-h;break;case"down":i.y=i.y+h;break;case"rotate":i.rotate=i.rotate+h}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},PR={x:0,y:0,width:"100%",height:"100%"};function cee(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function Ope(n){return"g"===n.tag?n.children:[n]}!function(n,e){var t=e.mixoutsTo;UX=n,ah={},Object.keys(ch).forEach(function(i){-1===X9e.indexOf(i)&&delete ch[i]}),UX.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(u){"function"==typeof r[u]&&(t[u]=r[u]),"object"===AE(r[u])&&Object.keys(r[u]).forEach(function(h){t[u]||(t[u]={}),t[u][h]=r[u][h]})}),i.hooks){var a=i.hooks();Object.keys(a).forEach(function(u){ah[u]||(ah[u]=[]),ah[u].push(a[u])})}i.provides&&i.provides(ch)})}([z9e,Spe,Dpe,kpe,xpe,{hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=see,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;gt.searchPseudoElements&&see(void 0===i?ri:i)}}},{mixout:function(){return{dom:{unwatch:function(){JX(),oee=!0}}}},hooks:function(){return{bootstrap:function(){XX(MR("mutationObserverCallbacks",{}))},noAuto:function(){!qE||qE.disconnect()},watch:function(t){var i=t.observeMutationsRoot;oee?LR():XX(MR("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},{mixout:function(){return{parse:{transform:function(t){return aee(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=aee(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,u=t.iconWidth,h={transform:"translate(".concat(t.containerWidth/2," 256)")},m="translate(".concat(32*r.x,", ").concat(32*r.y,") "),F="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),b="rotate(".concat(r.rotate," 0 0)"),A={outer:h,inner:{transform:"".concat(m," ").concat(F," ").concat(b)},path:{transform:"translate(".concat(u/2*-1," -256)")}};return{tag:"g",attributes:Ye({},A.outer),children:[{tag:"g",attributes:Ye({},A.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:Ye(Ye({},i.icon.attributes),A.path)}]}]}}}},{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),a=r?BE(r.split(" ").map(function(u){return u.trim()})):{prefix:null,iconName:null,rest:[]};return a.prefix||(a.prefix=gu()),t.mask=a,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,r=t.attributes,a=t.main,u=t.mask,h=t.maskId,b=a.icon,k=u.icon,A=function(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},a="translate(".concat(32*e.x,", ").concat(32*e.y,") "),u="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),h="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(a," ").concat(u," ").concat(h)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:u.width,iconWidth:a.width}),P={tag:"rect",attributes:Ye(Ye({},PR),{},{fill:"white"})},j=b.children?{children:b.children.map(cee)}:{},K={tag:"g",attributes:Ye({},A.inner),children:[cee(Ye({tag:b.tag,attributes:Ye(Ye({},b.attributes),A.path)},j))]},he={tag:"g",attributes:Ye({},A.outer),children:[K]},be="mask-".concat(h||Lm()),ye="clip-".concat(h||Lm()),Ae={tag:"mask",attributes:Ye(Ye({},PR),{},{id:be,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[P,he]},ze={tag:"defs",children:[{tag:"clipPath",attributes:{id:ye},children:Ope(k)},Ae]};return i.push(ze,{tag:"rect",attributes:Ye({fill:"currentColor","clip-path":"url(#".concat(ye,")"),mask:"url(#".concat(be,")")},PR)}),{children:i,attributes:r}}}},{provides:function(e){var t=!1;pu.matchMedia&&(t=pu.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:Ye(Ye({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var u=Ye(Ye({},a),{},{attributeName:"opacity"}),h={tag:"circle",attributes:Ye(Ye({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||h.children.push({tag:"animate",attributes:Ye(Ye({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ye(Ye({},u),{},{values:"1;0;1;1;0;1;"})}),i.push(h),i.push({tag:"path",attributes:Ye(Ye({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ye(Ye({},u),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:Ye(Ye({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ye(Ye({},u),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}],{mixoutsTo:No});var jpe=No.parse,Upe=No.icon;const Gpe=["*"],Wpe=n=>{const e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-inverse":n.inverse,"fa-layers-counter":n.counter,"fa-flip-horizontal":"horizontal"===n.flip||"both"===n.flip,"fa-flip-vertical":"vertical"===n.flip||"both"===n.flip,[`fa-${n.size}`]:null!==n.size,[`fa-rotate-${n.rotate}`]:null!==n.rotate,[`fa-pull-${n.pull}`]:null!==n.pull,[`fa-stack-${n.stackItemSize}`]:null!=n.stackItemSize};return Object.keys(e).map(t=>e[t]?t:null).filter(t=>t)};let Ype=(()=>{class n{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qpe=(()=>{class n{constructor(){this.definitions={}}addIcons(...t){for(const i of t){i.prefix in this.definitions||(this.definitions[i.prefix]={}),this.definitions[i.prefix][i.iconName]=i;for(const r of i.icon[2])"string"==typeof r&&(this.definitions[i.prefix][r]=i)}}addIconPacks(...t){for(const i of t){const r=Object.keys(i).map(a=>i[a]);this.addIcons(...r)}}getIconDefinition(t,i){return t in this.definitions&&i in this.definitions[t]?this.definitions[t][i]:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jpe=(()=>{class n{constructor(){this.stackItemSize="1x"}ngOnChanges(t){if("size"in t)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[l.TTD]}),n})(),Xpe=(()=>{class n{constructor(t,i){this.renderer=t,this.elementRef=i}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(t){"size"in t&&(null!=t.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${t.size.currentValue}`),null!=t.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${t.size.previousValue}`))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275cmp=l.Xpm({type:n,selectors:[["fa-stack"]],inputs:{size:"size"},features:[l.TTD],ngContentSelectors:Gpe,decls:1,vars:0,template:function(t,i){1&t&&(l.F$t(),l.Hsn(0))},encapsulation:2}),n})(),j6=(()=>{class n{constructor(t,i,r,a,u){this.sanitizer=t,this.config=i,this.iconLibrary=r,this.stackItem=a,this.classes=[],null!=u&&null==a&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(t){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let i=null;if(i=null==this.icon?this.config.fallbackIcon:this.icon,t){const r=this.findIconDefinition(i);if(null!=r){const a=this.buildParams();this.renderIcon(r,a)}}}render(){this.ngOnChanges({})}findIconDefinition(t){const i=((n,e)=>(n=>void 0!==n.prefix&&void 0!==n.iconName)(n)?n:Array.isArray(n)&&2===n.length?{prefix:n[0],iconName:n[1]}:"string"==typeof n?{prefix:e,iconName:n}:void 0)(t,this.config.defaultPrefix);if("icon"in i)return i;const r=this.iconLibrary.getIconDefinition(i.prefix,i.iconName);return null!=r?r:((n=>{throw new Error(`Could not find icon with iconName=${n.iconName} and prefix=${n.prefix} in the icon library.`)})(i),null)}buildParams(){const t={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},i="string"==typeof this.transform?jpe.transform(this.transform):this.transform;return{title:this.title,transform:i,classes:[...Wpe(t),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(t,i){const r=Upe(t,i);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(r.html.join("\n"))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Y1),l.Y36(Ype),l.Y36(Qpe),l.Y36(Jpe,8),l.Y36(Xpe,8))},n.\u0275cmp=l.Xpm({type:n,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(t,i){2&t&&(l.Ikx("innerHTML",i.renderedIconHTML,l.oJD),l.uIk("title",i.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[l.TTD],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})(),eme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function tme(n,e){1&n&&(l.TgZ(0,"span",28),l._uU(1,"Please enter your name"),l.qZA())}function nme(n,e){1&n&&(l.TgZ(0,"span",28),l._uU(1,"You can not add more than 20 characters"),l.qZA())}const ime=function(){return{color:"#54656f"}};let lee=(()=>{class n{constructor(t,i,r,a,u,h){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.faArrowLeft=Ds,this.submitProfileForm=!1,this.isLoading=0,this.userPlaceholder="./assets/images/placeholder-profile-img.png",this.profileImageSrc=null,this.isChangedProfilePic=!1}ngOnInit(){this.setValue()}setValue(){this.profileDetailsForm=this.formBuilder.group({profileName:[this.commonService.loginUser.name,[S2.required,S2.maxLength(20)]],profileImage:[this.commonService.loginUser.profilePicture]}),this.profileImageSrc=this.commonService.loginUser.profilePicture}get f(){return this.profileDetailsForm.controls}submit(){return this.submitProfileForm=!0,!this.profileDetailsForm.invalid&&(this.isLoading=1,this.chatService.updateProfile(this.chatService.userDetails.id,{name:this.profileDetailsForm.controls.profileName.value,profilePicture:this.profileImageSrc}).then(i=>{this.isLoading=0,this.getUserDetails(),this.toastrService.success("Profile successfully updated"),this.commonService.closeMyProfile()}).catch(()=>{}),!0)}getUserDetails(){this.chatService.getUserById(this.chatService.userDetails.id).then(t=>{this.commonService.loginUser=t}).catch(t=>console.log(t))}onSelectProfileImage(t){var i,r,a,u,h,m;if(null===(i=this.chatService)||void 0===i?void 0:i.checkExtension(null===(u=null===(a=null===(r=null==t?void 0:t.target)||void 0===r?void 0:r.files[0])||void 0===a?void 0:a.name)||void 0===u?void 0:u.split(".").pop())){this.profileDetailsForm.controls.profileImage.setValue(null===(h=null==t?void 0:t.target)||void 0===h?void 0:h.files[0]),this.isChangedProfilePic=!0;const F=new FileReader;F.readAsDataURL(null===(m=null==t?void 0:t.target)||void 0===m?void 0:m.files[0]),F.onload=b=>{this.profileImageSrc=F.result}}else this.toastrService.warning("Please select only image file")}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-my-profile"]],decls:34,vars:8,consts:[[1,"h-100",3,"loader"],[1,"sidebar-header"],[1,"sidebar-header-left"],[1,"sidebar-header-left-img",3,"click"],[3,"icon","styles"],[1,"sidebar-header-right","dropdown"],[1,"sidebar-search","hide-search"],[1,"sidebar-search-input"],["type","button"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#54656f","d","M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"],["type","text","placeholder","Search user"],["searchFriendList",""],[1,"h-100",3,"formGroup","ngSubmit"],[1,"craete-group-list","list-wrap"],[1,"formGroup","imgInput"],[1,"userImg"],["onError","this.src='./assets/images/placeholder-profile-img.png'","alt","Profile Image",3,"src"],[1,"photo-upload"],["src","./assets/images/white-camera.svg","alt","Add Image",3,"click"],["id","group_logo","type","file","accept","image/*","onclick","this.value = null",1,"no-display","file-input",3,"change"],["profileChatPic","","imageFile",""],[1,"formGroup","nameInput"],["type","text","formControlName","profileName","placeholder","Enter Your Name",1,"formControl"],["class","error",4,"ngIf"],[1,"extra-texts"],[1,"create-group-btn","d-grid"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"error"]],template:function(t,i){if(1&t){const r=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.NdJ("click",function(){return i.commonService.closeMyProfile()}),l._UZ(4,"fa-icon",4),l.qZA(),l.TgZ(5,"span"),l._uU(6,"Profile"),l.qZA(),l.qZA(),l._UZ(7,"div",5),l.qZA(),l.TgZ(8,"div",6),l.TgZ(9,"div",7),l.TgZ(10,"button",8),l.O4$(),l.TgZ(11,"svg",9),l._UZ(12,"path",10),l.qZA(),l.qZA(),l.kcU(),l._UZ(13,"input",11,12),l.qZA(),l.qZA(),l.TgZ(15,"form",13),l.NdJ("ngSubmit",function(){return i.submit()}),l.TgZ(16,"div",14),l.TgZ(17,"div",15),l.TgZ(18,"div",16),l._UZ(19,"img",17),l.TgZ(20,"div",18),l.TgZ(21,"img",19),l.NdJ("click",function(){return l.CHM(r),l.MAs(23).click()}),l.qZA(),l.TgZ(22,"input",20,21),l.NdJ("change",function(u){return i.onSelectProfileImage(u)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(25,"div",22),l._UZ(26,"input",23),l.YNc(27,tme,2,0,"span",24),l.YNc(28,nme,2,0,"span",24),l.qZA(),l.TgZ(29,"span",25),l._uU(30,"This is not your username or pin. This name will be visible to your chat contacts."),l.qZA(),l.qZA(),l.TgZ(31,"div",26),l.TgZ(32,"button",27),l._uU(33," Save "),l.qZA(),l.qZA(),l.qZA(),l.qZA()}2&t&&(l.Q6J("loader",1==i.isLoading),l.xp6(4),l.Q6J("icon",i.faArrowLeft)("styles",l.DdM(7,ime)),l.xp6(11),l.Q6J("formGroup",i.profileDetailsForm),l.xp6(4),l.Q6J("src",i.profileImageSrc,l.LSH),l.xp6(8),l.Q6J("ngIf",i.submitProfileForm&&(null==i.f.profileName.errors?null:i.f.profileName.errors.required)),l.xp6(1),l.Q6J("ngIf",i.submitProfileForm&&(null==i.f.profileName.errors?null:i.f.profileName.errors.maxlength)))},directives:[fu,j6,Tm,Mm,R6,j3,du,rh,ai],styles:['.sidebar-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:space-between;background-color:#fbdae0}.sidebar-header-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.sidebar-header-left-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer}.sidebar-header-right[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.sidebar-header-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:10000;max-width:340px;overflow:visible;padding:9px 0;border:none;background-color:#fff;border-radius:3px;box-shadow:0 2px 5px #0b141a42,0 2px 10px #0b141a29}.sidebar-header-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.sidebar-header-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dropdown-item.active[_ngcontent-%COMP%], .sidebar-header-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dropdown-item[_ngcontent-%COMP%]:active{background-color:transparent!important;color:#fff!important}.sidebar-header-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{box-sizing:border-box;display:block;font-size:14.5px;line-height:14.5px;color:#3b4a54;position:relative;flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:7px;padding-bottom:7px}.sidebar-search[_ngcontent-%COMP%]{background-color:#fff;padding:7px 10px;position:relative;z-index:100;box-sizing:border-box;flex:none;height:49px;transition:box-shadow .18s ease-out,background-color .25s ease-out}.sidebar-search[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";border-bottom:1px solid #e9edef;background-color:#e9edef;left:0}.sidebar-search.hide-search[_ngcontent-%COMP%]{opacity:0;visibility:hidden;border-bottom:none}.sidebar-search-input[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:8px;height:35px;display:flex;align-items:center;justify-content:flex-start;position:relative}.sidebar-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:0 20px 0 40px}.sidebar-search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:0;border:0;position:absolute;left:10px;top:4px}.list-wrap[_ngcontent-%COMP%]{width:100%;overflow:auto;overflow-x:hidden;flex:1;background-color:#fff;height:calc(100% - 167px)}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.list-wrap-single[_ngcontent-%COMP%]{position:relative;display:flex;pointer-events:all;align-items:center;cursor:pointer}.list-wrap-single[_ngcontent-%COMP%]:hover, .list-wrap-single.active[_ngcontent-%COMP%]{background:#f4f7f9}.list-wrap-single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.list-wrap-single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + .list-wrap-single-label[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex:1;flex-direction:row;height:72px;cursor:pointer}.list-wrap-single-label-img[_ngcontent-%COMP%]{display:flex;height:100%}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]{padding:0 15px 0 13px;margin-top:-1px;flex:none;align-items:center;display:flex}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:49px;width:49px;border-radius:50%;position:relative}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;overflow:hidden;transition:opacity .15s ease-out;border-radius:50%;object-fit:cover}.list-wrap-single-label-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0;padding-right:15px;border-top:1px solid #e9edef;height:100%}.list-wrap-single-label-info-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal;text-align:left}.list-wrap-single-label-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:17px;line-height:normal;font-weight:400;text-align:left}.list-wrap-single-label-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;flex-grow:1;position:relative}.create-group-btn[_ngcontent-%COMP%]{padding:10px}.formGroup.imgInput[_ngcontent-%COMP%]{margin:20px 10px}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;border-radius:50%;overflow:hidden;margin:20px auto 0}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#00000040;display:flex;align-items:center;justify-content:center}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload.custom-cursor[_ngcontent-%COMP%]{pointer-events:none}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload.upload-g-picture[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{cursor:pointer}.formGroup.nameInput[_ngcontent-%COMP%]{margin:20px 10px}.formGroup.nameInput[_ngcontent-%COMP%]   .formControl[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:8px;height:35px;border:none;padding:10px;font-size:14px;width:100%}.formGroup[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:12px}.extra-texts[_ngcontent-%COMP%]{font-size:14px;margin:20px 10px;display:block;color:#8696a0;line-height:20px}']}),n})();const rme=["searchFriendList"];function sme(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",16),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).addGroup(r)}),l.TgZ(1,"div",17),l.TgZ(2,"div",18),l.TgZ(3,"div"),l._UZ(4,"img",19),l.qZA(),l.qZA(),l.qZA(),l.TgZ(5,"div",20),l.TgZ(6,"div",21),l.TgZ(7,"div",22),l.TgZ(8,"span"),l._uU(9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=l.oxw().$implicit,i=l.oxw(2);l.xp6(4),l.Q6J("src",null!=t&&t.profilePicture?null==t?null:t.profilePicture:i.userPlaceholder,l.LSH),l.xp6(5),l.Oqu(null==t?null:t.name)}}function ome(n,e){if(1&n&&(l.ynx(0),l.YNc(1,sme,10,2,"div",15),l.BQk()),2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",t.userId!==i.chatService.userDetails.id)}}function ame(n,e){if(1&n&&(l.ynx(0),l.YNc(1,ome,2,1,"ng-container",14),l.BQk()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.commonService.friendList)}}function cme(n,e){1&n&&(l.TgZ(0,"div",23),l.TgZ(1,"span"),l._uU(2,"You don't have contacts"),l.qZA(),l.TgZ(3,"button",24),l._uU(4,"Add Contacts"),l.qZA(),l.qZA())}const lme=function(){return{color:"#54656f"}};let uee=(()=>{class n{constructor(t,i,r,a,u,h){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.faArrowLeft=Ds,this.isLoading=0,this.tempFriendList=[],this.tempGroupList=[],this.userPlaceholder="./assets/images/placeholder-profile-img.png"}ngOnInit(){this.getFriends()}onClickGroup(t){var i=this;return(0,X.Z)(function*(){var r,a,u,h,m,F,b;(null==t?void 0:t.groupId)&&i.chatService.userDetails.id?(i.isLoading=1,i.chatService.selectedGroup=t,i.chatService.getGroupMembersDetails(),i.chatService.chatUserId=i.chatService.selectedGroup.isGroup?null:(null===(a=null===(r=i.chatService.selectedGroup)||void 0===r?void 0:r.users[0])||void 0===a?void 0:a.userId)===i.chatService.userDetails.id?null===(h=null===(u=i.chatService.selectedGroup)||void 0===u?void 0:u.users[1])||void 0===h?void 0:h.userId:null===(F=null===(m=i.chatService.selectedGroup)||void 0===m?void 0:m.users[0])||void 0===F?void 0:F.userId,i.chatService.getChats(null===(b=i.chatService.selectedGroup)||void 0===b?void 0:b.groupId),i.chatService.chatContent=!0):i.toastrService.warning("Something went wrong, Please try again")})()}addGroup(t){this.commonService.closeContactList(),this.chatService.isExistOneToOneGroup(t.userId).then(i=>{var r;if(0===i.length&&this.chatService.getUserById(t.userId).then(a=>{this.chatService.userDetails.userId=this.chatService.userDetails.id,this.chatService.createGroup([a,this.chatService.userDetails],!1,"","",this.commonService.queryParams.secretKey).then(h=>{})}),i.length>0){let a=i[0].members.filter(h=>h===this.chatService.userDetails.id),u=i[0].viewBy.filter(h=>h===this.chatService.userDetails.id);0===u.length&&a.length>0?this.chatService.updateGroup(null===(r=i[0])||void 0===r?void 0:r.groupId,"viewBy",this.chatService.userDetails.id,!0).then(h=>{}).catch(h=>{console.log("error",h)}):u.length>0&&a.length>0&&this.onClickGroup(i[0])}this.chatService.friendListContent=!1})}searchFriends(){this.commonService.friendList=this.searchFriend.trim()?this.commonService.friendList.filter(t=>{var i;if(null==t?void 0:t.name.toLowerCase().includes(null===(i=this.searchFriend)||void 0===i?void 0:i.toLowerCase()))return t}):this.commonService.tempFriendList.filter(t=>t)}isLoadingData(t){this.isLoading=t?1:0}getFriends(){var t=this;this.apiService.callApiRequest(vn.USERS_LIST,{id:this.commonService.queryParams.userId}).subscribe(function(){var i=(0,X.Z)(function*(r){if(r.status){if(t.isLoading=0,r.status&&r.result.users.length>0)for(let a=0;a<=r.result.users.length;a++)yield t.chatService.getFriend(r.result.users&&r.result.users.length>0&&r.result.users[a]&&r.result.users[a].id).subscribe(function(){var u=(0,X.Z)(function*(h){var m;t.isLoading=0,"{}"!==h&&(null===(m=Object.keys(h))||void 0===m?void 0:m.length)>0&&void 0===(yield t.commonService.tempFriendList.find(b=>b.userId===h.userId))&&(t.commonService.friendList.push(h),t.commonService.tempFriendList.push(h))});return function(h){return u.apply(this,arguments)}}())}else t.isLoading=0});return function(r){return i.apply(this,arguments)}}())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-contact-list"]],viewQuery:function(t,i){if(1&t&&l.Gf(rme,5),2&t){let r;l.iGM(r=l.CRH())&&(i.searchFriendList=r.first)}},decls:16,vars:7,consts:[[1,"h-100",3,"loader"],[1,"sidebar-header"],[1,"sidebar-header-img",3,"click"],[3,"icon","styles"],[1,"sidebar-search"],[1,"sidebar-search-input"],["type","button"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#54656f","d","M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"],["type","text","placeholder","Search user",3,"ngModel","ngModelChange"],["searchFriendList",""],[1,"list-wrap"],[4,"ngIf"],["class","list-wrap no-data",4,"ngIf"],[4,"ngFor","ngForOf"],["class","list-wrap-single",3,"click",4,"ngIf"],[1,"list-wrap-single",3,"click"],[1,"list-wrap-single-img"],[1,"img-inner"],["onError","this.src='./assets/images/placeholder-profile-img.png'","width","49","height","49","alt","",3,"src"],[1,"list-wrap-single-info"],[1,"list-wrap-single-info-top"],[1,"user"],[1,"list-wrap","no-data"],["type","button",1,"btn","btn-primary","btn-sm"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return i.commonService.closeContactList()}),l._UZ(3,"fa-icon",3),l.qZA(),l.TgZ(4,"span"),l._uU(5,"Contact List"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"button",6),l.O4$(),l.TgZ(9,"svg",7),l._UZ(10,"path",8),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"input",9,10),l.NdJ("ngModelChange",function(a){return i.searchFriend=a})("ngModelChange",function(){return i.searchFriends()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",11),l.YNc(14,ame,2,1,"ng-container",12),l.qZA(),l.YNc(15,cme,5,0,"div",13),l.qZA()),2&t&&(l.Q6J("loader",1==i.isLoading&&i.commonService.friendList.length>0),l.xp6(3),l.Q6J("icon",i.faArrowLeft)("styles",l.DdM(6,lme)),l.xp6(8),l.Q6J("ngModel",i.searchFriend),l.xp6(3),l.Q6J("ngIf",i.commonService.friendList.length>0),l.xp6(1),l.Q6J("ngIf",0==i.isLoading&&0==i.commonService.friendList.length))},directives:[fu,j6,j3,du,ih,ai,zt],styles:['.sidebar-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:flex-start;background-color:#fbdae0}.sidebar-header-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer}.sidebar-search[_ngcontent-%COMP%]{background-color:#fff;padding:7px 10px;position:relative;z-index:100;box-sizing:border-box;flex:none;height:49px;transition:box-shadow .18s ease-out,background-color .25s ease-out}.sidebar-search[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";border-bottom:1px solid #e9edef;background-color:#e9edef;left:0}.sidebar-search-input[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:8px;height:35px;display:flex;align-items:center;justify-content:flex-start;position:relative}.sidebar-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:0 20px 0 40px}.sidebar-search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:0;border:0;position:absolute;left:10px;top:4px}.list-wrap[_ngcontent-%COMP%]{width:100%;overflow:auto;overflow-x:hidden;flex:1;background-color:#fff;height:calc(100% - 109px)}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.list-wrap-single[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;height:72px;pointer-events:all;cursor:pointer}.list-wrap-single[_ngcontent-%COMP%]:hover, .list-wrap-single.active[_ngcontent-%COMP%]{background:#f4f7f9}.list-wrap-single-img[_ngcontent-%COMP%]{display:flex}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]{padding:0 15px 0 13px;margin-top:-1px;flex:none;align-items:center;display:flex}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:49px;width:49px;border-radius:50%;position:relative}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;overflow:hidden;transition:opacity .15s ease-out;border-radius:50%;object-fit:cover}.list-wrap-single-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0;padding-right:15px;border-top:1px solid #e9edef}.list-wrap-single-info-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal;text-align:left}.list-wrap-single-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:17px;line-height:normal;font-weight:400;text-align:left}.list-wrap-single-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;flex-grow:1;position:relative}.list-wrap.no-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-flow:column}.list-wrap.no-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#667781;font-size:20px;margin-bottom:10px}']}),n})();const ume=["searchFriendList"];function dme(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",18),l.TgZ(1,"input",19),l.NdJ("change",function(r){l.CHM(t);const a=l.oxw(),u=a.$implicit,h=a.index;return l.oxw(3).onSelectUser(r,u,h)}),l.qZA(),l.TgZ(2,"label",20),l.TgZ(3,"div",21),l.TgZ(4,"div",22),l.TgZ(5,"div"),l._UZ(6,"img",23),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",24),l.TgZ(8,"div",25),l.TgZ(9,"div",26),l.TgZ(10,"span"),l._uU(11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=l.oxw(),i=t.index,r=t.$implicit,a=l.oxw(3);l.xp6(1),l.Q6J("id",i),l.xp6(1),l.Q6J("for",i),l.xp6(4),l.Q6J("src",null!=r&&r.profilePicture?null==r?null:r.profilePicture:a.userPlaceholder,l.LSH),l.xp6(5),l.Oqu(null==r?null:r.name)}}function hme(n,e){if(1&n&&(l.ynx(0),l.YNc(1,dme,12,4,"div",17),l.BQk()),2&n){const t=e.$implicit,i=l.oxw(3);l.xp6(1),l.Q6J("ngIf",i.chatService.userDetails.id!==t.userId)}}function fme(n,e){if(1&n&&(l.ynx(0),l.YNc(1,hme,2,1,"ng-container",16),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",t.commonService.friendList)}}function pme(n,e){if(1&n&&(l.TgZ(0,"div",14),l.YNc(1,fme,2,1,"ng-container",15),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",t.commonService.friendList.length>0)}}function mme(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",29),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).createGroupStepSecond()}),l._uU(1," Next "),l.qZA()}if(2&n){const t=l.oxw(2);l.Q6J("disabled",0==t.chatService.selectedGroupMember.length)}}function gme(n,e){if(1&n&&(l.TgZ(0,"div",27),l.YNc(1,mme,2,1,"button",28),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",!t.chatService.isAddMember)}}function Cme(n,e){1&n&&(l.TgZ(0,"span",43),l._uU(1,"Please enter group name"),l.qZA())}function _me(n,e){1&n&&(l.TgZ(0,"span",43),l._uU(1,"You can not add more than 20 characters"),l.qZA())}function Fme(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"form",30),l.TgZ(1,"div",31),l.TgZ(2,"div",32),l.TgZ(3,"div",33),l._UZ(4,"img",34),l.TgZ(5,"div",35),l.TgZ(6,"img",36),l.NdJ("click",function(){return l.CHM(t),l.MAs(8).click()}),l.qZA(),l.TgZ(7,"input",37,38),l.NdJ("change",function(r){return l.CHM(t),l.oxw().onSelectGroupImage(r)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",39),l._UZ(11,"input",40),l.YNc(12,Cme,2,0,"span",41),l.YNc(13,_me,2,0,"span",41),l.qZA(),l.qZA(),l.TgZ(14,"div",27),l.TgZ(15,"button",42),l.NdJ("click",function(){return l.CHM(t),l.oxw().createGroup()}),l._uU(16," Create Group "),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=l.oxw();l.Q6J("formGroup",t.groupDetailsForm),l.xp6(4),l.Q6J("src",t.groupImageSrc,l.LSH),l.xp6(8),l.Q6J("ngIf",t.submitGroupForm&&(null==t.f.groupName.errors?null:t.f.groupName.errors.required)),l.xp6(1),l.Q6J("ngIf",t.submitGroupForm&&(null==t.f.groupName.errors?null:t.f.groupName.errors.maxlength)),l.xp6(2),l.Q6J("disabled",t.isDisabledCreateGroupBtn)}}const yme=function(){return{color:"#54656f"}};let vme=(()=>{class n{constructor(t,i,r,a,u,h){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.faArrowLeft=Ds,this.isLoading=0,this.userPlaceholder="./assets/images/placeholder-profile-img.png",this.isDisabledCreateGroupBtn=!1,this.submitGroupForm=!1,this.isDisabledAddNewMember=!1,this.groupImageSrc=null,this.isChangedGroupPic=!1,this.isCreateGroup=!1}ngOnInit(){this.groupDetailsForm=this.formBuilder.group({groupName:[null,[S2.required,S2.maxLength(20)]],groupImage:[null]})}get f(){return this.groupDetailsForm.controls}onSelectUser(t,i,r){var a,u,h,m;if(t.target.checked)this.chatService.selectedGroupMember.push(i);else{let F=null===(u=null===(a=this.chatService)||void 0===a?void 0:a.selectedGroupMember)||void 0===u?void 0:u.findIndex(b=>(null==b?void 0:b.userId)===i.userId);F>-1&&(null===(m=null===(h=this.chatService)||void 0===h?void 0:h.selectedGroupMember)||void 0===m||m.splice(F,1))}}removeUserFromGroup(t,i){this.chatService.removeUserId=t.userId,this.chatService.selectedGroup.userList.splice(i,1)}searchFriends(){this.commonService.friendList=this.searchFriend.trim()?this.commonService.friendList.filter(t=>{var i;if(null==t?void 0:t.name.toLowerCase().includes(null===(i=this.searchFriend)||void 0===i?void 0:i.toLowerCase()))return t}):this.commonService.tempFriendList.filter(t=>t)}addNewMembers(){var t=this;return(0,X.Z)(function*(){t.chatService.isAddMember=!0,t.commonService.friendList=yield t.commonService.tempFriendList.filter(i=>{if(void 0===t.chatService.selectedGroup.members.find(a=>a===i.userId))return i}),t.chatService.groupImageNameContent=!1,t.chatService.friendListContent=!0})()}addMembers(){var t;(null===(t=this.chatService.selectedGroupMember)||void 0===t?void 0:t.length)>0?(this.isDisabledAddNewMember=!0,this.isLoading=1,this.chatService.addNewMembersInGroup(this.chatService.selectedGroupMember).then(i=>{this.isLoading=0,this.isDisabledAddNewMember=!1}).catch(i=>{this.isLoading=0,console.log("error",i),this.toastrService.error("Something went wrong, Please try again"),this.isDisabledAddNewMember=!1})):this.toastrService.warning("Please select atleast one member")}createGroupStepSecond(){this.chatService.selectedGroupMember.length>0?(this.isDisabledCreateGroupBtn=!1,this.submitGroupForm=!1,this.groupDetailsForm.reset(),this.chatService.groupImageNameContent=!0):this.toastrService.warning("Please select at least one group member")}onSelectGroupImage(t){var i,r,a,u,h,m;if(null===(i=this.chatService)||void 0===i?void 0:i.checkExtension(null===(u=null===(a=null===(r=null==t?void 0:t.target)||void 0===r?void 0:r.files[0])||void 0===a?void 0:a.name)||void 0===u?void 0:u.split(".").pop())){this.groupDetailsForm.controls.groupImage.setValue(null===(h=null==t?void 0:t.target)||void 0===h?void 0:h.files[0]),this.isChangedGroupPic=!0;const F=new FileReader;F.readAsDataURL(null===(m=null==t?void 0:t.target)||void 0===m?void 0:m.files[0]),F.onload=b=>{this.groupImageSrc=F.result}}else this.toastrService.warning("Please select only image file")}createGroup(){this.submitGroupForm=!0,!this.groupDetailsForm.invalid&&(this.groupDetailsForm.value.groupName&&this.groupDetailsForm.value.groupName.trim()?(this.chatService.selectedGroupMember.push(this.commonService.loginUser),this.isDisabledCreateGroupBtn=!0,this.submitGroupForm=!1,this.isLoading=1,this.chatService.createGroup(this.chatService.selectedGroupMember,!0,this.groupDetailsForm.value.groupName.trim(),this.groupDetailsForm.value.groupImage,this.commonService.queryParams.secret).then(t=>{var i;this.isLoading=0,!0===t.status?(this.isChangedGroupPic=!1,this.chatService.selectedGroup=t.result,this.chatService.groupImageNameContent=!1,this.chatService.friendListContent=!1,this.chatService.chatContent=!0,this.chatService.getChats(null===(i=this.chatService.selectedGroup)||void 0===i?void 0:i.groupId),this.chatService.selectedGroupMember=[],this.groupDetailsForm.reset(),this.commonService.closeCreateGroup()):(this.isChangedGroupPic=!1,this.toastrService.error(t.message),this.isDisabledCreateGroupBtn=!1)}).catch(t=>{this.isLoading=0,this.isChangedGroupPic=!1,console.log("error",t),this.toastrService.error("Something went wrong, Please try again"),this.isDisabledCreateGroupBtn=!1})):(this.groupDetailsForm.reset(),this.submitGroupForm=!0))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-create-group"]],viewQuery:function(t,i){if(1&t&&l.Gf(ume,5),2&t){let r;l.iGM(r=l.CRH())&&(i.searchFriendList=r.first)}},decls:16,vars:9,consts:[[1,"h-100",3,"loader"],[1,"sidebar-header"],[1,"sidebar-header-img",3,"click"],[3,"icon","styles"],[1,"sidebar-search",3,"ngClass"],[1,"sidebar-search-input"],["type","button"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#54656f","d","M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"],["type","text","placeholder","Search user",3,"ngModel","ngModelChange"],["searchFriendList",""],["class","list-wrap",4,"ngIf"],["class","create-group-btn d-grid",4,"ngIf"],["class","h-100",3,"formGroup",4,"ngIf"],[1,"list-wrap"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","list-wrap-single",4,"ngIf"],[1,"list-wrap-single"],["type","checkbox",1,"form-check-input",3,"id","change"],[1,"list-wrap-single-label",3,"for"],[1,"list-wrap-single-label-img"],[1,"img-inner"],["onError","this.src='./assets/images/placeholder-profile-img.png'","width","49","height","49","alt","",3,"src"],[1,"list-wrap-single-label-info"],[1,"list-wrap-single-label-info-top"],[1,"user"],[1,"create-group-btn","d-grid"],["class","btn btn-primary btn-block",3,"disabled","click",4,"ngIf"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"h-100",3,"formGroup"],[1,"craete-group-list","list-wrap"],[1,"formGroup","imgInput"],[1,"userImg"],["onError","this.src='./assets/images/group-placeholder.jpg'","alt","Group Image",3,"src"],[1,"photo-upload"],["src","./assets/images/white-camera.svg","alt","Add Image",3,"click"],["id","group_logo","type","file","accept","image/*","onclick","this.value = null",1,"no-display","file-input",3,"change"],["groupChatPic","","imageFile",""],[1,"formGroup","nameInput"],["type","text","formControlName","groupName","placeholder","Enter Group Name",1,"formControl"],["class","error",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"error"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return i.commonService.closeCreateGroup()}),l._UZ(3,"fa-icon",3),l.qZA(),l.TgZ(4,"span"),l._uU(5,"Create Group"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"button",6),l.O4$(),l.TgZ(9,"svg",7),l._UZ(10,"path",8),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"input",9,10),l.NdJ("ngModelChange",function(a){return i.searchFriend=a})("ngModelChange",function(){return i.searchFriends()}),l.qZA(),l.qZA(),l.qZA(),l.YNc(13,pme,2,1,"div",11),l.YNc(14,gme,2,1,"div",12),l.YNc(15,Fme,17,5,"form",13),l.qZA()),2&t&&(l.Q6J("loader",1==i.isLoading),l.xp6(3),l.Q6J("icon",i.faArrowLeft)("styles",l.DdM(8,yme)),l.xp6(3),l.Q6J("ngClass",1==i.chatService.groupImageNameContent?"hide-search":""),l.xp6(5),l.Q6J("ngModel",i.searchFriend),l.xp6(2),l.Q6J("ngIf",0==i.chatService.groupImageNameContent),l.xp6(1),l.Q6J("ngIf",0==i.chatService.groupImageNameContent),l.xp6(1),l.Q6J("ngIf",1==i.chatService.groupImageNameContent))},directives:[fu,j6,Dr,j3,du,ih,ai,zt,Tm,Mm,R6,rh],styles:['.sidebar-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:flex-start;background-color:#fff;border-bottom:1px solid rgba(0,0,0,.05)}.sidebar-header-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer}.sidebar-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.sidebar-search[_ngcontent-%COMP%]{background-color:#fafbfd;padding:7px 10px;position:relative;z-index:100;box-sizing:border-box;flex:none;height:49px;transition:box-shadow .18s ease-out,background-color .25s ease-out}.sidebar-search[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";border-bottom:1px solid #e9edef;background-color:#e9edef;left:0}.sidebar-search.hide-search[_ngcontent-%COMP%]{opacity:0;visibility:hidden;border-bottom:none}.sidebar-search-input[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:30px;height:35px;display:flex;align-items:center;justify-content:flex-start;position:relative}.sidebar-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:0 20px 0 40px;font-size:14px}.sidebar-search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:0;border:0;position:absolute;left:10px;top:4px}.list-wrap[_ngcontent-%COMP%]{width:100%;overflow:auto;overflow-x:hidden;flex:1;background-color:#fafbfd;height:calc(100% - 167px);padding:10px}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.list-wrap-single[_ngcontent-%COMP%]{position:relative;display:flex;background:#ffffff;box-shadow:0 4px 6px #1f4ba408;border-radius:16px;pointer-events:all;margin-bottom:10px;align-items:center;cursor:pointer}.list-wrap-single[_ngcontent-%COMP%]:hover, .list-wrap-single.active[_ngcontent-%COMP%]{background:#f4f7f9}.list-wrap-single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.list-wrap-single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + .list-wrap-single-label[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex:1;flex-direction:row;height:72px;cursor:pointer}.list-wrap-single-label-img[_ngcontent-%COMP%]{display:flex;height:100%}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]{padding:0 15px 0 13px;margin-top:-1px;flex:none;align-items:center;display:flex}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:49px;width:49px;border-radius:50%;position:relative}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;overflow:hidden;transition:opacity .15s ease-out;border-radius:50%;object-fit:cover}.list-wrap-single-label-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0;padding-right:15px;height:100%}.list-wrap-single-label-info-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal;text-align:left}.list-wrap-single-label-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:14px;line-height:normal;font-weight:500;text-align:left}.list-wrap-single-label-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;flex-grow:1;position:relative}.create-group-btn[_ngcontent-%COMP%]{padding:10px}.formGroup.imgInput[_ngcontent-%COMP%]{margin:20px 10px}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;border-radius:50%;overflow:hidden;margin:20px auto 0}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#00000040;display:flex;align-items:center;justify-content:center}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload.custom-cursor[_ngcontent-%COMP%]{pointer-events:none}.formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload.upload-g-picture[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{cursor:pointer}.formGroup.nameInput[_ngcontent-%COMP%]{margin:20px 10px}.formGroup.nameInput[_ngcontent-%COMP%]   .formControl[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:8px;height:35px;border:none;padding:10px;font-size:14px;width:100%}.formGroup[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:12px}']}),n})();const wme=["searchFriendList"];function bme(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",15),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).addGroup(r)}),l.TgZ(1,"div",16),l.TgZ(2,"div",17),l.TgZ(3,"div"),l._UZ(4,"img",18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(5,"div",19),l.TgZ(6,"div",20),l.TgZ(7,"div",21),l.TgZ(8,"span"),l._uU(9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=l.oxw().$implicit,i=l.oxw(2);l.xp6(4),l.Q6J("src",null!=t&&t.profilePicture?null==t?null:t.profilePicture:i.userPlaceholder,l.LSH),l.xp6(5),l.Oqu(null==t?null:t.name)}}function Eme(n,e){if(1&n&&(l.ynx(0),l.YNc(1,bme,10,2,"div",14),l.BQk()),2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",t.userId!==i.chatService.userDetails.id)}}function Mme(n,e){if(1&n&&(l.ynx(0),l.YNc(1,Eme,2,1,"ng-container",13),l.BQk()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.commonService.friendList)}}const Sme=function(){return{color:"#54656f"}};let Dme=(()=>{class n{constructor(t,i,r,a,u,h){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.faArrowLeft=Ds,this.isLoading=0,this.tempFriendList=[],this.tempGroupList=[],this.userPlaceholder="./assets/images/placeholder-profile-img.png"}ngOnInit(){}onClickGroup(t){var i=this;return(0,X.Z)(function*(){var r,a,u,h,m,F,b;(null==t?void 0:t.groupId)&&i.chatService.userDetails.id?(i.isLoading=1,i.chatService.selectedGroup=t,i.chatService.getGroupMembersDetails(),i.chatService.chatUserId=i.chatService.selectedGroup.isGroup?null:(null===(a=null===(r=i.chatService.selectedGroup)||void 0===r?void 0:r.users[0])||void 0===a?void 0:a.userId)===i.chatService.userDetails.id?null===(h=null===(u=i.chatService.selectedGroup)||void 0===u?void 0:u.users[1])||void 0===h?void 0:h.userId:null===(F=null===(m=i.chatService.selectedGroup)||void 0===m?void 0:m.users[0])||void 0===F?void 0:F.userId,i.chatService.getChats(null===(b=i.chatService.selectedGroup)||void 0===b?void 0:b.groupId),i.chatService.chatContent=!0):i.toastrService.warning("Something went wrong, Please try again")})()}addGroup(t){this.commonService.openChatRoom(),this.commonService.closeContactList(),this.chatService.isExistOneToOneGroup(t.userId).then(i=>{var r;if(0===(null==i?void 0:i.length)&&this.chatService.getUserById(t.userId).then(a=>{this.chatService.createGroup([a,this.chatService.userDetails],!1,"","",this.commonService.queryParams.secret).then(h=>{})}),(null==i?void 0:i.length)>0){let a=i[0].members.filter(),u=i[0].viewBy.filter();0===u.length&&a.length>0?this.chatService.updateGroup(null===(r=i[0])||void 0===r?void 0:r.groupId,"viewBy","",!0).then(h=>{}).catch(h=>{console.log("error",h)}):u.length>0&&a.length>0&&this.onClickGroup(i[0])}this.chatService.friendListContent=!1})}searchFriends(){this.commonService.friendList=this.searchFriend.trim()?this.commonService.friendList.filter(t=>{var i;if(null==t?void 0:t.name.toLowerCase().includes(null===(i=this.searchFriend)||void 0===i?void 0:i.toLowerCase()))return t}):this.commonService.tempFriendList.filter(t=>t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-block-users"]],viewQuery:function(t,i){if(1&t&&l.Gf(wme,5),2&t){let r;l.iGM(r=l.CRH())&&(i.searchFriendList=r.first)}},decls:15,vars:6,consts:[[1,"h-100",3,"loader"],[1,"sidebar-header"],[1,"sidebar-header-img",3,"click"],[3,"icon","styles"],[1,"sidebar-search"],[1,"sidebar-search-input"],["type","button"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#54656f","d","M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"],["type","text","placeholder","Search user",3,"ngModel","ngModelChange"],["searchFriendList",""],[1,"list-wrap"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","list-wrap-single",3,"click",4,"ngIf"],[1,"list-wrap-single",3,"click"],[1,"list-wrap-single-img"],[1,"img-inner"],["onError","this.src='./assets/images/placeholder-profile-img.png'","width","49","height","49","alt","",3,"src"],[1,"list-wrap-single-info"],[1,"list-wrap-single-info-top"],[1,"user"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return i.commonService.closeBlockUsers()}),l._UZ(3,"fa-icon",3),l.qZA(),l.TgZ(4,"span"),l._uU(5,"Block Users"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"button",6),l.O4$(),l.TgZ(9,"svg",7),l._UZ(10,"path",8),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"input",9,10),l.NdJ("ngModelChange",function(a){return i.searchFriend=a})("ngModelChange",function(){return i.searchFriends()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",11),l.YNc(14,Mme,2,1,"ng-container",12),l.qZA(),l.qZA()),2&t&&(l.Q6J("loader",1==i.isLoading),l.xp6(3),l.Q6J("icon",i.faArrowLeft)("styles",l.DdM(5,Sme)),l.xp6(8),l.Q6J("ngModel",i.searchFriend),l.xp6(3),l.Q6J("ngIf",i.commonService.friendList.length>0))},directives:[fu,j6,j3,du,ih,ai,zt],styles:['.sidebar-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:flex-start;background-color:#fbdae0}.sidebar-header-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer}.sidebar-search[_ngcontent-%COMP%]{background-color:#fff;padding:7px 10px;position:relative;z-index:100;box-sizing:border-box;flex:none;height:49px;transition:box-shadow .18s ease-out,background-color .25s ease-out}.sidebar-search[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";border-bottom:1px solid #e9edef;background-color:#e9edef;left:0}.sidebar-search-input[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:8px;height:35px;display:flex;align-items:center;justify-content:flex-start;position:relative}.sidebar-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:0 20px 0 40px}.sidebar-search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:0;border:0;position:absolute;left:10px;top:4px}.list-wrap[_ngcontent-%COMP%]{width:100%;overflow:auto;overflow-x:hidden;flex:1;background-color:#fff;height:calc(100% - 109px)}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.list-wrap-single[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;height:72px;pointer-events:all;cursor:pointer}.list-wrap-single[_ngcontent-%COMP%]:hover, .list-wrap-single.active[_ngcontent-%COMP%]{background:#f4f7f9}.list-wrap-single-img[_ngcontent-%COMP%]{display:flex}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]{padding:0 15px 0 13px;margin-top:-1px;flex:none;align-items:center;display:flex}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:49px;width:49px;border-radius:50%;position:relative}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;overflow:hidden;transition:opacity .15s ease-out;border-radius:50%;object-fit:cover}.list-wrap-single-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0;padding-right:15px;border-top:1px solid #e9edef}.list-wrap-single-info-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal;text-align:left}.list-wrap-single-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:17px;line-height:normal;font-weight:400;text-align:left}.list-wrap-single-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;flex-grow:1;position:relative}']}),n})();const kme=["searchRecentList"];function xme(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&n){const t=l.oxw(2).$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,null==t||null==t.recentMessage?null:t.recentMessage.sentAt.toDate(),"shortTime"))}}function Nme(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&n){const t=l.oxw(2).$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,null==t.recentMessage?null:t.recentMessage.sentAt.toDate(),"shortDate"))}}function Tme(n,e){if(1&n&&(l.TgZ(0,"div",29),l.YNc(1,xme,3,4,"span",25),l.YNc(2,Nme,3,4,"span",25),l.qZA()),2&n){const t=l.oxw().$implicit,i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.datepipe.transform(null==i.chatService?null:i.chatService.currentDate,"yyyy-MM-dd")===i.datepipe.transform(null==t||null==t.recentMessage?null:t.recentMessage.timeMilliSeconds.toDate(),"yyyy-MM-dd")),l.xp6(1),l.Q6J("ngIf",i.datepipe.transform(null==i.chatService?null:i.chatService.currentDate,"yyyy-MM-dd")!==i.datepipe.transform(null==t||null==t.recentMessage?null:t.recentMessage.timeMilliSeconds.toDate(),"yyyy-MM-dd"))}}function Ame(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",30),l.TgZ(2,"span",31),l._uU(3,"Start your conversation"),l.qZA(),l.qZA(),l.BQk())}function Ime(n,e){if(1&n&&(l.ynx(0),l.TgZ(1,"div",30),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.qZA(),l.BQk()),2&n){const t=l.oxw().$implicit;l.xp6(3),l.Oqu(null==t||null==t.recentMessage?null:t.recentMessage.message)}}function Lme(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",32),l.O4$(),l.TgZ(2,"svg",33),l._UZ(3,"path",34),l.qZA(),l.kcU(),l.TgZ(4,"span"),l._uU(5,"Photo"),l.qZA(),l.qZA(),l.BQk())}function Pme(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",32),l.O4$(),l.TgZ(2,"svg",35),l._UZ(3,"path",36),l.qZA(),l.kcU(),l.TgZ(4,"span"),l._uU(5,"File"),l.qZA(),l.qZA(),l.BQk())}function Vme(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",32),l.O4$(),l.TgZ(2,"svg",37),l._UZ(3,"path",38),l._UZ(4,"path",39),l.qZA(),l.kcU(),l.TgZ(5,"span"),l._uU(6,"Video"),l.qZA(),l.qZA(),l.BQk())}function Ome(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",32),l.O4$(),l.TgZ(2,"svg",40),l._UZ(3,"path",41),l.qZA(),l.kcU(),l.TgZ(4,"span"),l._uU(5,"Audio"),l.qZA(),l.qZA(),l.BQk())}function Rme(n,e){if(1&n&&(l.TgZ(0,"span",43),l._uU(1),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.hij(" ",t.unreadCount," ")}}function zme(n,e){if(1&n&&(l.ynx(0),l.YNc(1,Rme,2,1,"span",42),l.BQk()),2&n){const t=e.$implicit,i=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.groupId!==(null==r.chatService||null==r.chatService.selectedGroup?null:r.chatService.selectedGroup.groupId)&&t.userId===r.chatService.userDetails.id&&t.unreadCount)}}function Hme(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",15),l.NdJ("click",function(){const a=l.CHM(t).$implicit;return l.oxw(2).onClickGroup(a)}),l.TgZ(2,"div",16),l.TgZ(3,"div",17),l.TgZ(4,"div"),l._UZ(5,"img",18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",19),l.TgZ(7,"div",20),l.TgZ(8,"div",21),l.TgZ(9,"span"),l._uU(10),l.qZA(),l.qZA(),l.YNc(11,Tme,3,2,"div",22),l.qZA(),l.TgZ(12,"div",23),l.ynx(13,24),l.YNc(14,Ame,4,0,"ng-container",25),l.YNc(15,Ime,4,1,"ng-container",26),l.YNc(16,Lme,6,0,"ng-container",26),l.YNc(17,Pme,6,0,"ng-container",26),l.YNc(18,Vme,7,0,"ng-container",26),l.YNc(19,Ome,6,0,"ng-container",26),l.BQk(),l.TgZ(20,"div",27),l.TgZ(21,"span"),l.TgZ(22,"div",28),l.YNc(23,zme,2,1,"ng-container",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.BQk()}if(2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(5),l.Q6J("src",null!=t&&t.isGroup?t.groupImage?t.groupImage:i.groupPlaceholder:(null==t||null==t.users[0]?null:t.users[0].userId)===i.chatService.userDetails.id?null!=t&&null!=t.users[1]&&t.users[1].profilePicture?null==t||null==t.users[1]?null:t.users[1].profilePicture:i.userPlaceholder:null==t||null==t.users[0]?null:t.users[0].profilePicture,l.LSH),l.xp6(5),l.hij(" ",t.isGroup?t.name:(null==t||null==t.users[0]?null:t.users[0].userId)===i.chatService.userDetails.id?null==t||null==t.users[1]?null:t.users[1].name:null==t||null==t.users[0]?null:t.users[0].name," "),l.xp6(1),l.Q6J("ngIf",null==t||null==t.recentMessage?null:t.recentMessage.sentAt),l.xp6(2),l.Q6J("ngSwitch",null==t||null==t.recentMessage?null:t.recentMessage.type),l.xp6(1),l.Q6J("ngIf",!(null!=t&&null!=t.recentMessage&&t.recentMessage.type)),l.xp6(1),l.Q6J("ngSwitchCase","text"),l.xp6(1),l.Q6J("ngSwitchCase","image"),l.xp6(1),l.Q6J("ngSwitchCase","document"),l.xp6(1),l.Q6J("ngSwitchCase","video"),l.xp6(1),l.Q6J("ngSwitchCase","audio"),l.xp6(4),l.Q6J("ngForOf",null==t?null:t.readCount)}}function Bme(n,e){if(1&n&&(l.TgZ(0,"div",13),l.YNc(1,Hme,24,11,"ng-container",14),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",null==t.chatService?null:t.chatService.groups)}}function jme(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",44),l.TgZ(1,"span"),l._uU(2,"You don't have any chats"),l.qZA(),l.TgZ(3,"button",45),l.NdJ("click",function(){return l.CHM(t),l.oxw().addChat()}),l._uU(4," Start Chatting"),l.qZA(),l.qZA()}}const Ume=function(){return{color:"#54656f"}};let Gme=(()=>{class n{constructor(t,i,r,a,u,h,m,F,b){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.bsModalService=m,this.cdr=F,this.activatedRoute=b,this.faUserPlus=P9,this.faUsers=hU,this.faArrowLeft=Ds,this.isLoading=1,this.chatContentLoader=0,this.tempGroupList=[],this.friendList=[],this.tempFriendList=[],this.typingUsers=[],this.isCreateGroup=!1,this.isSingleChat=!1,this.userPlaceholder="./assets/images/placeholder-profile-img.png",this.groupPlaceholder="./assets/images/group-placeholder.jpg",this.removeChatDetails={},this.signUpInfo={firstName:"",lastName:"",password:"",email:"",phone:""},this.chatService.getLoggedInUserGroups(this.commonService.queryParams.secretKey),this.activatedRoute.queryParams.subscribe(M=>{M.groupId&&this.getGroupDetails(M.groupId),M.userId&&(this.userId=M.userId),M.otherUserId&&this.createOrGetGroup(M.otherUserId)})}ngOnInit(){this.chatService.getUserById(this.chatService.userDetails.id).then(t=>{this.commonService.loginUser=t,this.cdr.detectChanges()}).catch(t=>console.log(t)),this.chatService.getLoggedInUserGroups(this.commonService.queryParams.secret),this.getGroups(),this.setUserSignUp()}onSearchRecentChatList(){var t=this;return(0,X.Z)(function*(){t.searchText.trim()?(t.chatService.groups=[],yield t.tempGroupList.filter(function(){var i=(0,X.Z)(function*(r,a){let u=r.users[0].userId===t.chatService.userDetails.id?r.users[1]:r.users[0];(r.name.toLowerCase().includes(t.searchText.toLowerCase())||u.name.toLowerCase().includes(t.searchText.toLowerCase())&&!1===r.isGroup)&&t.chatService.groups.push(r)});return function(r,a){return i.apply(this,arguments)}}())):t.chatService.groups=t.tempGroupList})()}openFriendList(){this.chatService.selectedGroupMember=[],this.isCreateGroup=!0,this.isSingleChat=!1,this.friendList=this.tempFriendList,this.chatService.friendListContent=!0,this.commonService.openCreateGroup(),this.getFriends()}openMyProfile(){this.commonService.openMyProfile(),this.myProfile.setValue()}addChat(){this.friendList=this.tempFriendList,this.isSingleChat=!0,this.chatService.friendListContent=!0,this.commonService.openContactList(),this.getFriends()}onGroupImgError(t){var i,r,a;(null===(i=this.chatService)||void 0===i?void 0:i.selectedGroup)&&(t.target.src=(null===(a=null===(r=this.chatService)||void 0===r?void 0:r.selectedGroup)||void 0===a?void 0:a.isGroup)?this.groupPlaceholder:this.userPlaceholder)}getOnlineOpponent(t){return(0,X.Z)(function*(){})()}onClickGroup(t){var i=this;return(0,X.Z)(function*(){var r,a,u,h,m,F,b,M,k;i.isLoading=1,i.chatService.chats=[],i.commonService.openChatRoom(),i.chatService.updateUnReadCount(null===(r=i.chatService.selectedGroup)||void 0===r?void 0:r.groupId,!0).then(A=>{}).catch(A=>{console.log("error",A)}),(null==t?void 0:t.groupId)&&i.chatService.userDetails.id?(i.chatService.selectedGroup=t,i.cdr.detectChanges(),i.chatService.getGroupMembersDetails(),i.chatService.chatUserId=i.chatService.selectedGroup.isGroup?null:(null===(u=null===(a=i.chatService.selectedGroup)||void 0===a?void 0:a.users[0])||void 0===u?void 0:u.userId)===i.chatService.userDetails.id?null===(m=null===(h=i.chatService.selectedGroup)||void 0===h?void 0:h.users[1])||void 0===m?void 0:m.userId:null===(b=null===(F=i.chatService.selectedGroup)||void 0===F?void 0:F.users[0])||void 0===b?void 0:b.userId,i.chatService.getChats(null===(M=i.chatService.selectedGroup)||void 0===M?void 0:M.groupId),i.chatService.chatContent=!0,i.getOnlineOpponent(i.chatService.groups)):i.toastrService.warning("Something went wrong, Please try again"),i.chatService.updateUnReadCount(null===(k=i.chatService.selectedGroup)||void 0===k?void 0:k.groupId,!0).then(A=>{}).catch(A=>{console.log("error",A)}),localStorage.removeItem("lastselectedgroup")})()}removeUser(t,i){this.chatService.exitUserFromGroup(t.groupId),this.chatService.getChats(t.groupId),this.removeChatDetails={groupId:t.groupId,isRemoveUserChat:!0}}createUser(){return(0,X.Z)(function*(){})()}setUserSignUp(){this.signUpForm=this.formBuilder.group({firstName:[this.signUpInfo.firstName,[S2.required]],lastName:[this.signUpInfo.lastName,[S2.required]],email:[this.signUpInfo.email,[S2.required]],phone:[this.signUpInfo.phone,[S2.required]],password:[this.signUpInfo.password,[S2.required]]})}getFriends(){var t=this;this.commonService.friendList=[],this.commonService.tempFriendList=[],this.contactList.isLoadingData(!0),this.apiService.callApiRequest(vn.USERS_LIST,{id:this.chatService.userDetails.id}).subscribe(function(){var i=(0,X.Z)(function*(r){if(r.status&&r.result.users.length>0)for(let a=0;a<=r.result.users.length;a++)yield t.chatService.getFriend(r.result.users&&r.result.users.length>0&&r.result.users[a]&&r.result.users[a].id).subscribe(function(){var u=(0,X.Z)(function*(h){var m;"{}"!==h&&(null===(m=Object.keys(h))||void 0===m?void 0:m.length)>0&&(void 0===(yield t.commonService.tempFriendList.find(b=>b.userId===h.userId))&&(t.commonService.friendList.push(h),t.commonService.tempFriendList.push(h)),t.contactList.isLoadingData(!1))});return function(h){return u.apply(this,arguments)}}())});return function(r){return i.apply(this,arguments)}}())}getGroups(){var t=this;this.isLoading=1,this.chatService.allGroups$.subscribe(function(){var i=(0,X.Z)(function*(r){if(r.length>0){t.chatService.groups=r;let a=t.chatService.groups.filter(u=>t.chatService.selectedGroup&&u.groupId==t.chatService.selectedGroup.groupId);a&&a.length>0&&(t.chatService.selectedGroup=a[0]),t.cdr&&t.cdr.detectChanges(),t.tempGroupList=r,t.getOnlineOpponent(t.chatService.groups),setTimeout(()=>{t.isLoading=0},2e3)}else t.getOnlineOpponent(t.chatService.groups),t.chatService.groups=[],t.tempGroupList=[],t.chatService.chats=[],t.chatService.selectedGroup=null,setTimeout(()=>{t.isLoading=0},2e3);localStorage.setItem("groups",JSON.stringify(t.chatService.groups))});return function(r){return i.apply(this,arguments)}}())}deleteChat(t){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"delete chat",type:"deleteChat"}}})}deleteGroup(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"delete group",type:"deleteGroup"}}})}exitGroup(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"exit group",type:"exitGroup"}}})}getGroupDetails(t){this.chatService.getGroupById(t).then(i=>{i?this.onClickGroup(i):this.toastrService.error("Group is not available")})}createOrGetGroup(t){this.commonService.openChatRoom(),this.commonService.closeContactList(),this.chatService.isExistOneToOneGroup(t).then(i=>{var r;if(0===(null==i?void 0:i.length)&&this.chatService.getUserById(t).then(a=>{this.chatService.userDetails.userId=this.chatService.userDetails.id,this.chatService.createGroup([a,this.chatService.userDetails],!1,"","",this.commonService.queryParams.secretKey).then(h=>{this.toastrService.success(h.message),this.onClickGroup(h.result)})}),(null==i?void 0:i.length)>0){let a=i[0].members.filter(h=>h===this.chatService.userDetails.id),u=i[0].viewBy.filter(h=>h===this.chatService.userDetails.id);0===u.length&&a.length>0?this.chatService.updateGroup(null===(r=i[0])||void 0===r?void 0:r.groupId,"viewBy","",!0).then(h=>{}).catch(h=>{console.log("error",h)}):u.length>0&&a.length>0&&this.onClickGroup(i[0])}this.chatService.friendListContent=!1})}ngAfterContentChecked(){this.cdr&&this.cdr.detectChanges()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3),l.Y36(su),l.Y36(l.sBO),l.Y36(s2))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sidebar"]],viewQuery:function(t,i){if(1&t&&(l.Gf(lee,5),l.Gf(kme,5),l.Gf(uee,5)),2&t){let r;l.iGM(r=l.CRH())&&(i.myProfile=r.first),l.iGM(r=l.CRH())&&(i.searchRecentList=r.first),l.iGM(r=l.CRH())&&(i.contactList=r.first)}},decls:13,vars:11,consts:[[1,"h-100",3,"loader"],[1,"sidebar-header"],[1,"sidebar-header-img","cursor-pointer",3,"click"],["onError","this.src='./assets/images/placeholder-profile-img.png'","width","40","height","40",3,"src"],[1,"d-flex","align-items-center"],["type","button","title","New Chat",3,"click"],[3,"icon","styles"],["class","list-wrap",4,"ngIf"],["class","list-wrap no-data",4,"ngIf"],[1,"contact-list","siderBarInner",3,"ngClass"],[1,"create-group","siderBarInner",3,"ngClass"],[1,"my-profile","siderBarInner",3,"ngClass"],[1,"block-users","siderBarInner",3,"ngClass"],[1,"list-wrap"],[4,"ngFor","ngForOf"],[1,"list-wrap-single",3,"click"],[1,"list-wrap-single-img"],[1,"img-inner"],["onError","this.src='./assets/images/placeholder-profile-img.png'","width","49","height","49","alt","",3,"src"],[1,"list-wrap-single-info"],[1,"list-wrap-single-info-top"],[1,"user"],["class","time",4,"ngIf"],[1,"list-wrap-single-info-bottom"],[3,"ngSwitch"],[4,"ngIf"],[4,"ngSwitchCase"],[1,"list-wrap-single-info-bottom-right"],[1,"count-div"],[1,"time"],[1,"text"],[1,"text-muted"],[1,"text","text-file-msg"],["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.0337 0C12.4062 0 14 1.66468 14 4.1417V9.85829C14 12.3353 12.4062 14 10.033 14H3.96633C1.59383 14 0 12.3353 0 9.85829V4.1417C0 1.66468 1.59383 0 3.96633 0H10.0337ZM10.8056 7.38504C10.0553 6.91692 9.47594 7.5743 9.31967 7.78452C9.16904 7.98751 9.03952 8.21146 8.90296 8.4354C8.56931 8.98803 8.18709 9.62518 7.52542 9.99577C6.56389 10.5282 5.83394 10.0377 5.30883 9.68081C5.11174 9.54788 4.92028 9.42219 4.72952 9.33839C4.25931 9.1354 3.83626 9.36656 3.20838 10.1641C2.87895 10.5809 2.55234 10.9941 2.22151 11.4059C2.02371 11.6522 2.07087 12.0322 2.33765 12.1969C2.76351 12.4591 3.283 12.6 3.87005 12.6H9.76947C10.1024 12.6 10.4361 12.5545 10.7542 12.4505C11.4708 12.2164 12.0396 11.6804 12.3366 10.9724C12.5872 10.3772 12.709 9.6548 12.4746 9.05377C12.3964 8.85439 12.2796 8.66873 12.1156 8.50547C11.6855 8.07853 11.2836 7.67977 10.8056 7.38504ZM4.5492 2.8C3.58415 2.8 2.8 3.58521 2.8 4.55C2.8 5.51479 3.58415 6.3 4.5492 6.3C5.51355 6.3 6.2984 5.51479 6.2984 4.55C6.2984 3.58521 5.51355 2.8 4.5492 2.8Z","fill","#979797"],["width","12","height","15","viewBox","0 0 12 15","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.8841 0C7.06581 0 7.20559 0.148235 7.20559 0.324706V2.59765C7.20559 3.88941 8.26092 4.94824 9.5399 4.95529C10.0711 4.95529 10.4904 4.96235 10.8119 4.96235L10.931 4.96183C11.1458 4.9602 11.4351 4.95529 11.6855 4.95529C11.8602 4.95529 12 5.09647 12 5.27294V10.9482C12 12.6988 10.5952 14.1176 8.86197 14.1176H3.29878C1.48165 14.1176 0 12.6282 0 10.7929V3.18353C0 1.43294 1.41176 0 3.15201 0H6.8841ZM7.63192 9.10588H3.82994C3.54339 9.10588 3.30577 9.33883 3.30577 9.62824C3.30577 9.91765 3.54339 10.1576 3.82994 10.1576H7.63192C7.91846 10.1576 8.15609 9.91765 8.15609 9.62824C8.15609 9.33883 7.91846 9.10588 7.63192 9.10588ZM6.1922 5.57647H3.82994C3.54339 5.57647 3.30577 5.81647 3.30577 6.10588C3.30577 6.39529 3.54339 6.62824 3.82994 6.62824H6.1922C6.47874 6.62824 6.71637 6.39529 6.71637 6.10588C6.71637 5.81647 6.47874 5.57647 6.1922 5.57647ZM8.22402 0.639529C8.22402 0.335294 8.58954 0.184235 8.79851 0.403765C9.55401 1.19718 10.8742 2.58424 11.6123 3.35929C11.8163 3.57318 11.6668 3.92824 11.3725 3.92894C10.798 3.93106 10.1208 3.92894 9.63369 3.924C8.86071 3.924 8.22402 3.28094 8.22402 2.50024V0.639529Z","fill","#979797"],["width","14","height","10","viewBox","0 0 12 8","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.78775 0.474787H1.31291C0.59081 0.474787 0 1.0656 0 1.7877V6.21221C0 6.93431 0.59081 7.52511 1.31291 7.52511H6.78775C7.50985 7.52511 8.10066 6.93431 8.10066 6.21221V1.7877C8.10066 1.05247 7.50985 0.474787 6.78775 0.474787Z","fill","#979797"],["d","M11.0285 1.19684C10.9497 1.20997 10.871 1.24936 10.8053 1.28875L8.75718 2.47037V5.51631L10.8184 6.69793C11.1992 6.92112 11.6718 6.78983 11.895 6.40909C11.9607 6.29093 12.0001 6.15964 12.0001 6.01522V1.95833C12.0001 1.47256 11.5405 1.07868 11.0285 1.19684Z","fill","#979797"],["width","15","height","12","viewBox","0 0 15 12","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.21663 0.529906C6.88058 0.529906 7.49983 1.00815 7.72337 1.7747C7.80545 2.09512 7.83881 2.41623 7.87084 2.72572L7.90087 3.0072C8.01564 3.9466 8.01564 8.56161 7.90087 9.50784L7.87084 9.79957C7.84215 10.094 7.81279 10.3987 7.72804 10.7239C7.5045 11.4884 6.90861 11.9845 6.23198 11.9845C6.21062 11.9845 6.18927 11.9845 6.16525 11.9838C5.79157 11.9838 5.38519 11.7542 5.15497 11.554L2.91088 9.68274H1.75847C0.868974 9.68274 0.217699 9.03849 0.099589 8.0417C-0.036538 7.04491 -0.00984644 5.33486 0.099589 4.42894C0.228376 3.48544 0.910345 2.83161 1.75847 2.83161H2.91088L5.11227 0.987656C5.37785 0.756734 5.84628 0.528545 6.21663 0.529906ZM11.6464 0.670583C11.9119 0.482019 12.277 0.551023 12.4591 0.820887C13.4574 2.29045 14.0072 4.22186 14.0072 6.25711C14.0072 8.29373 13.4574 10.2245 12.4591 11.694C12.3504 11.8546 12.1709 11.9509 11.9793 11.9509C11.8606 11.9509 11.7458 11.914 11.647 11.8443C11.3828 11.6551 11.3174 11.2827 11.5002 11.0122C12.3637 9.74006 12.8395 8.05119 12.8395 6.25711C12.8395 4.46371 12.3637 2.77484 11.5002 1.50272C11.3174 1.23286 11.3828 0.859829 11.6464 0.670583ZM9.63435 2.60342C9.9006 2.41554 10.2643 2.48318 10.4478 2.75373C11.0924 3.70338 11.448 4.94748 11.448 6.25718C11.448 7.56687 11.0924 8.81098 10.4478 9.76063C10.3383 9.92118 10.1595 10.0175 9.968 10.0175C9.84922 10.0175 9.73378 9.98062 9.63502 9.91093C9.37077 9.72169 9.30538 9.34866 9.48888 9.07879C9.99936 8.32659 10.2803 7.32434 10.2803 6.25718C10.2803 5.18934 9.99936 4.18776 9.48888 3.43556C9.30538 3.1657 9.37077 2.79267 9.63435 2.60342Z","fill","#979797"],["class","count",4,"ngIf"],[1,"count"],[1,"list-wrap","no-data"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return i.openMyProfile()}),l._UZ(3,"img",3),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"button",5),l.NdJ("click",function(){return i.addChat()}),l._UZ(6,"fa-icon",6),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,Bme,2,1,"div",7),l.YNc(8,jme,5,0,"div",8),l.qZA(),l._UZ(9,"app-contact-list",9),l._UZ(10,"app-create-group",10),l._UZ(11,"app-my-profile",11),l._UZ(12,"app-block-users",12)),2&t&&(l.Q6J("loader",0==(null==i.chatService?null:i.chatService.groups.length)&&1==i.isLoading),l.xp6(3),l.Q6J("src",null==i.commonService||null==i.commonService.loginUser?null:i.commonService.loginUser.profilePicture,l.LSH),l.xp6(3),l.Q6J("icon",i.faUserPlus)("styles",l.DdM(10,Ume)),l.xp6(1),l.Q6J("ngIf",(null==i.chatService?null:i.chatService.groups.length)>0),l.xp6(1),l.Q6J("ngIf",0==(null==i.chatService?null:i.chatService.groups.length)&&0==i.isLoading),l.xp6(1),l.Q6J("ngClass",1==i.commonService.contactListOpen?"open":""),l.xp6(1),l.Q6J("ngClass",1==i.commonService.createGroupOpen?"open":""),l.xp6(1),l.Q6J("ngClass",1==i.commonService.myProfileOpen?"open":""),l.xp6(1),l.Q6J("ngClass",1==i.commonService.blockUsersOpen?"open":""))},directives:[fu,j6,ai,uee,Dr,vme,lee,Dme,zt,ys,ci],pipes:[bi],styles:['.sidebar-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:space-between;background-color:#f0f2f5}.sidebar-header-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden}.sidebar-header-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.sidebar-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1px 6px;margin-left:10px}.sidebar-search[_ngcontent-%COMP%]{background-color:#fff;padding:7px 10px;position:relative;z-index:100;box-sizing:border-box;flex:none;height:49px;transition:box-shadow .18s ease-out,background-color .25s ease-out}.sidebar-search[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";border-bottom:1px solid #e9edef;background-color:#e9edef;left:0}.sidebar-search-input[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:8px;height:35px;display:flex;align-items:center;justify-content:flex-start;position:relative}.sidebar-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:0 20px 0 40px}.sidebar-search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:0;border:0;position:absolute;left:10px;top:4px}.list-wrap[_ngcontent-%COMP%]{width:100%;overflow:auto;overflow-x:hidden;flex:1;background-color:#fff;height:calc(100% - 60px)}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.list-wrap-single[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;height:72px;pointer-events:all;cursor:pointer}.list-wrap-single[_ngcontent-%COMP%]:hover, .list-wrap-single.active[_ngcontent-%COMP%]{background:#f4f7f9}.list-wrap-single-img[_ngcontent-%COMP%]{display:flex}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]{padding:0 15px 0 13px;margin-top:-1px;flex:none;align-items:center;display:flex}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:49px;width:49px;border-radius:50%;position:relative}.list-wrap-single-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;overflow:hidden;transition:opacity .15s ease-out;border-radius:50%;object-fit:cover}.list-wrap-single-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0;padding-right:15px;border-top:1px solid #e9edef}.list-wrap-single-info-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal;text-align:left}.list-wrap-single-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:17px;line-height:normal;font-weight:400;text-align:left}.list-wrap-single-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;flex-grow:1;position:relative}.list-wrap-single-info-top[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-left:6px;overflow:hidden;line-height:14px;text-overflow:ellipsis;white-space:nowrap;flex:none;max-width:100%;font-size:12px;color:#667781}.list-wrap-single-info-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:20px;font-size:13px;line-height:20px;margin-top:2px;color:#667781}.list-wrap-single-info-bottom[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;font-size:14px;font-weight:400;line-height:20px;text-overflow:ellipsis;white-space:nowrap;text-align:left;display:flex;align-items:center}.list-wrap-single-info-bottom[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:5px}.list-wrap-single-info-bottom[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;overflow-x:hidden;flex-grow:1;display:block;white-space:nowrap;text-overflow:ellipsis}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]{flex:none;max-width:100%;font-size:12px;line-height:20px;color:#667781;margin-left:6px}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   .count-div[_ngcontent-%COMP%]{display:inline-block;color:#8696a0;vertical-align:top}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   .count-div[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding:.4em;border-radius:1.1em;font-weight:600;text-align:center;background-color:#e82148;color:#fff;line-height:14px;font-size:.75rem;min-height:24px;min-width:24px;display:inline-block}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:4px;padding:0;color:#8696a0;height:20px;width:20px;background:transparent;border:none}@media only screen and (max-width: 480px),only screen and (max-width: 767px){.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:10000;max-width:340px;overflow:visible;padding:9px 0;right:25px!important;border:none;background-color:#fff;border-radius:3px;box-shadow:0 2px 5px #0b141a42,0 2px 10px #0b141a29}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.list-wrap-single-info-bottom-right[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{box-sizing:border-box;display:block;font-size:14.5px;line-height:14.5px;color:#3b4a54;position:relative;flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:7px;padding-bottom:7px}.list-wrap.no-data[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-flow:column}.list-wrap.no-data[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#667781;font-size:20px;margin-bottom:10px}.siderBarInner[_ngcontent-%COMP%]{position:absolute;left:-100%;top:0;bottom:0;width:100%;height:100%;transition:.3s all;background-color:#fff;z-index:100}.siderBarInner.open[_ngcontent-%COMP%]{left:0}form[_ngcontent-%COMP%]{position:fixed;left:0;top:0}']}),n})(),dee=(()=>{class n{transform(t,...i){return t?(t/1048576).toFixed(2):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=l.Yjl({name:"fileSizeInToMB",type:n,pure:!0}),n})();function qme(n,e){if(1&n&&(l.TgZ(0,"video",9),l._UZ(1,"source",10),l._UZ(2,"source",11),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("src",t.link,l.LSH),l.xp6(1),l.Q6J("src",t.link,l.LSH)}}function $me(n,e){if(1&n&&(l.ynx(0),l.YNc(1,qme,3,2,"video",8),l.BQk()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngIf","video"===t.type)}}function Wme(n,e){if(1&n&&l._UZ(0,"img",12),2&n){const t=l.oxw();l.Q6J("src",t.link,l.LSH)}}function Zme(n,e){if(1&n&&(l.TgZ(0,"audio",13),l._UZ(1,"source",14),l._uU(2," Your browser does not support the audio tag. "),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("src",t.link,l.LSH)}}const Kme=function(n){return{"text-center":n}};let Yme=(()=>{class n{constructor(t){this.bsModalService=t}ngOnInit(){}close(){let t=document.getElementById("videoTag");t&&t.pause(),this.bsModalService.hide()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(su))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-view-document"]],decls:8,vars:6,consts:[["type","button","aria-label","Close",1,"modal-close-btn",3,"click"],["aria-hidden","true"],["width","15","height","15","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.6107 0.389265C19.0917 -0.129755 18.2502 -0.129755 17.7312 0.389265L10 8.12046L2.2688 0.389265C1.74978 -0.129755 0.908284 -0.129755 0.389265 0.389265C-0.129755 0.908284 -0.129755 1.74978 0.389265 2.2688L8.12046 10L0.389265 17.7312C-0.129755 18.2502 -0.129755 19.0917 0.389265 19.6107C0.908284 20.1298 1.74978 20.1298 2.2688 19.6107L10 11.8795L17.7312 19.6107C18.2502 20.1298 19.0917 20.1298 19.6107 19.6107C20.1298 19.0917 20.1298 18.2502 19.6107 17.7312L11.8795 10L19.6107 2.2688C20.1298 1.74978 20.1298 0.908284 19.6107 0.389265Z","fill","black"],[1,"modal-body",3,"ngClass"],[4,"ngIf"],["loading","lazy","width","100%",3,"src",4,"ngIf"],["class","","controls","",4,"ngIf"],["width","100%","id","videoTag","controls","","autoplay","",4,"ngIf"],["width","100%","id","videoTag","controls","","autoplay",""],["type","video/mp4",3,"src"],["type","video/webm",3,"src"],["loading","lazy","width","100%",3,"src"],["controls","",1,""],["type","audio/mpeg",3,"src"]],template:function(t,i){1&t&&(l.TgZ(0,"button",0),l.NdJ("click",function(){return i.close()}),l.TgZ(1,"span",1),l.O4$(),l.TgZ(2,"svg",2),l._UZ(3,"path",3),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(4,"div",4),l.YNc(5,$me,2,1,"ng-container",5),l.YNc(6,Wme,1,1,"img",6),l.YNc(7,Zme,3,1,"audio",7),l.qZA()),2&t&&(l.xp6(4),l.Q6J("ngClass",l.VKq(4,Kme,"audio"===i.type)),l.xp6(1),l.Q6J("ngIf","video"===i.type),l.xp6(1),l.Q6J("ngIf","image"===i.type),l.xp6(1),l.Q6J("ngIf","audio"===i.type))},directives:[Dr,ai],styles:[""]}),n})(),hee=(()=>{class n{constructor(t){this.el=t,this.scrollPosition=new l.vpe}onScroll(t){try{const i=t.target.scrollTop;i>this.el.nativeElement.scrollHeight-this.el.nativeElement.offsetHeight-1&&this.scrollPosition.emit("bottom"),0===i&&this.scrollPosition.emit("top")}catch(i){}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","appScroll",""]],hostBindings:function(t,i){1&t&&l.NdJ("scroll",function(a){return i.onScroll(a)})},outputs:{scrollPosition:"scrollPosition"}}),n})();function $E(n,e,t,i){var u,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,i);else for(var h=n.length-1;h>=0;h--)(u=n[h])&&(a=(r<3?u(a):r>3?u(e,t,a):u(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a}function lh(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}let Jme=(()=>{let n=class{constructor(t,i){this.elem=t,this.renderer=i,this.overflow="hidden",this.rows=1}ngAfterViewInit(){this.resize()}ngDoCheck(){this.resize()}resize(){const t=this.elem.nativeElement,i=t.offsetHeight-t.clientHeight;this.setHeight("auto"),this.setHeight(`${t.scrollHeight+i}px`)}setHeight(t){this.renderer.setStyle(this.elem.nativeElement,"height",t)}};return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["textarea","autosize",""]],hostVars:3,hostBindings:function(t,i){1&t&&l.NdJ("input",function(){return i.resize()}),2&t&&(l.Ikx("rows",i.rows),l.Udp("overflow",i.overflow))},inputs:{rows:"rows"}}),$E([(0,l.pfw)("style.overflow"),lh("design:type",Object)],n.prototype,"overflow",void 0),$E([(0,l.IIB)(),(0,l.pfw)("rows"),lh("design:type",Object)],n.prototype,"rows",void 0),$E([(0,l.L6J)("input"),lh("design:type",Function),lh("design:paramtypes",[]),lh("design:returntype",void 0)],n.prototype,"resize",null),n=$E([lh("design:paramtypes",[l.SBq,l.Qsj])],n),n})(),Xme=(()=>{let n=class{};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ei]]}),n})(),ege=(()=>{class n{constructor(t){this.chatService=t}transform(t,...i){if(t){let r=this.chatService.selectedGroup.users.find(a=>a.userId===t);if(r)return r.name}return null}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(H1,16))},n.\u0275pipe=l.Yjl({name:"getName",type:n,pure:!0}),n})(),tge=(()=>{class n{transform(t,...i){if(t){let a=decodeURIComponent(t).split("/"),u=a[a.length-1];return u.includes("?")&&(a=u.split("?"),u=a[0]),u}return null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=l.Yjl({name:"getFileName",type:n,pure:!0}),n})();const nge=["scrollMe"],ige=["msgInput"];function rge(n,e){1&n&&(l.TgZ(0,"div",44),l.TgZ(1,"span",45),l._uU(2,"online"),l.qZA(),l.qZA())}function sge(n,e){1&n&&(l.ynx(0),l._uU(1,"is typing... "),l.BQk())}function oge(n,e){if(1&n&&(l.ynx(0),l.TgZ(1,"span",45),l._uU(2),l.YNc(3,sge,2,0,"ng-container",0),l.qZA(),l.BQk()),2&n){const t=l.oxw(),i=t.index,r=t.$implicit,a=l.oxw(3);l.xp6(2),l.AsE(" ",0!==i?", ":"","",null==r?null:r.name," "),l.xp6(1),l.Q6J("ngIf",i===a.typingUsers.length-1)}}function age(n,e){if(1&n&&(l.ynx(0),l.YNc(1,oge,4,3,"ng-container",0),l.BQk()),2&n){const t=e.$implicit,i=l.oxw(3);l.xp6(1),l.Q6J("ngIf",t.userId!==i.chatService.userDetails.id)}}function cge(n,e){if(1&n&&(l.TgZ(0,"div",44),l.YNc(1,age,2,1,"ng-container",24),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("ngForOf",t.typingUsers)}}function lge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17),l.TgZ(1,"a",46),l.NdJ("click",function(){l.CHM(t);const r=l.oxw(2);return r.viewInfo(null==r.chatService?null:r.chatService.selectedGroup)}),l._uU(2),l.qZA(),l.qZA()}if(2&n){const t=l.oxw(2);l.xp6(2),l.Oqu(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup?"Group Info":"Contact Info")}}function uge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17),l.TgZ(1,"a",18),l.NdJ("click",function(){l.CHM(t);const r=l.oxw(2);return r.deleteChat(null==r.chatService?null:r.chatService.groups)}),l._uU(2,"Delete Chat"),l.qZA(),l.qZA()}}function dge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"li",17),l.TgZ(1,"a",18),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).deleteGroup()}),l._uU(2,"Delete Group"),l.qZA(),l.qZA()}}function hge(n,e){if(1&n&&(l.TgZ(0,"div",56),l.TgZ(1,"div",57),l.TgZ(2,"span"),l._uU(3),l.ALo(4,"date"),l.qZA(),l.qZA(),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(3),l.Oqu(l.xi3(4,1,t.sentAt.toDate(),"mediumDate"))}}function fge(n,e){if(1&n&&(l.TgZ(0,"span",58),l._uU(1),l.ALo(2,"getName"),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(l.lcZ(2,1,null==t?null:t.sentBy))}}function pge(n,e){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const t=l.oxw(2).$implicit;l.xp6(1),l.Oqu(null==t?null:t.message)}}function mge(n,e){if(1&n&&(l.ynx(0),l.TgZ(1,"a",59),l._uU(2),l.qZA(),l.BQk()),2&n){const t=l.oxw(2).$implicit;l.xp6(1),l.Q6J("href",t.message,l.LSH),l.xp6(1),l.Oqu(null==t?null:t.message)}}function gge(n,e){if(1&n&&(l.ynx(0),l.YNc(1,pge,2,1,"ng-container",0),l.YNc(2,mge,3,2,"ng-container",0),l.BQk()),2&n){const t=l.oxw().$implicit,i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!i.isUrlValid(t.message)),l.xp6(1),l.Q6J("ngIf",i.isUrlValid(t.message))}}function Cge(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",60),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).openLink(r.image,"image")}),l._UZ(2,"img",61),l.qZA(),l.BQk()}if(2&n){const t=l.oxw().$implicit;l.xp6(2),l.Q6J("src",null==t?null:t.image,l.LSH)}}function _ge(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"a",62),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).openLink(r.document,"")}),l.O4$(),l.TgZ(2,"svg",63),l.TgZ(3,"g",64),l._UZ(4,"path",65),l._UZ(5,"path",66),l._UZ(6,"path",67),l._UZ(7,"path",68),l._UZ(8,"path",69),l._UZ(9,"path",70),l._UZ(10,"path",71),l._UZ(11,"path",72),l.qZA(),l._UZ(12,"path",73),l.TgZ(13,"defs"),l.TgZ(14,"clipPath",74),l._UZ(15,"rect",75),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(16,"span",76),l.TgZ(17,"span"),l._uU(18),l.ALo(19,"getFileName"),l.qZA(),l.qZA(),l.TgZ(20,"a",77),l.O4$(),l.TgZ(21,"svg",78),l._UZ(22,"path",79),l._UZ(23,"path",80),l.qZA(),l.qZA(),l.qZA(),l.BQk()}if(2&n){const t=l.oxw().$implicit;l.xp6(18),l.Oqu(l.lcZ(19,1,null==t?null:t.document))}}function Fge(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",60),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).openLink(r.video,"video")}),l.TgZ(2,"span",81),l.TgZ(3,"a",77),l.O4$(),l.TgZ(4,"svg",82),l._UZ(5,"path",83),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(6,"video"),l._UZ(7,"source",84),l._UZ(8,"source",85),l.qZA(),l.qZA(),l.BQk()}if(2&n){const t=l.oxw().$implicit;l.xp6(7),l.Q6J("src",t.video,l.LSH),l.xp6(1),l.Q6J("src",t.video,l.LSH)}}function yge(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"span",62),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).openLink(r.audio,"audio")}),l.O4$(),l.TgZ(2,"svg",86),l._UZ(3,"path",87),l.qZA(),l.kcU(),l.TgZ(4,"span",88),l.TgZ(5,"span"),l._uU(6),l.ALo(7,"getFileName"),l.qZA(),l.qZA(),l.qZA(),l.BQk()}if(2&n){const t=l.oxw().$implicit;l.xp6(6),l.Oqu(l.lcZ(7,1,null==t?null:t.audio))}}function vge(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,null==t?null:t.sentAt.toDate(),"shortTime"))}}function wge(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.ALo(2,"date"),l.qZA()),2&n){const t=l.oxw().$implicit;l.xp6(1),l.Oqu(l.xi3(2,1,null==t?null:t.sentAt.toDate(),"shortTime"))}}function bge(n,e){if(1&n&&(l.ynx(0),l.YNc(1,hge,5,4,"div",47),l.TgZ(2,"div",48),l.TgZ(3,"div",49),l.TgZ(4,"div"),l.TgZ(5,"span",50),l.YNc(6,fge,3,3,"span",51),l.ynx(7,52),l.YNc(8,gge,3,2,"ng-container",53),l.YNc(9,Cge,3,1,"ng-container",53),l.YNc(10,_ge,24,3,"ng-container",53),l.YNc(11,Fge,9,2,"ng-container",53),l.YNc(12,yge,8,3,"ng-container",53),l.BQk(),l.qZA(),l._UZ(13,"span",54),l.qZA(),l.TgZ(14,"div",55),l.TgZ(15,"div"),l.YNc(16,vge,3,4,"span",0),l.YNc(17,wge,3,4,"span",0),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.BQk()),2&n){const t=e.$implicit,i=e.index,r=l.oxw(2);l.xp6(1),l.Q6J("ngIf",r.checkDate(i)),l.xp6(1),l.Q6J("ngClass",(null==t?null:t.sentBy)===r.chatService.userDetails.id?"message-out":"message-in"),l.xp6(3),l.Q6J("ngClass","image"===(null==t?null:t.type)||"video"===(null==t?null:t.type)?"imgMsg":"document"===(null==t?null:t.type)||"audio"===(null==t?null:t.type)?"fileMsg":""),l.xp6(1),l.Q6J("ngIf",(null==t?null:t.sentBy)!==r.chatService.userDetails.id&&(null==r.chatService||null==r.chatService.selectedGroup?null:r.chatService.selectedGroup.isGroup)),l.xp6(1),l.Q6J("ngSwitch",null==t?null:t.type),l.xp6(1),l.Q6J("ngSwitchCase","text"),l.xp6(1),l.Q6J("ngSwitchCase","image"),l.xp6(1),l.Q6J("ngSwitchCase","document"),l.xp6(1),l.Q6J("ngSwitchCase","video"),l.xp6(1),l.Q6J("ngSwitchCase","audio"),l.xp6(4),l.Q6J("ngIf",r.datepipe.transform(r.chatService.currentDate,"yyyy-MM-dd")===r.datepipe.transform(null==t?null:t.timeMilliSeconds.toDate(),"yyyy-MM-dd")),l.xp6(1),l.Q6J("ngIf",r.datepipe.transform(r.chatService.currentDate,"yyyy-MM-dd")!==r.datepipe.transform(null==t?null:t.timeMilliSeconds.toDate(),"yyyy-MM-dd"))}}const Ege=function(){return{color:"#54656f",cursor:"pointer"}};function Mge(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"div",1),l.TgZ(2,"header"),l.TgZ(3,"div",2),l.NdJ("click",function(){return l.CHM(t),l.oxw().close()}),l._UZ(4,"fa-icon",3),l.TgZ(5,"div",4),l.TgZ(6,"img",5),l.NdJ("error",function(r){return l.CHM(t),l.oxw().onGroupImgError(r)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",6),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return r.viewInfo(null==r.chatService?null:r.chatService.selectedGroup)}),l.TgZ(8,"div",7),l.TgZ(9,"div",8),l.TgZ(10,"span"),l._uU(11),l.qZA(),l.qZA(),l.qZA(),l.YNc(12,rge,3,0,"div",9),l.YNc(13,cge,2,1,"div",9),l.qZA(),l.TgZ(14,"div",10),l.TgZ(15,"div",11),l.TgZ(16,"button",12),l.O4$(),l.TgZ(17,"svg",13),l._UZ(18,"path",14),l.qZA(),l.qZA(),l.kcU(),l.TgZ(19,"div",15),l.TgZ(20,"ul"),l.YNc(21,lge,3,1,"li",16),l.YNc(22,uge,3,0,"li",16),l.YNc(23,dge,3,0,"li",16),l.TgZ(24,"li",17),l.TgZ(25,"a",18),l.NdJ("click",function(){return l.CHM(t),l.oxw().clearChat()}),l._uU(26,"Clear Chat"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"div",19),l.TgZ(28,"div",20,21),l.NdJ("scrollPosition",function(r){return l.CHM(t),l.oxw().scrollHandler(r)}),l._UZ(30,"div",22),l.TgZ(31,"div",23),l.YNc(32,bge,18,12,"ng-container",24),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"div",25),l.TgZ(34,"form",26),l.NdJ("ngSubmit",function(){return l.CHM(t),l.oxw().onMsgSend()}),l.TgZ(35,"div",27),l.TgZ(36,"div",28),l.TgZ(37,"div",29),l.TgZ(38,"div",30),l.TgZ(39,"div",31),l.TgZ(40,"input",32,33),l.NdJ("change",function(r){return l.CHM(t),l.oxw().onSelectFile(r)}),l.qZA(),l.TgZ(42,"label",34),l.O4$(),l.TgZ(43,"svg",13),l._UZ(44,"path",35),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(45,"div",36),l.TgZ(46,"div",37),l.TgZ(47,"textarea",38,39),l.NdJ("blur",function(){return l.CHM(t),l.oxw().onBlur()})("focus",function(){return l.CHM(t),l.oxw().onFocus()})("keydown.enter",function(r){return l.CHM(t),l.oxw().onKeydown(r)})("keyup",function(r){return l.CHM(t),l.oxw().onKey(r)}),l.qZA(),l.qZA(),l.TgZ(49,"div",40),l.TgZ(50,"button",41),l.O4$(),l.TgZ(51,"svg",42),l._UZ(52,"path",43),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.BQk()}if(2&n){const t=l.oxw();l.xp6(1),l.Q6J("loader",1==t.isLoading),l.xp6(3),l.Q6J("icon",t.faArrowLeft)("styles",l.DdM(14,Ege)),l.xp6(2),l.Q6J("src",null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup?null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.groupImage?null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.groupImage:t.groupPlaceholder:(null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].userId)===t.chatService.userDetails.id?null!=t.chatService&&null!=t.chatService.selectedGroup&&null!=t.chatService.selectedGroup.users[1]&&t.chatService.selectedGroup.users[1].profilePicture?null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[1]?null:t.chatService.selectedGroup.users[1].profilePicture:t.userPlaceholder:null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].profilePicture,l.LSH),l.xp6(5),l.Oqu(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup?null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.name:(null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].userId)===t.chatService.userDetails.id?null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[1]?null:t.chatService.selectedGroup.users[1].name:null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].name),l.xp6(1),l.Q6J("ngIf",t.chatService.isOpponentOnline&&0===(null==t.typingUsers?null:t.typingUsers.length)&&!(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup)),l.xp6(1),l.Q6J("ngIf",t.typingUsers.length>0),l.xp6(8),l.Q6J("ngIf",!(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isDeactivateUser)),l.xp6(1),l.Q6J("ngIf",!(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup)),l.xp6(1),l.Q6J("ngIf",null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup),l.xp6(4),l.Q6J("loader",1==t.isLoading),l.xp6(5),l.Q6J("ngForOf",null==t.chatService?null:t.chatService.chats),l.xp6(2),l.Q6J("formGroup",t.chatForm),l.xp6(16),l.Q6J("disabled",!t.chatForm.valid)}}function Sge(n,e){1&n&&(l.ynx(0),l.TgZ(1,"div",89),l._UZ(2,"img",90),l.qZA(),l.BQk())}let Dge=(()=>{class n{constructor(t,i,r,a,u,h,m,F,b,M,k){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.fileSizeInToMB=m,this.bsModalService=F,this.datePipe=b,this.http=M,this.document=k,this.faUserPlus=P9,this.faArrowLeft=Ds,this.isLoading=1,this.userPlaceholder="./assets/images/placeholder-profile-img.png",this.groupPlaceholder="./assets/images/group-placeholder.jpg",this.typingUsers=[],this.showEmojiPicker=!1,this.sets=["native","google","twitter","facebook","emojione","apple","messenger"],this.removeChatDetails={},this.groupImageSrc=null,this.chatService.previousChatData$.subscribe(A=>{if((null==A?void 0:A.length)>0){let P=[];A.forEach(j=>{let K=this.chatService.chats.filter(he=>he.msgId===j.msgId);K&&0==K.length&&P.push(j)}),this.chatService.chats=[...P,...this.chatService.chats]}}),this.unsubscribeChat=this.chatService.chatData$.subscribe(A=>{this.isLoading=1,(null==A?void 0:A.length)>0?(this.chatService.chats=A,setTimeout(()=>{this.isLoading=0},500),this.removeChatDetails.isRemoveUserChat&&this.removeChatFromUser(),setTimeout(()=>{this.scrollToBottom()},1e3)):(this.chatService.chats=[],this.isLoading=0)}),this.manageChatContainer()}ngOnInit(){this.setStatusOffline(),this.removeFromTyping(),this.setMsgForm()}manageChatContainer(){this.commonService.onOpenCloseChat.subscribe(t=>{var i;this.groupDetailsForm.reset(),!0===t&&this.chatService.chatContent&&console.log("groups",this.chatService.groups),!1===t&&(this.chatService.chatContent&&this.chatService.updateUnReadCount(null===(i=this.chatService.selectedGroup)||void 0===i?void 0:i.groupId,!0).then(r=>{}).catch(r=>{console.log("error",r)}),this.setStatusOffline(),this.removeFromTyping(),this.clearAllChatProperty())})}onGroupImgError(t){var i,r,a;(null===(i=this.chatService)||void 0===i?void 0:i.selectedGroup)&&(t.target.src=(null===(a=null===(r=this.chatService)||void 0===r?void 0:r.selectedGroup)||void 0===a?void 0:a.isGroup)?this.groupPlaceholder:this.userPlaceholder)}onTyping(t){var i,r;this.chatService.userDetails.id&&(null===(i=this.chatService.groups)||void 0===i?void 0:i.length)>0?this.chatService.updateUserTypingStatus(null===(r=this.chatService.selectedGroup)||void 0===r?void 0:r.groupId,this.chatService.userDetails.id).then(u=>{this.getTypingStatus()}):(this.clearAllChatProperty(),this.toastrService.error("Something went wrong, Please try again"))}getTypingStatus(){var t;this.chatService.getTypingStatus(null===(t=this.chatService.selectedGroup)||void 0===t?void 0:t.groupId).subscribe(i=>{this.typingUsers=[],i.typing&&i.typing.length>0&&i.typing.forEach(r=>{let a=[];this.chatService&&this.chatService.selectedGroup&&this.chatService.selectedGroup.users&&(a=this.chatService.selectedGroup.users.filter(u=>u.userId===r&&u.userId!==this.chatService.userDetails.id)),a&&a.length>0&&this.typingUsers.push(a[0])})})}setStatusOffline(){var t;"{}"!==JSON.parse(localStorage.getItem("groups")||"{}")&&(null===(t=Object.keys(JSON.parse(localStorage.getItem("groups")||"{}")))||void 0===t?void 0:t.length)>0&&JSON.parse(localStorage.getItem("groups")||"{}")}removeFromTyping(){var t,i;"{}"!==JSON.parse(localStorage.getItem("lastselectedgroup")||"{}")&&(null===(t=Object.keys(JSON.parse(localStorage.getItem("lastselectedgroup")||"{}")))||void 0===t?void 0:t.length)>0&&this.chatService.removeUserFromTyping(null===(i=JSON.parse(localStorage.getItem("lastselectedgroup")||"{}"))||void 0===i?void 0:i.groupId,this.chatService.userDetails.id).then(r=>{localStorage.removeItem("lastselectedgroup")}).catch(r=>{console.log("error",r),localStorage.removeItem("lastselectedgroup")})}viewInfo(t){this.commonService.getGroupDetail.emit(!0),this.commonService.openSideBarInfo()}scrollHandler(t){var i,r;"top"===t&&(null===(i=this.chatService.selectedGroup)||void 0===i?void 0:i.groupId)&&this.chatService.chatContent&&this.chatService.getPreviousChat(null===(r=this.chatService.selectedGroup)||void 0===r?void 0:r.groupId)}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(t){}}setMsgForm(){this.chatForm=this.formBuilder.group({message:[null,S2.required],image:[null]})}sendMsg(t){var i=this;return(0,X.Z)(function*(){var r;if(i.chatForm.value.message){let a=i.chatForm.value.message.trim();i.chatForm.reset(),i.chatService.sendMsg(null===(r=i.chatService.selectedGroup)||void 0===r?void 0:r.groupId,a,"text",t,null,i.commonService.queryParams.secretKey).then(u=>{i.msgInput.nativeElement.focus()})}})()}onMsgSend(){this.chatForm.valid&&(this.chatForm.value.message.trim()&&this.chatService&&this.chatService.selectedGroup&&!this.chatService.selectedGroup.isDeactivateUser?this.chatService.userDetails.id?this.chatService.groups.length>0?this.chatService.getGroupById(this.chatService.selectedGroup.groupId).then(t=>{!1===t.isGroup&&t.members.forEach(r=>{r!==this.chatService.userDetails.id&&(t.blockUsers.includes(this.chatService.userDetails.id)||this.chatService.updateGroup(null==t?void 0:t.groupId,"viewBy",r,!0).then(a=>{}).catch(a=>{console.log("error",a)}))});let i=[];!t.isGroup&&t.blockUsers&&t.blockUsers.length>0?null==t||t.members.forEach(r=>{let a=t.blockUsers.filter(u=>u===r);a&&a.length>0&&i.push(r)}):i=t.isGroup?t.viewBy:t.members,this.removeFromTyping(),this.sendMsg(i)}).catch(t=>{console.log(t)}):(this.toastrService.error("Something went wrong, Please try again"),this.clearAllChatProperty()):this.toastrService.error("Something went wrong, Please try again"):this.chatForm.reset())}onKeydown(t){this.onMsgSend()}onSearchChange(t){}onKeydownMain(t){}onKey(t){var i;let r;13!==(null==t?void 0:t.keyCode)?(clearTimeout(r),r=setTimeout(()=>{var a;this.chatService.removeUserFromTyping(null===(a=this.chatService.selectedGroup)||void 0===a?void 0:a.groupId,this.chatService.userDetails.id).then(h=>{})},1500)):(clearTimeout(r),this.chatService.removeUserFromTyping(null===(i=this.chatService.selectedGroup)||void 0===i?void 0:i.groupId,this.chatService.userDetails.id).then(u=>{}))}ngOnDestroy(){var t;console.log("ngOnDestroy"),this.chatService.userDetails.id&&(this.setStatusOffline(),this.removeFromTyping(),this.chatService.chatContent&&this.chatService.updateUnReadCount(null===(t=this.chatService.selectedGroup)||void 0===t?void 0:t.groupId,!0).then(i=>{}).catch(i=>{console.log("error",i)})),this.clearAllChatProperty()}openLink(t,i){if(["image","video"].indexOf(i)>-1)this.modalRef=this.bsModalService.show(Yme,{animated:!0,class:"modal-dialog-centered bounceIn modal-sm",initialState:{link:t,type:i}});else{this.isLoading=1;let a=decodeURIComponent(t).split("/"),u=a[a.length-1];u.includes("?")&&(a=u.split("?"),u=a[0]),this.getBlob(t).subscribe(h=>{const m=document.createElement("a"),F=URL.createObjectURL(h);m.href=F,m.download=u,m.click(),URL.revokeObjectURL(F),this.isLoading=0},h=>{this.isLoading=0})}}getBlob(t){return this.http.get(t,{responseType:"blob"})}clearAllChatProperty(){this.chatService.chatUserId=null,this.chatService.isAddMember=!1,this.chatService.removeUserId="",this.commonService.friendList=[],this.chatService.selectedGroupMember=[],this.chatService.chats=[],this.chatService.selectedGroup=null,this.chatService.chatContent=!1,this.chatService.friendListContent=!1,this.chatService.groupImageNameContent=!1}generateThumbnail(t){const i=this.document.createElement("video"),r=this.document.createElement("canvas");let a=r.getContext("2d");return new Promise((u,h)=>{r.addEventListener("error",h),i.addEventListener("error",h),i.addEventListener("canplay",m=>{r.width=i.videoWidth,r.height=i.videoHeight,a.drawImage(i,0,0,i.videoWidth,i.videoHeight),u(r.toDataURL())}),t.type&&i.setAttribute("type",t.type),i.preload="auto",i.src=window.URL.createObjectURL(t),i.load()})}onSelectFile(t){var r,a,u,h,m,F,b,M,i=this;if(this.chatService.userDetails.id)if((null===(r=this.chatService.groups)||void 0===r?void 0:r.length)>0)if(""!==t.target.value)if(1===(null===(u=null===(a=null==t?void 0:t.target)||void 0===a?void 0:a.files)||void 0===u?void 0:u.length))if(this.fileSizeInToMB.transform(null===(h=null==t?void 0:t.target)||void 0===h?void 0:h.files[0].size)<=50){this.isLoading=1;let A=(null===(m=null==t?void 0:t.target)||void 0===m?void 0:m.files[0].type.includes("image"))?"image":(null===(F=null==t?void 0:t.target)||void 0===F?void 0:F.files[0].type.includes("video"))?"video":(null===(b=null==t?void 0:t.target)||void 0===b?void 0:b.files[0].type.includes("audio"))?"audio":"document";this.chatService.pushFileToStorage(null===(M=null==t?void 0:t.target)||void 0===M?void 0:M.files[0]).then(function(){var P=(0,X.Z)(function*(j){var K,he,be;"video"===A?i.generateThumbnail(null===(K=null==t?void 0:t.target)||void 0===K?void 0:K.files[0]).then(function(){var ye=(0,X.Z)(function*(Ae){var ze,ut;i.chatService.sendMsg(null===(ze=i.chatService.selectedGroup)||void 0===ze?void 0:ze.groupId,j,A,null===(ut=i.chatService.selectedGroup)||void 0===ut?void 0:ut.viewBy,Ae,i.commonService.queryParams.secret).then(Et=>{i.isLoading=0}).catch(Et=>{console.log("error",Et),i.isLoading=0,i.toastrService.error("Something went wrong, Please send message again")})});return function(Ae){return ye.apply(this,arguments)}}()).catch(ye=>{console.log("error",ye)}):i.chatService.sendMsg(null===(he=i.chatService.selectedGroup)||void 0===he?void 0:he.groupId,j,A,null===(be=i.chatService.selectedGroup)||void 0===be?void 0:be.viewBy,null,i.commonService.queryParams.secret).then(ye=>{i.isLoading=0}).catch(ye=>{console.log("error",ye),i.isLoading=0,i.toastrService.error("Something went wrong, Please send message again")})});return function(j){return P.apply(this,arguments)}}()).catch(P=>{console.log("error",P),this.isLoading=0,this.toastrService.error("Something went wrong, Please send file again")})}else this.toastrService.warning("You can not send file greater than 50 mb");else this.toastrService.warning("Please select only one file");else t.target.value=null,this.chatForm.controls.image.setValue(""),this.toastrService.error("Please select file");else this.clearAllChatProperty();else this.toastrService.error("Something went wrong, Please try again")}toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker}addEmoji(t){this.chatForm.value.message?(this.chatForm.value.message=this.chatForm.value.message+t.emoji.native,this.chatForm.controls.message.setValue(this.chatForm.value.message)):(this.chatForm.value.message=t.emoji.native,this.chatForm.controls.message.setValue(this.chatForm.value.message))}onFocus(){this.showEmojiPicker&&(this.showEmojiPicker=!1)}onBlur(){this.showEmojiPicker&&(this.showEmojiPicker=!1)}onClickedOutside(t){this.showEmojiPicker&&(this.showEmojiPicker=!1)}removeChatFromUser(){var t=this;return(0,X.Z)(function*(){if(t.chatService.chats.length>0){t.removeChatDetails.isRemoveUserChat=!1;for(let i=0;i<t.chatService.chats.length;i++)yield t.chatService.removeUserFromMessage(t.removeChatDetails.groupId,t.chatService.userDetails.id,t.chatService.chats[i].msgId)}})()}getOnlineOpponent(t){var i=this;return(0,X.Z)(function*(){if(!0===i.chatService.chatContent&&!1===i.chatService.selectedGroup.isGroup){let r=yield t.filter(a=>!1===a.isGroup);if((null==r?void 0:r.length)>0){const a=yield r.find(u=>{let h=u.viewBy.find(F=>F===i.chatService.userDetails.id),m=u.viewBy.find(F=>F===i.chatService.chatUserId);return!(!h||!m)});a?(i.chatService.selectedGroup=a,i.chatService.isOpponentOnline=!1,null==a||a.online.forEach(u=>{i.chatService.chatUserId===u&&(i.chatService.isOpponentOnline=!0)})):i.chatService.isOpponentOnline=!1}}})()}clearChat(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"clear chat",type:"clearChat"}}})}deleteGroup(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"delete group",type:"deleteGroup"}}})}deleteChat(t){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"delete chat",type:"deleteChat"}}})}blockUser(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"group",type:"blockUser"}}})}checkDate(t){var i,r;return 0==t||t>0&&this.datePipe.transform(null===(i=this.chatService)||void 0===i?void 0:i.chats[t-1].sentAt.toDate(),"dd/MM/yyyy")!==this.datePipe.transform(null===(r=this.chatService)||void 0===r?void 0:r.chats[t].sentAt.toDate(),"dd/MM/yyyy")}isUrlValid(t){return null!=t.match(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi)}close(){this.commonService.closeChatRoom()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3),l.Y36(dee),l.Y36(su),l.Y36(bi),l.Y36(OO),l.Y36(Ce))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-content"]],viewQuery:function(t,i){if(1&t&&(l.Gf(nge,5),l.Gf(ige,5)),2&t){let r;l.iGM(r=l.CRH())&&(i.myScrollContainer=r.first),l.iGM(r=l.CRH())&&(i.msgInput=r.first)}},features:[l._Bn([bi,dee])],decls:2,vars:2,consts:[[4,"ngIf"],[1,"laoder-section",3,"loader"],[1,"header-user-img",3,"click"],[3,"icon","styles"],[1,"user-img"],["width","40","height","40","alt","",3,"src","error"],[1,"header-user-info","cursor-pointer",3,"click"],[1,"header-user-info-top"],[1,"user"],["class","header-user-info-bottom",4,"ngIf"],[1,"header-user-action"],[1,"header-user-action-box","dropdown"],["type","button","data-bs-toggle","dropdown"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#54656f","d","M12 7a2 2 0 1 0-.001-4.001A2 2 0 0 0 12 7zm0 2a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 9zm0 6a2 2 0 1 0-.001 3.999A2 2 0 0 0 12 15z"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item",4,"ngIf"],[1,"dropdown-item"],[1,"cursor-pointer",3,"click"],[1,"message-wrap",3,"loader"],["appScroll","","scrollable","",1,"message-wrap-inner",3,"scrollPosition"],["scrollMe",""],[1,"message-wrap-inner-blank"],[1,"message-wrap-inner-list"],[4,"ngFor","ngForOf"],[1,"message-footer"],[1,"message-footer-area",3,"formGroup","ngSubmit"],[1,"message-footer-area-box"],[1,"message-footer-area-box-inner"],[1,"message-footer-area-box-inner-left"],[1,"message-icon"],[1,"message-icon-inner"],["type","file","id","upload","accept",".xlsx,.xls,image/*,.doc, .docx,.ppt, .pptx,.txt,.pdf,video/mp4,video/webm, audio/mp3, audio/wav, audio/aac, audio/m4a",2,"display","none",3,"change"],["imageFile",""],["for","upload",1,"cursor-pointer"],["fill","#54656f","d","M1.816 15.556v.002c0 1.502.584 2.912 1.646 3.972s2.472 1.647 3.974 1.647a5.58 5.58 0 0 0 3.972-1.645l9.547-9.548c.769-.768 1.147-1.767 1.058-2.817-.079-.968-.548-1.927-1.319-2.698-1.594-1.592-4.068-1.711-5.517-.262l-7.916 7.915c-.881.881-.792 2.25.214 3.261.959.958 2.423 1.053 3.263.215l5.511-5.512c.28-.28.267-.722.053-.936l-.244-.244c-.191-.191-.567-.349-.957.04l-5.506 5.506c-.18.18-.635.127-.976-.214-.098-.097-.576-.613-.213-.973l7.915-7.917c.818-.817 2.267-.699 3.23.262.5.501.802 1.1.849 1.685.051.573-.156 1.111-.589 1.543l-9.547 9.549a3.97 3.97 0 0 1-2.829 1.171 3.975 3.975 0 0 1-2.83-1.173 3.973 3.973 0 0 1-1.172-2.828c0-1.071.415-2.076 1.172-2.83l7.209-7.211c.157-.157.264-.579.028-.814L11.5 4.36a.572.572 0 0 0-.834.018l-7.205 7.207a5.577 5.577 0 0 0-1.645 3.971z"],[1,"message-footer-area-box-inner-right"],[1,"message-text"],["formControlName","message","autosize","","placeholder","Type a message",3,"blur","focus","keydown.enter","keyup"],["msgInput",""],[1,"message-send"],["type","submit",3,"disabled"],["width","20","height","21","viewBox","0 0 20 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.3314 10.1544C19.3407 9.4377 18.9525 8.77898 18.322 8.43324L3.63011 0.361095C2.97206 -0.0108174 2.19633 0.0348746 1.57625 0.458296C0.944801 0.888848 0.621596 1.91379 0.798116 2.65406L2.16967 8.40033C2.31047 8.98956 2.83783 9.40445 3.44453 9.40186L11.6205 9.3765C12.0392 9.3681 12.3788 9.70765 12.3704 10.1263C12.3691 10.5379 12.0345 10.8724 11.6159 10.8808L3.43208 10.8998C2.82538 10.901 2.29544 11.3178 2.15098 11.9079L0.730929 17.677C0.558512 18.3588 0.755086 19.0394 1.23612 19.5204C1.29271 19.577 1.35637 19.6406 1.42008 19.6901C2.04303 20.1707 2.85887 20.232 3.55542 19.8609L18.2971 11.8677C18.9297 11.5323 19.322 10.8711 19.3314 10.1544Z","fill","#929292"],[1,"header-user-info-bottom"],[1,"time"],[3,"click"],["class","message-list message-info",4,"ngIf"],[1,"message-list",3,"ngClass"],[1,"msg-box"],[3,"ngClass"],["class","senderName",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"msg-box-blank"],[1,"msg-box-time"],[1,"message-list","message-info"],[1,"message-info-box"],[1,"senderName"],["target","_blank",3,"href"],[1,"imgMsgBox","cursor-pointer",3,"click"],[3,"src"],[1,"fileMsgSpan","cursor-pointer",3,"click"],["width","20","height","25","viewBox","0 0 20 25","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_736:22)"],["d","M1.78004 20.2801C2.60294 20.2801 3.27004 19.613 3.27004 18.7901C3.27004 17.9671 2.60294 17.3 1.78004 17.3C0.957135 17.3 0.290039 17.9671 0.290039 18.7901C0.290039 19.613 0.957135 20.2801 1.78004 20.2801Z","fill","#0B63E7"],["d","M1.78 20.57C0.8 20.57 0 19.77 0 18.79C0 17.81 0.8 17.01 1.78 17.01C2.76 17.01 3.56 17.81 3.56 18.79C3.56 19.77 2.76 20.57 1.78 20.57ZM1.78 17.58C1.11 17.58 0.57 18.12 0.57 18.79C0.57 19.46 1.11 20 1.78 20C2.45 20 2.99 19.46 2.99 18.79C2.99 18.12 2.45 17.58 1.78 17.58Z","fill","#303030"],["d","M12.7501 0.290039H5.48014C3.50014 0.290039 1.89014 1.90004 1.89014 3.88004V21.12C1.89014 23.1 3.50014 24.71 5.48014 24.71H15.8601C17.8401 24.71 19.4501 23.1 19.4501 21.12V6.98004L12.7501 0.290039Z","fill","white"],["d","M15.8501 25H5.4801C3.3401 25 1.6001 23.26 1.6001 21.12V3.88C1.6001 1.74 3.3401 0 5.4801 0H12.7501C12.8301 0 12.9001 0.03 12.9501 0.08L19.6501 6.78C19.7001 6.83 19.7301 6.91 19.7301 6.98V21.12C19.7301 23.26 17.9901 25 15.8501 25ZM5.4801 0.57C3.6601 0.57 2.1701 2.05 2.1701 3.88V21.12C2.1701 22.94 3.6501 24.43 5.4801 24.43H15.8601C17.6801 24.43 19.1701 22.95 19.1701 21.12V7.1L12.6401 0.57H5.4801Z","fill","#303030"],["d","M12.75 0.290039L19.45 6.99004H14.18C13.39 6.99004 12.75 6.35004 12.75 5.56004V0.290039Z","fill","#DCDDDE"],["d","M19.45 7.27001H14.18C13.24 7.27001 12.47 6.50001 12.47 5.56001V0.29001C12.47 0.17001 12.54 0.0700098 12.65 0.0300098C12.76 -0.00999024 12.88 0.0100098 12.96 0.0900098L19.64 6.77001C19.7 6.82001 19.74 6.90001 19.74 6.98001C19.73 7.14001 19.61 7.27001 19.45 7.27001ZM13.04 0.97001V5.55001C13.04 6.18001 13.55 6.69001 14.18 6.69001H18.76L13.04 0.97001Z","fill","#303030"],["d","M1.61 10C0.72 10 0 10.72 0 11.61V18.34H0.03C0.17 17.6 0.82 17.04 1.61 17.04H17.79V10H1.61Z","fill","#0B63E7"],["d","M0.34002 18.79H0.31002C0.15002 18.79 0.0200195 18.66 0.0200195 18.5V11.77C0.0200195 10.73 0.87002 9.88 1.91002 9.88H18.1C18.26 9.88 18.39 10.01 18.39 10.17V17.21C18.39 17.37 18.26 17.5 18.1 17.5H1.92002C1.29002 17.5 0.74002 17.95 0.62002 18.57C0.59002 18.7 0.47002 18.79 0.34002 18.79ZM1.92002 10.46C1.19002 10.46 0.60002 11.05 0.60002 11.78V17.46C0.94002 17.12 1.41002 16.92 1.92002 16.92H17.82V10.45H1.92002V10.46Z","fill","#303030"],["d","M6.93832 14.0585C6.93832 14.4582 6.85949 14.8047 6.70182 15.098C6.54415 15.3877 6.31132 15.6113 6.00332 15.769C5.69899 15.923 5.33049 16 4.89782 16H3.72632V12.1225H4.89782C5.55049 12.1225 6.05282 12.2948 6.40482 12.6395C6.76049 12.9805 6.93832 13.4535 6.93832 14.0585ZM4.87032 15.6535C5.41665 15.6535 5.83282 15.5142 6.11882 15.2355C6.40482 14.9532 6.54782 14.5608 6.54782 14.0585C6.54782 13.5562 6.40482 13.1657 6.11882 12.887C5.83282 12.6047 5.41665 12.4635 4.87032 12.4635H4.11682V15.6535H4.87032ZM9.51185 12.0785C9.87118 12.0785 10.1938 12.1628 10.4798 12.3315C10.7658 12.5002 10.9895 12.7348 11.1508 13.0355C11.3158 13.3362 11.3983 13.6772 11.3983 14.0585C11.3983 14.4398 11.3158 14.7827 11.1508 15.087C10.9895 15.3877 10.7658 15.6223 10.4798 15.791C10.1938 15.9597 9.87118 16.044 9.51185 16.044C9.15251 16.044 8.82985 15.9597 8.54385 15.791C8.25785 15.6223 8.03235 15.3877 7.86735 15.087C7.70601 14.7827 7.62535 14.4398 7.62535 14.0585C7.62535 13.6772 7.70601 13.3362 7.86735 13.0355C8.03235 12.7348 8.25785 12.5002 8.54385 12.3315C8.82985 12.1628 9.15251 12.0785 9.51185 12.0785ZM9.51185 12.436C9.22951 12.436 8.97468 12.502 8.74735 12.634C8.52368 12.766 8.34585 12.9548 8.21385 13.2005C8.08551 13.4462 8.02135 13.7322 8.02135 14.0585C8.02135 14.3848 8.08551 14.6708 8.21385 14.9165C8.34585 15.1622 8.52368 15.351 8.74735 15.483C8.97468 15.615 9.22951 15.681 9.51185 15.681C9.79418 15.681 10.0472 15.615 10.2708 15.483C10.4982 15.351 10.676 15.1622 10.8043 14.9165C10.9363 14.6708 11.0023 14.3848 11.0023 14.0585C11.0023 13.7322 10.9363 13.4462 10.8043 13.2005C10.676 12.9548 10.4982 12.766 10.2708 12.634C10.0472 12.502 9.79418 12.436 9.51185 12.436ZM13.9174 12.084C14.3831 12.084 14.7681 12.1977 15.0724 12.425C15.3768 12.6487 15.5913 12.9585 15.7159 13.3545H15.3089C15.2063 13.0758 15.0358 12.854 14.7974 12.689C14.5591 12.524 14.2639 12.4415 13.9119 12.4415C13.6443 12.4415 13.4004 12.5075 13.1804 12.6395C12.9641 12.7715 12.7936 12.9603 12.6689 13.206C12.5443 13.4517 12.4819 13.7377 12.4819 14.064C12.4819 14.3903 12.5443 14.6763 12.6689 14.922C12.7936 15.164 12.9641 15.351 13.1804 15.483C13.4004 15.615 13.6443 15.681 13.9119 15.681C14.2639 15.681 14.5591 15.5985 14.7974 15.4335C15.0358 15.2685 15.2063 15.0467 15.3089 14.768H15.7159C15.5913 15.164 15.3768 15.4757 15.0724 15.703C14.7681 15.9267 14.3831 16.0385 13.9174 16.0385C13.5618 16.0385 13.2446 15.9542 12.9659 15.7855C12.6873 15.6168 12.4709 15.384 12.3169 15.087C12.1629 14.7863 12.0859 14.4453 12.0859 14.064C12.0859 13.679 12.1629 13.3362 12.3169 13.0355C12.4709 12.7348 12.6873 12.502 12.9659 12.337C13.2446 12.1683 13.5618 12.084 13.9174 12.084Z","fill","white"],["id","clip0_736:22"],["width","19.73","height","25","fill","white"],[1,"fileMsgDetail","overflow-hidden"],[1,"downLoadFile"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M10 0C15.5141 0 20 4.48585 20 10C20 15.5141 15.5141 20 10 20C4.48585 20 0 15.5141 0 10C0 4.48585 4.48585 0 10 0ZM10 1.46341C5.29268 1.46341 1.46341 5.29268 1.46341 10C1.46341 14.7073 5.29268 18.5366 10 18.5366C14.7073 18.5366 18.5366 14.7073 18.5366 10C18.5366 5.29268 14.7073 1.46341 10 1.46341Z"],["d","M10.0298 6C10.4008 6 10.7018 6.30104 10.7018 6.67197V12.3668L12.9121 10.1474C13.1747 9.88311 13.5994 9.8849 13.8619 10.1456C14.1244 10.4073 14.1262 10.8328 13.8637 11.0962L10.5056 14.4687C10.4703 14.5044 10.4314 14.5357 10.3896 14.5623C10.3794 14.5678 10.3695 14.5737 10.3594 14.5794C10.3403 14.5912 10.32 14.6013 10.2992 14.6104C10.2939 14.6119 10.289 14.6139 10.2841 14.6159L10.2825 14.6166C10.2617 14.6259 10.24 14.6334 10.2179 14.6399C10.2042 14.6431 10.1906 14.6466 10.1768 14.6496C10.1599 14.6542 10.143 14.6573 10.126 14.6598C10.1123 14.6609 10.0979 14.6625 10.0835 14.6637C10.0654 14.666 10.0477 14.6667 10.0298 14.6667C9.98009 14.6667 9.93084 14.6612 9.88296 14.6505C9.8691 14.6466 9.85547 14.6431 9.84201 14.6391C9.81967 14.6334 9.79792 14.6259 9.77663 14.6172C9.7717 14.6144 9.76632 14.6121 9.76098 14.6098C9.73969 14.6013 9.71936 14.5912 9.69958 14.58C9.69015 14.5737 9.68022 14.5678 9.67046 14.5616C9.65365 14.5519 9.63769 14.5407 9.62221 14.5288C9.5962 14.5081 9.57124 14.4859 9.54803 14.4621L6.19599 11.0962C5.93348 10.8328 5.93527 10.4073 6.19779 10.1456C6.4612 9.8849 6.88589 9.88311 7.14751 10.1474L9.35785 12.3668V6.67197C9.35785 6.30104 9.6589 6 10.0298 6Z"],[1,"downloadVideo"],["width","40","height","40","viewBox","0 0 60 60","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M30 0C46.5347 0 60 13.4588 60 30.0174C60 46.5412 46.5347 60 30 60C13.4653 60 0 46.5412 0 30.0174C0 13.4588 13.4653 0 30 0ZM26.583 18.0897C25.9459 18.0897 25.3378 18.2344 24.7587 18.5239C24.0347 18.9291 23.4556 19.5658 23.1371 20.3184C22.9344 20.8394 22.6158 22.4023 22.6158 22.4313C22.2973 24.1389 22.1236 26.9175 22.1236 29.9855C22.1236 32.9117 22.2973 35.5716 22.5579 37.3083C22.5869 37.3372 22.9054 39.2764 23.2529 39.9421C23.89 41.1577 25.1351 41.9103 26.4672 41.9103H26.583C27.4517 41.8813 29.2761 41.1288 29.2761 41.0999C32.3456 39.8263 38.3977 35.8611 40.8301 33.2272L41.0039 33.0535C41.3224 32.7352 41.7278 32.2431 41.8147 32.1273C42.278 31.5195 42.5097 30.767 42.5097 30.0174C42.5097 29.1751 42.249 28.3936 41.7568 27.7569C41.6409 27.6411 41.2066 27.1491 40.8012 26.7439C38.4266 24.1968 32.2297 20.0289 28.9865 18.7554C28.4942 18.5557 27.249 18.1187 26.583 18.0897Z","fill","#0f659e"],["type","video/mp4",3,"src"],["type","video/webm",3,"src"],["width","19","height","19","viewBox","0 0 19 19","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9.86759 0.580811C14.828 0.580811 18.8676 4.61844 18.8676 9.58602C18.8676 14.5432 14.828 18.5808 9.86759 18.5808C4.90717 18.5808 0.867592 14.5432 0.867592 9.58602C0.867592 4.61844 4.90717 0.580811 9.86759 0.580811ZM8.8425 6.00773C8.65138 6.00773 8.46894 6.05114 8.2952 6.13797C8.07802 6.25954 7.90427 6.45056 7.80871 6.67632C7.7479 6.83262 7.65234 7.30151 7.65234 7.31019C7.55678 7.82249 7.50466 8.65606 7.50466 9.57647C7.50466 10.4543 7.55678 11.2523 7.63497 11.7733C7.64365 11.782 7.73921 12.3637 7.84346 12.5634C8.03458 12.9281 8.40813 13.1539 8.80775 13.1539H8.8425C9.10311 13.1452 9.65041 12.9195 9.65041 12.9108C10.5713 12.5287 12.3869 11.3391 13.1166 10.549L13.1687 10.4969C13.2643 10.4014 13.3859 10.2537 13.412 10.219C13.551 10.0367 13.6205 9.81091 13.6205 9.58602C13.6205 9.33334 13.5423 9.0989 13.3946 8.90787C13.3599 8.87314 13.2296 8.72553 13.1079 8.60397C12.3956 7.83986 10.5365 6.58949 9.56354 6.20744C9.41585 6.14753 9.0423 6.01641 8.8425 6.00773Z","fill","#0f659e"],[1,"fileMsgDetail"],[1,"content-placeholder"],["src","./assets/images/content-placeholder.png"]],template:function(t,i){1&t&&(l.YNc(0,Mge,53,15,"ng-container",0),l.YNc(1,Sge,3,0,"ng-container",0)),2&t&&(l.Q6J("ngIf",(null==i.chatService||null==i.chatService.selectedGroup?null:i.chatService.selectedGroup.isGroup)||(null==i.chatService||null==i.chatService.selectedGroup||null==i.chatService.selectedGroup.users?null:i.chatService.selectedGroup.users.length)>0&&(null==i.chatService||null==i.chatService.selectedGroup||null==i.chatService.selectedGroup.users[0]?null:i.chatService.selectedGroup.users[0].userId)),l.xp6(1),l.Q6J("ngIf",!(null!=i.chatService&&null!=i.chatService.selectedGroup&&i.chatService.selectedGroup.isGroup)&&!(null!=i.chatService&&null!=i.chatService.selectedGroup&&i.chatService.selectedGroup.users)||(null==i.chatService||null==i.chatService.selectedGroup||null==i.chatService.selectedGroup.users?null:i.chatService.selectedGroup.users.length)>0&&!(null!=i.chatService&&null!=i.chatService.selectedGroup&&null!=i.chatService.selectedGroup.users[0]&&i.chatService.selectedGroup.users[0].userId)))},directives:[ai,fu,j6,hee,zt,Tm,Mm,R6,j3,Jme,du,rh,Dr,ys,ci],pipes:[bi,ege,tge],styles:['.laoder-section[_ngcontent-%COMP%]{height:100%;position:relative;z-index:100;display:flex;flex-direction:column;transition:background-color .3s ease}header[_ngcontent-%COMP%]{position:relative;z-index:1000;box-sizing:border-box;display:flex;align-items:center;width:100%;height:60px;background:#f0f2f5;padding:10px 16px;border-left:1px solid #d1d7db}header[_ngcontent-%COMP%]   .header-user-img[_ngcontent-%COMP%]{flex:none;padding:0 15px 0 0;margin-top:-1px;display:flex;align-items:center}header[_ngcontent-%COMP%]   .header-user-img[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-right:10px;display:none}@media screen and (max-width: 991px){header[_ngcontent-%COMP%]   .header-user-img[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{display:block}}header[_ngcontent-%COMP%]   .header-user-img[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]{position:relative;height:40px;width:40px;border-radius:50%}header[_ngcontent-%COMP%]   .header-user-img[_ngcontent-%COMP%]   .user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:100%;height:100%;object-fit:cover;position:relative;display:block;overflow:hidden}header[_ngcontent-%COMP%]   .header-user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;justify-content:center;min-width:0}header[_ngcontent-%COMP%]   .header-user-info-top[_ngcontent-%COMP%]{display:flex;align-items:flex-start;line-height:normal;margin-top:-1px}header[_ngcontent-%COMP%]   .header-user-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:16px;font-weight:400;line-height:21px;text-overflow:ellipsis;white-space:nowrap}header[_ngcontent-%COMP%]   .header-user-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;overflow:hidden;flex-grow:1;display:block;white-space:nowrap;text-overflow:ellipsis}header[_ngcontent-%COMP%]   .header-user-info-bottom[_ngcontent-%COMP%]{min-height:20px;font-size:13px;line-height:20px;color:#667781;display:flex;align-items:flex-start}header[_ngcontent-%COMP%]   .header-user-info-bottom[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-user-select:text;user-select:text}header[_ngcontent-%COMP%]   .header-user-action[_ngcontent-%COMP%]{flex:none;margin-left:20px}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]{display:flex;align-items:center;color:#54656f;position:relative;flex:none;height:100%;transition:background-color .3s ease;border-radius:50%;margin-left:0}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;background:transparent;border:none}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]:after{display:none}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;z-index:10000;max-width:340px;overflow:visible;padding:9px 0;border:none;background-color:#fff;border-radius:3px;box-shadow:0 2px 5px #0b141a42,0 2px 10px #0b141a29}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dropdown-item.active[_ngcontent-%COMP%], header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.dropdown-item[_ngcontent-%COMP%]:active{background-color:transparent!important;color:#fff!important}header[_ngcontent-%COMP%]   .header-user-action-box[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{box-sizing:border-box;display:block;font-size:14.5px;line-height:14.5px;color:#3b4a54;position:relative;flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-top:7px;padding-bottom:7px}header[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";background-color:#ffffff24;left:0}.message-wrap[_ngcontent-%COMP%]{position:relative;z-index:1;flex:1 1 0}.message-wrap-inner[_ngcontent-%COMP%]{position:absolute;top:0;z-index:100;box-sizing:border-box;display:flex;flex-direction:column;width:100%;height:100%;overflow-x:hidden;overflow-y:auto;transition:background .3s ease-out .1s;border-left:1px solid #e9edef;background:#efeae2;background-image:url(chat-bg.946b9dfe2514459b7a70.png);background-repeat:no-repeat;background-size:cover;background-position:center center}.message-wrap-inner[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.message-wrap-inner[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.message-wrap-inner[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.message-wrap-inner-blank[_ngcontent-%COMP%]{flex:1 1 auto;min-height:12px}.message-wrap-inner-list[_ngcontent-%COMP%]{flex:0 0 auto;padding-bottom:8px;padding-left:0;transition:padding-lrgb(67,131,163) s cubic-bezier(.69,0,.79,.14)}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;-webkit-user-select:text;user-select:text;padding-right:9%;padding-left:9%}@media only screen and (max-width: 1366px){.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]{padding-right:7%;padding-left:7%}}@media only screen and (max-width: 1024px){.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]{padding-right:5%;padding-left:5%}}@media only screen and (max-width: 991px){.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]{padding-right:3%;padding-left:3%}}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-info[_ngcontent-%COMP%]   .message-info-box[_ngcontent-%COMP%]{padding:5px 12px 6px;text-align:center;text-shadow:0 1px 0 rgba(255,255,255,.4);background-color:#fffffff2;border-radius:7.5px;box-shadow:0 1px .5px #0b141a21;box-sizing:border-box;display:inline-block;flex:none;max-width:100%!important;font-size:12.5px;line-height:21px;color:#54656f;margin-bottom:12px}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]{position:relative;flex:none;font-size:14.2px;line-height:19px;color:#111b21;border-radius:7.5px;max-width:65%;z-index:200;box-shadow:0 1px .5px #0b141a21;padding:6px 7px 8px 9px;margin-bottom:2px}@media only screen and (max-width: 575px){.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]{max-width:85%}}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]:last-child{margin-bottom:6px}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   .message-tail[_ngcontent-%COMP%]{position:absolute;top:0px;z-index:100;display:block;width:8px;height:13px;display:none}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   .message-tail[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;pointer-events:none}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]:first-child   .message-tail[_ngcontent-%COMP%]{display:block}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;overflow-wrap:break-word;white-space:pre-wrap}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   span.fileMsgSpan[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#fff6;padding:10px;border-radius:7.5px;min-width:200px;max-width:200px}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   span.fileMsgSpan[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{min-width:20px;margin-right:10px}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   span.senderName[_ngcontent-%COMP%]{display:block;font-size:12px;color:#e82148}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box-blank[_ngcontent-%COMP%]{display:inline-block;width:55px;vertical-align:middle}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box-time[_ngcontent-%COMP%]{position:relative;z-index:10;float:right;margin:-10px 0 -5px 4px}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box-time[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{line-height:15px;height:15px;color:#667781;font-size:.6875rem;white-space:nowrap}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list[_ngcontent-%COMP%]   .msg-box-time[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:top;display:inline-block}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-out[_ngcontent-%COMP%]{align-items:flex-end}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-out[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]{background-color:#fbdae0}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-out[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]:first-child{border-top-right-radius:0}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-out[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   .message-tail[_ngcontent-%COMP%]{right:-8px;color:#fbdae0}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-in[_ngcontent-%COMP%]{align-items:flex-start}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-in[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]{background-color:#fff}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-in[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]:first-child{border-top-left-radius:0}.message-wrap-inner-list[_ngcontent-%COMP%]   .message-list.message-in[_ngcontent-%COMP%]   .msg-box[_ngcontent-%COMP%]   .message-tail[_ngcontent-%COMP%]{left:-8px;color:#fff}.message-wrap[_ngcontent-%COMP%]:before{content:"";margin-bottom:auto}.message-footer[_ngcontent-%COMP%]{position:relative;z-index:1;box-sizing:border-box;flex:none;order:3;width:100%;min-height:62px;padding:0;background-color:#f0f2f5}.message-footer-area[_ngcontent-%COMP%]{position:relative;z-index:2;box-sizing:border-box;display:flex;flex-direction:row;align-items:flex-end;max-width:100%;min-height:62px;background-color:#f0f2f5;padding:5px 17px 5px 10px;border-left:1px solid #e9edef}.message-footer-area-box[_ngcontent-%COMP%]{position:relative;flex:1;width:100%;min-width:0;min-height:52px}.message-footer-area-box-inner[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.message-footer-area-box-inner-left[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;align-items:center;justify-content:center;min-height:52px;margin-right:-10px;margin-left:-10px;padding:5px 10px}.message-footer-area-box-inner-left[_ngcontent-%COMP%]   .message-icon[_ngcontent-%COMP%]{display:flex;align-items:center}.message-footer-area-box-inner-left[_ngcontent-%COMP%]   .message-icon-inner[_ngcontent-%COMP%]{position:relative;flex:none;height:100%;transition:background-color .3s ease;border-radius:50%;margin-left:0}.message-footer-area-box-inner-left[_ngcontent-%COMP%]   .message-icon-inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px;display:flex;align-items:center;background:transparent;border:none}.message-footer-area-box-inner-left[_ngcontent-%COMP%]   .message-icon-inner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;pointer-events:none}.message-footer-area-box-inner-right[_ngcontent-%COMP%]{display:flex;flex:1;align-items:flex-end;min-width:0}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{box-sizing:border-box;flex:1 1 auto;width:inherit;min-width:0;min-height:20px;font-size:15px;font-weight:400;line-height:20px;outline:none;will-change:width;border-radius:8px;border:1px solid #fff;background-color:#fff;padding:8px 12px 5px;margin:5px 10px}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:none;resize:none;max-height:120px;overflow-y:auto!important}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px!important;height:4px!important}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-send[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;align-items:center;justify-content:center;min-height:52px;width:37px;padding:5px 10px}.message-footer-area-box-inner-right[_ngcontent-%COMP%]   .message-send[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54656f;flex:0 0 auto;opacity:.9;background:none;border:0;outline:none;padding:0}.message-footer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:0 20px;border-radius:5px}.emoji-mart[_ngcontent-%COMP%]{position:absolute;bottom:65px;left:60px}.imgMsgBox[_ngcontent-%COMP%]{position:relative;max-width:200px;overflow:hidden;border-radius:7.5px}.imgMsgBox[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .imgMsgBox[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.imgMsgBox[_ngcontent-%COMP%]   .downloadVideo[_ngcontent-%COMP%]{position:absolute!important;left:0;right:0;top:0px;bottom:0px;display:flex;align-items:flex-end;color:#fff;width:100%;height:100%}.imgMsgBox[_ngcontent-%COMP%]   .downloadVideo[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0px;right:0px;top:0px;bottom:0px;background-color:#00000080}.imgMsgBox[_ngcontent-%COMP%]   .downloadVideo[_ngcontent-%COMP%]   .downLoadFile[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10}.imgMsgBox[_ngcontent-%COMP%]   .downloadVideo[_ngcontent-%COMP%]   .downLoadFile[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-left:0}.imgMsgBox[_ngcontent-%COMP%]   .downloadVideo[_ngcontent-%COMP%]   .downLoadFile[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.imgMsgBox[_ngcontent-%COMP%]   .downloadVideo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;left:20px;bottom:25px;background:rgba(0,0,0,.5);padding:2px 10px;border-radius:10px}']}),n})();const kge=["searchFriendList"];function xge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",17),l.TgZ(1,"input",18),l.NdJ("change",function(r){l.CHM(t);const a=l.oxw(),u=a.$implicit,h=a.index;return l.oxw(2).onSelectUser(r,u,h)}),l.qZA(),l.TgZ(2,"label",19),l.TgZ(3,"div",20),l.TgZ(4,"div",21),l.TgZ(5,"div"),l._UZ(6,"img",22),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",23),l.TgZ(8,"div",24),l.TgZ(9,"div",25),l.TgZ(10,"span"),l._uU(11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const t=l.oxw(),i=t.index,r=t.$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("id","member"+i),l.xp6(1),l.Q6J("for","member"+i),l.xp6(4),l.Q6J("src",null!=r&&r.profilePicture?null==r?null:r.profilePicture:a.userPlaceholder,l.LSH),l.xp6(5),l.Oqu(r.name)}}function Nge(n,e){if(1&n&&(l.ynx(0),l.YNc(1,xge,12,4,"div",16),l.BQk()),2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(1),l.Q6J("ngIf",i.chatService.userDetails.id!==t.userId)}}function Tge(n,e){if(1&n&&(l.ynx(0),l.YNc(1,Nge,2,1,"ng-container",15),l.BQk()),2&n){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.friendList)}}function Age(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",26),l.NdJ("click",function(){return l.CHM(t),l.oxw().addMembersInGroup()}),l._uU(1," Add "),l.qZA()}if(2&n){const t=l.oxw();l.Q6J("disabled",0==t.selectedGroupMember.length||t.isDisabledAddNewMember)}}const Ige=function(){return{color:"#54656f"}};let mee=(()=>{class n{constructor(t,i,r,a,u,h){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.faArrowLeft=Ds,this.userPlaceholder="./assets/images/placeholder-profile-img.png",this.isDisabledCreateGroupBtn=!1,this.submitGroupForm=!1,this.isDisabledAddNewMember=!1,this.isLoading=0,this.friendList=[],this.selectedGroupMember=[]}ngOnInit(){this.getFriends()}setFriendList(){this.getFriends()}onSelectUser(t,i,r){var a,u;if(t.target.checked)this.selectedGroupMember.push(i);else{let h=null===(a=this.selectedGroupMember)||void 0===a?void 0:a.findIndex(m=>(null==m?void 0:m.userId)===i.userId);h>-1&&(null===(u=this.selectedGroupMember)||void 0===u||u.splice(h,1))}}removeUserFromGroup(t,i){this.chatService.removeUserId=t.userId,this.chatService.selectedGroup.userList.splice(i,1)}searchFriends(){this.commonService.friendList=this.searchFriend.trim()?this.commonService.friendList.filter(t=>{var i;if(null==t?void 0:t.name.toLowerCase().includes(null===(i=this.searchFriend)||void 0===i?void 0:i.toLowerCase()))return t}):this.commonService.tempFriendList.filter(t=>t)}addNewMembers(){var t=this;return(0,X.Z)(function*(){t.chatService.isAddMember=!0,t.commonService.friendList=yield t.commonService.tempFriendList.filter(i=>{if(void 0===t.chatService.selectedGroup.members.find(a=>a===i.userId))return i}),t.chatService.groupImageNameContent=!1,t.chatService.friendListContent=!0})()}addMembers(){var t;(null===(t=this.selectedGroupMember)||void 0===t?void 0:t.length)>0?(this.isDisabledAddNewMember=!0,this.chatService.addNewMembersInGroup(this.selectedGroupMember).then(i=>{this.isLoading=1,this.isDisabledAddNewMember=!1,this.selectedGroupMember=[]}).catch(i=>{this.isLoading=0,console.log("error",i),this.toastrService.error("Something went wrong, Please try again"),this.isDisabledAddNewMember=!1}),this.isLoading=0):this.toastrService.warning("Please select atleast one member")}getFriends(){var t=this;this.commonService.friendList=[],this.commonService.tempFriendList=[],this.apiService.callApiRequest(vn.USERS_LIST,{id:this.chatService.userDetails.id}).subscribe(function(){var i=(0,X.Z)(function*(r){if(r.status){if(t.isLoading=0,r.status&&r.result.users.length>0)for(let a=0;a<=r.result.users.length;a++)yield t.chatService.getFriend(r.result.users&&r.result.users.length>0&&r.result.users[a]&&r.result.users[a].id).subscribe(function(){var u=(0,X.Z)(function*(h){var m;t.isLoading=0,"{}"!==h&&(null===(m=Object.keys(h))||void 0===m?void 0:m.length)>0&&void 0===(yield t.commonService.tempFriendList.find(b=>b.userId===h.userId))&&(t.friendList.push(h),t.commonService.friendList.push(h),t.commonService.tempFriendList.push(h))});return function(h){return u.apply(this,arguments)}}())}else t.isLoading=0});return function(r){return i.apply(this,arguments)}}())}addMembersInGroup(){var t;this.isLoading=1,(null===(t=this.selectedGroupMember)||void 0===t?void 0:t.length)>0?(this.isDisabledAddNewMember=!0,this.chatService.addNewMembersInGroup(this.selectedGroupMember).then(i=>{this.commonService.closeAddMember(),this.isDisabledAddNewMember=!1,this.isLoading=0}).catch(i=>{this.isLoading=0,console.log("error",i),this.toastrService.error("Something went wrong, Please try again"),this.isDisabledAddNewMember=!1})):(this.isLoading=0,this.toastrService.warning("Please select atleast one member"))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-add-member"]],viewQuery:function(t,i){if(1&t&&l.Gf(kge,5),2&t){let r;l.iGM(r=l.CRH())&&(i.searchFriendList=r.first)}},decls:17,vars:7,consts:[[1,"h-100",3,"loader"],[1,"sidebar-header"],[1,"sidebar-header-img",3,"click"],[3,"icon","styles"],[1,"sidebar-search"],[1,"sidebar-search-input"],["type","button"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#54656f","d","M15.009 13.805h-.636l-.22-.219a5.184 5.184 0 0 0 1.256-3.386 5.207 5.207 0 1 0-5.207 5.208 5.183 5.183 0 0 0 3.385-1.255l.221.22v.635l4.004 3.999 1.194-1.195-3.997-4.007zm-4.808 0a3.605 3.605 0 1 1 0-7.21 3.605 3.605 0 0 1 0 7.21z"],["type","text","placeholder","Search user",3,"ngModel","ngModelChange"],["searchFriendList",""],[1,"list-wrap"],[4,"ngIf"],[1,"create-group-btn","d-grid"],["class","btn btn-primary btn-block",3,"disabled","click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","list-wrap-single",4,"ngIf"],[1,"list-wrap-single"],["type","checkbox",1,"form-check-input",3,"id","change"],[1,"list-wrap-single-label",3,"for"],[1,"list-wrap-single-label-img"],[1,"img-inner"],["onError","this.src='./assets/images/placeholder-profile-img.png'","width","49","height","49","alt","",3,"src"],[1,"list-wrap-single-label-info"],[1,"list-wrap-single-label-info-top"],[1,"user"],[1,"btn","btn-primary","btn-block",3,"disabled","click"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.NdJ("click",function(){return i.commonService.closeAddMember()}),l._UZ(3,"fa-icon",3),l.qZA(),l.TgZ(4,"span"),l._uU(5,"Add Member"),l.qZA(),l.qZA(),l.TgZ(6,"div",4),l.TgZ(7,"div",5),l.TgZ(8,"button",6),l.O4$(),l.TgZ(9,"svg",7),l._UZ(10,"path",8),l.qZA(),l.qZA(),l.kcU(),l.TgZ(11,"input",9,10),l.NdJ("ngModelChange",function(a){return i.searchFriend=a})("ngModelChange",function(){return i.searchFriends()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",11),l.YNc(14,Tge,2,1,"ng-container",12),l.qZA(),l.TgZ(15,"div",13),l.YNc(16,Age,2,1,"button",14),l.qZA(),l.qZA()),2&t&&(l.Q6J("loader",1==i.isLoading),l.xp6(3),l.Q6J("icon",i.faArrowLeft)("styles",l.DdM(6,Ige)),l.xp6(8),l.Q6J("ngModel",i.searchFriend),l.xp6(3),l.Q6J("ngIf",i.friendList.length>0),l.xp6(2),l.Q6J("ngIf",!i.chatService.isAddMember))},directives:[fu,j6,j3,du,ih,ai,zt],styles:['.sidebar-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:flex-start;background-color:#fff;border-bottom:1px solid rgba(0,0,0,.05)}.sidebar-header-img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer}.sidebar-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.sidebar-search[_ngcontent-%COMP%]{background-color:#fafbfd;padding:7px 10px;position:relative;z-index:100;box-sizing:border-box;flex:none;height:49px;transition:box-shadow .18s ease-out,background-color .25s ease-out}.sidebar-search[_ngcontent-%COMP%]:after{position:absolute;bottom:-1px;width:100%;height:1px;content:"";border-bottom:1px solid #e9edef;background-color:#e9edef;left:0}.sidebar-search.hide-search[_ngcontent-%COMP%]{opacity:0;visibility:hidden;border-bottom:none}.sidebar-search-input[_ngcontent-%COMP%]{background-color:#f0f2f5;border-radius:30px;height:35px;display:flex;align-items:center;justify-content:flex-start;position:relative}.sidebar-search-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;padding:0 20px 0 40px;font-size:14px}.sidebar-search-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;padding:0;border:0;position:absolute;left:10px;top:4px}.list-wrap[_ngcontent-%COMP%]{width:100%;overflow:auto;overflow-x:hidden;flex:1;background-color:#fafbfd;height:calc(100% - 167px);padding:10px}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.list-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.list-wrap-single[_ngcontent-%COMP%]{position:relative;display:flex;background:#ffffff;box-shadow:0 4px 6px #1f4ba408;border-radius:16px;pointer-events:all;align-items:center;margin-bottom:10px;cursor:pointer}.list-wrap-single[_ngcontent-%COMP%]:hover, .list-wrap-single.active[_ngcontent-%COMP%]{background:#f4f7f9}.list-wrap-single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px}.list-wrap-single[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] + .list-wrap-single-label[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;flex:1;flex-direction:row;height:72px;cursor:pointer}.list-wrap-single-label-img[_ngcontent-%COMP%]{display:flex;height:100%}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]{padding:0 15px 0 13px;margin-top:-1px;flex:none;align-items:center;display:flex}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:49px;width:49px;border-radius:50%;position:relative}.list-wrap-single-label-img[_ngcontent-%COMP%]   .img-inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:100%;overflow:hidden;transition:opacity .15s ease-out;border-radius:50%;object-fit:cover}.list-wrap-single-label-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0;padding-right:15px;height:100%}.list-wrap-single-label-info-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal;text-align:left}.list-wrap-single-label-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:14px;line-height:normal;font-weight:500;text-align:left}.list-wrap-single-label-info-top[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;flex-grow:1;position:relative}.create-group-btn[_ngcontent-%COMP%]{padding:10px}']}),n})();function Lge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",16),l.TgZ(1,"img",17),l.NdJ("error",function(r){return l.CHM(t),l.oxw(2).onGroupImgError(r)}),l.qZA(),l.qZA()}if(2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("src",null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup?null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.groupImage?null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.groupImage:t.groupPlaceholder:null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.users&&(null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].userId)===t.chatService.userDetails.id?null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.users&&null!=t.chatService&&null!=t.chatService.selectedGroup&&null!=t.chatService.selectedGroup.users[1]&&t.chatService.selectedGroup.users[1].profilePicture?null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[1]?null:t.chatService.selectedGroup.users[1].profilePicture:t.userPlaceholder:(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.users)&&(null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].profilePicture),l.LSH)}}function Pge(n,e){1&n&&(l.TgZ(0,"span",32),l._uU(1,"Please enter group name"),l.qZA())}function Vge(n,e){1&n&&(l.TgZ(0,"span",32),l._uU(1,"You can not add more than 20 characters"),l.qZA())}function Oge(n,e){if(1&n){const t=l.EpF();l.ynx(0),l.TgZ(1,"form",18),l.TgZ(2,"div",19),l.TgZ(3,"div",20),l.TgZ(4,"div",21),l._UZ(5,"img",22),l.TgZ(6,"div",23),l.TgZ(7,"img",24),l.NdJ("click",function(){return l.CHM(t),l.MAs(9).click()}),l.qZA(),l.TgZ(8,"input",25,26),l.NdJ("change",function(r){return l.CHM(t),l.oxw(2).onSelectGroupImage(r)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",27),l._UZ(12,"input",28),l.YNc(13,Pge,2,0,"span",29),l.YNc(14,Vge,2,0,"span",29),l.qZA(),l.qZA(),l.TgZ(15,"div",30),l.TgZ(16,"button",31),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).updateGroupDetails()}),l._uU(17," Update "),l.qZA(),l.qZA(),l.qZA(),l.BQk()}if(2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("formGroup",t.groupDetailsForm),l.xp6(4),l.Q6J("src",t.groupImageSrc,l.LSH),l.xp6(8),l.Q6J("ngIf",t.submitGroupForm&&(null==t.f.groupName.errors?null:t.f.groupName.errors.required)),l.xp6(1),l.Q6J("ngIf",t.submitGroupForm&&(null==t.f.groupName.errors?null:t.f.groupName.errors.maxlength))}}function Rge(n,e){if(1&n&&(l.TgZ(0,"h2"),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.hij(" ",null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.name,"")}}function zge(n,e){if(1&n&&(l.TgZ(0,"h2"),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Oqu(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup?null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.name:null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.users&&(null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].userId)===t.chatService.userDetails.id?null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[1]?null:t.chatService.selectedGroup.users[1].name:null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].name)}}function Hge(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.Oqu(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup?null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.name:(null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].userId)===t.chatService.userDetails.id?null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[1]?null:t.chatService.selectedGroup.users[1].mobile_email:null==t.chatService||null==t.chatService.selectedGroup||null==t.chatService.selectedGroup.users[0]?null:t.chatService.selectedGroup.users[0].mobile_email)}}function Bge(n,e){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.hij("Group \xb7 ",t.chatService.selectedGroup.members.length," participants ")}}function jge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",2),l.NdJ("click",function(){return l.CHM(t),l.oxw(3).showMember()}),l._uU(1,"+ Add Member"),l.qZA()}}function Uge(n,e){1&n&&(l.ynx(0),l._uU(1," (You) "),l.BQk())}function Gge(n,e){1&n&&(l.TgZ(0,"div"),l._uU(1," Admin "),l.qZA())}function qge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",47),l.NdJ("click",function(){l.CHM(t);const r=l.oxw(),a=r.$implicit,u=r.index;return l.oxw(3).removeUserFromGroup(a,u)}),l._uU(1," Remove "),l.qZA()}}function $ge(n,e){if(1&n&&(l.TgZ(0,"div",37),l.TgZ(1,"div",38),l.TgZ(2,"div",39),l.TgZ(3,"div",40),l.TgZ(4,"div"),l._UZ(5,"img",41),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",42),l.TgZ(7,"div",43),l.TgZ(8,"div",44),l.TgZ(9,"span"),l._uU(10),l.YNc(11,Uge,2,0,"ng-container",13),l.qZA(),l.qZA(),l.TgZ(12,"div",45),l.YNc(13,Gge,2,0,"div",13),l.YNc(14,qge,2,0,"button",46),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&n){const t=e.$implicit,i=l.oxw(3);l.xp6(5),l.Q6J("src",null==t?null:t.profilePicture,l.LSH),l.xp6(5),l.hij("",null==t?null:t.name," "),l.xp6(1),l.Q6J("ngIf",i.chatService.userDetails.id===(null==t?null:t.userId)),l.xp6(2),l.Q6J("ngIf",(null==i.chatService||null==i.chatService.selectedGroup?null:i.chatService.selectedGroup.createdBy)===(null==t?null:t.userId)),l.xp6(1),l.Q6J("ngIf",(null==i.chatService||null==i.chatService.selectedGroup?null:i.chatService.selectedGroup.createdBy)!==(null==t?null:t.userId)&&(null==i.chatService||null==i.chatService.selectedGroup?null:i.chatService.selectedGroup.createdBy)===i.chatService.userDetails.id)}}function Wge(n,e){if(1&n&&(l.TgZ(0,"div",10),l.TgZ(1,"div",33),l.TgZ(2,"div",34),l.TgZ(3,"h5"),l._uU(4),l.qZA(),l.YNc(5,jge,2,0,"button",35),l.qZA(),l.YNc(6,$ge,15,5,"div",36),l.qZA(),l.qZA()),2&n){const t=l.oxw(2);l.xp6(4),l.hij("",t.chatService.selectedGroup.members.length," participants"),l.xp6(1),l.Q6J("ngIf",(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup)&&(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.createdBy)==t.chatService.userDetails.id),l.xp6(1),l.Q6J("ngForOf",t.chatService.selectedGroup.users)}}function Zge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",10),l.TgZ(1,"button",48),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).exitGroup()}),l.O4$(),l.TgZ(2,"svg",3),l._UZ(3,"path",49),l.qZA(),l.kcU(),l.TgZ(4,"span"),l._uU(5,"Exit Group"),l.qZA(),l.qZA(),l.qZA()}}function Kge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",10),l.TgZ(1,"button",48),l.NdJ("click",function(){l.CHM(t);const r=l.oxw(2);return r.deleteChat(null==r.chatService?null:r.chatService.groups)}),l.O4$(),l.TgZ(2,"svg",3),l._UZ(3,"path",50),l.qZA(),l.kcU(),l.TgZ(4,"span"),l._uU(5,"Delete Chat"),l.qZA(),l.qZA(),l.qZA()}}function Yge(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",10),l.TgZ(1,"button",48),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).deleteGroup()}),l.O4$(),l.TgZ(2,"svg",3),l._UZ(3,"path",50),l.qZA(),l.kcU(),l.TgZ(4,"span"),l._uU(5,"Delete Group"),l.qZA(),l.qZA(),l.qZA()}}function Qge(n,e){if(1&n&&(l.TgZ(0,"div",8),l.TgZ(1,"div",9),l.TgZ(2,"div",10),l.TgZ(3,"div",11),l.YNc(4,Lge,2,1,"div",12),l.YNc(5,Oge,18,4,"ng-container",13),l.qZA(),l.TgZ(6,"div",14),l.YNc(7,Rge,2,1,"h2",13),l.YNc(8,zge,2,1,"h2",13),l.YNc(9,Hge,2,1,"span",13),l.YNc(10,Bge,2,1,"span",13),l.qZA(),l.qZA(),l.YNc(11,Wge,7,3,"div",15),l.YNc(12,Zge,6,0,"div",15),l.YNc(13,Kge,6,0,"div",15),l.YNc(14,Yge,6,0,"div",15),l.qZA(),l.qZA()),2&n){const t=l.oxw();l.Q6J("loader",1==t.isLoading),l.xp6(4),l.Q6J("ngIf",!(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup)||(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.createdBy)!==t.chatService.userDetails.id),l.xp6(1),l.Q6J("ngIf",(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup)&&(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.createdBy)==t.chatService.userDetails.id),l.xp6(2),l.Q6J("ngIf",(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup)&&(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.createdBy)!==t.chatService.userDetails.id),l.xp6(1),l.Q6J("ngIf",!(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup)&&(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.users)),l.xp6(1),l.Q6J("ngIf",!(null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup)&&(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.users)),l.xp6(1),l.Q6J("ngIf",null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup),l.xp6(1),l.Q6J("ngIf",null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup),l.xp6(1),l.Q6J("ngIf",null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup),l.xp6(1),l.Q6J("ngIf",!(null!=t.chatService&&null!=t.chatService.selectedGroup&&t.chatService.selectedGroup.isGroup)),l.xp6(1),l.Q6J("ngIf",(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.isGroup)&&(null==t.chatService||null==t.chatService.selectedGroup?null:t.chatService.selectedGroup.createdBy)===t.chatService.userDetails.id)}}let Jge=(()=>{class n{constructor(t,i,r,a,u,h,m){this.commonService=t,this.chatService=i,this.formBuilder=r,this.toastrService=a,this.datepipe=u,this.apiService=h,this.bsModalService=m,this.faUserPlus=P9,this.faArrowLeft=Ds,this.isLoading=0,this.submitGroupForm=!1,this.userPlaceholder="./assets/images/placeholder-profile-img.png",this.groupPlaceholder="./assets/images/group-placeholder.jpg",this.groupImageSrc=null,this.isChangedGroupPic=!1}ngOnInit(){this.setValue(),this.commonService.getGroupDetail.subscribe(t=>{t&&(this.setValue(),this.groupImageSrc=this.commonService.copy(this.chatService.selectedGroup.groupImage),this.getFilterUserList())})}getFilterUserList(){let t=[];this.commonService.tempFriendList=[],this.chatService.selectedGroup.userList&&this.chatService.selectedGroup.userList.length>0&&this.commonService.friendList.forEach((i,r)=>{t=this.chatService.selectedGroup.userList.filter(a=>a.userId==i.userId),t&&0==t.length&&this.commonService.tempFriendList.push(i),this.commonService.friendList.length-1==r&&(this.commonService.friendList=JSON.parse(JSON.stringify(this.commonService.tempFriendList)),this.addMember.setFriendList())})}setValue(){var t,i;this.groupDetailsForm=this.formBuilder.group({groupName:[(null===(i=null===(t=this.chatService)||void 0===t?void 0:t.selectedGroup)||void 0===i?void 0:i.name)||null,[S2.required,S2.maxLength(20)]],groupImage:[null]})}get f(){return this.groupDetailsForm.controls}onSelectGroupImage(t){var i,r,a,u,h,m;if(null===(i=this.chatService)||void 0===i?void 0:i.checkExtension(null===(u=null===(a=null===(r=null==t?void 0:t.target)||void 0===r?void 0:r.files[0])||void 0===a?void 0:a.name)||void 0===u?void 0:u.split(".").pop())){this.groupDetailsForm.controls.groupImage.setValue(null===(h=null==t?void 0:t.target)||void 0===h?void 0:h.files[0]),this.isChangedGroupPic=!0;const F=new FileReader;F.readAsDataURL(null===(m=null==t?void 0:t.target)||void 0===m?void 0:m.files[0]),F.onload=b=>{this.groupImageSrc=F.result}}else this.toastrService.warning("Please select only image file")}updateGroupDetails(){var t=this;return(0,X.Z)(function*(){if(t.submitGroupForm=!0,t.groupDetailsForm.invalid)return;let i=t.chatService.selectedGroup.groupImage;t.isChangedGroupPic&&(t.isLoading=1,yield t.chatService.pushFileToStorage(t.groupDetailsForm.value.groupImage).then(r=>{i=r,t.chatService.selectedGroup.groupImage=r}).catch(r=>{console.log("error",r)})),(t.isChangedGroupPic||t.groupDetailsForm.value.groupName.trim()!==t.chatService.selectedGroup.name.trim())&&(t.isLoading=1,t.chatService.updateGroupDetails(t.chatService.selectedGroup.groupId,t.groupDetailsForm.value.groupName.trim(),i).then(r=>{!0===r&&(t.isChangedGroupPic=!1,t.chatService.selectedGroup.name=t.groupDetailsForm.value.groupName.trim(),t.submitGroupForm=!1,t.chatService.groupImageNameContent=!1,t.toastrService.success("Group details is updated")),!1===r&&t.toastrService.error("Something went wrong, Group details is not updated, Please try again"),t.isLoading=0}).catch(r=>{console.log("error",r),t.toastrService.error("Something went wrong, Group details is not updated, Please try again"),t.isLoading=0}))})()}deleteGroup(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"delete group",type:"deleteGroup"}}})}exitGroup(){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"exit group",type:"exitGroup"}}})}deleteChat(t){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"delete chat",type:"deleteChat"}}})}removeUserFromGroup(t,i){this.modalRef=this.bsModalService.show(Sa,{animated:!0,backdrop:"static",class:"modal-dialog-centered bounceIn modal-sm",initialState:{data:{title:"remove this user",type:"removeUserFromGroup",user:t,ind:i}}})}onGroupImgError(t){var i,r,a;(null===(i=this.chatService)||void 0===i?void 0:i.selectedGroup)&&(t.target.src=(null===(a=null===(r=this.chatService)||void 0===r?void 0:r.selectedGroup)||void 0===a?void 0:a.isGroup)?this.groupPlaceholder:this.userPlaceholder)}showMember(){this.getFilterUserList(),this.addMember.setFriendList(),this.commonService.openAddMember()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(H1),l.Y36(hu),l.Y36(z1),l.Y36(bi),l.Y36(H3),l.Y36(su))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-sidebar-info"]],viewQuery:function(t,i){if(1&t&&l.Gf(mee,5),2&t){let r;l.iGM(r=l.CRH())&&(i.addMember=r.first)}},decls:10,vars:3,consts:[[1,"sidebar-info-header"],[1,"sidebar-info-header-left"],["type","button",3,"click"],["viewBox","0 0 24 24","width","24","height","24",1,""],["fill","#8696a0","d","m19.1 17.2-5.3-5.3 5.3-5.3-1.8-1.8-5.3 5.4-5.3-5.3-1.8 1.7 5.3 5.3-5.3 5.3L6.7 19l5.3-5.3 5.3 5.3 1.8-1.8z"],[1,"sidebar-info-header-right"],["class","sidebar-info-main",3,"loader",4,"ngIf"],[1,"add-member","siderBarInner",3,"ngClass"],[1,"sidebar-info-main",3,"loader"],[1,"sidebar-info-main-inner"],[1,"sidebar-info-main-inner-box"],[1,"sidebar-info-main-inner-box-top"],["class","sidebar-info-main-inner-box-top-notedit",4,"ngIf"],[4,"ngIf"],[1,"sidebar-info-main-inner-box-bottom"],["class","sidebar-info-main-inner-box",4,"ngIf"],[1,"sidebar-info-main-inner-box-top-notedit"],[3,"src","error"],[3,"formGroup"],[1,"craete-group-list","list-wrap"],[1,"formGroup","imgInput"],[1,"userImg"],["onError","this.src='./assets/images/group-placeholder.jpg'","alt","Group Image",3,"src"],[1,"photo-upload"],["src","./assets/images/white-camera.svg","alt","Add Image",3,"click"],["id","group_logo","type","file","accept","image/*","onclick","this.value = null",1,"no-display","file-input",3,"change"],["groupChatPic","","imageFile",""],[1,"formGroup","nameInput"],["type","text","formControlName","groupName","placeholder","Enter Group Name",1,"formControl"],["class","error",4,"ngIf"],[1,"update-group-btn"],["type","submit",1,"btn","btn-primary","btn-sm",3,"click"],[1,"error"],[1,"group-member"],[1,"group-member-top"],["type","button",3,"click",4,"ngIf"],["class","group-member-info",4,"ngFor","ngForOf"],[1,"group-member-info"],[1,"group-member-info-left"],[1,"group-member-info-left-box"],[1,"group-member-info-left-box-img"],["onError","this.src='./assets/images/placeholder-profile-img.png'",3,"src"],[1,"group-member-info-right"],[1,"group-member-info-right-top"],[1,"group-member-info-right-top-left"],[1,"group-member-info-right-top-right"],["class","removeMember","type","button",3,"click",4,"ngIf"],["type","button",1,"removeMember",3,"click"],["type","button",1,"action-btn",3,"click"],["fill","currentColor","d","m16.6 8.1 1.2-1.2 5.1 5.1-5.1 5.1-1.2-1.2 3-3H8.7v-1.8h10.9l-3-3zM3.8 19.9h9.1c1 0 1.8-.8 1.8-1.8v-1.4h-1.8v1.4H3.8V5.8h9.1v1.4h1.8V5.8c0-1-.8-1.8-1.8-1.8H3.8C2.8 4 2 4.8 2 5.8v12.4c0 .9.8 1.7 1.8 1.7z"],["fill","currentColor","d","M6 18c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6H6v12zM19 3h-3.5l-1-1h-5l-1 1H5v2h14V3z"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"button",2),l.NdJ("click",function(){return i.commonService.closeSideBarInfo()}),l.O4$(),l.TgZ(3,"svg",3),l._UZ(4,"path",4),l.qZA(),l.qZA(),l.qZA(),l.kcU(),l.TgZ(5,"div",5),l.TgZ(6,"span"),l._uU(7),l.qZA(),l.qZA(),l.qZA(),l.YNc(8,Qge,15,11,"div",6),l._UZ(9,"app-add-member",7)),2&t&&(l.xp6(7),l.Oqu(null!=i.chatService&&null!=i.chatService.selectedGroup&&i.chatService.selectedGroup.isGroup?"Group Info":"Contact Info"),l.xp6(1),l.Q6J("ngIf",null==i.chatService||null==i.chatService.selectedGroup?null:i.chatService.selectedGroup.users),l.xp6(1),l.Q6J("ngClass",1==i.commonService.addMemberOpen?"open":""))},directives:[ai,mee,Dr,fu,Tm,Mm,R6,j3,du,rh,zt],styles:[".sidebar-info-header[_ngcontent-%COMP%]{display:flex;height:60px;padding:10px 20px 10px 10px;align-items:center;justify-content:space-between;background-color:#f0f2f5}.sidebar-info-header-left[_ngcontent-%COMP%]{flex:none;width:54px}.sidebar-info-header-left[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#54656f;vertical-align:top;flex:none;background:transparent;border:none;padding:0}.sidebar-info-header-right[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;font-size:16px;line-height:normal;text-overflow:ellipsis;white-space:nowrap;margin-top:-4px}.sidebar-info-main[_ngcontent-%COMP%]{position:relative;z-index:100;display:flex;flex:1;flex-direction:column;overflow-x:hidden;overflow-y:auto;opacity:1;background-color:#f0f2f5}.sidebar-info-main[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px!important;height:6px!important}.sidebar-info-main[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.2)!important}.sidebar-info-main[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(255,255,255,.1)}.sidebar-info-main-inner[_ngcontent-%COMP%]{flex-basis:auto;flex-shrink:0;padding-bottom:30px;flex-grow:0;transition:opacity .1s;opacity:0}.sidebar-info-main-inner-box[_ngcontent-%COMP%]{background-color:#fff;padding:24px 30px;box-shadow:0 1px 3px #0b141a14;margin-bottom:10px;position:relative;flex:none}.sidebar-info-main-inner-box-top[_ngcontent-%COMP%]{margin-bottom:15px;display:flex;justify-content:center}.sidebar-info-main-inner-box-top-notedit[_ngcontent-%COMP%]{height:200px;width:200px;border-radius:50%;position:relative}.sidebar-info-main-inner-box-top-notedit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;position:relative;display:block;width:100%;height:100%;overflow:hidden;object-fit:cover}.sidebar-info-main-inner-box-bottom[_ngcontent-%COMP%]{display:flex;min-height:0;min-width:0;align-items:center;justify-content:flex-start;flex-direction:column}.sidebar-info-main-inner-box-bottom[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-weight:400;font-size:24px;word-break:break-word;margin-bottom:0}.sidebar-info-main-inner-box-bottom[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.5;margin-top:4px;color:#667781;font-size:16px;font-weight:400}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px;line-height:normal;font-weight:400;color:#667781;margin-bottom:0;display:block}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;height:72px;pointer-events:all}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-left[_ngcontent-%COMP%]{display:flex}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-left-box[_ngcontent-%COMP%]{padding:0 15px 0 0;display:flex;flex:none;align-items:center}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-left-box-img[_ngcontent-%COMP%]{border-radius:50%;width:40px;height:40px;position:relative}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-left-box-img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-left-box-img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right[_ngcontent-%COMP%]{display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:17px;font-weight:400;line-height:normal}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right-top[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;flex-grow:1;position:relative}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right-bottom[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:20px;font-size:13px;line-height:20px;color:#667781;margin-top:2px}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right-bottom[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-grow:1;overflow:hidden;font-size:14px;font-weight:400;line-height:20px;text-overflow:ellipsis;white-space:nowrap}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-common-info-right-bottom[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-top[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:14px;line-height:normal;color:#667781;margin-bottom:0}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#e82148;font-size:14px}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;height:72px;pointer-events:all}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-left[_ngcontent-%COMP%]{display:flex}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-left-box[_ngcontent-%COMP%]{padding:0 15px 0 0;display:flex;flex:none;align-items:center}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-left-box-img[_ngcontent-%COMP%]{border-radius:50%;width:40px;height:40px;position:relative}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-left-box-img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;align-items:center;justify-content:center;width:100%;height:100%}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-left-box-img[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;width:100%;height:100%;object-fit:cover}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right[_ngcontent-%COMP%]{display:flex;flex-basis:auto;flex-direction:column;flex-grow:1;justify-content:center;min-width:0}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right-top[_ngcontent-%COMP%]{display:flex;align-items:center;line-height:normal}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right-top-left[_ngcontent-%COMP%]{display:flex;flex-grow:1;overflow:hidden;font-size:17px;font-weight:400;line-height:normal}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right-top-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;flex-grow:1;position:relative}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right-top-right[_ngcontent-%COMP%]{overflow:hidden;line-height:14px;text-overflow:ellipsis;white-space:nowrap;flex:none;max-width:100%;font-size:12px;color:#667781;margin-top:0;margin-left:6px}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right-top-right[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:1px 5px;border-radius:3px;display:inline-block;font-size:11px;line-height:14px;color:#e82148;background-color:#f27d94;border:1px solid #f27d94}.sidebar-info-main-inner-box[_ngcontent-%COMP%]   .group-member-info-right-top-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:3px 6px;border-radius:3px;display:inline-block;font-size:11px;line-height:14px;color:#f64e60;background-color:#ffe2e5;border:none}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;color:red;background:transparent;padding:0;border:none}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:15px}form[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]{margin:0 0 20px}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;border-radius:50%;margin:0 auto}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]{position:absolute;right:15px;bottom:15px;background-color:#000000b3;display:flex;align-items:center;justify-content:center;padding:10px;border-radius:50%;cursor:pointer}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 auto;width:20px}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload.custom-cursor[_ngcontent-%COMP%]{pointer-events:none}form[_ngcontent-%COMP%]   .formGroup.imgInput[_ngcontent-%COMP%]   .userImg[_ngcontent-%COMP%]   .photo-upload.upload-g-picture[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{cursor:pointer}form[_ngcontent-%COMP%]   .formGroup.nameInput[_ngcontent-%COMP%]{margin:20px 0 0}form[_ngcontent-%COMP%]   .formGroup.nameInput[_ngcontent-%COMP%]   .formControl[_ngcontent-%COMP%]{background-color:transparent;border-radius:0;border:none;border-bottom:1px solid #f0f2f5;padding:5px 0;text-align:center;font-size:24px;width:100%}form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:12px}form[_ngcontent-%COMP%]   .update-group-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px}.siderBarInner[_ngcontent-%COMP%]{position:absolute;right:-100%;top:0;bottom:0;width:100%;height:100%;transition:.3s all;background-color:#fff;z-index:100}.siderBarInner.open[_ngcontent-%COMP%]{right:0}"]}),n})();function Xge(n,e){if(1&n&&(l.TgZ(0,"div",3),l._UZ(1,"app-sidebar",4),l._UZ(2,"app-content",5),l._UZ(3,"app-sidebar-info",6),l.qZA()),2&n){const t=l.oxw();l.Q6J("ngClass",1==t.commonService.sideBarInfoOpen?"three":"two"),l.xp6(1),l.Q6J("ngClass",1==t.commonService.chatRoomOpen?"close":""),l.xp6(2),l.Q6J("ngClass",1==t.commonService.sideBarInfoOpen?"open":"")}}function eCe(n,e){1&n&&(l.TgZ(0,"div",7),l.TgZ(1,"div",8),l._UZ(2,"img",9),l.qZA(),l.qZA())}let tCe=(()=>{class n{constructor(t,i,r,a,u,h){this.commonService=t,this.route=i,this.toasterService=r,this.chatService=a,this.changeRef=u,this.apiService=h,this.title="auxano-chatroom",this.isLoading=0,this.isValidChatRoom=1,this.faUserPlus=P9,this.faArrowLeft=Ds,this.querySub=this.route.queryParams.subscribe(m=>{m.userId&&(this.commonService.queryParams.userId=m.userId),m.userId?this.getUserDetails():this.isValidChatRoom=0})}ngOnInit(){}getUserDetails(){this.apiService.callApiRequest(vn.GET_USER,{id:this.commonService.queryParams.userId}).subscribe(t=>{t.status?(this.isValidChatRoom=1,this.chatService.userDetails=t.result.users,this.changeRef.detectChanges()):this.isValidChatRoom=0},t=>{this.toasterService.error(t.error.error.msg)})}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ma),l.Y36(s2),l.Y36(z1),l.Y36(H1),l.Y36(l.sBO),l.Y36(H3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[[1,"container"],["class","chat-box",3,"ngClass",4,"ngIf"],["class","chat-box",4,"ngIf"],[1,"chat-box",3,"ngClass"],[1,"sidebar",3,"ngClass"],[1,"content"],[1,"sidebar-info",3,"ngClass"],[1,"chat-box"],[1,"box-empty"],["src","./assets/images/invalid-user.svg","width","100%","height","100%"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l.YNc(1,Xge,4,3,"div",1),l.YNc(2,eCe,3,0,"div",2),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",i.isValidChatRoom),l.xp6(1),l.Q6J("ngIf",!i.isValidChatRoom))},directives:[ai,Dr,Gme,Dge,Jge],styles:[".box-empty[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#fff;display:flex;align-items:center;justify-content:center;flex-flow:column}"]}),n})(),nCe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[],imports:[[L5],oX,aX]}),n})(),iCe=(()=>{class n{constructor(t,i){this.router=t,this.commonService=i}intercept(t,i){let r=localStorage.getItem("vPoolAccessToken")||"";return t=t.clone({headers:t.headers.set("Authorization","Bearer "+r)}),i.handle(t).pipe((0,Rn.b)(a=>{},a=>{}))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ir),l.LFG(Ma))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function gee(){return"undefined"!=typeof window&&void 0!==window.document}function OR(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Cu(n){switch(n.length){case 0:return new Xd;case 1:return n[0];default:return new MQ(n)}}function Cee(n,e,t,i,r={},a={}){const u=[],h=[];let m=-1,F=null;if(i.forEach(b=>{const M=b.offset,k=M==m,A=k&&F||{};Object.keys(b).forEach(P=>{let j=P,K=b[P];if("offset"!==P)switch(j=e.normalizePropertyName(j,u),K){case"!":K=r[P];break;case ic:K=a[P];break;default:K=e.normalizeStyleValue(P,j,K,u)}A[j]=K}),k||h.push(A),F=A,m=M}),u.length){const b="\n - ";throw new Error(`Unable to animate due to the following errors:${b}${u.join(b)}`)}return h}function RR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&zR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&zR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&zR(t,"destroy",n)))}}function zR(n,e,t){const i=t.totalTime,a=HR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function HR(n,e,t,i,r="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:a,disabled:!!u}}function To(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function _ee(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let BR=(n,e)=>!1,jR=(n,e)=>!1,Fee=(n,e,t)=>[];const yee=OR();(yee||"undefined"!=typeof Element)&&(BR=gee()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),jR=(()=>{if(yee||Element.prototype.matches)return(n,e)=>n.matches(e);{const n=Element.prototype,e=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return e?(t,i)=>e.apply(t,[i]):jR}})(),Fee=(n,e,t)=>{let i=[];if(t){const r=n.querySelectorAll(e);for(let a=0;a<r.length;a++)i.push(r[a])}else{const r=n.querySelector(e);r&&i.push(r)}return i});let U6=null,vee=!1;function UR(n){U6||(U6=("undefined"!=typeof document?document.body:null)||{},vee=!!U6.style&&"WebkitAppearance"in U6.style);let e=!0;return U6.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in U6.style,!e&&vee&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in U6.style)),e}const GR=jR,qR=BR,$R=Fee;function wee(n){const e={};return Object.keys(n).forEach(t=>{const i=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=n[t]}),e}let bee=(()=>{class n{validateStyleProperty(t){return UR(t)}matchesElement(t,i){return GR(t,i)}containsElement(t,i){return qR(t,i)}query(t,i,r){return $R(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,a,u,h=[],m){return new Xd(r,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),WR=(()=>{class n{}return n.NOOP=new bee,n})();const ZR="ng-enter",ZE="ng-leave",KE="ng-trigger",YE=".ng-trigger",Mee="ng-animating",KR=".ng-animating";function G6(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:YR(parseFloat(e[1]),e[2])}function YR(n,e){switch(e){case"s":return 1e3*n;default:return n}}function QE(n,e,t){return n.hasOwnProperty("duration")?n:function(n,e,t){let r,a=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};r=YR(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(a=YR(parseFloat(m),h[4]));const F=h[5];F&&(u=F)}else r=n;if(!t){let h=!1,m=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(m,0,`The provided timing value "${n}" is invalid.`)}return{duration:r,delay:a,easing:u}}(n,e,t)}function uh(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function _u(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else uh(n,t);return t}function Dee(n,e,t){return t?e+":"+t+";":""}function kee(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Dee(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Dee(0,dCe(t),n.style[t]));n.setAttribute("style",e)}function G3(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=JR(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),OR()&&kee(n))}function q6(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=JR(t);n.style[i]=""}),OR()&&kee(n))}function Rm(n){return Array.isArray(n)?1==n.length?n[0]:wQ(n):n}const QR=new RegExp("{{\\s*(.+?)\\s*}}","g");function xee(n){let e=[];if("string"==typeof n){let t;for(;t=QR.exec(n);)e.push(t[1]);QR.lastIndex=0}return e}function JE(n,e,t){const i=n.toString(),r=i.replace(QR,(a,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return r==i?n:r}function XE(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const uCe=/-+([a-z0-9])/g;function JR(n){return n.replace(uCe,(...e)=>e[1].toUpperCase())}function dCe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nee(n,e){return 0===n||0===e}function Tee(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let a=e[0],u=[];if(i.forEach(h=>{a.hasOwnProperty(h)||u.push(h),a[h]=t[h]}),u.length)for(var r=1;r<e.length;r++){let h=e[r];u.forEach(function(m){h[m]=XR(n,m)})}}return e}function Ao(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function XR(n,e){return window.getComputedStyle(n)[e]}function hCe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function(n,e,t){if(":"==n[0]){const m=function(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const r=i[1],a=i[2],u=i[3];e.push(Aee(r,u));"<"==a[0]&&!("*"==r&&"*"==u)&&e.push(Aee(u,r))}(i,t,e)):t.push(n),t}const tM=new Set(["true","1"]),nM=new Set(["false","0"]);function Aee(n,e){const t=tM.has(n)||nM.has(n),i=tM.has(e)||nM.has(e);return(r,a)=>{let u="*"==n||n==r,h="*"==e||e==a;return!u&&t&&"boolean"==typeof r&&(u=r?tM.has(n):nM.has(n)),!h&&i&&"boolean"==typeof a&&(h=a?tM.has(e):nM.has(e)),u&&h}}const mCe=new RegExp("s*:selfs*,?","g");function ez(n,e,t){return new gCe(n).build(e,t)}class gCe{constructor(e){this._driver=e}build(e,t){const i=new FCe(t);return this._resetContextStyleTimingState(i),Ao(this,Rm(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,F=m.name;F.toString().split(/\s*,\s*/).forEach(b=>{m.name=b,a.push(this.visitState(m,t))}),m.name=F}else if(1==h.type){const m=this.visitTransition(h,t);i+=m.queryCount,r+=m.depCount,u.push(m)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:u,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const a=new Set,u=r||{};if(i.styles.forEach(h=>{if(iM(h)){const m=h;Object.keys(m).forEach(F=>{xee(m[F]).forEach(b=>{u.hasOwnProperty(b)||a.add(b)})})}}),a.size){const h=XE(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Ao(this,Rm(e.animation),t);return{type:1,matchers:hCe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:$6(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Ao(this,i,t)),options:$6(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const a=e.steps.map(u=>{t.currentTime=i;const h=Ao(this,u,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:a,options:$6(e.options)}}visitAnimate(e,t){const i=function(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return tz(QE(n,e).duration,0,"");const i=n;if(i.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=tz(0,0,"");return a.dynamic=!0,a.strValue=i,a}return t=t||QE(i,e),tz(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,a=e.styles?e.styles:Fm({});if(5==a.type)r=this.visitKeyframes(a,t);else{let u=e.styles,h=!1;if(!u){h=!0;const F={};i.easing&&(F.easing=i.easing),u=Fm(F)}t.currentTime+=i.duration+i.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,r=m}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==ic?i.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):i.push(u)}):i.push(e.styles);let r=!1,a=null;return i.forEach(u=>{if(iM(u)){const h=u,m=h.easing;if(m&&(a=m,delete h.easing),!r)for(let F in h)if(h[F].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:a,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,a=t.currentTime;i&&a>0&&(a-=i.duration+i.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const m=t.collectedStyles[t.currentQuerySelector],F=m[h];let b=!0;F&&(a!=r&&a>=F.startTime&&r<=F.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${F.startTime}ms" and "${F.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${r}ms"`),b=!1),a=F.startTime),b&&(m[h]={startTime:a,endTime:r}),t.options&&function(n,e,t){const i=e.params||{},r=xee(n);r.length&&r.forEach(a=>{i.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),i;let a=0;const u=[];let h=!1,m=!1,F=0;const b=e.steps.map(he=>{const be=this._makeStyleAst(he,t);let ye=null!=be.offset?be.offset:function(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(iM(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(iM(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(be.styles),Ae=0;return null!=ye&&(a++,Ae=be.offset=ye),m=m||Ae<0||Ae>1,h=h||Ae<F,F=Ae,u.push(Ae),be});m&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const M=e.steps.length;let k=0;a>0&&a<M?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(k=1/(M-1));const A=M-1,P=t.currentTime,j=t.currentAnimateTimings,K=j.duration;return b.forEach((he,be)=>{const ye=k>0?be==A?1:k*be:u[be],Ae=ye*K;t.currentTime=P+j.delay+Ae,j.duration=Ae,this._validateStyleAst(he,t),he.offset=ye,i.styles.push(he)}),i}visitReference(e,t){return{type:8,animation:Ao(this,Rm(e.animation),t),options:$6(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$6(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$6(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(mCe,"")),[n=n.replace(/@\*/g,YE).replace(/@\w+/g,t=>YE+"-"+t.substr(1)).replace(/:animating/g,KR),e]}(e.selector);t.currentQuerySelector=i.length?i+" "+a:a,To(t.collectedStyles,t.currentQuerySelector,{});const h=Ao(this,Rm(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:a,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:$6(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:QE(e.timings,t.errors,!0);return{type:12,animation:Ao(this,Rm(e.animation),t),timings:i,options:null}}}class FCe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function iM(n){return!Array.isArray(n)&&"object"==typeof n}function $6(n){return n?(n=uh(n)).params&&(n.params=function(n){return n?uh(n):null}(n.params)):n={},n}function tz(n,e,t){return{duration:n,delay:e,easing:t}}function nz(n,e,t,i,r,a,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:a,totalTime:r+a,easing:u,subTimeline:h}}class rM{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const ECe=new RegExp(":enter","g"),SCe=new RegExp(":leave","g");function iz(n,e,t,i,r,a={},u={},h,m,F=[]){return(new DCe).buildKeyframes(n,e,t,i,r,a,u,h,m,F)}class DCe{buildKeyframes(e,t,i,r,a,u,h,m,F,b=[]){F=F||new rM;const M=new rz(e,t,F,r,a,b,[]);M.options=m,M.currentTimeline.setStyles([u],null,M.errors,m),Ao(this,i,M);const k=M.timelines.filter(A=>A.containsAnimation());if(k.length&&Object.keys(h).length){const A=k[k.length-1];A.allowOnlyTimelineStyles()||A.setStyles([h],null,M.errors,m)}return k.length?k.map(A=>A.buildKeyframes()):[nz(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.consume(t.element);if(i){const r=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(i,r,r.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let a=t.currentTimeline.currentTime;const u=null!=i.duration?G6(i.duration):null,h=null!=i.delay?G6(i.delay):null;return 0!==u&&e.forEach(m=>{const F=t.appendInstructionToTimeline(m,u,h);a=Math.max(a,F.duration+F.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Ao(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const a=e.options;if(a&&(a.params||a.delay)&&(r=t.createSubContext(a),r.transformIntoNewTimeline(),null!=a.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=sM);const u=G6(a.delay);r.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ao(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?G6(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),Ao(this,u,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return QE(t.params?JE(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(i.duration),this.visitStyle(a,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const a=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(a):i.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,a=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*a),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+a),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},a=r.delay?G6(r.delay):0;a&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=sM);let u=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((F,b)=>{t.currentQueryIndex=b;const M=t.createSubContext(e.options,F);a&&M.delayNextStep(a),F===t.element&&(m=M.currentTimeline),Ao(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":m=h-m;break;case"full":m=i.currentStaggerTime}const b=t.currentTimeline;m&&b.delayNextStep(m);const M=b.currentTime;Ao(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-M+(r.startTime-i.currentTimeline.startTime)}}const sM={};class rz{constructor(e,t,i,r,a,u,h,m){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=a,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=sM,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new oM(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=G6(i.duration)),null!=i.delay&&(r.delay=G6(i.delay));const a=i.params;if(a){let u=r.params;u||(u=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=JE(a[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,a=new rz(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=sM,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},a=new kCe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(a),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,a,u){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(ECe,"."+this._enterClassName)).replace(SCe,"."+this._leaveClassName);let F=this._driver.query(this.element,e,1!=i);0!==i&&(F=i<0?F.slice(F.length+i,F.length):F.slice(0,i)),h.push(...F)}return!a&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class oM{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new oM(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||ic,this._currentKeyframe[t]=ic}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const a=r&&r.params||{},u=function(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(a=>{t[a]=ic})):_u(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const m=JE(u[h],a,i);this._pendingStyles[h]=m,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:ic),this._updateStyle(h,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,m)=>{const F=_u(h,!0);Object.keys(F).forEach(b=>{const M=F[b];"!"==M?e.add(b):M==ic&&t.add(b)}),i||(F.offset=m/this.duration),r.push(F)});const a=e.size?XE(e.values()):[],u=t.size?XE(t.values()):[];if(i){const h=r[0],m=uh(h);h.offset=0,m.offset=1,r=[h,m]}return nz(this.element,r,a,u,this.duration,this.startTime,this.easing,!1)}}class kCe extends oM{constructor(e,t,i,r,a,u,h=!1){super(e,t,u.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=i+t,h=t/u,m=_u(e[0],!1);m.offset=0,a.push(m);const F=_u(e[0],!1);F.offset=Pee(h),a.push(F);const b=e.length-1;for(let M=1;M<=b;M++){let k=_u(e[M],!1);k.offset=Pee((t+k.offset*i)/u),a.push(k)}i=u,t=0,r="",e=a}return nz(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function Pee(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sz{}class NCe extends sz{normalizePropertyName(e,t){return JR(e)}normalizeStyleValue(e,t,i,r){let a="";const u=i.toString().trim();if(TCe[t]&&0!==i&&"0"!==i)if("number"==typeof i)a="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(`Please provide a CSS unit value for ${e}:${i}`)}return u+a}}const TCe=(()=>function(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Vee(n,e,t,i,r,a,u,h,m,F,b,M,k){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:a,toState:i,toStyles:u,timelines:h,queriedElements:m,preStyleProps:F,postStyleProps:b,totalTime:M,errors:k}}const oz={};class Oee{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function(n,e,t,i,r){return n.some(a=>a(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],a=this._stateStyles[e],u=r?r.buildStyles(t,i):{};return a?a.buildStyles(t,i):u}build(e,t,i,r,a,u,h,m,F,b){const M=[],k=this.ast.options&&this.ast.options.params||oz,P=this.buildStyles(i,h&&h.params||oz,M),j=m&&m.params||oz,K=this.buildStyles(r,j,M),he=new Set,be=new Map,ye=new Map,Ae="void"===r,ze={params:Object.assign(Object.assign({},k),j)},ut=b?[]:iz(e,t,this.ast.animation,a,u,P,K,ze,F,M);let Et=0;if(ut.forEach(Gt=>{Et=Math.max(Gt.duration+Gt.delay,Et)}),M.length)return Vee(t,this._triggerName,i,r,Ae,P,K,[],[],be,ye,Et,M);ut.forEach(Gt=>{const ki=Gt.element,ka=To(be,ki,{});Gt.preStyleProps.forEach(u1=>ka[u1]=!0);const x2=To(ye,ki,{});Gt.postStyleProps.forEach(u1=>x2[u1]=!0),ki!==t&&he.add(ki)});const Sn=XE(he.values());return Vee(t,this._triggerName,i,r,Ae,P,K,ut,Sn,be,ye,Et)}}class LCe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=uh(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(r[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(h=>{let m=u[h];m.length>1&&(m=JE(m,r,t));const F=this.normalizer.normalizePropertyName(h,t);m=this.normalizer.normalizeStyleValue(h,F,m,t),i[F]=m})}}),i}}class VCe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new LCe(r.style,r.options&&r.options.params||{},i)}),Ree(this.states,"true","1"),Ree(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Oee(e,r,this.states))}),this.fallbackTransition=function(n,e,t){return new Oee(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(u=>u.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Ree(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const RCe=new rM;class zCe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],r=ez(this._driver,t,i);if(i.length)throw new Error(`Unable to build the animation due to the following errors: ${i.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,i){const r=e.element,a=Cee(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],a=this._animations[e];let u;const h=new Map;if(a?(u=iz(this._driver,t,a,ZR,ZE,{},{},i,RCe,r),u.forEach(b=>{const M=To(h,b.element,{});b.postStyleProps.forEach(k=>M[k]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),u=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);h.forEach((b,M)=>{Object.keys(b).forEach(k=>{b[k]=this._driver.computeStyle(M,k,ic)})});const F=Cu(u.map(b=>{const M=h.get(b.element);return this._buildPlayer(b,{},M)}));return this._playersById[e]=F,F.onDestroy(()=>this.destroy(e)),this.players.push(F),F}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,i,r){const a=HR(t,"","","");return RR(this._getPlayer(e),i,a,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const a=this._getPlayer(e);switch(i){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const zee="ng-animate-queued",Hee="ng-animate-disabled",Bee=".ng-animate-disabled",UCe=[],jee={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},GCe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},D2="__ng_removed";class az{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(i?e.value:e),i){const a=uh(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const zm="void",cz=new az(zm);class qCe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,k2(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${i}" because the animation trigger "${t}" doesn't exist!`);if(null==i||0==i.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(i))throw new Error(`The provided animation trigger event "${i}" for the animation trigger "${t}" is not supported!`);const a=To(this._elementListeners,e,[]),u={name:t,phase:i,callback:r};a.push(u);const h=To(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(k2(e,KE),k2(e,KE+"-"+t),h[t]=cz),()=>{this._engine.afterFlush(()=>{const m=a.indexOf(u);m>=0&&a.splice(m,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,i,r=!0){const a=this._getTrigger(t),u=new lz(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(k2(e,KE),k2(e,KE+"-"+t),this._engine.statesByElement.set(e,h={}));let m=h[t];const F=new az(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&F.absorbOptions(m.options),h[t]=F,m||(m=cz),F.value!==zm&&m.value===F.value){if(!function(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const a=t[r];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(m.params,F.params)){const j=[],K=a.matchStyles(m.value,m.params,j),he=a.matchStyles(F.value,F.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{q6(e,K),G3(e,he)})}return}const k=To(this._engine.playersByElement,e,[]);k.forEach(j=>{j.namespaceId==this.id&&j.triggerName==t&&j.queued&&j.destroy()});let A=a.matchTransition(m.value,F.value,e,F.params),P=!1;if(!A){if(!r)return;A=a.fallbackTransition,P=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:A,fromState:m,toState:F,player:u,isFallbackTransition:P}),P||(k2(e,zee),u.onStart(()=>{dh(e,zee)})),u.onDone(()=>{let j=this.players.indexOf(u);j>=0&&this.players.splice(j,1);const K=this._engine.playersByElement.get(e);if(K){let he=K.indexOf(u);he>=0&&K.splice(he,1)}}),this.players.push(u),k.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,YE,!0);i.forEach(r=>{if(r[D2])return;const a=this._engine.fetchNamespacesByElement(r);a.size?a.forEach(u=>u.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const a=this._engine.statesByElement.get(e);if(a){const u=[];if(Object.keys(a).forEach(h=>{if(this._triggers[h]){const m=this.trigger(e,h,zm,r);m&&u.push(m)}}),u.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),i&&Cu(u).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(a=>{const u=a.name;if(r.has(u))return;r.add(u);const m=this._triggers[u].fallbackTransition,F=i[u]||cz,b=new az(zm),M=new lz(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:F,toState:b,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const a=i.players.length?i.playersByQueriedElement.get(e):[];if(a&&a.length)r=!0;else{let u=e;for(;u=u.parentNode;)if(i.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const a=e[D2];(!a||a===jee)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){k2(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const a=i.element,u=this._elementListeners.get(a);u&&u.forEach(h=>{if(h.name==i.triggerName){const m=HR(a,i.triggerName,i.fromState.value,i.toState.value);m._data=e,RR(i.player,h.phase,m,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const a=i.transition.ast.depCount,u=r.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class $Ce{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new qCe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList.length-1;if(i>=0){let r=!1;for(let a=i;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let a=0;a<r.length;a++){const u=i[r[a]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,i,r){if(aM(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!aM(t))return;const a=t[D2];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),k2(e,Hee)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dh(e,Hee))}removeNode(e,t,i,r){if(aM(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r){this.collectedLeaveElements.push(t),t[D2]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1}}listen(e,t,i,r,a){return aM(t)?this._fetchNamespace(e).listen(t,i,r,a):()=>{}}_buildInstruction(e,t,i,r,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,YE,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,KR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Cu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[D2];if(t&&t.setForRemoval){if(e[D2]=jee,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Bee)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Bee,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)k2(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Cu(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const i=new rM,r=[],a=new Map,u=[],h=new Map,m=new Map,F=new Map,b=new Set;this.disabledNodes.forEach(Xe=>{b.add(Xe);const ct=this.driver.query(Xe,".ng-animate-queued",!0);for(let Mt=0;Mt<ct.length;Mt++)b.add(ct[Mt])});const M=this.bodyNode,k=Array.from(this.statesByElement.keys()),A=qee(k,this.collectedEnterElements),P=new Map;let j=0;A.forEach((Xe,ct)=>{const Mt=ZR+j++;P.set(ct,Mt),Xe.forEach(_n=>k2(_n,Mt))});const K=[],he=new Set,be=new Set;for(let Xe=0;Xe<this.collectedLeaveElements.length;Xe++){const ct=this.collectedLeaveElements[Xe],Mt=ct[D2];Mt&&Mt.setForRemoval&&(K.push(ct),he.add(ct),Mt.hasAnimation?this.driver.query(ct,".ng-star-inserted",!0).forEach(_n=>he.add(_n)):be.add(ct))}const ye=new Map,Ae=qee(k,Array.from(he));Ae.forEach((Xe,ct)=>{const Mt=ZE+j++;ye.set(ct,Mt),Xe.forEach(_n=>k2(_n,Mt))}),e.push(()=>{A.forEach((Xe,ct)=>{const Mt=P.get(ct);Xe.forEach(_n=>dh(_n,Mt))}),Ae.forEach((Xe,ct)=>{const Mt=ye.get(ct);Xe.forEach(_n=>dh(_n,Mt))}),K.forEach(Xe=>{this.processLeaveNode(Xe)})});const ze=[],ut=[];for(let Xe=this._namespaceList.length-1;Xe>=0;Xe--)this._namespaceList[Xe].drainQueuedTransitions(t).forEach(Mt=>{const _n=Mt.player,Wr=Mt.element;if(ze.push(_n),this.collectedEnterElements.length){const $3=Wr[D2];if($3&&$3.setForMove)return void _n.destroy()}const q3=!M||!this.driver.containsElement(M,Wr),Io=ye.get(Wr),yu=P.get(Wr),Oi=this._buildInstruction(Mt,i,yu,Io,q3);if(Oi.errors&&Oi.errors.length)ut.push(Oi);else{if(q3)return _n.onStart(()=>q6(Wr,Oi.fromStyles)),_n.onDestroy(()=>G3(Wr,Oi.toStyles)),void r.push(_n);if(Mt.isFallbackTransition)return _n.onStart(()=>q6(Wr,Oi.fromStyles)),_n.onDestroy(()=>G3(Wr,Oi.toStyles)),void r.push(_n);Oi.timelines.forEach($3=>$3.stretchStartingKeyframe=!0),i.append(Wr,Oi.timelines),u.push({instruction:Oi,player:_n,element:Wr}),Oi.queriedElements.forEach($3=>To(h,$3,[]).push(_n)),Oi.preStyleProps.forEach(($3,Bm)=>{const fM=Object.keys($3);if(fM.length){let W6=m.get(Bm);W6||m.set(Bm,W6=new Set),fM.forEach(mz=>W6.add(mz))}}),Oi.postStyleProps.forEach(($3,Bm)=>{const fM=Object.keys($3);let W6=F.get(Bm);W6||F.set(Bm,W6=new Set),fM.forEach(mz=>W6.add(mz))})}});if(ut.length){const Xe=[];ut.forEach(ct=>{Xe.push(`@${ct.triggerName} has failed due to:\n`),ct.errors.forEach(Mt=>Xe.push(`- ${Mt}\n`))}),ze.forEach(ct=>ct.destroy()),this.reportError(Xe)}const Et=new Map,Sn=new Map;u.forEach(Xe=>{const ct=Xe.element;i.has(ct)&&(Sn.set(ct,ct),this._beforeAnimationBuild(Xe.player.namespaceId,Xe.instruction,Et))}),r.forEach(Xe=>{const ct=Xe.element;this._getPreviousPlayers(ct,!1,Xe.namespaceId,Xe.triggerName,null).forEach(_n=>{To(Et,ct,[]).push(_n),_n.destroy()})});const Gt=K.filter(Xe=>Wee(Xe,m,F)),ki=new Map;Gee(ki,this.driver,be,F,ic).forEach(Xe=>{Wee(Xe,m,F)&&Gt.push(Xe)});const x2=new Map;A.forEach((Xe,ct)=>{Gee(x2,this.driver,new Set(Xe),m,"!")}),Gt.forEach(Xe=>{const ct=ki.get(Xe),Mt=x2.get(Xe);ki.set(Xe,Object.assign(Object.assign({},ct),Mt))});const u1=[],Fu=[],Hm={};u.forEach(Xe=>{const{element:ct,player:Mt,instruction:_n}=Xe;if(i.has(ct)){if(b.has(ct))return Mt.onDestroy(()=>G3(ct,_n.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(_n.totalTime),void r.push(Mt);let Wr=Hm;if(Sn.size>1){let Io=ct;const yu=[];for(;Io=Io.parentNode;){const Oi=Sn.get(Io);if(Oi){Wr=Oi;break}yu.push(Io)}yu.forEach(Oi=>Sn.set(Oi,Wr))}const q3=this._buildAnimation(Mt.namespaceId,_n,Et,a,x2,ki);if(Mt.setRealPlayer(q3),Wr===Hm)u1.push(Mt);else{const Io=this.playersByElement.get(Wr);Io&&Io.length&&(Mt.parentPlayer=Cu(Io)),r.push(Mt)}}else q6(ct,_n.fromStyles),Mt.onDestroy(()=>G3(ct,_n.toStyles)),Fu.push(Mt),b.has(ct)&&r.push(Mt)}),Fu.forEach(Xe=>{const ct=a.get(Xe.element);if(ct&&ct.length){const Mt=Cu(ct);Xe.setRealPlayer(Mt)}}),r.forEach(Xe=>{Xe.parentPlayer?Xe.syncPlayerEvents(Xe.parentPlayer):Xe.destroy()});for(let Xe=0;Xe<K.length;Xe++){const ct=K[Xe],Mt=ct[D2];if(dh(ct,ZE),Mt&&Mt.hasAnimation)continue;let _n=[];if(h.size){let q3=h.get(ct);q3&&q3.length&&_n.push(...q3);let Io=this.driver.query(ct,KR,!0);for(let yu=0;yu<Io.length;yu++){let Oi=h.get(Io[yu]);Oi&&Oi.length&&_n.push(...Oi)}}const Wr=_n.filter(q3=>!q3.destroyed);Wr.length?YCe(this,ct,Wr):this.processLeaveNode(ct)}return K.length=0,u1.forEach(Xe=>{this.players.push(Xe),Xe.onDone(()=>{Xe.destroy();const ct=this.players.indexOf(Xe);this.players.splice(ct,1)}),Xe.play()}),u1}elementContainsData(e,t){let i=!1;const r=t[D2];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,a){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!a||a==zm;h.forEach(F=>{F.queued||!m&&F.triggerName!=r||u.push(F)})}}return(i||r)&&(u=u.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),u}_beforeAnimationBuild(e,t,i){const a=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const F=m.element,b=F!==a,M=To(i,F,[]);this._getPreviousPlayers(F,b,u,h,t.toState).forEach(A=>{const P=A.getRealPlayer();P.beforeDestroy&&P.beforeDestroy(),A.destroy(),M.push(A)})}q6(a,t.fromStyles)}_buildAnimation(e,t,i,r,a,u){const h=t.triggerName,m=t.element,F=[],b=new Set,M=new Set,k=t.timelines.map(P=>{const j=P.element;b.add(j);const K=j[D2];if(K&&K.removedBeforeQueried)return new Xd(P.duration,P.delay);const he=j!==m,be=function(n){const e=[];return $ee(n,e),e}((i.get(j)||UCe).map(Et=>Et.getRealPlayer())).filter(Et=>!!Et.element&&Et.element===j),ye=a.get(j),Ae=u.get(j),ze=Cee(0,this._normalizer,0,P.keyframes,ye,Ae),ut=this._buildPlayer(P,ze,be);if(P.subTimeline&&r&&M.add(j),he){const Et=new lz(e,h,j);Et.setRealPlayer(ut),F.push(Et)}return ut});F.forEach(P=>{To(this.playersByQueriedElement,P.element,[]).push(P),P.onDone(()=>function(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,P.element,P))}),b.forEach(P=>k2(P,Mee));const A=Cu(k);return A.onDestroy(()=>{b.forEach(P=>dh(P,Mee)),G3(m,t.toStyles)}),M.forEach(P=>{To(r,P,[]).push(A)}),A}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Xd(e.duration,e.delay)}}class lz{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Xd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>RR(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){To(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function aM(n){return n&&1===n.nodeType}function Uee(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Gee(n,e,t,i,r){const a=[];t.forEach(m=>a.push(Uee(m)));const u=[];i.forEach((m,F)=>{const b={};m.forEach(M=>{const k=b[M]=e.computeStyle(F,M,r);(!k||0==k.length)&&(F[D2]=GCe,u.push(F))}),n.set(F,b)});let h=0;return t.forEach(m=>Uee(m,a[h++])),u}function qee(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=new Set(e),a=new Map;function u(h){if(!h)return 1;let m=a.get(h);if(m)return m;const F=h.parentNode;return m=t.has(F)?F:r.has(F)?1:u(F),a.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}const cM="$$classes";function k2(n,e){if(n.classList)n.classList.add(e);else{let t=n[cM];t||(t=n[cM]={}),t[e]=!0}}function dh(n,e){if(n.classList)n.classList.remove(e);else{let t=n[cM];t&&delete t[e]}}function YCe(n,e,t){Cu(t).onDone(()=>n.processLeaveNode(e))}function $ee(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof MQ?$ee(i.players,e):e.push(i)}}function Wee(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(a=>r.add(a)):e.set(n,i),t.delete(n),!0}class lM{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,a)=>{},this._transitionEngine=new $Ce(e,t,i),this._timelineEngine=new zCe(e,t,i),this._transitionEngine.onRemovalComplete=(r,a)=>this.onRemovalComplete(r,a)}registerTrigger(e,t,i,r,a){const u=e+"-"+r;let h=this._triggerCache[u];if(!h){const m=[],F=ez(this._driver,a,m);if(m.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);h=function(n,e,t){return new VCe(n,e,t)}(r,F,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[a,u]=_ee(i);this._timelineEngine.command(a,t,u,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,a){if("@"==i.charAt(0)){const[u,h]=_ee(i);return this._timelineEngine.listen(u,t,h,a)}return this._transitionEngine.listen(e,t,i,r,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Zee(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=uz(e[0]),e.length>1&&(i=uz(e[e.length-1]))):e&&(t=uz(e)),t||i?new XCe(n,t,i):null}let XCe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&G3(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(G3(this._element,this._initialStyles),this._endStyles&&(G3(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(q6(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(q6(this._element,this._endStyles),this._endStyles=null),G3(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function uz(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];e_e(r)&&(e=e||{},e[r]=n[r])}return e}function e_e(n){return"display"===n||"position"===n}const Yee="animationend";class i_e{constructor(e,t,i,r,a,u,h){this._element=e,this._name=t,this._duration=i,this._delay=r,this._easing=a,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function(n,e){const t=hz(n,"").trim();let i=0;t.length&&(function(n,e){let t=0;for(let i=0;i<n.length;i++)","===n.charAt(i)&&t++;return t}(t)+1,e=`${t}, ${e}`),uM(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Xee(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Qee(this._element,this._name,"paused")}resume(){Qee(this._element,this._name,"running")}setPosition(e){const t=Jee(this._element,this._name);this._position=e*this._duration,uM(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),i=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&i>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Xee(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,e){const i=hz(n,"").split(","),r=dz(i,e);r>=0&&(i.splice(r,1),uM(n,"",i.join(",")))}(this._element,this._name))}}function Qee(n,e,t){uM(n,"PlayState",t,Jee(n,e))}function Jee(n,e){const t=hz(n,"");return t.indexOf(",")>0?dz(t.split(","),e):dz([t],e)}function dz(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function Xee(n,e,t){t?n.removeEventListener(Yee,e):n.addEventListener(Yee,e)}function uM(n,e,t,i){const r="animation"+e;if(null!=i){const a=n.style[r];if(a.length){const u=a.split(",");u[i]=t,t=u.join(",")}}n.style[r]=t}function hz(n,e){return n.style["animation"+e]||""}class ete{constructor(e,t,i,r,a,u,h,m){this.element=e,this.keyframes=t,this.animationName=i,this._duration=r,this._delay=a,this._finalStyles=h,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=r+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new i_e(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(i=>{"offset"!=i&&(e[i]=t?this._finalStyles[i]:XR(this.element,i))})}this.currentSnapshot=e}}class l_e extends Xd{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=wee(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class nte{constructor(){this._count=0}validateStyleProperty(e){return UR(e)}matchesElement(e,t){return GR(e,t)}containsElement(e,t){return qR(e,t)}query(e,t,i){return $R(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,i){i=i.map(h=>wee(h));let r=`@keyframes ${t} {\n`,a="";i.forEach(h=>{a=" ";const m=parseFloat(h.offset);r+=`${a}${100*m}% {\n`,a+=" ",Object.keys(h).forEach(F=>{const b=h[F];switch(F){case"offset":return;case"easing":return void(b&&(r+=`${a}animation-timing-function: ${b};\n`));default:return void(r+=`${a}${F}: ${b};\n`)}}),r+=`${a}}\n`}),r+="}\n";const u=document.createElement("style");return u.textContent=r,u}animate(e,t,i,r,a,u=[],h){const m=u.filter(K=>K instanceof ete),F={};Nee(i,r)&&m.forEach(K=>{let he=K.currentSnapshot;Object.keys(he).forEach(be=>F[be]=he[be])});const b=function(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(i=>{Object.keys(i).forEach(r=>{"offset"==r||"easing"==r||(e[r]=i[r])})}),e}(t=Tee(e,t,F));if(0==i)return new l_e(e,b);const M="gen_css_kf_"+this._count++,k=this.buildKeyframeElement(e,M,t);(function(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(k);const P=Zee(e,t),j=new ete(e,t,M,i,r,a,b,P);return j.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(k)),j}}class rte{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:XR(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class p_e{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ste().toString()),this._cssKeyframesDriver=new nte}validateStyleProperty(e){return UR(e)}matchesElement(e,t){return GR(e,t)}containsElement(e,t){return qR(e,t)}query(e,t,i){return $R(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,i,r,a,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,i,r,a,u);const b={duration:i,delay:r,fill:0==r?"both":"forwards"};a&&(b.easing=a);const M={},k=u.filter(P=>P instanceof rte);Nee(i,r)&&k.forEach(P=>{let j=P.currentSnapshot;Object.keys(j).forEach(K=>M[K]=j[K])});const A=Zee(e,t=Tee(e,t=t.map(P=>_u(P,!1)),M));return new rte(e,t,b,A)}}function ste(){return gee()&&Element.prototype.animate||{}}let g_e=(()=>{class n extends yQ{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?wQ(t):t;return ote(this._renderer,null,i,"register",[r]),new C_e(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(Ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class C_e extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new __e(this._id,e,t||{},this._renderer)}}class __e{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return ote(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function ote(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const ate="@.disabled";let F_e=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(a,u)=>{u&&u.parentNode(a)&&u.removeChild(a.parentNode,a)}}createRenderer(t,i){const a=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let b=this._rendererCache.get(a);return b||(b=new cte("",a,this.engine),this._rendererCache.set(a,b)),b}const u=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=b=>{Array.isArray(b)?b.forEach(m):this.engine.registerTrigger(u,h,t,b.name,b)};return i.data.animation.forEach(m),new y_e(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,h]=a;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(lM),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class cte{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==ate?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class y_e extends cte{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==ate?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,r,a,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let b_e=(()=>{class n extends lM{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Ce),l.LFG(WR),l.LFG(sz))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const lte=new l.OlP("AnimationModuleType"),ute=[{provide:yQ,useClass:g_e},{provide:sz,useFactory:function(){return new NCe}},{provide:lM,useClass:b_e},{provide:l.FYo,useFactory:function(n,e,t){return new F_e(n,e,t)},deps:[xr,lM,l.R0b]}],dte=[{provide:WR,useFactory:function(){return"function"==typeof ste()?new p_e:new nte}},{provide:lte,useValue:"BrowserAnimations"},...ute],hte=[{provide:WR,useClass:bee},{provide:lte,useValue:"NoopAnimations"},...ute];let D_e=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?hte:dte}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:dte,imports:[u4]}),n})(),nFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[],imports:[[]]}),n})(),iFe=(()=>{class n{constructor(t){this.chatService=t}transform(t,...i){var r,a,u;if(t&&(null===(u=null===(a=null===(r=this.chatService)||void 0===r?void 0:r.selectedGroup)||void 0===a?void 0:a.users)||void 0===u?void 0:u.length)>0){let h=this.chatService.selectedGroup.users.find(m=>(null==m?void 0:m.userId)===t);if(h)return h.profilePicture}return null}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(H1,16))},n.\u0275pipe=l.Yjl({name:"getProfilePicture",type:n,pure:!0}),n})();!function(){function n(e,t,i){this._el=e,this._ngZone=t,this.platformId=i,this.clickOutsideEnabled=!0,this.attachOutsideOnClick=!1,this.delayClickOutsideInit=!1,this.emitOnBlur=!1,this.exclude="",this.excludeBeforeClick=!1,this.clickOutsideEvents="",this.clickOutside=new l.vpe,this._nodesExcluded=[],this._events=["click"],this._initOnClickBody=this._initOnClickBody.bind(this),this._onClickBody=this._onClickBody.bind(this),this._onWindowBlur=this._onWindowBlur.bind(this)}n.prototype.ngOnInit=function(){!m1(this.platformId)||this._init()},n.prototype.ngOnDestroy=function(){!m1(this.platformId)||(this._removeClickOutsideListener(),this._removeAttachOutsideOnClickListener(),this._removeWindowBlurListener())},n.prototype.ngOnChanges=function(e){!m1(this.platformId)||(e.attachOutsideOnClick||e.exclude||e.emitOnBlur)&&this._init()},n.prototype._init=function(){""!==this.clickOutsideEvents&&(this._events=this.clickOutsideEvents.split(",").map(function(e){return e.trim()})),this._excludeCheck(),this.attachOutsideOnClick?this._initAttachOutsideOnClickListener():this._initOnClickBody(),this.emitOnBlur&&this._initWindowBlurListener()},n.prototype._initOnClickBody=function(){this.delayClickOutsideInit?setTimeout(this._initClickOutsideListener.bind(this)):this._initClickOutsideListener()},n.prototype._excludeCheck=function(){if(this.exclude)try{var e=Array.from(document.querySelectorAll(this.exclude));e&&(this._nodesExcluded=e)}catch(t){console.error("[ng-click-outside] Check your exclude selector syntax.",t)}},n.prototype._onClickBody=function(e){!this.clickOutsideEnabled||(this.excludeBeforeClick&&this._excludeCheck(),!this._el.nativeElement.contains(e.target)&&!this._shouldExclude(e.target)&&(this._emit(e),this.attachOutsideOnClick&&this._removeClickOutsideListener()))},n.prototype._onWindowBlur=function(e){var t=this;setTimeout(function(){document.hidden||t._emit(e)})},n.prototype._emit=function(e){var t=this;!this.clickOutsideEnabled||this._ngZone.run(function(){return t.clickOutside.emit(e)})},n.prototype._shouldExclude=function(e){for(var t=0,i=this._nodesExcluded;t<i.length;t++)if(i[t].contains(e))return!0;return!1},n.prototype._initClickOutsideListener=function(){var e=this;this._ngZone.runOutsideAngular(function(){e._events.forEach(function(t){return document.addEventListener(t,e._onClickBody)})})},n.prototype._removeClickOutsideListener=function(){var e=this;this._ngZone.runOutsideAngular(function(){e._events.forEach(function(t){return document.removeEventListener(t,e._onClickBody)})})},n.prototype._initAttachOutsideOnClickListener=function(){var e=this;this._ngZone.runOutsideAngular(function(){e._events.forEach(function(t){return e._el.nativeElement.addEventListener(t,e._initOnClickBody)})})},n.prototype._removeAttachOutsideOnClickListener=function(){var e=this;this._ngZone.runOutsideAngular(function(){e._events.forEach(function(t){return e._el.nativeElement.removeEventListener(t,e._initOnClickBody)})})},n.prototype._initWindowBlurListener=function(){var e=this;this._ngZone.runOutsideAngular(function(){window.addEventListener("blur",e._onWindowBlur)})},n.prototype._removeWindowBlurListener=function(){var e=this;this._ngZone.runOutsideAngular(function(){window.removeEventListener("blur",e._onWindowBlur)})},n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(l.Lbi))},n.\u0275dir=l.lG2({type:n,selectors:[["","clickOutside",""]],inputs:{clickOutsideEnabled:"clickOutsideEnabled",attachOutsideOnClick:"attachOutsideOnClick",delayClickOutsideInit:"delayClickOutsideInit",emitOnBlur:"emitOnBlur",exclude:"exclude",excludeBeforeClick:"excludeBeforeClick",clickOutsideEvents:"clickOutsideEvents"},outputs:{clickOutside:"clickOutside"},features:[l.TTD]})}();var rFe=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n}();let aFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ei]]}),n})(),pFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ei,oX,aFe]]}),n})(),mFe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[tCe]}),n.\u0275inj=l.cJS({providers:[{provide:RO,useClass:iCe,multi:!0},H1,bi,hee,iFe],imports:[[u4,D_e,yM,eme,Xme,nCe,br.hO.initializeApp(pt_firebase),mue,aue,whe,N8e,Whe.forRoot(),nFe,s9e.forRoot({img:"./assets/images/loader.gif",imgStyles:{width:"60px"},loaderStyles:{background:"rgba(255, 255, 255, 0.75)"}}),d7e,rFe,pFe,Qfe.forRoot()]]}),n})();(0,l.G48)(),v1().bootstrapModule(mFe).catch(n=>console.error(n))},3394:(it,ke,B)=>{"use strict";B.d(ke,{Z:()=>Se});var l=B(3854),se=B(3910),z=B(8026),pe=B(5422);class ae{constructor(_e,oe){this._delegate=_e,this.firebase=oe,(0,z._addComponent)(_e,new se.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(_e,oe=z._DEFAULT_ENTRY_NAME){var ge;this._delegate.checkDestroyed();const Ee=this._delegate.container.getProvider(_e);return!Ee.isInitialized()&&"EXPLICIT"===(null===(ge=Ee.getComponent())||void 0===ge?void 0:ge.instantiationMode)&&Ee.initialize(),Ee.getImmediate({identifier:oe})}_removeServiceInstance(_e,oe=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(oe)}_addComponent(_e){(0,z._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,z._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ie(){const we=function(we){const _e={},oe={__esModule:!0,initializeApp:function(xt,Tn={}){const Nt=z.initializeApp(xt,Tn);if((0,l.r3)(_e,Nt.name))return _e[Nt.name];const _t=new we(Nt,oe);return _e[Nt.name]=_t,_t},app:Ee,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function(xt){const Tn=xt.name,Nt=Tn.replace("-compat","");if(z._registerComponent(xt)&&"PUBLIC"===xt.type){const _t=(rn=Ee())=>{if("function"!=typeof rn[Nt])throw Ce.create("invalid-app-argument",{appName:Tn});return rn[Nt]()};void 0!==xt.serviceProps&&(0,l.ZB)(_t,xt.serviceProps),oe[Nt]=_t,we.prototype[Nt]=function(...rn){return this._getService.bind(this,Tn).apply(this,xt.multipleInstances?rn:[])}}return"PUBLIC"===xt.type?oe[Nt]:null},removeApp:function(xt){delete _e[xt]},useAsService:function(xt,Tn){return"serverAuth"===Tn?null:Tn},modularAPIs:z}};function Ee(xt){if(!(0,l.r3)(_e,xt=xt||z._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:xt});return _e[xt]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(_e).map(xt=>_e[xt])}}),Ee.App=we,oe}(ae);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:ie,extendNamespace:function(oe){(0,l.ZB)(we,oe)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),we}(),G=new pe.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=H;(0,z.registerVersion)("@firebase/app-compat","0.1.18",undefined)},8026:(it,ke,B)=>{"use strict";B.r(ke),B.d(ke,{FirebaseError:()=>pe.ZR,SDK_VERSION:()=>Po,_DEFAULT_ENTRY_NAME:()=>Ls,_addComponent:()=>Ps,_addOrOverwriteComponent:()=>h1,_apps:()=>Qt,_clearComponents:()=>An,_components:()=>Jt,_getProvider:()=>Fn,_registerComponent:()=>_s,_removeServiceInstance:()=>Lo,deleteApp:()=>yi,getApp:()=>Fs,getApps:()=>Te,initializeApp:()=>Zr,onLog:()=>Xt,registerVersion:()=>Qe,setLogLevel:()=>Kr});var l=B(8239),se=B(3910),z=B(5422),pe=B(3854);class ae{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(Pt=>{if(function(st){const lt=st.getComponent();return"VERSION"===(null==lt?void 0:lt.type)}(Pt)){const Vt=Pt.getImmediate();return`${Vt.library}/${Vt.version}`}return null}).filter(Pt=>Pt).join(" ")}}const Ce="@firebase/app",ie=new z.Yd("@firebase/app"),Ls="[DEFAULT]",N2={[Ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,Jt=new Map;function Ps(st,lt){try{st.container.addComponent(lt)}catch(Pt){ie.debug(`Component ${lt.name} failed to register with FirebaseApp ${st.name}`,Pt)}}function h1(st,lt){st.container.addOrOverwriteComponent(lt)}function _s(st){const lt=st.name;if(Jt.has(lt))return ie.debug(`There were multiple attempts to register component ${lt}.`),!1;Jt.set(lt,st);for(const Pt of Qt.values())Ps(Pt,st);return!0}function Fn(st,lt){return st.container.getProvider(lt)}function Lo(st,lt,Pt=Ls){Fn(st,lt).clearInstance(Pt)}function An(){Jt.clear()}const $t=new pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class In{constructor(lt,Pt,Vt){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},Pt),this._name=Pt.name,this._automaticDataCollectionEnabled=Pt.automaticDataCollectionEnabled,this._container=Vt,this.container.addComponent(new se.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}}const Po="9.6.7";function Zr(st,lt={}){"object"!=typeof lt&&(lt={name:lt});const Pt=Object.assign({name:Ls,automaticDataCollectionEnabled:!1},lt),Vt=Pt.name;if("string"!=typeof Vt||!Vt)throw $t.create("bad-app-name",{appName:String(Vt)});const Zi=Qt.get(Vt);if(Zi){if((0,pe.vZ)(st,Zi.options)&&(0,pe.vZ)(Pt,Zi.config))return Zi;throw $t.create("duplicate-app",{appName:Vt})}const tn=new se.H0(Vt);for(const ot of Jt.values())tn.addComponent(ot);const He=new In(st,Pt,tn);return Qt.set(Vt,He),He}function Fs(st=Ls){const lt=Qt.get(st);if(!lt)throw $t.create("no-app",{appName:st});return lt}function Te(){return Array.from(Qt.values())}function yi(st){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,l.Z)(function*(st){const lt=st.name;Qt.has(lt)&&(Qt.delete(lt),yield Promise.all(st.container.getProviders().map(Pt=>Pt.delete())),st.isDeleted=!0)})).apply(this,arguments)}function Qe(st,lt,Pt){var Vt;let Zi=null!==(Vt=N2[st])&&void 0!==Vt?Vt:st;Pt&&(Zi+=`-${Pt}`);const tn=Zi.match(/\s|\//),He=lt.match(/\s|\//);if(tn||He){const ot=[`Unable to register library "${Zi}" with version "${lt}":`];return tn&&ot.push(`library name "${Zi}" contains illegal characters (whitespace or "/")`),tn&&He&&ot.push("and"),He&&ot.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void ie.warn(ot.join(" "))}_s(new se.wA(`${Zi}-version`,()=>({library:Zi,version:lt}),"VERSION"))}function Xt(st,lt){if(null!==st&&"function"!=typeof st)throw $t.create("invalid-log-argument");(0,z.Am)(st,lt)}function Kr(st){(0,z.Ub)(st)}_s(new se.wA("platform-logger",lt=>new ae(lt),"PRIVATE")),Qe(Ce,"0.7.17",""),Qe(Ce,"0.7.17","esm2017"),Qe("fire-js","")},3910:(it,ke,B)=>{"use strict";B.d(ke,{wA:()=>z,H0:()=>te,zt:()=>ae});var l=B(8239),se=B(3854);class z{constructor(H,G,W){this.name=H,this.instanceFactory=G,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const pe="[DEFAULT]";class ae{constructor(H,G){this.name=H,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const G=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(G)){const W=new se.BH;if(this.instancesDeferred.set(G,W),this.isInitialized(G)||this.shouldAutoInitialize())try{const de=this.getOrInitializeService({instanceIdentifier:G});de&&W.resolve(de)}catch(de){}}return this.instancesDeferred.get(G).promise}getImmediate(H){var G;const W=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),de=null!==(G=null==H?void 0:H.optional)&&void 0!==G&&G;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(de)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(me){if(de)return null;throw me}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if("EAGER"===H.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:pe})}catch(G){}for(const[G,W]of this.instancesDeferred.entries()){const de=this.normalizeInstanceIdentifier(G);try{const me=this.getOrInitializeService({instanceIdentifier:de});W.resolve(me)}catch(me){}}}}clearInstance(H=pe){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,l.Z)(function*(){const G=Array.from(H.instances.values());yield Promise.all([...G.filter(W=>"INTERNAL"in W).map(W=>W.INTERNAL.delete()),...G.filter(W=>"_delete"in W).map(W=>W._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=pe){return this.instances.has(H)}getOptions(H=pe){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:G={}}=H,W=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(W))throw Error(`${this.name}(${W}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const de=this.getOrInitializeService({instanceIdentifier:W,options:G});for(const[me,Se]of this.instancesDeferred.entries())W===this.normalizeInstanceIdentifier(me)&&Se.resolve(de);return de}onInit(H,G){var W;const de=this.normalizeInstanceIdentifier(G),me=null!==(W=this.onInitCallbacks.get(de))&&void 0!==W?W:new Set;me.add(H),this.onInitCallbacks.set(de,me);const Se=this.instances.get(de);return Se&&H(Se,de),()=>{me.delete(H)}}invokeOnInitCallbacks(H,G){const W=this.onInitCallbacks.get(G);if(W)for(const de of W)try{de(H,G)}catch(me){}}getOrInitializeService({instanceIdentifier:H,options:G={}}){let W=this.instances.get(H);if(!W&&this.component&&(W=this.component.instanceFactory(this.container,{instanceIdentifier:(ie=H,ie===pe?void 0:ie),options:G}),this.instances.set(H,W),this.instancesOptions.set(H,G),this.invokeOnInitCallbacks(W,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,W)}catch(de){}var ie;return W||null}normalizeInstanceIdentifier(H=pe){return this.component?this.component.multipleInstances?H:pe:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const G=this.getProvider(H.name);if(G.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);G.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const G=new ae(H,this);return this.providers.set(H,G),G}getProviders(){return Array.from(this.providers.values())}}},5422:(it,ke,B)=>{"use strict";B.d(ke,{in:()=>se,Yd:()=>Ce,Ub:()=>te,Am:()=>ie});const l=[];var se=(()=>{return(H=se||(se={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",se;var H})();const z={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},pe=se.INFO,ae={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ee=(H,G,...W)=>{if(G<H.logLevel)return;const de=(new Date).toISOString(),me=ae[G];if(!me)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[me](`[${de}]  ${H.name}:`,...W)};class Ce{constructor(G){this.name=G,this._logLevel=pe,this._logHandler=ee,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in se))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?z[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...G),this._logHandler(this,se.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...G),this._logHandler(this,se.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,se.INFO,...G),this._logHandler(this,se.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,se.WARN,...G),this._logHandler(this,se.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...G),this._logHandler(this,se.ERROR,...G)}}function te(H){l.forEach(G=>{G.setLogLevel(H)})}function ie(H,G){for(const W of l){let de=null;G&&G.level&&(de=z[G.level]),W.userLogHandler=null===H?null:(me,Se,...we)=>{const _e=we.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(ge){return null}}).filter(oe=>oe).join(" ");Se>=(null!=de?de:me.logLevel)&&H({level:se[Se].toLowerCase(),message:_e,args:we,type:me.name})}}}},8239:(it,ke,B)=>{"use strict";function l(z,pe,ae,ee,Ce,te,ie){try{var H=z[te](ie),G=H.value}catch(W){return void ae(W)}H.done?pe(G):Promise.resolve(G).then(ee,Ce)}function se(z){return function(){var pe=this,ae=arguments;return new Promise(function(ee,Ce){var te=z.apply(pe,ae);function ie(G){l(te,ee,Ce,ie,H,"next",G)}function H(G){l(te,ee,Ce,ie,H,"throw",G)}ie(void 0)})}}B.d(ke,{Z:()=>se})}},it=>{it(it.s=434)}]);